"use strict";(()=>{var dv=Object.create;var ip=Object.defineProperty;var fv=Object.getOwnPropertyDescriptor;var uv=Object.getOwnPropertyNames;var Iv=Object.getPrototypeOf,pv=Object.prototype.hasOwnProperty;var x=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var mv=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of uv(t))!pv.call(e,o)&&o!==r&&ip(e,o,{get:()=>t[o],enumerable:!(n=fv(t,o))||n.enumerable});return e};var V=(e,t,r)=>(r=e!=null?dv(Iv(e)):{},mv(t||!e||!e.__esModule?ip(r,"default",{value:e,enumerable:!0}):r,e));var Je=x((Kl,sp)=>{"use strict";var Ri=function(e){return e&&e.Math===Math&&e};sp.exports=Ri(typeof globalThis=="object"&&globalThis)||Ri(typeof window=="object"&&window)||Ri(typeof self=="object"&&self)||Ri(typeof global=="object"&&global)||Ri(typeof Kl=="object"&&Kl)||function(){return this}()||Function("return this")()});var pt=x((pY,ap)=>{"use strict";ap.exports=function(e){try{return!!e()}catch{return!0}}});var Yt=x((mY,Ap)=>{"use strict";var hv=pt();Ap.exports=!hv(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!==7})});var js=x((hY,cp)=>{"use strict";var Cv=pt();cp.exports=!Cv(function(){var e=function(){}.bind();return typeof e!="function"||e.hasOwnProperty("prototype")})});var Nr=x((CY,lp)=>{"use strict";var Bv=js(),Xs=Function.prototype.call;lp.exports=Bv?Xs.bind(Xs):function(){return Xs.apply(Xs,arguments)}});var up=x(fp=>{"use strict";var gp={}.propertyIsEnumerable,dp=Object.getOwnPropertyDescriptor,Ev=dp&&!gp.call({1:2},1);fp.f=Ev?function(t){var r=dp(this,t);return!!r&&r.enumerable}:gp});var Ti=x((EY,Ip)=>{"use strict";Ip.exports=function(e,t){return{enumerable:!(e&1),configurable:!(e&2),writable:!(e&4),value:t}}});var $e=x((yY,hp)=>{"use strict";var pp=js(),mp=Function.prototype,Jl=mp.call,yv=pp&&mp.bind.bind(Jl,Jl);hp.exports=pp?yv:function(e){return function(){return Jl.apply(e,arguments)}}});var Ni=x((QY,Bp)=>{"use strict";var Cp=$e(),Qv=Cp({}.toString),wv=Cp("".slice);Bp.exports=function(e){return wv(Qv(e),8,-1)}});var yp=x((wY,Ep)=>{"use strict";var Sv=$e(),xv=pt(),bv=Ni(),Vl=Object,kv=Sv("".split);Ep.exports=xv(function(){return!Vl("z").propertyIsEnumerable(0)})?function(e){return bv(e)==="String"?kv(e,""):Vl(e)}:Vl});var Mi=x((SY,Qp)=>{"use strict";Qp.exports=function(e){return e==null}});var zl=x((xY,wp)=>{"use strict";var Dv=Mi(),_v=TypeError;wp.exports=function(e){if(Dv(e))throw new _v("Can't call method on "+e);return e}});var Mr=x((bY,Sp)=>{"use strict";var Fv=yp(),vv=zl();Sp.exports=function(e){return Fv(vv(e))}});var Qt=x((kY,xp)=>{"use strict";var Yl=typeof document=="object"&&document.all;xp.exports=typeof Yl>"u"&&Yl!==void 0?function(e){return typeof e=="function"||e===Yl}:function(e){return typeof e=="function"}});var On=x((DY,bp)=>{"use strict";var Rv=Qt();bp.exports=function(e){return typeof e=="object"?e!==null:Rv(e)}});var an=x((_Y,kp)=>{"use strict";var Wl=Je(),Tv=Qt(),Nv=function(e){return Tv(e)?e:void 0};kp.exports=function(e,t){return arguments.length<2?Nv(Wl[e]):Wl[e]&&Wl[e][t]}});var Zs=x((FY,Dp)=>{"use strict";var Mv=$e();Dp.exports=Mv({}.isPrototypeOf)});var jl=x((vY,vp)=>{"use strict";var Uv=Je(),_p=Uv.navigator,Fp=_p&&_p.userAgent;vp.exports=Fp?String(Fp):""});var Zl=x((RY,Pp)=>{"use strict";var Up=Je(),Xl=jl(),Rp=Up.process,Tp=Up.Deno,Np=Rp&&Rp.versions||Tp&&Tp.version,Mp=Np&&Np.v8,Wt,$s;Mp&&(Wt=Mp.split("."),$s=Wt[0]>0&&Wt[0]<4?1:+(Wt[0]+Wt[1]));!$s&&Xl&&(Wt=Xl.match(/Edge\/(\d+)/),(!Wt||Wt[1]>=74)&&(Wt=Xl.match(/Chrome\/(\d+)/),Wt&&($s=+Wt[1])));Pp.exports=$s});var $l=x((TY,Gp)=>{"use strict";var Op=Zl(),Pv=pt(),Ov=Je(),Gv=Ov.String;Gp.exports=!!Object.getOwnPropertySymbols&&!Pv(function(){var e=Symbol("symbol detection");return!Gv(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&Op&&Op<41})});var eg=x((NY,qp)=>{"use strict";var qv=$l();qp.exports=qv&&!Symbol.sham&&typeof Symbol.iterator=="symbol"});var ea=x((MY,Hp)=>{"use strict";var Hv=an(),Lv=Qt(),Kv=Zs(),Jv=eg(),Vv=Object;Hp.exports=Jv?function(e){return typeof e=="symbol"}:function(e){var t=Hv("Symbol");return Lv(t)&&Kv(t.prototype,Vv(e))}});var ta=x((UY,Lp)=>{"use strict";var zv=String;Lp.exports=function(e){try{return zv(e)}catch{return"Object"}}});var po=x((PY,Kp)=>{"use strict";var Yv=Qt(),Wv=ta(),jv=TypeError;Kp.exports=function(e){if(Yv(e))return e;throw new jv(Wv(e)+" is not a function")}});var ra=x((OY,Jp)=>{"use strict";var Xv=po(),Zv=Mi();Jp.exports=function(e,t){var r=e[t];return Zv(r)?void 0:Xv(r)}});var zp=x((GY,Vp)=>{"use strict";var tg=Nr(),rg=Qt(),ng=On(),$v=TypeError;Vp.exports=function(e,t){var r,n;if(t==="string"&&rg(r=e.toString)&&!ng(n=tg(r,e))||rg(r=e.valueOf)&&!ng(n=tg(r,e))||t!=="string"&&rg(r=e.toString)&&!ng(n=tg(r,e)))return n;throw new $v("Can't convert object to primitive value")}});var na=x((qY,Yp)=>{"use strict";Yp.exports=!1});var oa=x((HY,jp)=>{"use strict";var Wp=Je(),eR=Object.defineProperty;jp.exports=function(e,t){try{eR(Wp,e,{value:t,configurable:!0,writable:!0})}catch{Wp[e]=t}return t}});var ia=x((LY,$p)=>{"use strict";var tR=na(),rR=Je(),nR=oa(),Xp="__core-js_shared__",Zp=$p.exports=rR[Xp]||nR(Xp,{});(Zp.versions||(Zp.versions=[])).push({version:"3.42.0",mode:tR?"pure":"global",copyright:"\xA9 2014-2025 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.42.0/LICENSE",source:"https://github.com/zloirock/core-js"})});var og=x((KY,tm)=>{"use strict";var em=ia();tm.exports=function(e,t){return em[e]||(em[e]=t||{})}});var ig=x((JY,rm)=>{"use strict";var oR=zl(),iR=Object;rm.exports=function(e){return iR(oR(e))}});var fr=x((VY,nm)=>{"use strict";var sR=$e(),aR=ig(),AR=sR({}.hasOwnProperty);nm.exports=Object.hasOwn||function(t,r){return AR(aR(t),r)}});var sa=x((zY,om)=>{"use strict";var cR=$e(),lR=0,gR=Math.random(),dR=cR(1 .toString);om.exports=function(e){return"Symbol("+(e===void 0?"":e)+")_"+dR(++lR+gR,36)}});var An=x((YY,sm)=>{"use strict";var fR=Je(),uR=og(),im=fr(),IR=sa(),pR=$l(),mR=eg(),mo=fR.Symbol,sg=uR("wks"),hR=mR?mo.for||mo:mo&&mo.withoutSetter||IR;sm.exports=function(e){return im(sg,e)||(sg[e]=pR&&im(mo,e)?mo[e]:hR("Symbol."+e)),sg[e]}});var lm=x((WY,cm)=>{"use strict";var CR=Nr(),am=On(),Am=ea(),BR=ra(),ER=zp(),yR=An(),QR=TypeError,wR=yR("toPrimitive");cm.exports=function(e,t){if(!am(e)||Am(e))return e;var r=BR(e,wR),n;if(r){if(t===void 0&&(t="default"),n=CR(r,e,t),!am(n)||Am(n))return n;throw new QR("Can't convert object to primitive value")}return t===void 0&&(t="number"),ER(e,t)}});var ag=x((jY,gm)=>{"use strict";var SR=lm(),xR=ea();gm.exports=function(e){var t=SR(e,"string");return xR(t)?t:t+""}});var cg=x((XY,fm)=>{"use strict";var bR=Je(),dm=On(),Ag=bR.document,kR=dm(Ag)&&dm(Ag.createElement);fm.exports=function(e){return kR?Ag.createElement(e):{}}});var lg=x((ZY,um)=>{"use strict";var DR=Yt(),_R=pt(),FR=cg();um.exports=!DR&&!_R(function(){return Object.defineProperty(FR("div"),"a",{get:function(){return 7}}).a!==7})});var gg=x(pm=>{"use strict";var vR=Yt(),RR=Nr(),TR=up(),NR=Ti(),MR=Mr(),UR=ag(),PR=fr(),OR=lg(),Im=Object.getOwnPropertyDescriptor;pm.f=vR?Im:function(t,r){if(t=MR(t),r=UR(r),OR)try{return Im(t,r)}catch{}if(PR(t,r))return NR(!RR(TR.f,t,r),t[r])}});var dg=x((eW,mm)=>{"use strict";var GR=Yt(),qR=pt();mm.exports=GR&&qR(function(){return Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype!==42})});var ur=x((tW,hm)=>{"use strict";var HR=On(),LR=String,KR=TypeError;hm.exports=function(e){if(HR(e))return e;throw new KR(LR(e)+" is not an object")}});var Gn=x(Bm=>{"use strict";var JR=Yt(),VR=lg(),zR=dg(),aa=ur(),Cm=ag(),YR=TypeError,fg=Object.defineProperty,WR=Object.getOwnPropertyDescriptor,ug="enumerable",Ig="configurable",pg="writable";Bm.f=JR?zR?function(t,r,n){if(aa(t),r=Cm(r),aa(n),typeof t=="function"&&r==="prototype"&&"value"in n&&pg in n&&!n[pg]){var o=WR(t,r);o&&o[pg]&&(t[r]=n.value,n={configurable:Ig in n?n[Ig]:o[Ig],enumerable:ug in n?n[ug]:o[ug],writable:!1})}return fg(t,r,n)}:fg:function(t,r,n){if(aa(t),r=Cm(r),aa(n),VR)try{return fg(t,r,n)}catch{}if("get"in n||"set"in n)throw new YR("Accessors not supported");return"value"in n&&(t[r]=n.value),t}});var Aa=x((nW,Em)=>{"use strict";var jR=Yt(),XR=Gn(),ZR=Ti();Em.exports=jR?function(e,t,r){return XR.f(e,t,ZR(1,r))}:function(e,t,r){return e[t]=r,e}});var wm=x((oW,Qm)=>{"use strict";var mg=Yt(),$R=fr(),ym=Function.prototype,eT=mg&&Object.getOwnPropertyDescriptor,hg=$R(ym,"name"),tT=hg&&function(){}.name==="something",rT=hg&&(!mg||mg&&eT(ym,"name").configurable);Qm.exports={EXISTS:hg,PROPER:tT,CONFIGURABLE:rT}});var Bg=x((iW,Sm)=>{"use strict";var nT=$e(),oT=Qt(),Cg=ia(),iT=nT(Function.toString);oT(Cg.inspectSource)||(Cg.inspectSource=function(e){return iT(e)});Sm.exports=Cg.inspectSource});var km=x((sW,bm)=>{"use strict";var sT=Je(),aT=Qt(),xm=sT.WeakMap;bm.exports=aT(xm)&&/native code/.test(String(xm))});var Eg=x((aW,_m)=>{"use strict";var AT=og(),cT=sa(),Dm=AT("keys");_m.exports=function(e){return Dm[e]||(Dm[e]=cT(e))}});var ca=x((AW,Fm)=>{"use strict";Fm.exports={}});var Nm=x((cW,Tm)=>{"use strict";var lT=km(),Rm=Je(),gT=On(),dT=Aa(),yg=fr(),Qg=ia(),fT=Eg(),uT=ca(),vm="Object already initialized",wg=Rm.TypeError,IT=Rm.WeakMap,la,Ui,ga,pT=function(e){return ga(e)?Ui(e):la(e,{})},mT=function(e){return function(t){var r;if(!gT(t)||(r=Ui(t)).type!==e)throw new wg("Incompatible receiver, "+e+" required");return r}};lT||Qg.state?(jt=Qg.state||(Qg.state=new IT),jt.get=jt.get,jt.has=jt.has,jt.set=jt.set,la=function(e,t){if(jt.has(e))throw new wg(vm);return t.facade=e,jt.set(e,t),t},Ui=function(e){return jt.get(e)||{}},ga=function(e){return jt.has(e)}):(qn=fT("state"),uT[qn]=!0,la=function(e,t){if(yg(e,qn))throw new wg(vm);return t.facade=e,dT(e,qn,t),t},Ui=function(e){return yg(e,qn)?e[qn]:{}},ga=function(e){return yg(e,qn)});var jt,qn;Tm.exports={set:la,get:Ui,has:ga,enforce:pT,getterFor:mT}});var Om=x((lW,Pm)=>{"use strict";var xg=$e(),hT=pt(),CT=Qt(),da=fr(),Sg=Yt(),BT=wm().CONFIGURABLE,ET=Bg(),Um=Nm(),yT=Um.enforce,QT=Um.get,Mm=String,fa=Object.defineProperty,wT=xg("".slice),ST=xg("".replace),xT=xg([].join),bT=Sg&&!hT(function(){return fa(function(){},"length",{value:8}).length!==8}),kT=String(String).split("String"),DT=Pm.exports=function(e,t,r){wT(Mm(t),0,7)==="Symbol("&&(t="["+ST(Mm(t),/^Symbol\(([^)]*)\).*$/,"$1")+"]"),r&&r.getter&&(t="get "+t),r&&r.setter&&(t="set "+t),(!da(e,"name")||BT&&e.name!==t)&&(Sg?fa(e,"name",{value:t,configurable:!0}):e.name=t),bT&&r&&da(r,"arity")&&e.length!==r.arity&&fa(e,"length",{value:r.arity});try{r&&da(r,"constructor")&&r.constructor?Sg&&fa(e,"prototype",{writable:!1}):e.prototype&&(e.prototype=void 0)}catch{}var n=yT(e);return da(n,"source")||(n.source=xT(kT,typeof t=="string"?t:"")),e};Function.prototype.toString=DT(function(){return CT(this)&&QT(this).source||ET(this)},"toString")});var qm=x((gW,Gm)=>{"use strict";var _T=Qt(),FT=Gn(),vT=Om(),RT=oa();Gm.exports=function(e,t,r,n){n||(n={});var o=n.enumerable,i=n.name!==void 0?n.name:t;if(_T(r)&&vT(r,i,n),n.global)o?e[t]=r:RT(t,r);else{try{n.unsafe?e[t]&&(o=!0):delete e[t]}catch{}o?e[t]=r:FT.f(e,t,{value:r,enumerable:!1,configurable:!n.nonConfigurable,writable:!n.nonWritable})}return e}});var Lm=x((dW,Hm)=>{"use strict";var TT=Math.ceil,NT=Math.floor;Hm.exports=Math.trunc||function(t){var r=+t;return(r>0?NT:TT)(r)}});var ho=x((fW,Km)=>{"use strict";var MT=Lm();Km.exports=function(e){var t=+e;return t!==t||t===0?0:MT(t)}});var bg=x((uW,Jm)=>{"use strict";var UT=ho(),PT=Math.max,OT=Math.min;Jm.exports=function(e,t){var r=UT(e);return r<0?PT(r+t,0):OT(r,t)}});var zm=x((IW,Vm)=>{"use strict";var GT=ho(),qT=Math.min;Vm.exports=function(e){var t=GT(e);return t>0?qT(t,9007199254740991):0}});var Ur=x((pW,Ym)=>{"use strict";var HT=zm();Ym.exports=function(e){return HT(e.length)}});var Xm=x((mW,jm)=>{"use strict";var LT=Mr(),KT=bg(),JT=Ur(),Wm=function(e){return function(t,r,n){var o=LT(t),i=JT(o);if(i===0)return!e&&-1;var s=KT(n,i),a;if(e&&r!==r){for(;i>s;)if(a=o[s++],a!==a)return!0}else for(;i>s;s++)if((e||s in o)&&o[s]===r)return e||s||0;return!e&&-1}};jm.exports={includes:Wm(!0),indexOf:Wm(!1)}});var Dg=x((hW,$m)=>{"use strict";var VT=$e(),kg=fr(),zT=Mr(),YT=Xm().indexOf,WT=ca(),Zm=VT([].push);$m.exports=function(e,t){var r=zT(e),n=0,o=[],i;for(i in r)!kg(WT,i)&&kg(r,i)&&Zm(o,i);for(;t.length>n;)kg(r,i=t[n++])&&(~YT(o,i)||Zm(o,i));return o}});var ua=x((CW,eh)=>{"use strict";eh.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]});var rh=x(th=>{"use strict";var jT=Dg(),XT=ua(),ZT=XT.concat("length","prototype");th.f=Object.getOwnPropertyNames||function(t){return jT(t,ZT)}});var oh=x(nh=>{"use strict";nh.f=Object.getOwnPropertySymbols});var sh=x((yW,ih)=>{"use strict";var $T=an(),eN=$e(),tN=rh(),rN=oh(),nN=ur(),oN=eN([].concat);ih.exports=$T("Reflect","ownKeys")||function(t){var r=tN.f(nN(t)),n=rN.f;return n?oN(r,n(t)):r}});var ch=x((QW,Ah)=>{"use strict";var ah=fr(),iN=sh(),sN=gg(),aN=Gn();Ah.exports=function(e,t,r){for(var n=iN(t),o=aN.f,i=sN.f,s=0;s<n.length;s++){var a=n[s];!ah(e,a)&&!(r&&ah(r,a))&&o(e,a,i(t,a))}}});var gh=x((wW,lh)=>{"use strict";var AN=pt(),cN=Qt(),lN=/#|\.prototype\./,Pi=function(e,t){var r=dN[gN(e)];return r===uN?!0:r===fN?!1:cN(t)?AN(t):!!t},gN=Pi.normalize=function(e){return String(e).replace(lN,".").toLowerCase()},dN=Pi.data={},fN=Pi.NATIVE="N",uN=Pi.POLYFILL="P";lh.exports=Pi});var Ir=x((SW,dh)=>{"use strict";var Ia=Je(),IN=gg().f,pN=Aa(),mN=qm(),hN=oa(),CN=ch(),BN=gh();dh.exports=function(e,t){var r=e.target,n=e.global,o=e.stat,i,s,a,A,c,l;if(n?s=Ia:o?s=Ia[r]||hN(r,{}):s=Ia[r]&&Ia[r].prototype,s)for(a in t){if(c=t[a],e.dontCallGetSet?(l=IN(s,a),A=l&&l.value):A=s[a],i=BN(n?a:r+(o?".":"#")+a,e.forced),!i&&A!==void 0){if(typeof c==typeof A)continue;CN(c,A)}(e.sham||A&&A.sham)&&pN(c,"sham",!0),mN(s,a,c,e)}}});var uh=x((xW,fh)=>{"use strict";var EN=Dg(),yN=ua();fh.exports=Object.keys||function(t){return EN(t,yN)}});var ph=x(Ih=>{"use strict";var QN=Yt(),wN=dg(),SN=Gn(),xN=ur(),bN=Mr(),kN=uh();Ih.f=QN&&!wN?Object.defineProperties:function(t,r){xN(t);for(var n=bN(r),o=kN(r),i=o.length,s=0,a;i>s;)SN.f(t,a=o[s++],n[a]);return t}});var hh=x((kW,mh)=>{"use strict";var DN=an();mh.exports=DN("document","documentElement")});var xh=x((DW,Sh)=>{"use strict";var _N=ur(),FN=ph(),Ch=ua(),vN=ca(),RN=hh(),TN=cg(),NN=Eg(),Bh=">",Eh="<",Fg="prototype",vg="script",Qh=NN("IE_PROTO"),_g=function(){},wh=function(e){return Eh+vg+Bh+e+Eh+"/"+vg+Bh},yh=function(e){e.write(wh("")),e.close();var t=e.parentWindow.Object;return e=null,t},MN=function(){var e=TN("iframe"),t="java"+vg+":",r;return e.style.display="none",RN.appendChild(e),e.src=String(t),r=e.contentWindow.document,r.open(),r.write(wh("document.F=Object")),r.close(),r.F},pa,ma=function(){try{pa=new ActiveXObject("htmlfile")}catch{}ma=typeof document<"u"?document.domain&&pa?yh(pa):MN():yh(pa);for(var e=Ch.length;e--;)delete ma[Fg][Ch[e]];return ma()};vN[Qh]=!0;Sh.exports=Object.create||function(t,r){var n;return t!==null?(_g[Fg]=_N(t),n=new _g,_g[Fg]=null,n[Qh]=t):n=ma(),r===void 0?n:FN.f(n,r)}});var Oi=x((_W,bh)=>{"use strict";var UN=An(),PN=xh(),ON=Gn().f,Rg=UN("unscopables"),Tg=Array.prototype;Tg[Rg]===void 0&&ON(Tg,Rg,{configurable:!0,value:PN(null)});bh.exports=function(e){Tg[Rg][e]=!0}});var kh=x(()=>{"use strict";var GN=Ir(),qN=ig(),HN=Ur(),LN=ho(),KN=Oi();GN({target:"Array",proto:!0},{at:function(t){var r=qN(this),n=HN(r),o=LN(t),i=o>=0?o:n+o;return i<0||i>=n?void 0:r[i]}});KN("at")});var _h=x((RW,Dh)=>{"use strict";var JN=Ur();Dh.exports=function(e,t){for(var r=JN(e),n=new t(r),o=0;o<r;o++)n[o]=e[r-o-1];return n}});var Fh=x(()=>{"use strict";var VN=Ir(),zN=_h(),YN=Mr(),WN=Oi(),jN=Array;VN({target:"Array",proto:!0},{toReversed:function(){return zN(YN(this),jN)}});WN("toReversed")});var Rh=x((MW,vh)=>{"use strict";var XN=Ur();vh.exports=function(e,t,r){for(var n=0,o=arguments.length>2?r:XN(t),i=new e(o);o>n;)i[n]=t[n++];return i}});var Nh=x((UW,Th)=>{"use strict";var ZN=Je();Th.exports=function(e,t){var r=ZN[e],n=r&&r.prototype;return n&&n[t]}});var Mh=x(()=>{"use strict";var $N=Ir(),eM=$e(),tM=po(),rM=Mr(),nM=Rh(),oM=Nh(),iM=Oi(),sM=Array,aM=eM(oM("Array","sort"));$N({target:"Array",proto:!0},{toSorted:function(t){t!==void 0&&tM(t);var r=rM(this),n=nM(sM,r);return aM(n,t)}});iM("toSorted")});var Ph=x((GW,Uh)=>{"use strict";var AM=TypeError,cM=9007199254740991;Uh.exports=function(e){if(e>cM)throw AM("Maximum allowed index exceeded");return e}});var Oh=x(()=>{"use strict";var lM=Ir(),gM=Oi(),dM=Ph(),fM=Ur(),uM=bg(),IM=Mr(),pM=ho(),mM=Array,hM=Math.max,CM=Math.min;lM({target:"Array",proto:!0},{toSpliced:function(t,r){var n=IM(this),o=fM(n),i=uM(t,o),s=arguments.length,a=0,A,c,l,g;for(s===0?A=c=0:s===1?(A=0,c=o-i):(A=s-2,c=CM(hM(pM(r),0),o-i)),l=dM(o+A-c),g=mM(l);a<i;a++)g[a]=n[a];for(;a<i+A;a++)g[a]=arguments[a-i+2];for(;a<l;a++)g[a]=n[a+c-A];return g}});gM("toSpliced")});var qh=x((LW,Gh)=>{"use strict";var BM=Ur(),EM=ho(),yM=RangeError;Gh.exports=function(e,t,r,n){var o=BM(e),i=EM(r),s=i<0?o+i:i;if(s>=o||s<0)throw new yM("Incorrect index");for(var a=new t(o),A=0;A<o;A++)a[A]=A===s?n:e[A];return a}});var Hh=x(()=>{"use strict";var QM=Ir(),wM=qh(),SM=Mr(),xM=Array;QM({target:"Array",proto:!0},{with:function(e,t){return wM(SM(this),xM,e,t)}})});var Jh=x((VW,Kh)=>{"use strict";var Lh=po(),bM=TypeError,kM=function(e){var t,r;this.promise=new e(function(n,o){if(t!==void 0||r!==void 0)throw new bM("Bad Promise constructor");t=n,r=o}),this.resolve=Lh(t),this.reject=Lh(r)};Kh.exports.f=function(e){return new kM(e)}});var Vh=x(()=>{"use strict";var DM=Ir(),_M=Jh();DM({target:"Promise",stat:!0},{withResolvers:function(){var t=_M.f(this);return{promise:t.promise,resolve:t.resolve,reject:t.reject}}})});var Wh=x((WW,Yh)=>{"use strict";var FM=An(),vM=FM("toStringTag"),zh={};zh[vM]="z";Yh.exports=String(zh)==="[object z]"});var Gi=x((jW,jh)=>{"use strict";var RM=Wh(),TM=Qt(),ha=Ni(),NM=An(),MM=NM("toStringTag"),UM=Object,PM=ha(function(){return arguments}())==="Arguments",OM=function(e,t){try{return e[t]}catch{}};jh.exports=RM?ha:function(e){var t,r,n;return e===void 0?"Undefined":e===null?"Null":typeof(r=OM(t=UM(e),MM))=="string"?r:PM?ha(t):(n=ha(t))==="Object"&&TM(t.callee)?"Arguments":n}});var rC=x((XW,tC)=>{"use strict";var GM=$e(),qM=pt(),Xh=Qt(),HM=Gi(),LM=an(),KM=Bg(),Zh=function(){},$h=LM("Reflect","construct"),Ng=/^\s*(?:class|function)\b/,JM=GM(Ng.exec),VM=!Ng.test(Zh),qi=function(t){if(!Xh(t))return!1;try{return $h(Zh,[],t),!0}catch{return!1}},eC=function(t){if(!Xh(t))return!1;switch(HM(t)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return VM||!!JM(Ng,KM(t))}catch{return!0}};eC.sham=!0;tC.exports=!$h||qM(function(){var e;return qi(qi.call)||!qi(Object)||!qi(function(){e=!0})||e})?eC:qi});var oC=x((ZW,nC)=>{"use strict";var zM=Ni(),YM=$e();nC.exports=function(e){if(zM(e)==="Function")return YM(e)}});var aC=x(($W,sC)=>{"use strict";var iC=oC(),WM=po(),jM=js(),XM=iC(iC.bind);sC.exports=function(e,t){return WM(e),t===void 0?e:jM?XM(e,t):function(){return e.apply(t,arguments)}}});var Mg=x((ej,AC)=>{"use strict";AC.exports={}});var lC=x((tj,cC)=>{"use strict";var ZM=An(),$M=Mg(),e3=ZM("iterator"),t3=Array.prototype;cC.exports=function(e){return e!==void 0&&($M.Array===e||t3[e3]===e)}});var Ug=x((rj,dC)=>{"use strict";var r3=Gi(),gC=ra(),n3=Mi(),o3=Mg(),i3=An(),s3=i3("iterator");dC.exports=function(e){if(!n3(e))return gC(e,s3)||gC(e,"@@iterator")||o3[r3(e)]}});var uC=x((nj,fC)=>{"use strict";var a3=Nr(),A3=po(),c3=ur(),l3=ta(),g3=Ug(),d3=TypeError;fC.exports=function(e,t){var r=arguments.length<2?g3(e):t;if(A3(r))return c3(a3(r,e));throw new d3(l3(e)+" is not iterable")}});var mC=x((oj,pC)=>{"use strict";var f3=Nr(),IC=ur(),u3=ra();pC.exports=function(e,t,r){var n,o;IC(e);try{if(n=u3(e,"return"),!n){if(t==="throw")throw r;return r}n=f3(n,e)}catch(i){o=!0,n=i}if(t==="throw")throw r;if(o)throw n;return IC(n),r}});var yC=x((ij,EC)=>{"use strict";var I3=aC(),p3=Nr(),m3=ur(),h3=ta(),C3=lC(),B3=Ur(),hC=Zs(),E3=uC(),y3=Ug(),CC=mC(),Q3=TypeError,Ca=function(e,t){this.stopped=e,this.result=t},BC=Ca.prototype;EC.exports=function(e,t,r){var n=r&&r.that,o=!!(r&&r.AS_ENTRIES),i=!!(r&&r.IS_RECORD),s=!!(r&&r.IS_ITERATOR),a=!!(r&&r.INTERRUPTED),A=I3(t,n),c,l,g,d,f,u,m,C=function(Q){return c&&CC(c,"normal",Q),new Ca(!0,Q)},p=function(Q){return o?(m3(Q),a?A(Q[0],Q[1],C):A(Q[0],Q[1])):a?A(Q,C):A(Q)};if(i)c=e.iterator;else if(s)c=e;else{if(l=y3(e),!l)throw new Q3(h3(e)+" is not iterable");if(C3(l)){for(g=0,d=B3(e);d>g;g++)if(f=p(e[g]),f&&hC(BC,f))return f;return new Ca(!1)}c=E3(e,l)}for(u=i?e.next:c.next;!(m=p3(u,c)).done;){try{f=p(m.value)}catch(Q){CC(c,"throw",Q)}if(typeof f=="object"&&f&&hC(BC,f))return f}return new Ca(!1)}});var wC=x((sj,QC)=>{"use strict";var w3=Yt(),S3=Gn(),x3=Ti();QC.exports=function(e,t,r){w3?S3.f(e,t,x3(0,r)):e[t]=r}});var Ba=x((aj,SC)=>{"use strict";var b3=TypeError;SC.exports=function(e,t){if(e<t)throw new b3("Not enough arguments");return e}});var bC=x((Aj,xC)=>{"use strict";var k3=ur();xC.exports=function(){var e=k3(this),t="";return e.hasIndices&&(t+="d"),e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.unicodeSets&&(t+="v"),e.sticky&&(t+="y"),t}});var _C=x((cj,DC)=>{"use strict";var D3=Nr(),_3=fr(),F3=Zs(),v3=bC(),kC=RegExp.prototype;DC.exports=function(e){var t=e.flags;return t===void 0&&!("flags"in kC)&&!_3(e,"flags")&&F3(kC,e)?D3(v3,e):t}});var vC=x((lj,FC)=>{"use strict";var Ea=$e(),Hi=Map.prototype;FC.exports={Map,set:Ea(Hi.set),get:Ea(Hi.get),has:Ea(Hi.has),remove:Ea(Hi.delete),proto:Hi}});var Og=x((gj,RC)=>{"use strict";var Pg=$e(),ya=Set.prototype;RC.exports={Set,add:Pg(ya.add),has:Pg(ya.has),remove:Pg(ya.delete),proto:ya}});var NC=x((dj,TC)=>{"use strict";var R3=Nr();TC.exports=function(e,t,r){for(var n=r?e:e.iterator,o=e.next,i,s;!(i=R3(o,n)).done;)if(s=t(i.value),s!==void 0)return s}});var qC=x((fj,GC)=>{"use strict";var MC=$e(),T3=NC(),UC=Og(),N3=UC.Set,PC=UC.proto,M3=MC(PC.forEach),OC=MC(PC.keys),U3=OC(new N3).next;GC.exports=function(e,t,r){return r?T3({iterator:OC(e),next:U3},t):M3(e,t)}});var Gg=x((uj,HC)=>{"use strict";var Li=Je(),P3=jl(),O3=Ni(),Qa=function(e){return P3.slice(0,e.length)===e};HC.exports=function(){return Qa("Bun/")?"BUN":Qa("Cloudflare-Workers")?"CLOUDFLARE":Qa("Deno/")?"DENO":Qa("Node.js/")?"NODE":Li.Bun&&typeof Bun.version=="string"?"BUN":Li.Deno&&typeof Deno.version=="object"?"DENO":O3(Li.process)==="process"?"NODE":Li.window&&Li.document?"BROWSER":"REST"}()});var KC=x((Ij,LC)=>{"use strict";var G3=Gg();LC.exports=G3==="NODE"});var VC=x((pj,JC)=>{"use strict";var q3=Je(),H3=KC();JC.exports=function(e){if(H3){try{return q3.process.getBuiltinModule(e)}catch{}try{return Function('return require("'+e+'")')()}catch{}}}});var Lg=x((mj,YC)=>{"use strict";var L3=Je(),K3=pt(),qg=Zl(),Hg=Gg(),zC=L3.structuredClone;YC.exports=!!zC&&!K3(function(){if(Hg==="DENO"&&qg>92||Hg==="NODE"&&qg>94||Hg==="BROWSER"&&qg>97)return!1;var e=new ArrayBuffer(8),t=zC(e,{transfer:[e]});return e.byteLength!==0||t.byteLength!==8})});var ZC=x((hj,XC)=>{"use strict";var zg=Je(),J3=VC(),V3=Lg(),z3=zg.structuredClone,WC=zg.ArrayBuffer,wa=zg.MessageChannel,Vg=!1,Kg,jC,Sa,Jg;if(V3)Vg=function(e){z3(e,{transfer:[e]})};else if(WC)try{wa||(Kg=J3("worker_threads"),Kg&&(wa=Kg.MessageChannel)),wa&&(jC=new wa,Sa=new WC(2),Jg=function(e){jC.port1.postMessage(null,[e])},Sa.byteLength===2&&(Jg(Sa),Sa.byteLength===0&&(Vg=Jg)))}catch{}XC.exports=Vg});var eB=x((Cj,$C)=>{"use strict";var Y3=pt(),W3=Ti();$C.exports=!Y3(function(){var e=new Error("a");return"stack"in e?(Object.defineProperty(e,"stack",W3(1,7)),e.stack!==7):!0})});var gB=x(()=>{"use strict";var j3=na(),X3=Ir(),tt=Je(),Ji=an(),zi=$e(),$g=pt(),Z3=sa(),Bo=Qt(),$3=rC(),eU=Mi(),_a=On(),tU=ea(),rU=yC(),nB=ur(),ka=Gi(),nU=fr(),oU=wC(),Yg=Aa(),xa=Ur(),iU=Ba(),sU=_C(),Fa=vC(),ed=Og(),aU=qC(),tB=ZC(),AU=eB(),td=Lg(),Ki=tt.Object,cU=tt.Array,oB=tt.Date,iB=tt.Error,lU=tt.TypeError,gU=tt.PerformanceMark,Hn=Ji("DOMException"),Xg=Fa.Map,rd=Fa.has,sB=Fa.get,Da=Fa.set,aB=ed.Set,AB=ed.add,dU=ed.has,fU=Ji("Object","keys"),uU=zi([].push),IU=zi((!0).valueOf),pU=zi(1 .valueOf),mU=zi("".valueOf),hU=zi(oB.prototype.getTime),Zg=Z3("structuredClone"),Vi="DataCloneError",ba="Transferring",cB=function(e){return!$g(function(){var t=new tt.Set([7]),r=e(t),n=e(Ki(7));return r===t||!r.has(7)||!_a(n)||+n!=7})&&e},rB=function(e,t){return!$g(function(){var r=new t,n=e({a:r,b:r});return!(n&&n.a===n.b&&n.a instanceof t&&n.a.stack===r.stack)})},CU=function(e){return!$g(function(){var t=e(new tt.AggregateError([1],Zg,{cause:3}));return t.name!=="AggregateError"||t.errors[0]!==1||t.message!==Zg||t.cause!==3})},Co=tt.structuredClone,BU=j3||!rB(Co,iB)||!rB(Co,Hn)||!CU(Co),EU=!Co&&cB(function(e){return new gU(Zg,{detail:e}).detail}),Pr=cB(Co)||EU,Wg=function(e){throw new Hn("Uncloneable type: "+e,Vi)},wt=function(e,t){throw new Hn((t||"Cloning")+" of "+e+" cannot be properly polyfilled in this engine",Vi)},jg=function(e,t){return Pr||wt(t),Pr(e)},yU=function(){var e;try{e=new tt.DataTransfer}catch{try{e=new tt.ClipboardEvent("").clipboardData}catch{}}return e&&e.items&&e.files?e:null},lB=function(e,t,r){if(rd(t,e))return sB(t,e);var n=r||ka(e),o,i,s,a,A,c;if(n==="SharedArrayBuffer")Pr?o=Pr(e):o=e;else{var l=tt.DataView;!l&&!Bo(e.slice)&&wt("ArrayBuffer");try{if(Bo(e.slice)&&!e.resizable)o=e.slice(0);else for(i=e.byteLength,s=("maxByteLength"in e)?{maxByteLength:e.maxByteLength}:void 0,o=new ArrayBuffer(i,s),a=new l(e),A=new l(o),c=0;c<i;c++)A.setUint8(c,a.getUint8(c))}catch{throw new Hn("ArrayBuffer is detached",Vi)}}return Da(t,e,o),o},QU=function(e,t,r,n,o){var i=tt[t];return _a(i)||wt(t),new i(lB(e.buffer,o),r,n)},et=function(e,t){if(tU(e)&&Wg("Symbol"),!_a(e))return e;if(t){if(rd(t,e))return sB(t,e)}else t=new Xg;var r=ka(e),n,o,i,s,a,A,c,l;switch(r){case"Array":i=cU(xa(e));break;case"Object":i={};break;case"Map":i=new Xg;break;case"Set":i=new aB;break;case"RegExp":i=new RegExp(e.source,sU(e));break;case"Error":switch(o=e.name,o){case"AggregateError":i=new(Ji(o))([]);break;case"EvalError":case"RangeError":case"ReferenceError":case"SuppressedError":case"SyntaxError":case"TypeError":case"URIError":i=new(Ji(o));break;case"CompileError":case"LinkError":case"RuntimeError":i=new(Ji("WebAssembly",o));break;default:i=new iB}break;case"DOMException":i=new Hn(e.message,e.name);break;case"ArrayBuffer":case"SharedArrayBuffer":i=lB(e,t,r);break;case"DataView":case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float16Array":case"Float32Array":case"Float64Array":case"BigInt64Array":case"BigUint64Array":A=r==="DataView"?e.byteLength:e.length,i=QU(e,r,e.byteOffset,A,t);break;case"DOMQuad":try{i=new DOMQuad(et(e.p1,t),et(e.p2,t),et(e.p3,t),et(e.p4,t))}catch{i=jg(e,r)}break;case"File":if(Pr)try{i=Pr(e),ka(i)!==r&&(i=void 0)}catch{}if(!i)try{i=new File([e],e.name,e)}catch{}i||wt(r);break;case"FileList":if(s=yU(),s){for(a=0,A=xa(e);a<A;a++)s.items.add(et(e[a],t));i=s.files}else i=jg(e,r);break;case"ImageData":try{i=new ImageData(et(e.data,t),e.width,e.height,{colorSpace:e.colorSpace})}catch{i=jg(e,r)}break;default:if(Pr)i=Pr(e);else switch(r){case"BigInt":i=Ki(e.valueOf());break;case"Boolean":i=Ki(IU(e));break;case"Number":i=Ki(pU(e));break;case"String":i=Ki(mU(e));break;case"Date":i=new oB(hU(e));break;case"Blob":try{i=e.slice(0,e.size,e.type)}catch{wt(r)}break;case"DOMPoint":case"DOMPointReadOnly":n=tt[r];try{i=n.fromPoint?n.fromPoint(e):new n(e.x,e.y,e.z,e.w)}catch{wt(r)}break;case"DOMRect":case"DOMRectReadOnly":n=tt[r];try{i=n.fromRect?n.fromRect(e):new n(e.x,e.y,e.width,e.height)}catch{wt(r)}break;case"DOMMatrix":case"DOMMatrixReadOnly":n=tt[r];try{i=n.fromMatrix?n.fromMatrix(e):new n(e)}catch{wt(r)}break;case"AudioData":case"VideoFrame":Bo(e.clone)||wt(r);try{i=e.clone()}catch{Wg(r)}break;case"CropTarget":case"CryptoKey":case"FileSystemDirectoryHandle":case"FileSystemFileHandle":case"FileSystemHandle":case"GPUCompilationInfo":case"GPUCompilationMessage":case"ImageBitmap":case"RTCCertificate":case"WebAssembly.Module":wt(r);default:Wg(r)}}switch(Da(t,e,i),r){case"Array":case"Object":for(c=fU(e),a=0,A=xa(c);a<A;a++)l=c[a],oU(i,l,et(e[l],t));break;case"Map":e.forEach(function(g,d){Da(i,et(d,t),et(g,t))});break;case"Set":e.forEach(function(g){AB(i,et(g,t))});break;case"Error":Yg(i,"message",et(e.message,t)),nU(e,"cause")&&Yg(i,"cause",et(e.cause,t)),o==="AggregateError"?i.errors=et(e.errors,t):o==="SuppressedError"&&(i.error=et(e.error,t),i.suppressed=et(e.suppressed,t));case"DOMException":AU&&Yg(i,"stack",et(e.stack,t))}return i},wU=function(e,t){if(!_a(e))throw new lU("Transfer option cannot be converted to a sequence");var r=[];rU(e,function(d){uU(r,nB(d))});for(var n=0,o=xa(r),i=new aB,s,a,A,c,l,g;n<o;){if(s=r[n++],a=ka(s),a==="ArrayBuffer"?dU(i,s):rd(t,s))throw new Hn("Duplicate transferable",Vi);if(a==="ArrayBuffer"){AB(i,s);continue}if(td)c=Co(s,{transfer:[s]});else switch(a){case"ImageBitmap":A=tt.OffscreenCanvas,$3(A)||wt(a,ba);try{l=new A(s.width,s.height),g=l.getContext("bitmaprenderer"),g.transferFromImageBitmap(s),c=l.transferToImageBitmap()}catch{}break;case"AudioData":case"VideoFrame":(!Bo(s.clone)||!Bo(s.close))&&wt(a,ba);try{c=s.clone(),s.close()}catch{}break;case"MediaSourceHandle":case"MessagePort":case"MIDIAccess":case"OffscreenCanvas":case"ReadableStream":case"RTCDataChannel":case"TransformStream":case"WebTransportReceiveStream":case"WebTransportSendStream":case"WritableStream":wt(a,ba)}if(c===void 0)throw new Hn("This object cannot be transferred: "+a,Vi);Da(t,s,c)}return i},SU=function(e){aU(e,function(t){td?Pr(t,{transfer:[t]}):Bo(t.transfer)?t.transfer():tB?tB(t):wt("ArrayBuffer",ba)})};X3({global:!0,enumerable:!0,sham:!td,forced:BU},{structuredClone:function(t){var r=iU(arguments.length,1)>1&&!eU(arguments[1])?nB(arguments[1]):void 0,n=r?r.transfer:void 0,o,i;n!==void 0&&(o=new Xg,i=wU(n,o));var s=et(t,o);return i&&SU(i),s}})});var nd=x((yj,dB)=>{"use strict";var xU=Gi(),bU=String;dB.exports=function(e){if(xU(e)==="Symbol")throw new TypeError("Cannot convert a Symbol value to a string");return bU(e)}});var od=x((Qj,uB)=>{"use strict";var kU=pt(),DU=An(),_U=Yt(),fB=na(),FU=DU("iterator");uB.exports=!kU(function(){var e=new URL("b?a=1&b=2&c=3","https://a"),t=e.searchParams,r=new URLSearchParams("a=1&a=2&b=3"),n="";return e.pathname="c%20d",t.forEach(function(o,i){t.delete("b"),n+=i+o}),r.delete("a",2),r.delete("b",void 0),fB&&(!e.toJSON||!r.has("a",1)||r.has("a",2)||!r.has("a",void 0)||r.has("b"))||!t.size&&(fB||!_U)||!t.sort||e.href!=="https://a/c%20d?a=1&c=3"||t.get("c")!=="3"||String(new URLSearchParams("?a=1"))!=="a=1"||!t[FU]||new URL("https://a@b").username!=="a"||new URLSearchParams(new URLSearchParams("a=b")).get("a")!=="b"||new URL("https://\u0442\u0435\u0441\u0442").host!=="xn--e1aybc"||new URL("https://a#\u0431").hash!=="#%D0%B1"||n!=="a1c3"||new URL("https://x",void 0).host!=="x"})});var mB=x(()=>{"use strict";var vU=Ir(),RU=an(),pB=pt(),TU=Ba(),IB=nd(),NU=od(),id=RU("URL"),MU=NU&&pB(function(){id.canParse()}),UU=pB(function(){return id.canParse.length!==1});vU({target:"URL",stat:!0,forced:!MU||UU},{canParse:function(t){var r=TU(arguments.length,1),n=IB(t),o=r<2||arguments[1]===void 0?void 0:IB(arguments[1]);try{return!!new id(n,o)}catch{return!1}}})});var CB=x(()=>{"use strict";var PU=Ir(),OU=an(),GU=Ba(),hB=nd(),qU=od(),HU=OU("URL");PU({target:"URL",stat:!0,forced:!qU},{parse:function(t){var r=GU(arguments.length,1),n=hB(t),o=r<2||arguments[1]===void 0?void 0:hB(arguments[1]);try{return new HU(n,o)}catch{return null}}})});var Ae=x((cd,xB)=>{(function(e,t){if(typeof define=="function"&&define.amd)define("webextension-polyfill",["module"],t);else if(typeof cd<"u")t(xB);else{var r={exports:{}};t(r),e.browser=r.exports}})(typeof globalThis<"u"?globalThis:typeof self<"u"?self:cd,function(e){"use strict";if(!(globalThis.chrome&&globalThis.chrome.runtime&&globalThis.chrome.runtime.id))throw new Error("This script should only be loaded in a browser extension.");if(globalThis.browser&&globalThis.browser.runtime&&globalThis.browser.runtime.id)e.exports=globalThis.browser;else{let t="The message port closed before a response was received.",r=n=>{let o={alarms:{clear:{minArgs:0,maxArgs:1},clearAll:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getAll:{minArgs:0,maxArgs:0}},bookmarks:{create:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},getChildren:{minArgs:1,maxArgs:1},getRecent:{minArgs:1,maxArgs:1},getSubTree:{minArgs:1,maxArgs:1},getTree:{minArgs:0,maxArgs:0},move:{minArgs:2,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeTree:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}},browserAction:{disable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},enable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},getBadgeBackgroundColor:{minArgs:1,maxArgs:1},getBadgeText:{minArgs:1,maxArgs:1},getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},openPopup:{minArgs:0,maxArgs:0},setBadgeBackgroundColor:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setBadgeText:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},browsingData:{remove:{minArgs:2,maxArgs:2},removeCache:{minArgs:1,maxArgs:1},removeCookies:{minArgs:1,maxArgs:1},removeDownloads:{minArgs:1,maxArgs:1},removeFormData:{minArgs:1,maxArgs:1},removeHistory:{minArgs:1,maxArgs:1},removeLocalStorage:{minArgs:1,maxArgs:1},removePasswords:{minArgs:1,maxArgs:1},removePluginData:{minArgs:1,maxArgs:1},settings:{minArgs:0,maxArgs:0}},commands:{getAll:{minArgs:0,maxArgs:0}},contextMenus:{remove:{minArgs:1,maxArgs:1},removeAll:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},cookies:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:1,maxArgs:1},getAllCookieStores:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},devtools:{inspectedWindow:{eval:{minArgs:1,maxArgs:2,singleCallbackArg:!1}},panels:{create:{minArgs:3,maxArgs:3,singleCallbackArg:!0},elements:{createSidebarPane:{minArgs:1,maxArgs:1}}}},downloads:{cancel:{minArgs:1,maxArgs:1},download:{minArgs:1,maxArgs:1},erase:{minArgs:1,maxArgs:1},getFileIcon:{minArgs:1,maxArgs:2},open:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},pause:{minArgs:1,maxArgs:1},removeFile:{minArgs:1,maxArgs:1},resume:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},extension:{isAllowedFileSchemeAccess:{minArgs:0,maxArgs:0},isAllowedIncognitoAccess:{minArgs:0,maxArgs:0}},history:{addUrl:{minArgs:1,maxArgs:1},deleteAll:{minArgs:0,maxArgs:0},deleteRange:{minArgs:1,maxArgs:1},deleteUrl:{minArgs:1,maxArgs:1},getVisits:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1}},i18n:{detectLanguage:{minArgs:1,maxArgs:1},getAcceptLanguages:{minArgs:0,maxArgs:0}},identity:{launchWebAuthFlow:{minArgs:1,maxArgs:1}},idle:{queryState:{minArgs:1,maxArgs:1}},management:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},getSelf:{minArgs:0,maxArgs:0},setEnabled:{minArgs:2,maxArgs:2},uninstallSelf:{minArgs:0,maxArgs:1}},notifications:{clear:{minArgs:1,maxArgs:1},create:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:0},getPermissionLevel:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},pageAction:{getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},hide:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},permissions:{contains:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},request:{minArgs:1,maxArgs:1}},runtime:{getBackgroundPage:{minArgs:0,maxArgs:0},getPlatformInfo:{minArgs:0,maxArgs:0},openOptionsPage:{minArgs:0,maxArgs:0},requestUpdateCheck:{minArgs:0,maxArgs:0},sendMessage:{minArgs:1,maxArgs:3},sendNativeMessage:{minArgs:2,maxArgs:2},setUninstallURL:{minArgs:1,maxArgs:1}},sessions:{getDevices:{minArgs:0,maxArgs:1},getRecentlyClosed:{minArgs:0,maxArgs:1},restore:{minArgs:0,maxArgs:1}},storage:{local:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},managed:{get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1}},sync:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}}},tabs:{captureVisibleTab:{minArgs:0,maxArgs:2},create:{minArgs:1,maxArgs:1},detectLanguage:{minArgs:0,maxArgs:1},discard:{minArgs:0,maxArgs:1},duplicate:{minArgs:1,maxArgs:1},executeScript:{minArgs:1,maxArgs:2},get:{minArgs:1,maxArgs:1},getCurrent:{minArgs:0,maxArgs:0},getZoom:{minArgs:0,maxArgs:1},getZoomSettings:{minArgs:0,maxArgs:1},goBack:{minArgs:0,maxArgs:1},goForward:{minArgs:0,maxArgs:1},highlight:{minArgs:1,maxArgs:1},insertCSS:{minArgs:1,maxArgs:2},move:{minArgs:2,maxArgs:2},query:{minArgs:1,maxArgs:1},reload:{minArgs:0,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeCSS:{minArgs:1,maxArgs:2},sendMessage:{minArgs:2,maxArgs:3},setZoom:{minArgs:1,maxArgs:2},setZoomSettings:{minArgs:1,maxArgs:2},update:{minArgs:1,maxArgs:2}},topSites:{get:{minArgs:0,maxArgs:0}},webNavigation:{getAllFrames:{minArgs:1,maxArgs:1},getFrame:{minArgs:1,maxArgs:1}},webRequest:{handlerBehaviorChanged:{minArgs:0,maxArgs:0}},windows:{create:{minArgs:0,maxArgs:1},get:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:1},getCurrent:{minArgs:0,maxArgs:1},getLastFocused:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}}};if(Object.keys(o).length===0)throw new Error("api-metadata.json has not been included in browser-polyfill");class i extends WeakMap{constructor(w,B=void 0){super(B),this.createItem=w}get(w){return this.has(w)||this.set(w,this.createItem(w)),super.get(w)}}let s=E=>E&&typeof E=="object"&&typeof E.then=="function",a=(E,w)=>(...B)=>{n.runtime.lastError?E.reject(new Error(n.runtime.lastError.message)):w.singleCallbackArg||B.length<=1&&w.singleCallbackArg!==!1?E.resolve(B[0]):E.resolve(B)},A=E=>E==1?"argument":"arguments",c=(E,w)=>function(y,...T){if(T.length<w.minArgs)throw new Error(`Expected at least ${w.minArgs} ${A(w.minArgs)} for ${E}(), got ${T.length}`);if(T.length>w.maxArgs)throw new Error(`Expected at most ${w.maxArgs} ${A(w.maxArgs)} for ${E}(), got ${T.length}`);return new Promise((P,S)=>{if(w.fallbackToNoCallback)try{y[E](...T,a({resolve:P,reject:S},w))}catch{y[E](...T),w.fallbackToNoCallback=!1,w.noCallback=!0,P()}else w.noCallback?(y[E](...T),P()):y[E](...T,a({resolve:P,reject:S},w))})},l=(E,w,B)=>new Proxy(w,{apply(y,T,P){return B.call(T,E,...P)}}),g=Function.call.bind(Object.prototype.hasOwnProperty),d=(E,w={},B={})=>{let y=Object.create(null),T={has(S,U){return U in E||U in y},get(S,U,W){if(U in y)return y[U];if(!(U in E))return;let b=E[U];if(typeof b=="function")if(typeof w[U]=="function")b=l(E,E[U],w[U]);else if(g(B,U)){let R=c(U,B[U]);b=l(E,E[U],R)}else b=b.bind(E);else if(typeof b=="object"&&b!==null&&(g(w,U)||g(B,U)))b=d(b,w[U],B[U]);else if(g(B,"*"))b=d(b,w[U],B["*"]);else return Object.defineProperty(y,U,{configurable:!0,enumerable:!0,get(){return E[U]},set(R){E[U]=R}}),b;return y[U]=b,b},set(S,U,W,b){return U in y?y[U]=W:E[U]=W,!0},defineProperty(S,U,W){return Reflect.defineProperty(y,U,W)},deleteProperty(S,U){return Reflect.deleteProperty(y,U)}},P=Object.create(E);return new Proxy(P,T)},f=E=>({addListener(w,B,...y){w.addListener(E.get(B),...y)},hasListener(w,B){return w.hasListener(E.get(B))},removeListener(w,B){w.removeListener(E.get(B))}}),u=new i(E=>typeof E!="function"?E:function(B){let y=d(B,{},{getContent:{minArgs:0,maxArgs:0}});E(y)}),m=new i(E=>typeof E!="function"?E:function(B,y,T){let P=!1,S,U=new Promise(J=>{S=function(K){P=!0,J(K)}}),W;try{W=E(B,y,S)}catch(J){W=Promise.reject(J)}let b=W!==!0&&s(W);if(W!==!0&&!b&&!P)return!1;let R=J=>{J.then(K=>{T(K)},K=>{let me;K&&(K instanceof Error||typeof K.message=="string")?me=K.message:me="An unexpected error occurred",T({__mozWebExtensionPolyfillReject__:!0,message:me})}).catch(K=>{})};return R(b?W:U),!0}),C=({reject:E,resolve:w},B)=>{n.runtime.lastError?n.runtime.lastError.message===t?w():E(new Error(n.runtime.lastError.message)):B&&B.__mozWebExtensionPolyfillReject__?E(new Error(B.message)):w(B)},p=(E,w,B,...y)=>{if(y.length<w.minArgs)throw new Error(`Expected at least ${w.minArgs} ${A(w.minArgs)} for ${E}(), got ${y.length}`);if(y.length>w.maxArgs)throw new Error(`Expected at most ${w.maxArgs} ${A(w.maxArgs)} for ${E}(), got ${y.length}`);return new Promise((T,P)=>{let S=C.bind(null,{resolve:T,reject:P});y.push(S),B.sendMessage(...y)})},Q={devtools:{network:{onRequestFinished:f(u)}},runtime:{onMessage:f(m),onMessageExternal:f(m),sendMessage:p.bind(null,"sendMessage",{minArgs:1,maxArgs:3})},tabs:{sendMessage:p.bind(null,"sendMessage",{minArgs:2,maxArgs:3})}},v={clear:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}};return o.privacy={network:{"*":v},services:{"*":v},websites:{"*":v}},d(n,Q,o)};e.exports=r(chrome)}})});var IQ=x((Dre,AA)=>{(function(){"use strict";var e={}.hasOwnProperty;function t(){for(var o="",i=0;i<arguments.length;i++){var s=arguments[i];s&&(o=n(o,r(s)))}return o}function r(o){if(typeof o=="string"||typeof o=="number")return o;if(typeof o!="object")return"";if(Array.isArray(o))return t.apply(null,o);if(o.toString!==Object.prototype.toString&&!o.toString.toString().includes("[native code]"))return o.toString();var i="";for(var s in o)e.call(o,s)&&o[s]&&(i=n(i,s));return i}function n(o,i){return i?o?o+" "+i:o+i:o}typeof AA<"u"&&AA.exports?(t.default=t,AA.exports=t):typeof define=="function"&&typeof define.amd=="object"&&define.amd?define("classnames",[],function(){return t}):window.classNames=t})()});var aw=x((qie,sw)=>{"use strict";sw.exports=()=>{let e={};return e.promise=new Promise((t,r)=>{e.resolve=t,e.reject=r}),e}});var cw=x((Hie,Aw)=>{"use strict";var IK=aw();function pK(e,t="maxAge"){let r,n,o,i=async()=>{if(r!==void 0)return;let A=async c=>{o=IK();let l=c[1][t]-Date.now();if(l<=0){e.delete(c[0]),o.resolve();return}return r=c[0],n=setTimeout(()=>{e.delete(c[0]),o&&o.resolve()},l),typeof n.unref=="function"&&n.unref(),o.promise};try{for(let c of e)await A(c)}catch{}r=void 0},s=()=>{r=void 0,n!==void 0&&(clearTimeout(n),n=void 0),o!==void 0&&(o.reject(void 0),o=void 0)},a=e.set.bind(e);return e.set=(A,c)=>{e.has(A)&&e.delete(A);let l=a(A,c);return r&&r===A&&s(),i(),l},i(),e}Aw.exports=pK});var tf=x((Lie,lw)=>{"use strict";var mK=cw(),ef=class{constructor(t,r){if(this.maxAge=t,this[Symbol.toStringTag]="Map",this.data=new Map,mK(this.data),r)for(let[n,o]of r)this.set(n,o)}get size(){return this.data.size}clear(){this.data.clear()}delete(t){return this.data.delete(t)}has(t){return this.data.has(t)}get(t){let r=this.data.get(t);if(r)return r.data}set(t,r){return this.data.set(t,{maxAge:Date.now()+this.maxAge,data:r}),this}values(){return this.createIterator(t=>t[1].data)}keys(){return this.data.keys()}entries(){return this.createIterator(t=>[t[0],t[1].data])}forEach(t,r){for(let[n,o]of this.entries())t.apply(r,[o,n,this])}[Symbol.iterator](){return this.entries()}*createIterator(t){for(let r of this.data.entries())yield t(r)}};lw.exports=ef});var oc=x(tn=>{"use strict";var Rx=":A-Za-z_\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",P2=Rx+"\\-.\\d\\u00B7\\u0300-\\u036F\\u203F-\\u2040",Tx="["+Rx+"]["+P2+"]*",O2=new RegExp("^"+Tx+"$"),G2=function(e,t){let r=[],n=t.exec(e);for(;n;){let o=[];o.startIndex=t.lastIndex-n[0].length;let i=n.length;for(let s=0;s<i;s++)o.push(n[s]);r.push(o),n=t.exec(e)}return r},q2=function(e){let t=O2.exec(e);return!(t===null||typeof t>"u")};tn.isExist=function(e){return typeof e<"u"};tn.isEmptyObject=function(e){return Object.keys(e).length===0};tn.merge=function(e,t,r){if(t){let n=Object.keys(t),o=n.length;for(let i=0;i<o;i++)r==="strict"?e[n[i]]=[t[n[i]]]:e[n[i]]=t[n[i]]}};tn.getValue=function(e){return tn.isExist(e)?e:""};tn.isName=q2;tn.getAllMatches=G2;tn.nameRegexp=Tx});var eu=x(Ox=>{"use strict";var $f=oc(),H2={allowBooleanAttributes:!1,unpairedTags:[]};Ox.validate=function(e,t){t=Object.assign({},H2,t);let r=[],n=!1,o=!1;e[0]==="\uFEFF"&&(e=e.substr(1));for(let i=0;i<e.length;i++)if(e[i]==="<"&&e[i+1]==="?"){if(i+=2,i=Mx(e,i),i.err)return i}else if(e[i]==="<"){let s=i;if(i++,e[i]==="!"){i=Ux(e,i);continue}else{let a=!1;e[i]==="/"&&(a=!0,i++);let A="";for(;i<e.length&&e[i]!==">"&&e[i]!==" "&&e[i]!=="	"&&e[i]!==`
`&&e[i]!=="\r";i++)A+=e[i];if(A=A.trim(),A[A.length-1]==="/"&&(A=A.substring(0,A.length-1),i--),!j2(A)){let g;return A.trim().length===0?g="Invalid space after '<'.":g="Tag '"+A+"' is an invalid name.",Re("InvalidTag",g,ht(e,i))}let c=J2(e,i);if(c===!1)return Re("InvalidAttr","Attributes for '"+A+"' have open quote.",ht(e,i));let l=c.value;if(i=c.index,l[l.length-1]==="/"){let g=i-l.length;l=l.substring(0,l.length-1);let d=Px(l,t);if(d===!0)n=!0;else return Re(d.err.code,d.err.msg,ht(e,g+d.err.line))}else if(a)if(c.tagClosed){if(l.trim().length>0)return Re("InvalidTag","Closing tag '"+A+"' can't have attributes or invalid starting.",ht(e,s));if(r.length===0)return Re("InvalidTag","Closing tag '"+A+"' has not been opened.",ht(e,s));{let g=r.pop();if(A!==g.tagName){let d=ht(e,g.tagStartPos);return Re("InvalidTag","Expected closing tag '"+g.tagName+"' (opened in line "+d.line+", col "+d.col+") instead of closing tag '"+A+"'.",ht(e,s))}r.length==0&&(o=!0)}}else return Re("InvalidTag","Closing tag '"+A+"' doesn't have proper closing.",ht(e,i));else{let g=Px(l,t);if(g!==!0)return Re(g.err.code,g.err.msg,ht(e,i-l.length+g.err.line));if(o===!0)return Re("InvalidXml","Multiple possible root nodes found.",ht(e,i));t.unpairedTags.indexOf(A)!==-1||r.push({tagName:A,tagStartPos:s}),n=!0}for(i++;i<e.length;i++)if(e[i]==="<")if(e[i+1]==="!"){i++,i=Ux(e,i);continue}else if(e[i+1]==="?"){if(i=Mx(e,++i),i.err)return i}else break;else if(e[i]==="&"){let g=Y2(e,i);if(g==-1)return Re("InvalidChar","char '&' is not expected.",ht(e,i));i=g}else if(o===!0&&!Nx(e[i]))return Re("InvalidXml","Extra text at the end",ht(e,i));e[i]==="<"&&i--}}else{if(Nx(e[i]))continue;return Re("InvalidChar","char '"+e[i]+"' is not expected.",ht(e,i))}if(n){if(r.length==1)return Re("InvalidTag","Unclosed tag '"+r[0].tagName+"'.",ht(e,r[0].tagStartPos));if(r.length>0)return Re("InvalidXml","Invalid '"+JSON.stringify(r.map(i=>i.tagName),null,4).replace(/\r?\n/g,"")+"' found.",{line:1,col:1})}else return Re("InvalidXml","Start tag expected.",1);return!0};function Nx(e){return e===" "||e==="	"||e===`
`||e==="\r"}function Mx(e,t){let r=t;for(;t<e.length;t++)if(e[t]=="?"||e[t]==" "){let n=e.substr(r,t-r);if(t>5&&n==="xml")return Re("InvalidXml","XML declaration allowed only at the start of the document.",ht(e,t));if(e[t]=="?"&&e[t+1]==">"){t++;break}else continue}return t}function Ux(e,t){if(e.length>t+5&&e[t+1]==="-"&&e[t+2]==="-"){for(t+=3;t<e.length;t++)if(e[t]==="-"&&e[t+1]==="-"&&e[t+2]===">"){t+=2;break}}else if(e.length>t+8&&e[t+1]==="D"&&e[t+2]==="O"&&e[t+3]==="C"&&e[t+4]==="T"&&e[t+5]==="Y"&&e[t+6]==="P"&&e[t+7]==="E"){let r=1;for(t+=8;t<e.length;t++)if(e[t]==="<")r++;else if(e[t]===">"&&(r--,r===0))break}else if(e.length>t+9&&e[t+1]==="["&&e[t+2]==="C"&&e[t+3]==="D"&&e[t+4]==="A"&&e[t+5]==="T"&&e[t+6]==="A"&&e[t+7]==="["){for(t+=8;t<e.length;t++)if(e[t]==="]"&&e[t+1]==="]"&&e[t+2]===">"){t+=2;break}}return t}var L2='"',K2="'";function J2(e,t){let r="",n="",o=!1;for(;t<e.length;t++){if(e[t]===L2||e[t]===K2)n===""?n=e[t]:n!==e[t]||(n="");else if(e[t]===">"&&n===""){o=!0;break}r+=e[t]}return n!==""?!1:{value:r,index:t,tagClosed:o}}var V2=new RegExp(`(\\s*)([^\\s=]+)(\\s*=)?(\\s*(['"])(([\\s\\S])*?)\\5)?`,"g");function Px(e,t){let r=$f.getAllMatches(e,V2),n={};for(let o=0;o<r.length;o++){if(r[o][1].length===0)return Re("InvalidAttr","Attribute '"+r[o][2]+"' has no space in starting.",ws(r[o]));if(r[o][3]!==void 0&&r[o][4]===void 0)return Re("InvalidAttr","Attribute '"+r[o][2]+"' is without value.",ws(r[o]));if(r[o][3]===void 0&&!t.allowBooleanAttributes)return Re("InvalidAttr","boolean attribute '"+r[o][2]+"' is not allowed.",ws(r[o]));let i=r[o][2];if(!W2(i))return Re("InvalidAttr","Attribute '"+i+"' is an invalid name.",ws(r[o]));if(!n.hasOwnProperty(i))n[i]=1;else return Re("InvalidAttr","Attribute '"+i+"' is repeated.",ws(r[o]))}return!0}function z2(e,t){let r=/\d/;for(e[t]==="x"&&(t++,r=/[\da-fA-F]/);t<e.length;t++){if(e[t]===";")return t;if(!e[t].match(r))break}return-1}function Y2(e,t){if(t++,e[t]===";")return-1;if(e[t]==="#")return t++,z2(e,t);let r=0;for(;t<e.length;t++,r++)if(!(e[t].match(/\w/)&&r<20)){if(e[t]===";")break;return-1}return t}function Re(e,t,r){return{err:{code:e,msg:t,line:r.line||r,col:r.col}}}function W2(e){return $f.isName(e)}function j2(e){return $f.isName(e)}function ht(e,t){let r=e.substring(0,t).split(/\r?\n/);return{line:r.length,col:r[r.length-1].length+1}}function ws(e){return e.startIndex+e[1].length}});var qx=x(tu=>{var Gx={preserveOrder:!1,attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,removeNSPrefix:!1,allowBooleanAttributes:!1,parseTagValue:!0,parseAttributeValue:!1,trimValues:!0,cdataPropName:!1,numberParseOptions:{hex:!0,leadingZeros:!0,eNotation:!0},tagValueProcessor:function(e,t){return t},attributeValueProcessor:function(e,t){return t},stopNodes:[],alwaysCreateTextNode:!1,isArray:()=>!1,commentPropName:!1,unpairedTags:[],processEntities:!0,htmlEntities:!1,ignoreDeclaration:!1,ignorePiTags:!1,transformTagName:!1,transformAttributeName:!1,updateTag:function(e,t,r){return e}},X2=function(e){return Object.assign({},Gx,e)};tu.buildOptions=X2;tu.defaultOptions=Gx});var Lx=x((ZIe,Hx)=>{"use strict";var ru=class{constructor(t){this.tagname=t,this.child=[],this[":@"]={}}add(t,r){t==="__proto__"&&(t="#__proto__"),this.child.push({[t]:r})}addChild(t){t.tagname==="__proto__"&&(t.tagname="#__proto__"),t[":@"]&&Object.keys(t[":@"]).length>0?this.child.push({[t.tagname]:t.child,":@":t[":@"]}):this.child.push({[t.tagname]:t.child})}};Hx.exports=ru});var Jx=x(($Ie,Kx)=>{var Z2=oc();function $2(e,t){let r={};if(e[t+3]==="O"&&e[t+4]==="C"&&e[t+5]==="T"&&e[t+6]==="Y"&&e[t+7]==="P"&&e[t+8]==="E"){t=t+9;let n=1,o=!1,i=!1,s="";for(;t<e.length;t++)if(e[t]==="<"&&!i){if(o&&rJ(e,t))t+=7,[entityName,val,t]=eJ(e,t+1),val.indexOf("&")===-1&&(r[sJ(entityName)]={regx:RegExp(`&${entityName};`,"g"),val});else if(o&&nJ(e,t))t+=8;else if(o&&oJ(e,t))t+=8;else if(o&&iJ(e,t))t+=9;else if(tJ)i=!0;else throw new Error("Invalid DOCTYPE");n++,s=""}else if(e[t]===">"){if(i?e[t-1]==="-"&&e[t-2]==="-"&&(i=!1,n--):n--,n===0)break}else e[t]==="["?o=!0:s+=e[t];if(n!==0)throw new Error("Unclosed DOCTYPE")}else throw new Error("Invalid Tag instead of DOCTYPE");return{entities:r,i:t}}function eJ(e,t){let r="";for(;t<e.length&&e[t]!=="'"&&e[t]!=='"';t++)r+=e[t];if(r=r.trim(),r.indexOf(" ")!==-1)throw new Error("External entites are not supported");let n=e[t++],o="";for(;t<e.length&&e[t]!==n;t++)o+=e[t];return[r,o,t]}function tJ(e,t){return e[t+1]==="!"&&e[t+2]==="-"&&e[t+3]==="-"}function rJ(e,t){return e[t+1]==="!"&&e[t+2]==="E"&&e[t+3]==="N"&&e[t+4]==="T"&&e[t+5]==="I"&&e[t+6]==="T"&&e[t+7]==="Y"}function nJ(e,t){return e[t+1]==="!"&&e[t+2]==="E"&&e[t+3]==="L"&&e[t+4]==="E"&&e[t+5]==="M"&&e[t+6]==="E"&&e[t+7]==="N"&&e[t+8]==="T"}function oJ(e,t){return e[t+1]==="!"&&e[t+2]==="A"&&e[t+3]==="T"&&e[t+4]==="T"&&e[t+5]==="L"&&e[t+6]==="I"&&e[t+7]==="S"&&e[t+8]==="T"}function iJ(e,t){return e[t+1]==="!"&&e[t+2]==="N"&&e[t+3]==="O"&&e[t+4]==="T"&&e[t+5]==="A"&&e[t+6]==="T"&&e[t+7]==="I"&&e[t+8]==="O"&&e[t+9]==="N"}function sJ(e){if(Z2.isName(e))return e;throw new Error(`Invalid entity name ${e}`)}Kx.exports=$2});var zx=x((epe,Vx)=>{var aJ=/^[-+]?0x[a-fA-F0-9]+$/,AJ=/^([\-\+])?(0*)(\.[0-9]+([eE]\-?[0-9]+)?|[0-9]+(\.[0-9]+([eE]\-?[0-9]+)?)?)$/;!Number.parseInt&&window.parseInt&&(Number.parseInt=window.parseInt);!Number.parseFloat&&window.parseFloat&&(Number.parseFloat=window.parseFloat);var cJ={hex:!0,leadingZeros:!0,decimalPoint:".",eNotation:!0};function lJ(e,t={}){if(t=Object.assign({},cJ,t),!e||typeof e!="string")return e;let r=e.trim();if(t.skipLike!==void 0&&t.skipLike.test(r))return e;if(t.hex&&aJ.test(r))return Number.parseInt(r,16);{let n=AJ.exec(r);if(n){let o=n[1],i=n[2],s=gJ(n[3]),a=n[4]||n[6];if(!t.leadingZeros&&i.length>0&&o&&r[2]!==".")return e;if(!t.leadingZeros&&i.length>0&&!o&&r[1]!==".")return e;{let A=Number(r),c=""+A;return c.search(/[eE]/)!==-1||a?t.eNotation?A:e:r.indexOf(".")!==-1?c==="0"&&s===""||c===s||o&&c==="-"+s?A:e:i?s===c||o+s===c?A:e:r===c||r===o+c?A:e}}else return e}}function gJ(e){return e&&e.indexOf(".")!==-1&&(e=e.replace(/0+$/,""),e==="."?e="0":e[0]==="."?e="0"+e:e[e.length-1]==="."&&(e=e.substr(0,e.length-1))),e}Vx.exports=lJ});var jx=x((tpe,Wx)=>{"use strict";var Yx=oc(),Ss=Lx(),dJ=Jx(),fJ=zx(),nu=class{constructor(t){this.options=t,this.currentNode=null,this.tagsNodeStack=[],this.docTypeEntities={},this.lastEntities={apos:{regex:/&(apos|#39|#x27);/g,val:"'"},gt:{regex:/&(gt|#62|#x3E);/g,val:">"},lt:{regex:/&(lt|#60|#x3C);/g,val:"<"},quot:{regex:/&(quot|#34|#x22);/g,val:'"'}},this.ampEntity={regex:/&(amp|#38|#x26);/g,val:"&"},this.htmlEntities={space:{regex:/&(nbsp|#160);/g,val:" "},cent:{regex:/&(cent|#162);/g,val:"\xA2"},pound:{regex:/&(pound|#163);/g,val:"\xA3"},yen:{regex:/&(yen|#165);/g,val:"\xA5"},euro:{regex:/&(euro|#8364);/g,val:"\u20AC"},copyright:{regex:/&(copy|#169);/g,val:"\xA9"},reg:{regex:/&(reg|#174);/g,val:"\xAE"},inr:{regex:/&(inr|#8377);/g,val:"\u20B9"},num_dec:{regex:/&#([0-9]{1,7});/g,val:(r,n)=>String.fromCharCode(Number.parseInt(n,10))},num_hex:{regex:/&#x([0-9a-fA-F]{1,6});/g,val:(r,n)=>String.fromCharCode(Number.parseInt(n,16))}},this.addExternalEntities=uJ,this.parseXml=CJ,this.parseTextData=IJ,this.resolveNameSpace=pJ,this.buildAttributesMap=hJ,this.isItStopNode=QJ,this.replaceEntitiesValue=EJ,this.readStopNodeData=SJ,this.saveTextToParentTag=yJ,this.addChild=BJ}};function uJ(e){let t=Object.keys(e);for(let r=0;r<t.length;r++){let n=t[r];this.lastEntities[n]={regex:new RegExp("&"+n+";","g"),val:e[n]}}}function IJ(e,t,r,n,o,i,s){if(e!==void 0&&(this.options.trimValues&&!n&&(e=e.trim()),e.length>0)){s||(e=this.replaceEntitiesValue(e));let a=this.options.tagValueProcessor(t,e,r,o,i);return a==null?e:typeof a!=typeof e||a!==e?a:this.options.trimValues?iu(e,this.options.parseTagValue,this.options.numberParseOptions):e.trim()===e?iu(e,this.options.parseTagValue,this.options.numberParseOptions):e}}function pJ(e){if(this.options.removeNSPrefix){let t=e.split(":"),r=e.charAt(0)==="/"?"/":"";if(t[0]==="xmlns")return"";t.length===2&&(e=r+t[1])}return e}var mJ=new RegExp(`([^\\s=]+)\\s*(=\\s*(['"])([\\s\\S]*?)\\3)?`,"gm");function hJ(e,t,r){if(!this.options.ignoreAttributes&&typeof e=="string"){let n=Yx.getAllMatches(e,mJ),o=n.length,i={};for(let s=0;s<o;s++){let a=this.resolveNameSpace(n[s][1]),A=n[s][4],c=this.options.attributeNamePrefix+a;if(a.length)if(this.options.transformAttributeName&&(c=this.options.transformAttributeName(c)),c==="__proto__"&&(c="#__proto__"),A!==void 0){this.options.trimValues&&(A=A.trim()),A=this.replaceEntitiesValue(A);let l=this.options.attributeValueProcessor(a,A,t);l==null?i[c]=A:typeof l!=typeof A||l!==A?i[c]=l:i[c]=iu(A,this.options.parseAttributeValue,this.options.numberParseOptions)}else this.options.allowBooleanAttributes&&(i[c]=!0)}if(!Object.keys(i).length)return;if(this.options.attributesGroupName){let s={};return s[this.options.attributesGroupName]=i,s}return i}}var CJ=function(e){e=e.replace(/\r\n?/g,`
`);let t=new Ss("!xml"),r=t,n="",o="";for(let i=0;i<e.length;i++)if(e[i]==="<")if(e[i+1]==="/"){let a=so(e,">",i,"Closing Tag is not closed."),A=e.substring(i+2,a).trim();if(this.options.removeNSPrefix){let g=A.indexOf(":");g!==-1&&(A=A.substr(g+1))}this.options.transformTagName&&(A=this.options.transformTagName(A)),r&&(n=this.saveTextToParentTag(n,r,o));let c=o.substring(o.lastIndexOf(".")+1);if(A&&this.options.unpairedTags.indexOf(A)!==-1)throw new Error(`Unpaired tag can not be used as closing tag: </${A}>`);let l=0;c&&this.options.unpairedTags.indexOf(c)!==-1?(l=o.lastIndexOf(".",o.lastIndexOf(".")-1),this.tagsNodeStack.pop()):l=o.lastIndexOf("."),o=o.substring(0,l),r=this.tagsNodeStack.pop(),n="",i=a}else if(e[i+1]==="?"){let a=ou(e,i,!1,"?>");if(!a)throw new Error("Pi Tag is not closed.");if(n=this.saveTextToParentTag(n,r,o),!(this.options.ignoreDeclaration&&a.tagName==="?xml"||this.options.ignorePiTags)){let A=new Ss(a.tagName);A.add(this.options.textNodeName,""),a.tagName!==a.tagExp&&a.attrExpPresent&&(A[":@"]=this.buildAttributesMap(a.tagExp,o,a.tagName)),this.addChild(r,A,o)}i=a.closeIndex+1}else if(e.substr(i+1,3)==="!--"){let a=so(e,"-->",i+4,"Comment is not closed.");if(this.options.commentPropName){let A=e.substring(i+4,a-2);n=this.saveTextToParentTag(n,r,o),r.add(this.options.commentPropName,[{[this.options.textNodeName]:A}])}i=a}else if(e.substr(i+1,2)==="!D"){let a=dJ(e,i);this.docTypeEntities=a.entities,i=a.i}else if(e.substr(i+1,2)==="!["){let a=so(e,"]]>",i,"CDATA is not closed.")-2,A=e.substring(i+9,a);n=this.saveTextToParentTag(n,r,o);let c=this.parseTextData(A,r.tagname,o,!0,!1,!0,!0);c==null&&(c=""),this.options.cdataPropName?r.add(this.options.cdataPropName,[{[this.options.textNodeName]:A}]):r.add(this.options.textNodeName,c),i=a+2}else{let a=ou(e,i,this.options.removeNSPrefix),A=a.tagName,c=a.rawTagName,l=a.tagExp,g=a.attrExpPresent,d=a.closeIndex;this.options.transformTagName&&(A=this.options.transformTagName(A)),r&&n&&r.tagname!=="!xml"&&(n=this.saveTextToParentTag(n,r,o,!1));let f=r;if(f&&this.options.unpairedTags.indexOf(f.tagname)!==-1&&(r=this.tagsNodeStack.pop(),o=o.substring(0,o.lastIndexOf("."))),A!==t.tagname&&(o+=o?"."+A:A),this.isItStopNode(this.options.stopNodes,o,A)){let u="";if(l.length>0&&l.lastIndexOf("/")===l.length-1)A[A.length-1]==="/"?(A=A.substr(0,A.length-1),o=o.substr(0,o.length-1),l=A):l=l.substr(0,l.length-1),i=a.closeIndex;else if(this.options.unpairedTags.indexOf(A)!==-1)i=a.closeIndex;else{let C=this.readStopNodeData(e,c,d+1);if(!C)throw new Error(`Unexpected end of ${c}`);i=C.i,u=C.tagContent}let m=new Ss(A);A!==l&&g&&(m[":@"]=this.buildAttributesMap(l,o,A)),u&&(u=this.parseTextData(u,A,o,!0,g,!0,!0)),o=o.substr(0,o.lastIndexOf(".")),m.add(this.options.textNodeName,u),this.addChild(r,m,o)}else{if(l.length>0&&l.lastIndexOf("/")===l.length-1){A[A.length-1]==="/"?(A=A.substr(0,A.length-1),o=o.substr(0,o.length-1),l=A):l=l.substr(0,l.length-1),this.options.transformTagName&&(A=this.options.transformTagName(A));let u=new Ss(A);A!==l&&g&&(u[":@"]=this.buildAttributesMap(l,o,A)),this.addChild(r,u,o),o=o.substr(0,o.lastIndexOf("."))}else{let u=new Ss(A);this.tagsNodeStack.push(r),A!==l&&g&&(u[":@"]=this.buildAttributesMap(l,o,A)),this.addChild(r,u,o),r=u}n="",i=d}}else n+=e[i];return t.child};function BJ(e,t,r){let n=this.options.updateTag(t.tagname,r,t[":@"]);n===!1||(typeof n=="string"&&(t.tagname=n),e.addChild(t))}var EJ=function(e){if(this.options.processEntities){for(let t in this.docTypeEntities){let r=this.docTypeEntities[t];e=e.replace(r.regx,r.val)}for(let t in this.lastEntities){let r=this.lastEntities[t];e=e.replace(r.regex,r.val)}if(this.options.htmlEntities)for(let t in this.htmlEntities){let r=this.htmlEntities[t];e=e.replace(r.regex,r.val)}e=e.replace(this.ampEntity.regex,this.ampEntity.val)}return e};function yJ(e,t,r,n){return e&&(n===void 0&&(n=Object.keys(t.child).length===0),e=this.parseTextData(e,t.tagname,r,!1,t[":@"]?Object.keys(t[":@"]).length!==0:!1,n),e!==void 0&&e!==""&&t.add(this.options.textNodeName,e),e=""),e}function QJ(e,t,r){let n="*."+r;for(let o in e){let i=e[o];if(n===i||t===i)return!0}return!1}function wJ(e,t,r=">"){let n,o="";for(let i=t;i<e.length;i++){let s=e[i];if(n)s===n&&(n="");else if(s==='"'||s==="'")n=s;else if(s===r[0])if(r[1]){if(e[i+1]===r[1])return{data:o,index:i}}else return{data:o,index:i};else s==="	"&&(s=" ");o+=s}}function so(e,t,r,n){let o=e.indexOf(t,r);if(o===-1)throw new Error(n);return o+t.length-1}function ou(e,t,r,n=">"){let o=wJ(e,t+1,n);if(!o)return;let i=o.data,s=o.index,a=i.search(/\s/),A=i,c=!0;a!==-1&&(A=i.substring(0,a),i=i.substring(a+1).trimStart());let l=A;if(r){let g=A.indexOf(":");g!==-1&&(A=A.substr(g+1),c=A!==o.data.substr(g+1))}return{tagName:A,tagExp:i,closeIndex:s,attrExpPresent:c,rawTagName:l}}function SJ(e,t,r){let n=r,o=1;for(;r<e.length;r++)if(e[r]==="<")if(e[r+1]==="/"){let i=so(e,">",r,`${t} is not closed`);if(e.substring(r+2,i).trim()===t&&(o--,o===0))return{tagContent:e.substring(n,r),i};r=i}else if(e[r+1]==="?")r=so(e,"?>",r+1,"StopNode is not closed.");else if(e.substr(r+1,3)==="!--")r=so(e,"-->",r+3,"StopNode is not closed.");else if(e.substr(r+1,2)==="![")r=so(e,"]]>",r,"StopNode is not closed.")-2;else{let i=ou(e,r,">");i&&((i&&i.tagName)===t&&i.tagExp[i.tagExp.length-1]!=="/"&&o++,r=i.closeIndex)}}function iu(e,t,r){if(t&&typeof e=="string"){let n=e.trim();return n==="true"?!0:n==="false"?!1:fJ(e,r)}else return Yx.isExist(e)?e:""}Wx.exports=nu});var $x=x(Zx=>{"use strict";function xJ(e,t){return Xx(e,t)}function Xx(e,t,r){let n,o={};for(let i=0;i<e.length;i++){let s=e[i],a=bJ(s),A="";if(r===void 0?A=a:A=r+"."+a,a===t.textNodeName)n===void 0?n=s[a]:n+=""+s[a];else{if(a===void 0)continue;if(s[a]){let c=Xx(s[a],t,A),l=DJ(c,t);s[":@"]?kJ(c,s[":@"],A,t):Object.keys(c).length===1&&c[t.textNodeName]!==void 0&&!t.alwaysCreateTextNode?c=c[t.textNodeName]:Object.keys(c).length===0&&(t.alwaysCreateTextNode?c[t.textNodeName]="":c=""),o[a]!==void 0&&o.hasOwnProperty(a)?(Array.isArray(o[a])||(o[a]=[o[a]]),o[a].push(c)):t.isArray(a,A,l)?o[a]=[c]:o[a]=c}}}return typeof n=="string"?n.length>0&&(o[t.textNodeName]=n):n!==void 0&&(o[t.textNodeName]=n),o}function bJ(e){let t=Object.keys(e);for(let r=0;r<t.length;r++){let n=t[r];if(n!==":@")return n}}function kJ(e,t,r,n){if(t){let o=Object.keys(t),i=o.length;for(let s=0;s<i;s++){let a=o[s];n.isArray(a,r+"."+a,!0,!0)?e[a]=[t[a]]:e[a]=t[a]}}}function DJ(e,t){let{textNodeName:r}=t,n=Object.keys(e).length;return!!(n===0||n===1&&(e[r]||typeof e[r]=="boolean"||e[r]===0))}Zx.prettify=xJ});var tb=x((npe,eb)=>{var{buildOptions:_J}=qx(),FJ=jx(),{prettify:vJ}=$x(),RJ=eu(),su=class{constructor(t){this.externalEntities={},this.options=_J(t)}parse(t,r){if(typeof t!="string")if(t.toString)t=t.toString();else throw new Error("XML data is accepted in String or Bytes[] form.");if(r){r===!0&&(r={});let i=RJ.validate(t,r);if(i!==!0)throw Error(`${i.err.msg}:${i.err.line}:${i.err.col}`)}let n=new FJ(this.options);n.addExternalEntities(this.externalEntities);let o=n.parseXml(t);return this.options.preserveOrder||o===void 0?o:vJ(o,this.options)}addEntity(t,r){if(r.indexOf("&")!==-1)throw new Error("Entity value can't have '&'");if(t.indexOf("&")!==-1||t.indexOf(";")!==-1)throw new Error("An entity must be set without '&' and ';'. Eg. use '#xD' for '&#xD;'");if(r==="&")throw new Error("An entity with value '&' is not permitted");this.externalEntities[t]=r}};eb.exports=su});var sb=x((ope,ib)=>{var TJ=`
`;function NJ(e,t){let r="";return t.format&&t.indentBy.length>0&&(r=TJ),nb(e,t,"",r)}function nb(e,t,r,n){let o="",i=!1;for(let s=0;s<e.length;s++){let a=e[s],A=MJ(a);if(A===void 0)continue;let c="";if(r.length===0?c=A:c=`${r}.${A}`,A===t.textNodeName){let u=a[A];UJ(c,t)||(u=t.tagValueProcessor(A,u),u=ob(u,t)),i&&(o+=n),o+=u,i=!1;continue}else if(A===t.cdataPropName){i&&(o+=n),o+=`<![CDATA[${a[A][0][t.textNodeName]}]]>`,i=!1;continue}else if(A===t.commentPropName){o+=n+`<!--${a[A][0][t.textNodeName]}-->`,i=!0;continue}else if(A[0]==="?"){let u=rb(a[":@"],t),m=A==="?xml"?"":n,C=a[A][0][t.textNodeName];C=C.length!==0?" "+C:"",o+=m+`<${A}${C}${u}?>`,i=!0;continue}let l=n;l!==""&&(l+=t.indentBy);let g=rb(a[":@"],t),d=n+`<${A}${g}`,f=nb(a[A],t,c,l);t.unpairedTags.indexOf(A)!==-1?t.suppressUnpairedNode?o+=d+">":o+=d+"/>":(!f||f.length===0)&&t.suppressEmptyNode?o+=d+"/>":f&&f.endsWith(">")?o+=d+`>${f}${n}</${A}>`:(o+=d+">",f&&n!==""&&(f.includes("/>")||f.includes("</"))?o+=n+t.indentBy+f+n:o+=f,o+=`</${A}>`),i=!0}return o}function MJ(e){let t=Object.keys(e);for(let r=0;r<t.length;r++){let n=t[r];if(e.hasOwnProperty(n)&&n!==":@")return n}}function rb(e,t){let r="";if(e&&!t.ignoreAttributes)for(let n in e){if(!e.hasOwnProperty(n))continue;let o=t.attributeValueProcessor(n,e[n]);o=ob(o,t),o===!0&&t.suppressBooleanAttributes?r+=` ${n.substr(t.attributeNamePrefix.length)}`:r+=` ${n.substr(t.attributeNamePrefix.length)}="${o}"`}return r}function UJ(e,t){e=e.substr(0,e.length-t.textNodeName.length-1);let r=e.substr(e.lastIndexOf(".")+1);for(let n in t.stopNodes)if(t.stopNodes[n]===e||t.stopNodes[n]==="*."+r)return!0;return!1}function ob(e,t){if(e&&e.length>0&&t.processEntities)for(let r=0;r<t.entities.length;r++){let n=t.entities[r];e=e.replace(n.regex,n.val)}return e}ib.exports=NJ});var Ab=x((ipe,ab)=>{"use strict";var PJ=sb(),OJ={attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,cdataPropName:!1,format:!1,indentBy:"  ",suppressEmptyNode:!1,suppressUnpairedNode:!0,suppressBooleanAttributes:!0,tagValueProcessor:function(e,t){return t},attributeValueProcessor:function(e,t){return t},preserveOrder:!1,commentPropName:!1,unpairedTags:[],entities:[{regex:new RegExp("&","g"),val:"&amp;"},{regex:new RegExp(">","g"),val:"&gt;"},{regex:new RegExp("<","g"),val:"&lt;"},{regex:new RegExp("'","g"),val:"&apos;"},{regex:new RegExp('"',"g"),val:"&quot;"}],processEntities:!0,stopNodes:[],oneListGroup:!1};function vn(e){this.options=Object.assign({},OJ,e),this.options.ignoreAttributes||this.options.attributesGroupName?this.isAttribute=function(){return!1}:(this.attrPrefixLen=this.options.attributeNamePrefix.length,this.isAttribute=HJ),this.processTextOrObjNode=GJ,this.options.format?(this.indentate=qJ,this.tagEndChar=`>
`,this.newLine=`
`):(this.indentate=function(){return""},this.tagEndChar=">",this.newLine="")}vn.prototype.build=function(e){return this.options.preserveOrder?PJ(e,this.options):(Array.isArray(e)&&this.options.arrayNodeName&&this.options.arrayNodeName.length>1&&(e={[this.options.arrayNodeName]:e}),this.j2x(e,0).val)};vn.prototype.j2x=function(e,t){let r="",n="";for(let o in e)if(Object.prototype.hasOwnProperty.call(e,o))if(typeof e[o]>"u")this.isAttribute(o)&&(n+="");else if(e[o]===null)this.isAttribute(o)?n+="":o[0]==="?"?n+=this.indentate(t)+"<"+o+"?"+this.tagEndChar:n+=this.indentate(t)+"<"+o+"/"+this.tagEndChar;else if(e[o]instanceof Date)n+=this.buildTextValNode(e[o],o,"",t);else if(typeof e[o]!="object"){let i=this.isAttribute(o);if(i)r+=this.buildAttrPairStr(i,""+e[o]);else if(o===this.options.textNodeName){let s=this.options.tagValueProcessor(o,""+e[o]);n+=this.replaceEntitiesValue(s)}else n+=this.buildTextValNode(e[o],o,"",t)}else if(Array.isArray(e[o])){let i=e[o].length,s="",a="";for(let A=0;A<i;A++){let c=e[o][A];if(!(typeof c>"u"))if(c===null)o[0]==="?"?n+=this.indentate(t)+"<"+o+"?"+this.tagEndChar:n+=this.indentate(t)+"<"+o+"/"+this.tagEndChar;else if(typeof c=="object")if(this.options.oneListGroup){let l=this.j2x(c,t+1);s+=l.val,this.options.attributesGroupName&&c.hasOwnProperty(this.options.attributesGroupName)&&(a+=l.attrStr)}else s+=this.processTextOrObjNode(c,o,t);else if(this.options.oneListGroup){let l=this.options.tagValueProcessor(o,c);l=this.replaceEntitiesValue(l),s+=l}else s+=this.buildTextValNode(c,o,"",t)}this.options.oneListGroup&&(s=this.buildObjectNode(s,o,a,t)),n+=s}else if(this.options.attributesGroupName&&o===this.options.attributesGroupName){let i=Object.keys(e[o]),s=i.length;for(let a=0;a<s;a++)r+=this.buildAttrPairStr(i[a],""+e[o][i[a]])}else n+=this.processTextOrObjNode(e[o],o,t);return{attrStr:r,val:n}};vn.prototype.buildAttrPairStr=function(e,t){return t=this.options.attributeValueProcessor(e,""+t),t=this.replaceEntitiesValue(t),this.options.suppressBooleanAttributes&&t==="true"?" "+e:" "+e+'="'+t+'"'};function GJ(e,t,r){let n=this.j2x(e,r+1);return e[this.options.textNodeName]!==void 0&&Object.keys(e).length===1?this.buildTextValNode(e[this.options.textNodeName],t,n.attrStr,r):this.buildObjectNode(n.val,t,n.attrStr,r)}vn.prototype.buildObjectNode=function(e,t,r,n){if(e==="")return t[0]==="?"?this.indentate(n)+"<"+t+r+"?"+this.tagEndChar:this.indentate(n)+"<"+t+r+this.closeTag(t)+this.tagEndChar;{let o="</"+t+this.tagEndChar,i="";return t[0]==="?"&&(i="?",o=""),(r||r==="")&&e.indexOf("<")===-1?this.indentate(n)+"<"+t+r+i+">"+e+o:this.options.commentPropName!==!1&&t===this.options.commentPropName&&i.length===0?this.indentate(n)+`<!--${e}-->`+this.newLine:this.indentate(n)+"<"+t+r+i+this.tagEndChar+e+this.indentate(n)+o}};vn.prototype.closeTag=function(e){let t="";return this.options.unpairedTags.indexOf(e)!==-1?this.options.suppressUnpairedNode||(t="/"):this.options.suppressEmptyNode?t="/":t=`></${e}`,t};vn.prototype.buildTextValNode=function(e,t,r,n){if(this.options.cdataPropName!==!1&&t===this.options.cdataPropName)return this.indentate(n)+`<![CDATA[${e}]]>`+this.newLine;if(this.options.commentPropName!==!1&&t===this.options.commentPropName)return this.indentate(n)+`<!--${e}-->`+this.newLine;if(t[0]==="?")return this.indentate(n)+"<"+t+r+"?"+this.tagEndChar;{let o=this.options.tagValueProcessor(t,e);return o=this.replaceEntitiesValue(o),o===""?this.indentate(n)+"<"+t+r+this.closeTag(t)+this.tagEndChar:this.indentate(n)+"<"+t+r+">"+o+"</"+t+this.tagEndChar}};vn.prototype.replaceEntitiesValue=function(e){if(e&&e.length>0&&this.options.processEntities)for(let t=0;t<this.options.entities.length;t++){let r=this.options.entities[t];e=e.replace(r.regex,r.val)}return e};function qJ(e){return this.options.indentBy.repeat(e)}function HJ(e){return e.startsWith(this.options.attributeNamePrefix)&&e!==this.options.textNodeName?e.substr(this.attrPrefixLen):!1}ab.exports=vn});var lb=x((spe,cb)=>{"use strict";var LJ=eu(),KJ=tb(),JJ=Ab();cb.exports={XMLParser:KJ,XMLValidator:LJ,XMLBuilder:JJ}});var SI=x((qs,wI)=>{(function(e,t){typeof qs=="object"&&typeof wI=="object"?wI.exports=t():typeof define=="function"&&define.amd?define([],t):typeof qs=="object"?qs.bowser=t():e.bowser=t()})(qs,function(){return function(e){var t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=e,r.c=t,r.d=function(n,o,i){r.o(n,o)||Object.defineProperty(n,o,{enumerable:!0,get:i})},r.r=function(n){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(n,"__esModule",{value:!0})},r.t=function(n,o){if(1&o&&(n=r(n)),8&o||4&o&&typeof n=="object"&&n&&n.__esModule)return n;var i=Object.create(null);if(r.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:n}),2&o&&typeof n!="string")for(var s in n)r.d(i,s,function(a){return n[a]}.bind(null,s));return i},r.n=function(n){var o=n&&n.__esModule?function(){return n.default}:function(){return n};return r.d(o,"a",o),o},r.o=function(n,o){return Object.prototype.hasOwnProperty.call(n,o)},r.p="",r(r.s=90)}({17:function(e,t,r){"use strict";t.__esModule=!0,t.default=void 0;var n=r(18),o=function(){function i(){}return i.getFirstMatch=function(s,a){var A=a.match(s);return A&&A.length>0&&A[1]||""},i.getSecondMatch=function(s,a){var A=a.match(s);return A&&A.length>1&&A[2]||""},i.matchAndReturnConst=function(s,a,A){if(s.test(a))return A},i.getWindowsVersionName=function(s){switch(s){case"NT":return"NT";case"XP":return"XP";case"NT 5.0":return"2000";case"NT 5.1":return"XP";case"NT 5.2":return"2003";case"NT 6.0":return"Vista";case"NT 6.1":return"7";case"NT 6.2":return"8";case"NT 6.3":return"8.1";case"NT 10.0":return"10";default:return}},i.getMacOSVersionName=function(s){var a=s.split(".").splice(0,2).map(function(A){return parseInt(A,10)||0});if(a.push(0),a[0]===10)switch(a[1]){case 5:return"Leopard";case 6:return"Snow Leopard";case 7:return"Lion";case 8:return"Mountain Lion";case 9:return"Mavericks";case 10:return"Yosemite";case 11:return"El Capitan";case 12:return"Sierra";case 13:return"High Sierra";case 14:return"Mojave";case 15:return"Catalina";default:return}},i.getAndroidVersionName=function(s){var a=s.split(".").splice(0,2).map(function(A){return parseInt(A,10)||0});if(a.push(0),!(a[0]===1&&a[1]<5))return a[0]===1&&a[1]<6?"Cupcake":a[0]===1&&a[1]>=6?"Donut":a[0]===2&&a[1]<2?"Eclair":a[0]===2&&a[1]===2?"Froyo":a[0]===2&&a[1]>2?"Gingerbread":a[0]===3?"Honeycomb":a[0]===4&&a[1]<1?"Ice Cream Sandwich":a[0]===4&&a[1]<4?"Jelly Bean":a[0]===4&&a[1]>=4?"KitKat":a[0]===5?"Lollipop":a[0]===6?"Marshmallow":a[0]===7?"Nougat":a[0]===8?"Oreo":a[0]===9?"Pie":void 0},i.getVersionPrecision=function(s){return s.split(".").length},i.compareVersions=function(s,a,A){A===void 0&&(A=!1);var c=i.getVersionPrecision(s),l=i.getVersionPrecision(a),g=Math.max(c,l),d=0,f=i.map([s,a],function(u){var m=g-i.getVersionPrecision(u),C=u+new Array(m+1).join(".0");return i.map(C.split("."),function(p){return new Array(20-p.length).join("0")+p}).reverse()});for(A&&(d=g-Math.min(c,l)),g-=1;g>=d;){if(f[0][g]>f[1][g])return 1;if(f[0][g]===f[1][g]){if(g===d)return 0;g-=1}else if(f[0][g]<f[1][g])return-1}},i.map=function(s,a){var A,c=[];if(Array.prototype.map)return Array.prototype.map.call(s,a);for(A=0;A<s.length;A+=1)c.push(a(s[A]));return c},i.find=function(s,a){var A,c;if(Array.prototype.find)return Array.prototype.find.call(s,a);for(A=0,c=s.length;A<c;A+=1){var l=s[A];if(a(l,A))return l}},i.assign=function(s){for(var a,A,c=s,l=arguments.length,g=new Array(l>1?l-1:0),d=1;d<l;d++)g[d-1]=arguments[d];if(Object.assign)return Object.assign.apply(Object,[s].concat(g));var f=function(){var u=g[a];typeof u=="object"&&u!==null&&Object.keys(u).forEach(function(m){c[m]=u[m]})};for(a=0,A=g.length;a<A;a+=1)f();return s},i.getBrowserAlias=function(s){return n.BROWSER_ALIASES_MAP[s]},i.getBrowserTypeByAlias=function(s){return n.BROWSER_MAP[s]||""},i}();t.default=o,e.exports=t.default},18:function(e,t,r){"use strict";t.__esModule=!0,t.ENGINE_MAP=t.OS_MAP=t.PLATFORMS_MAP=t.BROWSER_MAP=t.BROWSER_ALIASES_MAP=void 0,t.BROWSER_ALIASES_MAP={"Amazon Silk":"amazon_silk","Android Browser":"android",Bada:"bada",BlackBerry:"blackberry",Chrome:"chrome",Chromium:"chromium",Electron:"electron",Epiphany:"epiphany",Firefox:"firefox",Focus:"focus",Generic:"generic","Google Search":"google_search",Googlebot:"googlebot","Internet Explorer":"ie","K-Meleon":"k_meleon",Maxthon:"maxthon","Microsoft Edge":"edge","MZ Browser":"mz","NAVER Whale Browser":"naver",Opera:"opera","Opera Coast":"opera_coast",PhantomJS:"phantomjs",Puffin:"puffin",QupZilla:"qupzilla",QQ:"qq",QQLite:"qqlite",Safari:"safari",Sailfish:"sailfish","Samsung Internet for Android":"samsung_internet",SeaMonkey:"seamonkey",Sleipnir:"sleipnir",Swing:"swing",Tizen:"tizen","UC Browser":"uc",Vivaldi:"vivaldi","WebOS Browser":"webos",WeChat:"wechat","Yandex Browser":"yandex",Roku:"roku"},t.BROWSER_MAP={amazon_silk:"Amazon Silk",android:"Android Browser",bada:"Bada",blackberry:"BlackBerry",chrome:"Chrome",chromium:"Chromium",electron:"Electron",epiphany:"Epiphany",firefox:"Firefox",focus:"Focus",generic:"Generic",googlebot:"Googlebot",google_search:"Google Search",ie:"Internet Explorer",k_meleon:"K-Meleon",maxthon:"Maxthon",edge:"Microsoft Edge",mz:"MZ Browser",naver:"NAVER Whale Browser",opera:"Opera",opera_coast:"Opera Coast",phantomjs:"PhantomJS",puffin:"Puffin",qupzilla:"QupZilla",qq:"QQ Browser",qqlite:"QQ Browser Lite",safari:"Safari",sailfish:"Sailfish",samsung_internet:"Samsung Internet for Android",seamonkey:"SeaMonkey",sleipnir:"Sleipnir",swing:"Swing",tizen:"Tizen",uc:"UC Browser",vivaldi:"Vivaldi",webos:"WebOS Browser",wechat:"WeChat",yandex:"Yandex Browser"},t.PLATFORMS_MAP={tablet:"tablet",mobile:"mobile",desktop:"desktop",tv:"tv"},t.OS_MAP={WindowsPhone:"Windows Phone",Windows:"Windows",MacOS:"macOS",iOS:"iOS",Android:"Android",WebOS:"WebOS",BlackBerry:"BlackBerry",Bada:"Bada",Tizen:"Tizen",Linux:"Linux",ChromeOS:"Chrome OS",PlayStation4:"PlayStation 4",Roku:"Roku"},t.ENGINE_MAP={EdgeHTML:"EdgeHTML",Blink:"Blink",Trident:"Trident",Presto:"Presto",Gecko:"Gecko",WebKit:"WebKit"}},90:function(e,t,r){"use strict";t.__esModule=!0,t.default=void 0;var n,o=(n=r(91))&&n.__esModule?n:{default:n},i=r(18);function s(A,c){for(var l=0;l<c.length;l++){var g=c[l];g.enumerable=g.enumerable||!1,g.configurable=!0,"value"in g&&(g.writable=!0),Object.defineProperty(A,g.key,g)}}var a=function(){function A(){}var c,l,g;return A.getParser=function(d,f){if(f===void 0&&(f=!1),typeof d!="string")throw new Error("UserAgent should be a string");return new o.default(d,f)},A.parse=function(d){return new o.default(d).getResult()},c=A,g=[{key:"BROWSER_MAP",get:function(){return i.BROWSER_MAP}},{key:"ENGINE_MAP",get:function(){return i.ENGINE_MAP}},{key:"OS_MAP",get:function(){return i.OS_MAP}},{key:"PLATFORMS_MAP",get:function(){return i.PLATFORMS_MAP}}],(l=null)&&s(c.prototype,l),g&&s(c,g),A}();t.default=a,e.exports=t.default},91:function(e,t,r){"use strict";t.__esModule=!0,t.default=void 0;var n=A(r(92)),o=A(r(93)),i=A(r(94)),s=A(r(95)),a=A(r(17));function A(l){return l&&l.__esModule?l:{default:l}}var c=function(){function l(d,f){if(f===void 0&&(f=!1),d==null||d==="")throw new Error("UserAgent parameter can't be empty");this._ua=d,this.parsedResult={},f!==!0&&this.parse()}var g=l.prototype;return g.getUA=function(){return this._ua},g.test=function(d){return d.test(this._ua)},g.parseBrowser=function(){var d=this;this.parsedResult.browser={};var f=a.default.find(n.default,function(u){if(typeof u.test=="function")return u.test(d);if(u.test instanceof Array)return u.test.some(function(m){return d.test(m)});throw new Error("Browser's test function is not valid")});return f&&(this.parsedResult.browser=f.describe(this.getUA())),this.parsedResult.browser},g.getBrowser=function(){return this.parsedResult.browser?this.parsedResult.browser:this.parseBrowser()},g.getBrowserName=function(d){return d?String(this.getBrowser().name).toLowerCase()||"":this.getBrowser().name||""},g.getBrowserVersion=function(){return this.getBrowser().version},g.getOS=function(){return this.parsedResult.os?this.parsedResult.os:this.parseOS()},g.parseOS=function(){var d=this;this.parsedResult.os={};var f=a.default.find(o.default,function(u){if(typeof u.test=="function")return u.test(d);if(u.test instanceof Array)return u.test.some(function(m){return d.test(m)});throw new Error("Browser's test function is not valid")});return f&&(this.parsedResult.os=f.describe(this.getUA())),this.parsedResult.os},g.getOSName=function(d){var f=this.getOS().name;return d?String(f).toLowerCase()||"":f||""},g.getOSVersion=function(){return this.getOS().version},g.getPlatform=function(){return this.parsedResult.platform?this.parsedResult.platform:this.parsePlatform()},g.getPlatformType=function(d){d===void 0&&(d=!1);var f=this.getPlatform().type;return d?String(f).toLowerCase()||"":f||""},g.parsePlatform=function(){var d=this;this.parsedResult.platform={};var f=a.default.find(i.default,function(u){if(typeof u.test=="function")return u.test(d);if(u.test instanceof Array)return u.test.some(function(m){return d.test(m)});throw new Error("Browser's test function is not valid")});return f&&(this.parsedResult.platform=f.describe(this.getUA())),this.parsedResult.platform},g.getEngine=function(){return this.parsedResult.engine?this.parsedResult.engine:this.parseEngine()},g.getEngineName=function(d){return d?String(this.getEngine().name).toLowerCase()||"":this.getEngine().name||""},g.parseEngine=function(){var d=this;this.parsedResult.engine={};var f=a.default.find(s.default,function(u){if(typeof u.test=="function")return u.test(d);if(u.test instanceof Array)return u.test.some(function(m){return d.test(m)});throw new Error("Browser's test function is not valid")});return f&&(this.parsedResult.engine=f.describe(this.getUA())),this.parsedResult.engine},g.parse=function(){return this.parseBrowser(),this.parseOS(),this.parsePlatform(),this.parseEngine(),this},g.getResult=function(){return a.default.assign({},this.parsedResult)},g.satisfies=function(d){var f=this,u={},m=0,C={},p=0;if(Object.keys(d).forEach(function(P){var S=d[P];typeof S=="string"?(C[P]=S,p+=1):typeof S=="object"&&(u[P]=S,m+=1)}),m>0){var Q=Object.keys(u),v=a.default.find(Q,function(P){return f.isOS(P)});if(v){var E=this.satisfies(u[v]);if(E!==void 0)return E}var w=a.default.find(Q,function(P){return f.isPlatform(P)});if(w){var B=this.satisfies(u[w]);if(B!==void 0)return B}}if(p>0){var y=Object.keys(C),T=a.default.find(y,function(P){return f.isBrowser(P,!0)});if(T!==void 0)return this.compareVersion(C[T])}},g.isBrowser=function(d,f){f===void 0&&(f=!1);var u=this.getBrowserName().toLowerCase(),m=d.toLowerCase(),C=a.default.getBrowserTypeByAlias(m);return f&&C&&(m=C.toLowerCase()),m===u},g.compareVersion=function(d){var f=[0],u=d,m=!1,C=this.getBrowserVersion();if(typeof C=="string")return d[0]===">"||d[0]==="<"?(u=d.substr(1),d[1]==="="?(m=!0,u=d.substr(2)):f=[],d[0]===">"?f.push(1):f.push(-1)):d[0]==="="?u=d.substr(1):d[0]==="~"&&(m=!0,u=d.substr(1)),f.indexOf(a.default.compareVersions(C,u,m))>-1},g.isOS=function(d){return this.getOSName(!0)===String(d).toLowerCase()},g.isPlatform=function(d){return this.getPlatformType(!0)===String(d).toLowerCase()},g.isEngine=function(d){return this.getEngineName(!0)===String(d).toLowerCase()},g.is=function(d,f){return f===void 0&&(f=!1),this.isBrowser(d,f)||this.isOS(d)||this.isPlatform(d)},g.some=function(d){var f=this;return d===void 0&&(d=[]),d.some(function(u){return f.is(u)})},l}();t.default=c,e.exports=t.default},92:function(e,t,r){"use strict";t.__esModule=!0,t.default=void 0;var n,o=(n=r(17))&&n.__esModule?n:{default:n},i=/version\/(\d+(\.?_?\d+)+)/i,s=[{test:[/googlebot/i],describe:function(a){var A={name:"Googlebot"},c=o.default.getFirstMatch(/googlebot\/(\d+(\.\d+))/i,a)||o.default.getFirstMatch(i,a);return c&&(A.version=c),A}},{test:[/opera/i],describe:function(a){var A={name:"Opera"},c=o.default.getFirstMatch(i,a)||o.default.getFirstMatch(/(?:opera)[\s/](\d+(\.?_?\d+)+)/i,a);return c&&(A.version=c),A}},{test:[/opr\/|opios/i],describe:function(a){var A={name:"Opera"},c=o.default.getFirstMatch(/(?:opr|opios)[\s/](\S+)/i,a)||o.default.getFirstMatch(i,a);return c&&(A.version=c),A}},{test:[/SamsungBrowser/i],describe:function(a){var A={name:"Samsung Internet for Android"},c=o.default.getFirstMatch(i,a)||o.default.getFirstMatch(/(?:SamsungBrowser)[\s/](\d+(\.?_?\d+)+)/i,a);return c&&(A.version=c),A}},{test:[/Whale/i],describe:function(a){var A={name:"NAVER Whale Browser"},c=o.default.getFirstMatch(i,a)||o.default.getFirstMatch(/(?:whale)[\s/](\d+(?:\.\d+)+)/i,a);return c&&(A.version=c),A}},{test:[/MZBrowser/i],describe:function(a){var A={name:"MZ Browser"},c=o.default.getFirstMatch(/(?:MZBrowser)[\s/](\d+(?:\.\d+)+)/i,a)||o.default.getFirstMatch(i,a);return c&&(A.version=c),A}},{test:[/focus/i],describe:function(a){var A={name:"Focus"},c=o.default.getFirstMatch(/(?:focus)[\s/](\d+(?:\.\d+)+)/i,a)||o.default.getFirstMatch(i,a);return c&&(A.version=c),A}},{test:[/swing/i],describe:function(a){var A={name:"Swing"},c=o.default.getFirstMatch(/(?:swing)[\s/](\d+(?:\.\d+)+)/i,a)||o.default.getFirstMatch(i,a);return c&&(A.version=c),A}},{test:[/coast/i],describe:function(a){var A={name:"Opera Coast"},c=o.default.getFirstMatch(i,a)||o.default.getFirstMatch(/(?:coast)[\s/](\d+(\.?_?\d+)+)/i,a);return c&&(A.version=c),A}},{test:[/opt\/\d+(?:.?_?\d+)+/i],describe:function(a){var A={name:"Opera Touch"},c=o.default.getFirstMatch(/(?:opt)[\s/](\d+(\.?_?\d+)+)/i,a)||o.default.getFirstMatch(i,a);return c&&(A.version=c),A}},{test:[/yabrowser/i],describe:function(a){var A={name:"Yandex Browser"},c=o.default.getFirstMatch(/(?:yabrowser)[\s/](\d+(\.?_?\d+)+)/i,a)||o.default.getFirstMatch(i,a);return c&&(A.version=c),A}},{test:[/ucbrowser/i],describe:function(a){var A={name:"UC Browser"},c=o.default.getFirstMatch(i,a)||o.default.getFirstMatch(/(?:ucbrowser)[\s/](\d+(\.?_?\d+)+)/i,a);return c&&(A.version=c),A}},{test:[/Maxthon|mxios/i],describe:function(a){var A={name:"Maxthon"},c=o.default.getFirstMatch(i,a)||o.default.getFirstMatch(/(?:Maxthon|mxios)[\s/](\d+(\.?_?\d+)+)/i,a);return c&&(A.version=c),A}},{test:[/epiphany/i],describe:function(a){var A={name:"Epiphany"},c=o.default.getFirstMatch(i,a)||o.default.getFirstMatch(/(?:epiphany)[\s/](\d+(\.?_?\d+)+)/i,a);return c&&(A.version=c),A}},{test:[/puffin/i],describe:function(a){var A={name:"Puffin"},c=o.default.getFirstMatch(i,a)||o.default.getFirstMatch(/(?:puffin)[\s/](\d+(\.?_?\d+)+)/i,a);return c&&(A.version=c),A}},{test:[/sleipnir/i],describe:function(a){var A={name:"Sleipnir"},c=o.default.getFirstMatch(i,a)||o.default.getFirstMatch(/(?:sleipnir)[\s/](\d+(\.?_?\d+)+)/i,a);return c&&(A.version=c),A}},{test:[/k-meleon/i],describe:function(a){var A={name:"K-Meleon"},c=o.default.getFirstMatch(i,a)||o.default.getFirstMatch(/(?:k-meleon)[\s/](\d+(\.?_?\d+)+)/i,a);return c&&(A.version=c),A}},{test:[/micromessenger/i],describe:function(a){var A={name:"WeChat"},c=o.default.getFirstMatch(/(?:micromessenger)[\s/](\d+(\.?_?\d+)+)/i,a)||o.default.getFirstMatch(i,a);return c&&(A.version=c),A}},{test:[/qqbrowser/i],describe:function(a){var A={name:/qqbrowserlite/i.test(a)?"QQ Browser Lite":"QQ Browser"},c=o.default.getFirstMatch(/(?:qqbrowserlite|qqbrowser)[/](\d+(\.?_?\d+)+)/i,a)||o.default.getFirstMatch(i,a);return c&&(A.version=c),A}},{test:[/msie|trident/i],describe:function(a){var A={name:"Internet Explorer"},c=o.default.getFirstMatch(/(?:msie |rv:)(\d+(\.?_?\d+)+)/i,a);return c&&(A.version=c),A}},{test:[/\sedg\//i],describe:function(a){var A={name:"Microsoft Edge"},c=o.default.getFirstMatch(/\sedg\/(\d+(\.?_?\d+)+)/i,a);return c&&(A.version=c),A}},{test:[/edg([ea]|ios)/i],describe:function(a){var A={name:"Microsoft Edge"},c=o.default.getSecondMatch(/edg([ea]|ios)\/(\d+(\.?_?\d+)+)/i,a);return c&&(A.version=c),A}},{test:[/vivaldi/i],describe:function(a){var A={name:"Vivaldi"},c=o.default.getFirstMatch(/vivaldi\/(\d+(\.?_?\d+)+)/i,a);return c&&(A.version=c),A}},{test:[/seamonkey/i],describe:function(a){var A={name:"SeaMonkey"},c=o.default.getFirstMatch(/seamonkey\/(\d+(\.?_?\d+)+)/i,a);return c&&(A.version=c),A}},{test:[/sailfish/i],describe:function(a){var A={name:"Sailfish"},c=o.default.getFirstMatch(/sailfish\s?browser\/(\d+(\.\d+)?)/i,a);return c&&(A.version=c),A}},{test:[/silk/i],describe:function(a){var A={name:"Amazon Silk"},c=o.default.getFirstMatch(/silk\/(\d+(\.?_?\d+)+)/i,a);return c&&(A.version=c),A}},{test:[/phantom/i],describe:function(a){var A={name:"PhantomJS"},c=o.default.getFirstMatch(/phantomjs\/(\d+(\.?_?\d+)+)/i,a);return c&&(A.version=c),A}},{test:[/slimerjs/i],describe:function(a){var A={name:"SlimerJS"},c=o.default.getFirstMatch(/slimerjs\/(\d+(\.?_?\d+)+)/i,a);return c&&(A.version=c),A}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe:function(a){var A={name:"BlackBerry"},c=o.default.getFirstMatch(i,a)||o.default.getFirstMatch(/blackberry[\d]+\/(\d+(\.?_?\d+)+)/i,a);return c&&(A.version=c),A}},{test:[/(web|hpw)[o0]s/i],describe:function(a){var A={name:"WebOS Browser"},c=o.default.getFirstMatch(i,a)||o.default.getFirstMatch(/w(?:eb)?[o0]sbrowser\/(\d+(\.?_?\d+)+)/i,a);return c&&(A.version=c),A}},{test:[/bada/i],describe:function(a){var A={name:"Bada"},c=o.default.getFirstMatch(/dolfin\/(\d+(\.?_?\d+)+)/i,a);return c&&(A.version=c),A}},{test:[/tizen/i],describe:function(a){var A={name:"Tizen"},c=o.default.getFirstMatch(/(?:tizen\s?)?browser\/(\d+(\.?_?\d+)+)/i,a)||o.default.getFirstMatch(i,a);return c&&(A.version=c),A}},{test:[/qupzilla/i],describe:function(a){var A={name:"QupZilla"},c=o.default.getFirstMatch(/(?:qupzilla)[\s/](\d+(\.?_?\d+)+)/i,a)||o.default.getFirstMatch(i,a);return c&&(A.version=c),A}},{test:[/firefox|iceweasel|fxios/i],describe:function(a){var A={name:"Firefox"},c=o.default.getFirstMatch(/(?:firefox|iceweasel|fxios)[\s/](\d+(\.?_?\d+)+)/i,a);return c&&(A.version=c),A}},{test:[/electron/i],describe:function(a){var A={name:"Electron"},c=o.default.getFirstMatch(/(?:electron)\/(\d+(\.?_?\d+)+)/i,a);return c&&(A.version=c),A}},{test:[/MiuiBrowser/i],describe:function(a){var A={name:"Miui"},c=o.default.getFirstMatch(/(?:MiuiBrowser)[\s/](\d+(\.?_?\d+)+)/i,a);return c&&(A.version=c),A}},{test:[/chromium/i],describe:function(a){var A={name:"Chromium"},c=o.default.getFirstMatch(/(?:chromium)[\s/](\d+(\.?_?\d+)+)/i,a)||o.default.getFirstMatch(i,a);return c&&(A.version=c),A}},{test:[/chrome|crios|crmo/i],describe:function(a){var A={name:"Chrome"},c=o.default.getFirstMatch(/(?:chrome|crios|crmo)\/(\d+(\.?_?\d+)+)/i,a);return c&&(A.version=c),A}},{test:[/GSA/i],describe:function(a){var A={name:"Google Search"},c=o.default.getFirstMatch(/(?:GSA)\/(\d+(\.?_?\d+)+)/i,a);return c&&(A.version=c),A}},{test:function(a){var A=!a.test(/like android/i),c=a.test(/android/i);return A&&c},describe:function(a){var A={name:"Android Browser"},c=o.default.getFirstMatch(i,a);return c&&(A.version=c),A}},{test:[/playstation 4/i],describe:function(a){var A={name:"PlayStation 4"},c=o.default.getFirstMatch(i,a);return c&&(A.version=c),A}},{test:[/safari|applewebkit/i],describe:function(a){var A={name:"Safari"},c=o.default.getFirstMatch(i,a);return c&&(A.version=c),A}},{test:[/.*/i],describe:function(a){var A=a.search("\\(")!==-1?/^(.*)\/(.*)[ \t]\((.*)/:/^(.*)\/(.*) /;return{name:o.default.getFirstMatch(A,a),version:o.default.getSecondMatch(A,a)}}}];t.default=s,e.exports=t.default},93:function(e,t,r){"use strict";t.__esModule=!0,t.default=void 0;var n,o=(n=r(17))&&n.__esModule?n:{default:n},i=r(18),s=[{test:[/Roku\/DVP/],describe:function(a){var A=o.default.getFirstMatch(/Roku\/DVP-(\d+\.\d+)/i,a);return{name:i.OS_MAP.Roku,version:A}}},{test:[/windows phone/i],describe:function(a){var A=o.default.getFirstMatch(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i,a);return{name:i.OS_MAP.WindowsPhone,version:A}}},{test:[/windows /i],describe:function(a){var A=o.default.getFirstMatch(/Windows ((NT|XP)( \d\d?.\d)?)/i,a),c=o.default.getWindowsVersionName(A);return{name:i.OS_MAP.Windows,version:A,versionName:c}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe:function(a){var A={name:i.OS_MAP.iOS},c=o.default.getSecondMatch(/(Version\/)(\d[\d.]+)/,a);return c&&(A.version=c),A}},{test:[/macintosh/i],describe:function(a){var A=o.default.getFirstMatch(/mac os x (\d+(\.?_?\d+)+)/i,a).replace(/[_\s]/g,"."),c=o.default.getMacOSVersionName(A),l={name:i.OS_MAP.MacOS,version:A};return c&&(l.versionName=c),l}},{test:[/(ipod|iphone|ipad)/i],describe:function(a){var A=o.default.getFirstMatch(/os (\d+([_\s]\d+)*) like mac os x/i,a).replace(/[_\s]/g,".");return{name:i.OS_MAP.iOS,version:A}}},{test:function(a){var A=!a.test(/like android/i),c=a.test(/android/i);return A&&c},describe:function(a){var A=o.default.getFirstMatch(/android[\s/-](\d+(\.\d+)*)/i,a),c=o.default.getAndroidVersionName(A),l={name:i.OS_MAP.Android,version:A};return c&&(l.versionName=c),l}},{test:[/(web|hpw)[o0]s/i],describe:function(a){var A=o.default.getFirstMatch(/(?:web|hpw)[o0]s\/(\d+(\.\d+)*)/i,a),c={name:i.OS_MAP.WebOS};return A&&A.length&&(c.version=A),c}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe:function(a){var A=o.default.getFirstMatch(/rim\stablet\sos\s(\d+(\.\d+)*)/i,a)||o.default.getFirstMatch(/blackberry\d+\/(\d+([_\s]\d+)*)/i,a)||o.default.getFirstMatch(/\bbb(\d+)/i,a);return{name:i.OS_MAP.BlackBerry,version:A}}},{test:[/bada/i],describe:function(a){var A=o.default.getFirstMatch(/bada\/(\d+(\.\d+)*)/i,a);return{name:i.OS_MAP.Bada,version:A}}},{test:[/tizen/i],describe:function(a){var A=o.default.getFirstMatch(/tizen[/\s](\d+(\.\d+)*)/i,a);return{name:i.OS_MAP.Tizen,version:A}}},{test:[/linux/i],describe:function(){return{name:i.OS_MAP.Linux}}},{test:[/CrOS/],describe:function(){return{name:i.OS_MAP.ChromeOS}}},{test:[/PlayStation 4/],describe:function(a){var A=o.default.getFirstMatch(/PlayStation 4[/\s](\d+(\.\d+)*)/i,a);return{name:i.OS_MAP.PlayStation4,version:A}}}];t.default=s,e.exports=t.default},94:function(e,t,r){"use strict";t.__esModule=!0,t.default=void 0;var n,o=(n=r(17))&&n.__esModule?n:{default:n},i=r(18),s=[{test:[/googlebot/i],describe:function(){return{type:"bot",vendor:"Google"}}},{test:[/huawei/i],describe:function(a){var A=o.default.getFirstMatch(/(can-l01)/i,a)&&"Nova",c={type:i.PLATFORMS_MAP.mobile,vendor:"Huawei"};return A&&(c.model=A),c}},{test:[/nexus\s*(?:7|8|9|10).*/i],describe:function(){return{type:i.PLATFORMS_MAP.tablet,vendor:"Nexus"}}},{test:[/ipad/i],describe:function(){return{type:i.PLATFORMS_MAP.tablet,vendor:"Apple",model:"iPad"}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe:function(){return{type:i.PLATFORMS_MAP.tablet,vendor:"Apple",model:"iPad"}}},{test:[/kftt build/i],describe:function(){return{type:i.PLATFORMS_MAP.tablet,vendor:"Amazon",model:"Kindle Fire HD 7"}}},{test:[/silk/i],describe:function(){return{type:i.PLATFORMS_MAP.tablet,vendor:"Amazon"}}},{test:[/tablet(?! pc)/i],describe:function(){return{type:i.PLATFORMS_MAP.tablet}}},{test:function(a){var A=a.test(/ipod|iphone/i),c=a.test(/like (ipod|iphone)/i);return A&&!c},describe:function(a){var A=o.default.getFirstMatch(/(ipod|iphone)/i,a);return{type:i.PLATFORMS_MAP.mobile,vendor:"Apple",model:A}}},{test:[/nexus\s*[0-6].*/i,/galaxy nexus/i],describe:function(){return{type:i.PLATFORMS_MAP.mobile,vendor:"Nexus"}}},{test:[/[^-]mobi/i],describe:function(){return{type:i.PLATFORMS_MAP.mobile}}},{test:function(a){return a.getBrowserName(!0)==="blackberry"},describe:function(){return{type:i.PLATFORMS_MAP.mobile,vendor:"BlackBerry"}}},{test:function(a){return a.getBrowserName(!0)==="bada"},describe:function(){return{type:i.PLATFORMS_MAP.mobile}}},{test:function(a){return a.getBrowserName()==="windows phone"},describe:function(){return{type:i.PLATFORMS_MAP.mobile,vendor:"Microsoft"}}},{test:function(a){var A=Number(String(a.getOSVersion()).split(".")[0]);return a.getOSName(!0)==="android"&&A>=3},describe:function(){return{type:i.PLATFORMS_MAP.tablet}}},{test:function(a){return a.getOSName(!0)==="android"},describe:function(){return{type:i.PLATFORMS_MAP.mobile}}},{test:function(a){return a.getOSName(!0)==="macos"},describe:function(){return{type:i.PLATFORMS_MAP.desktop,vendor:"Apple"}}},{test:function(a){return a.getOSName(!0)==="windows"},describe:function(){return{type:i.PLATFORMS_MAP.desktop}}},{test:function(a){return a.getOSName(!0)==="linux"},describe:function(){return{type:i.PLATFORMS_MAP.desktop}}},{test:function(a){return a.getOSName(!0)==="playstation 4"},describe:function(){return{type:i.PLATFORMS_MAP.tv}}},{test:function(a){return a.getOSName(!0)==="roku"},describe:function(){return{type:i.PLATFORMS_MAP.tv}}}];t.default=s,e.exports=t.default},95:function(e,t,r){"use strict";t.__esModule=!0,t.default=void 0;var n,o=(n=r(17))&&n.__esModule?n:{default:n},i=r(18),s=[{test:function(a){return a.getBrowserName(!0)==="microsoft edge"},describe:function(a){if(/\sedg\//i.test(a))return{name:i.ENGINE_MAP.Blink};var A=o.default.getFirstMatch(/edge\/(\d+(\.?_?\d+)+)/i,a);return{name:i.ENGINE_MAP.EdgeHTML,version:A}}},{test:[/trident/i],describe:function(a){var A={name:i.ENGINE_MAP.Trident},c=o.default.getFirstMatch(/trident\/(\d+(\.?_?\d+)+)/i,a);return c&&(A.version=c),A}},{test:function(a){return a.test(/presto/i)},describe:function(a){var A={name:i.ENGINE_MAP.Presto},c=o.default.getFirstMatch(/presto\/(\d+(\.?_?\d+)+)/i,a);return c&&(A.version=c),A}},{test:function(a){var A=a.test(/gecko/i),c=a.test(/like gecko/i);return A&&!c},describe:function(a){var A={name:i.ENGINE_MAP.Gecko},c=o.default.getFirstMatch(/gecko\/(\d+(\.?_?\d+)+)/i,a);return c&&(A.version=c),A}},{test:[/(apple)?webkit\/537\.36/i],describe:function(){return{name:i.ENGINE_MAP.Blink}}},{test:[/(apple)?webkit/i],describe:function(a){var A={name:i.ENGINE_MAP.WebKit},c=o.default.getFirstMatch(/webkit\/(\d+(\.?_?\d+)+)/i,a);return c&&(A.version=c),A}}];t.default=s,e.exports=t.default}})})});var EF=x(le=>{"use strict";var Ks=Symbol.for("react.element"),hz=Symbol.for("react.portal"),Cz=Symbol.for("react.fragment"),Bz=Symbol.for("react.strict_mode"),Ez=Symbol.for("react.profiler"),yz=Symbol.for("react.provider"),Qz=Symbol.for("react.context"),wz=Symbol.for("react.forward_ref"),Sz=Symbol.for("react.suspense"),xz=Symbol.for("react.memo"),bz=Symbol.for("react.lazy"),gF=Symbol.iterator;function kz(e){return e===null||typeof e!="object"?null:(e=gF&&e[gF]||e["@@iterator"],typeof e=="function"?e:null)}var uF={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},IF=Object.assign,pF={};function xi(e,t,r){this.props=e,this.context=t,this.refs=pF,this.updater=r||uF}xi.prototype.isReactComponent={};xi.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};xi.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function mF(){}mF.prototype=xi.prototype;function RI(e,t,r){this.props=e,this.context=t,this.refs=pF,this.updater=r||uF}var TI=RI.prototype=new mF;TI.constructor=RI;IF(TI,xi.prototype);TI.isPureReactComponent=!0;var dF=Array.isArray,hF=Object.prototype.hasOwnProperty,NI={current:null},CF={key:!0,ref:!0,__self:!0,__source:!0};function BF(e,t,r){var n,o={},i=null,s=null;if(t!=null)for(n in t.ref!==void 0&&(s=t.ref),t.key!==void 0&&(i=""+t.key),t)hF.call(t,n)&&!CF.hasOwnProperty(n)&&(o[n]=t[n]);var a=arguments.length-2;if(a===1)o.children=r;else if(1<a){for(var A=Array(a),c=0;c<a;c++)A[c]=arguments[c+2];o.children=A}if(e&&e.defaultProps)for(n in a=e.defaultProps,a)o[n]===void 0&&(o[n]=a[n]);return{$$typeof:Ks,type:e,key:i,ref:s,props:o,_owner:NI.current}}function Dz(e,t){return{$$typeof:Ks,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function MI(e){return typeof e=="object"&&e!==null&&e.$$typeof===Ks}function _z(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var fF=/\/+/g;function vI(e,t){return typeof e=="object"&&e!==null&&e.key!=null?_z(""+e.key):t.toString(36)}function _l(e,t,r,n,o){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var s=!1;if(e===null)s=!0;else switch(i){case"string":case"number":s=!0;break;case"object":switch(e.$$typeof){case Ks:case hz:s=!0}}if(s)return s=e,o=o(s),e=n===""?"."+vI(s,0):n,dF(o)?(r="",e!=null&&(r=e.replace(fF,"$&/")+"/"),_l(o,t,r,"",function(c){return c})):o!=null&&(MI(o)&&(o=Dz(o,r+(!o.key||s&&s.key===o.key?"":(""+o.key).replace(fF,"$&/")+"/")+e)),t.push(o)),1;if(s=0,n=n===""?".":n+":",dF(e))for(var a=0;a<e.length;a++){i=e[a];var A=n+vI(i,a);s+=_l(i,t,r,A,o)}else if(A=kz(e),typeof A=="function")for(e=A.call(e),a=0;!(i=e.next()).done;)i=i.value,A=n+vI(i,a++),s+=_l(i,t,r,A,o);else if(i==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return s}function Dl(e,t,r){if(e==null)return e;var n=[],o=0;return _l(e,n,"","",function(i){return t.call(r,i,o++)}),n}function Fz(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var yt={current:null},Fl={transition:null},vz={ReactCurrentDispatcher:yt,ReactCurrentBatchConfig:Fl,ReactCurrentOwner:NI};le.Children={map:Dl,forEach:function(e,t,r){Dl(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return Dl(e,function(){t++}),t},toArray:function(e){return Dl(e,function(t){return t})||[]},only:function(e){if(!MI(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};le.Component=xi;le.Fragment=Cz;le.Profiler=Ez;le.PureComponent=RI;le.StrictMode=Bz;le.Suspense=Sz;le.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=vz;le.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var n=IF({},e.props),o=e.key,i=e.ref,s=e._owner;if(t!=null){if(t.ref!==void 0&&(i=t.ref,s=NI.current),t.key!==void 0&&(o=""+t.key),e.type&&e.type.defaultProps)var a=e.type.defaultProps;for(A in t)hF.call(t,A)&&!CF.hasOwnProperty(A)&&(n[A]=t[A]===void 0&&a!==void 0?a[A]:t[A])}var A=arguments.length-2;if(A===1)n.children=r;else if(1<A){a=Array(A);for(var c=0;c<A;c++)a[c]=arguments[c+2];n.children=a}return{$$typeof:Ks,type:e.type,key:o,ref:i,props:n,_owner:s}};le.createContext=function(e){return e={$$typeof:Qz,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:yz,_context:e},e.Consumer=e};le.createElement=BF;le.createFactory=function(e){var t=BF.bind(null,e);return t.type=e,t};le.createRef=function(){return{current:null}};le.forwardRef=function(e){return{$$typeof:wz,render:e}};le.isValidElement=MI;le.lazy=function(e){return{$$typeof:bz,_payload:{_status:-1,_result:e},_init:Fz}};le.memo=function(e,t){return{$$typeof:xz,type:e,compare:t===void 0?null:t}};le.startTransition=function(e){var t=Fl.transition;Fl.transition={};try{e()}finally{Fl.transition=t}};le.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};le.useCallback=function(e,t){return yt.current.useCallback(e,t)};le.useContext=function(e){return yt.current.useContext(e)};le.useDebugValue=function(){};le.useDeferredValue=function(e){return yt.current.useDeferredValue(e)};le.useEffect=function(e,t){return yt.current.useEffect(e,t)};le.useId=function(){return yt.current.useId()};le.useImperativeHandle=function(e,t,r){return yt.current.useImperativeHandle(e,t,r)};le.useInsertionEffect=function(e,t){return yt.current.useInsertionEffect(e,t)};le.useLayoutEffect=function(e,t){return yt.current.useLayoutEffect(e,t)};le.useMemo=function(e,t){return yt.current.useMemo(e,t)};le.useReducer=function(e,t,r){return yt.current.useReducer(e,t,r)};le.useRef=function(e){return yt.current.useRef(e)};le.useState=function(e){return yt.current.useState(e)};le.useSyncExternalStore=function(e,t,r){return yt.current.useSyncExternalStore(e,t,r)};le.useTransition=function(){return yt.current.useTransition()};le.version="18.2.0"});var UI=x((nFe,yF)=>{"use strict";yF.exports=EF()});var kj=V(kh()),Dj=V(Fh()),_j=V(Mh()),Fj=V(Oh()),vj=V(Hh()),Rj=V(Vh()),Tj=V(gB()),Nj=V(mB()),Mj=V(CB()),BB=AbortSignal.any||function(t){let r=new AbortController;if(t.length===0)return r.signal;let n=t.find(i=>i.aborted);if(n)return r.abort(n.reason),r.signal;let o=function(){r.abort(this.reason)};for(let i of t)i.addEventListener("abort",o,{once:!0,signal:r.signal});return r.signal},EB=AbortSignal.timeout||function(t){let r=new AbortController;return setTimeout(()=>{r.abort(new DOMException("Timeout","TimeoutError"))},t),r.signal};var LU=[Error,EvalError,RangeError,ReferenceError,SyntaxError,TypeError,URIError,AggregateError,globalThis.DOMException,globalThis.AssertionError,globalThis.SystemError].filter(Boolean).map(e=>[e.name,e]),yB=new Map(LU);var sd=class e extends Error{name="NonError";constructor(t){super(e._prepareSuperMessage(t))}static _prepareSuperMessage(t){try{return JSON.stringify(t)}catch{return String(t)}}},KU=[{property:"name",enumerable:!1},{property:"message",enumerable:!1},{property:"stack",enumerable:!1},{property:"code",enumerable:!0},{property:"cause",enumerable:!1},{property:"errors",enumerable:!1}],ad=new WeakSet,JU=e=>{ad.add(e);let t=e.toJSON();return ad.delete(e),t},wB=e=>{let t=yB.get(e)??Error;return t===AggregateError?new t([]):new t},Ad=({from:e,seen:t,to:r,forceEnumerable:n,maxDepth:o,depth:i,useToJSON:s,serialize:a})=>{if(r||(Array.isArray(e)?r=[]:!a&&QB(e)?r=wB(e.name):r={}),t.push(e),i>=o)return r;if(s&&typeof e.toJSON=="function"&&!ad.has(e))return JU(e);let A=c=>Ad({from:c,seen:[...t],forceEnumerable:n,maxDepth:o,depth:i,useToJSON:s,serialize:a});for(let[c,l]of Object.entries(e)){if(l&&l instanceof Uint8Array&&l.constructor.name==="Buffer"){r[c]="[object Buffer]";continue}if(l!==null&&typeof l=="object"&&typeof l.pipe=="function"){r[c]="[object Stream]";continue}if(typeof l!="function"){if(!l||typeof l!="object"){try{r[c]=l}catch{}continue}if(!t.includes(e[c])){i++,r[c]=A(e[c]);continue}r[c]="[Circular]"}}if(a||r instanceof Error)for(let{property:c,enumerable:l}of KU)e[c]!==void 0&&e[c]!==null&&Object.defineProperty(r,c,{value:QB(e[c])||Array.isArray(e[c])?A(e[c]):e[c],enumerable:n?!0:l,configurable:!0,writable:!0});return r};function Ln(e,t={}){let{maxDepth:r=Number.POSITIVE_INFINITY,useToJSON:n=!0}=t;return typeof e=="object"&&e!==null?Ad({from:e,seen:[],forceEnumerable:!0,maxDepth:r,depth:0,useToJSON:n,serialize:!0}):typeof e=="function"?`[Function: ${e.name||"anonymous"}]`:e}function SB(e,t={}){let{maxDepth:r=Number.POSITIVE_INFINITY}=t;return e instanceof Error?e:VU(e)?Ad({from:e,seen:[],to:wB(e.name),maxDepth:r,depth:0,serialize:!1}):new sd(e)}function QB(e){return!!e&&typeof e=="object"&&typeof e.name=="string"&&typeof e.message=="string"&&typeof e.stack=="string"}function VU(e){return!!e&&typeof e=="object"&&typeof e.message=="string"&&!Array.isArray(e)}var Ot=V(Ae());var kB=V(Ae()),ld=kB.default.runtime.getManifest(),Ve=ld.version_name===ld.version+"-e",DB="Sider";var Yi=Ve?"dhoenijjpgpeimemopealfcbiecgceod":"difoiogjjojoaoomphldepapgpbgkhkb",va=`ChitChat_${Ve?"Edge":"Chrome"}_Ext`,at=ld.version,_B=["gpmljinohlbfgmeoaeceoajachkabijo","nlipoenfbbikpbjkfpfillcgkoblgpmj"];var FB=["translate"];var vB={name:"Robot",avatar:"",gender:"unknown",platform:"system",requireVIP:!1};var gd="gpt-4o-mini",zU={dev:"",test:"",preview:"https://preview.sider.ai",prod:"https://sider.ai"},YU={dev:"",test:"",preview:"sider.ai",prod:"sider.ai"},bB=zU.prod,fe={origin:bB,api:`${bB}/api`,domain:YU.prod},RB="https://www.google-analytics.com/mp/collect",TB="G-0PRFKME4HP";var NB="6FX_tIISST2SsnSx29yQRg";var Xt={English:"en","Chinese(Simplified)":"zh_CN","Chinese(Traditional)":"zh_TW",Spanish:"es",French:"fr",Japanese:"ja",German:"de",Portuguese:"pt",Arabic:"ar",Russian:"ru",Italian:"it",Korean:"ko",Hindi:"hi",Dutch:"nl",Polish:"pl",Amharic:"am",Bulgarian:"bg",Bengali:"bn",Catalan:"ca",Czech:"cs",Danish:"da",Greek:"el",Estonian:"et",Persian:"fa",Finnish:"fi",Filipino:"fil",Gujarati:"gu",Hebrew:"he",Croatian:"hr",Hungarian:"hu",Indonesian:"id",Kannada:"kn",Lithuanian:"lt",Latvian:"lv",Malayalam:"ml",Marathi:"mr",Malay:"ms",Norwegian:"no",Romanian:"ro",Slovak:"sk",Slovenian:"sl",Serbian:"sr",Swedish:"sv",Swahili:"sw",Tamil:"ta",Telugu:"te",Thai:"th",Turkish:"tr",Ukrainian:"uk",Urdu:"ur",Vietnamese:"vi"},WU={English:"en","English (Australia)":"en_AU","English (Canada)":"en_CA","English (India)":"en_IN","English (UK)":"en_UK","English (US)":"en_US","Chinese (Simplified)":"zh_CN","Chinese (Traditional)":"zh_TW",Spanish:"es","Spanish (Argentina)":"es_AR","Spanish (Colombia)":"es_CO","Spanish (Spain)":"es_ES","Spanish (Mexico)":"es_MX",French:"fr",Japanese:"ja",German:"de",Portuguese:"pt","Portuguese (Brazil)":"pt_BR","Portuguese (Portugal)":"pt_PT",Arabic:"ar","Arabic (Egypt)":"ar_EG","Arabic (Saudi)":"ar_SA",Russian:"ru",Italian:"it",Korean:"ko",Hindi:"hi",Dutch:"nl",Polish:"pl",Amharic:"am",Bengali:"bn",Bulgarian:"bg",Catalan:"ca",Croatian:"hr",Czech:"cs",Danish:"da",Estonian:"et",Filipino:"fil",Finnish:"fi",Greek:"el",Gujarati:"gu",Hebrew:"he",Hungarian:"hu",Indonesian:"id",Kannada:"kn",Latvian:"lv",Lithuanian:"lt",Malay:"ms",Malayalam:"ml",Marathi:"mr",Norwegian:"no",Persian:"fa",Romanian:"ro",Serbian:"sr",Slovak:"sk",Slovenian:"sl",Swahili:"sw",Swedish:"sv",Tamil:"ta",Telugu:"te",Thai:"th",Turkish:"tr",Ukrainian:"uk",Urdu:"ur",Vietnamese:"vi"};var dd=Object.entries(Xt).reduce((e,[t,r])=>(e[r]=t,e),{}),Ra=Object.entries(WU).reduce((e,[t,r])=>(e[r]=t,e),{});var Wi="provider:siderApi",qj=`${Wi}:SelectedModels`;var fd=["deepseek-reasoner","claude-3.7-sonnet-think","o3-mini","o1","deepseek-r1-distill-llama-70b"];var Or={login:`${fe.origin}/login`,openaiChat:"https://chatgpt.com",openaiLogin:"https://platform.openai.com/login",openaiSignup:"https://platform.openai.com/signup",openaiApiKey:"https://platform.openai.com/account/api-keys",openaiApiSession:"https://chatgpt.com/api/auth/session",edgeStore:"https://microsoftedge.microsoft.com/addons/detail/sider-ai-sidebar/dhoenijjpgpeimemopealfcbiecgceod",chromeStore:"https://chromewebstore.google.com/detail/sider-chatgpt-sidebar-+-v/difoiogjjojoaoomphldepapgpbgkhkb",chromeStoreReview:"https://chromewebstore.google.com/detail/sider-chatgpt-sidebar-+-v/difoiogjjojoaoomphldepapgpbgkhkb/reviews",weChatQrCode:"https://sider.ai/resource/weixin/qrcode.jpeg",producthuntPromoteApi:"https://sider.ai/resource/promotion/extension-promote.json",promoteConfigApi:"https://sider.ai/resource/promotion/promote-config.json"};var jU={key:"j",keyCode:74,metaKey:!0,ctrlKey:!0,altKey:!1,shiftKey:!1,disabled:!1},XU={key:"a",keyCode:65,metaKey:!1,ctrlKey:!1,altKey:!0,shiftKey:!1,disabled:!1};var Ta={language:"zh_CN",theme:"light",isShowSearch:!1,triggerMode:"questionMark",submitShortcut:"Enter",sidebarShortcut:{altKey:!1,ctrlKey:!0,key:"O",keyCode:79,metaKey:!1,shiftKey:!0},sidebarLocation:"right",sidebarDisplayOption:"overlay",sidebarFab:!0,sidebarFabDisabledHost:{},selectionSidebarFab:!0,sidebarOnStartup:"new",showSelectedTextInSidebarEnable:!0,chatVisiblePromptKeys:[],readVisiblePromptKeys:[],writeVisiblePromptKeys:[],quickActionDispalyModifier:"",quickActionEnable:!0,quickActionSelectionEnable:!0,quickActionInputSelectionEnable:!0,translatorShortcut:jU,translatorPinnedTemplates:[],quickActionPinnedReading:[],quickActionPinnedWriting:[],quickActionInputIconEnable:!0,quickActionInputIconDisabledHost:{},translatorHostConfig:{"fab-config.example.com":{favicon:"",enable:!0}},enableWebAssistantVideo:!0,enableBilingualSubtitle:!0,enableWebAssistantArticle:!0,enableWebAssistantQA:!0,enableWebAssistantEmail:!0,enableWebAssistantCode:!0,enableWebAssistantImage:!0,enableLinkPreview:!0,webAssistantImageDisabledHost:{},pageTranslationService:"free",pageTranslationLastTargetLang:"",pageTranslationAutoEn:!0,pageTranslationDisplayStyle:"none",pageTranslationShowOriginalText:!0,pageTranslationNeverHost:{},pageTranslateShortcut:XU,inputTranslationEnable:!1,inputTranslationTargetLang:"",inputTranslationTriggerKey:" ",inputTranslationDisabledHost:{}},MB={device:"free",login:"free",premium_starter:"starter",premium:"basic",premium_pro:"pro",premium_ultra:"ultra",premium_ultra_mobile:"pocket"};var Hj=1024*1024*10,Lj=1024*1024*100;var UB="chatgpt:img:",PB=["g-BlafpMvzd","g-nleealfRT"],OB={"g-BlafpMvzd":{flair:{kind:"sidebar_keep"},resource:{files:[],gizmo:{appeal_info:null,author:{display_name:"sider.ai",is_verified:!0,link_to:"https://sider.ai",selected_display:"website",user_id:"user-inve40FQN9r2Tg4j1mlXSMQb",will_receive_support_emails:null},created_at:"2024-01-10T07:08:34.362699+00:00",display:{categories:["productivity"],description:"Top browser expert! Provide 3X accurate responses. Read any links: PDFs, videos, etc. Create 10+ types of files, like mind maps & spreadsheets, from search-derived contents.",name:"Browser Pro",profile_picture_url:"https://files.oaiusercontent.com/file-HKO0TEnSmvIb1M9G1HUyuAZJ?se=2123-12-27T11%3A10%3A22Z&sp=r&sv=2021-08-06&sr=b&rscc=max-age%3D1209600%2C%20immutable&rscd=attachment%3B%20filename%3DFrame%2520616.png&sig=fJSm%2BvONY8TkDO8IopKdwun%2BWeW2Wo9hti5JG%2Bb5Bj4%3D",prompt_starters:["Search for latest AI research outcomes.","Read this link and summarize the key points.","Create a mind map on ChatGPT prompt skills.","Type E to show all extensions."],welcome_message:"Hi, I'm Browser+! How can I assist you today?"},id:"g-BlafpMvzd",instructions:null,last_interacted_at:"2024-01-20T07:48:12.598861+00:00",live_version:null,model:null,organization_id:"org-i9SD3zX6OqRLnBDt97AtVHHk",settings:null,share_recipient:"marketplace",sharing_targets:null,short_url:"g-BlafpMvzd-browser-pro",tags:["public","reportable","uses_function_calls","pinned"],training_disabled:null,updated_at:"2024-01-20T11:10:24.859178+00:00",vanity_metrics:{created_ago_str:"last week",num_conversations:1066,num_conversations_str:"1066",num_pins:0,num_users_interacted_with:0},version:null,voice:{id:"ember"},workspace_approval_date:null,workspace_approved:null,workspace_id:null},product_features:{attachments:{accepted_mime_types:["application/json","application/vnd.openxmlformats-officedocument.wordprocessingml.document","text/javascript","text/plain","text/x-c++","text/x-script.python","text/x-typescript","text/markdown","application/pdf","text/x-sh","text/x-csharp","application/vnd.openxmlformats-officedocument.presentationml.presentation","application/x-latext","text/x-tex","text/html","text/x-php","text/x-java","text/x-c","text/x-ruby","application/msword"],can_accept_all_mime_types:!0,image_mime_types:["image/webp","image/gif","image/png","image/jpeg"],type:"retrieval"}},tools:[{id:"gzm_cnf_jSWQ9Aj5eNZu3L3mS3bzGxGI~gzm_tool_l6SR7MvRO40YmUGDO8JfhnU8",metadata:{action_id:"g-d08200cb39473e72a1058ed24f66ff9838cf07c1",auth:{type:"none"},domain:"actions.sider.ai",json_schema:null,privacy_policy_url:"https://sider.ai/policies/privacy",raw_spec:""},settings:null,type:"plugins_prototype"},{id:"gzm_cnf_p4GmqNKla5EIJWaJ78Qjnq0B~gzm_tool_wtkmQ099hG3LZNbfZ6jXBMfN",metadata:null,settings:null,type:"dalle"}]}},"g-nleealfRT":{flair:{kind:"sidebar_keep"},resource:{files:[],gizmo:{appeal_info:null,author:{display_name:"awesomegpts.ai",is_verified:!0,link_to:"https://awesomegpts.ai",selected_display:"website",user_id:"user-MV1EPMI80LBUBFXL3yqj7TxP",will_receive_support_emails:null},created_at:"2023-11-15T09:08:04.569234+00:00",display:{categories:["lifestyle"],description:"Shop Smarter, Save Bigger! Quickly find top-rated gems and the best deals in the shopping sea!",name:"Shopping GPT",profile_picture_url:"https://files.oaiusercontent.com/file-epOlIRgMgGrqAHUd0l3Oq2HP?se=2123-12-22T06%3A43%3A25Z&sp=r&sv=2021-08-06&sr=b&rscc=max-age%3D1209600%2C%20immutable&rscd=attachment%3B%20filename%3DFrame%2520613.png&sig=ryqJXchYBS%2BMGC2aa4EPU6zGnOR93RgQoBXoV12b5KY%3D",prompt_starters:["Compare MacBook series products in a table","Locate nearby headphone retailers","Find sofas with top reviews","Find the cheapest Apple Watch Series 9"],welcome_message:""},id:"g-nleealfRT",instructions:null,last_interacted_at:"2024-01-20T06:16:29.030796+00:00",live_version:null,model:null,organization_id:"org-1uI21Op8M017HxHB8qTGnaym",settings:null,share_recipient:"marketplace",sharing_targets:null,short_url:"g-nleealfRT-shopping-gpt",tags:["public","reportable","uses_function_calls","pinned"],training_disabled:null,updated_at:"2024-01-20T02:52:49.252542+00:00",vanity_metrics:{created_ago_str:"2 months ago",num_conversations:341,num_conversations_str:"341",num_pins:0,num_users_interacted_with:0},version:null,voice:{id:"ember"},workspace_approval_date:null,workspace_approved:null,workspace_id:null},product_features:{attachments:{accepted_mime_types:["text/x-csharp","text/javascript","application/json","text/x-php","application/pdf","text/x-c","application/x-latext","text/html","text/x-sh","text/markdown","text/x-script.python","application/msword","application/vnd.openxmlformats-officedocument.presentationml.presentation","text/x-typescript","text/x-c++","text/x-ruby","text/plain","application/vnd.openxmlformats-officedocument.wordprocessingml.document","text/x-tex","text/x-java"],can_accept_all_mime_types:!0,image_mime_types:["image/gif","image/png","image/jpeg","image/webp"],type:"retrieval"}},tools:[{id:"gzm_cnf_mEdggaHyWwxFTAlH5vuabKsd~gzm_tool_sJQMJJ1tT9JqB6NizdOV6ChU",metadata:{action_id:"g-6a3d44cc7cf012a5f2222be5dadb5cc8140a15e3",auth:{type:"none"},domain:"actions.sider.ai",json_schema:null,privacy_policy_url:"https://sider.ai/policies/privacy",raw_spec:""},settings:null,type:"plugins_prototype"},{id:"gzm_cnf_gWRjhVNf1a0XZfN7oDjbgOEC~gzm_tool_YJucv3shUVUdtXn36lZJWVfs",metadata:null,settings:null,type:"browser"}]}}},GB=["thinking_mode","artifacts","search","text_to_image","data_analysis"],qB=[{name:"artifacts",isExperimental:!1,isPro:!0,autoOn:!0},{name:"search",isExperimental:!1,isPro:!0,autoOn:!0},{name:"create_image",isExperimental:!1,isPro:!0,autoOn:!0},{name:"data_analysis",isExperimental:!1,isPro:!0,autoOn:!0},{name:"thinking_mode",isExperimental:!1,isPro:!0,autoOn:!1}];function Eo(e){let t,r,n,o,i,s,a;return A(),{feed:c,reset:A};function A(){t=!0,r="",n=0,o=-1,i=void 0,s=void 0,a=""}function c(g){r=r?r+g:g,t&&ZU(r)&&(r=r.slice(HB.length)),t=!1;let d=r.length,f=0,u=!1;for(;f<d;){u&&(r[f]===`
`&&++f,u=!1);let m=-1,C=o,p;for(let Q=n;m<0&&Q<d;++Q)p=r[Q],p===":"&&C<0?C=Q-f:p==="\r"?(u=!0,m=Q-f):p===`
`&&(m=Q-f);if(m<0){n=d-f,o=C;break}else n=0,o=-1;l(r,f,C,m),f+=m+1}f===d?r="":f>0&&(r=r.slice(f))}function l(g,d,f,u){if(u===0){a.length>0&&(e({type:"event",id:i,event:s||void 0,data:a.slice(0,-1)}),a="",i=void 0),s=void 0;return}let m=f<0,C=g.slice(d,d+(m?u:f)),p=0;m?p=u:g[d+f+1]===" "?p=f+2:p=f+1;let Q=d+p,v=u-p,E=g.slice(Q,Q+v).toString();if(C==="data")a+=E?"".concat(E,`
`):`
`;else if(C==="event")s=E;else if(C==="id"&&!E.includes("\0"))i=E;else if(C==="retry"){let w=parseInt(E,10);Number.isNaN(w)||e({type:"reconnect-interval",value:w})}}}var HB=[239,187,191];function ZU(e){return HB.every((t,r)=>e.charCodeAt(r)===t)}var $U=typeof global=="object"&&global&&global.Object===Object&&global,Na=$U;var eP=typeof self=="object"&&self&&self.Object===Object&&self,tP=Na||eP||Function("return this")(),ke=tP;var rP=ke.Symbol,mt=rP;var LB=Object.prototype,nP=LB.hasOwnProperty,oP=LB.toString,ji=mt?mt.toStringTag:void 0;function iP(e){var t=nP.call(e,ji),r=e[ji];try{e[ji]=void 0;var n=!0}catch{}var o=oP.call(e);return n&&(t?e[ji]=r:delete e[ji]),o}var KB=iP;var sP=Object.prototype,aP=sP.toString;function AP(e){return aP.call(e)}var JB=AP;var cP="[object Null]",lP="[object Undefined]",VB=mt?mt.toStringTag:void 0;function gP(e){return e==null?e===void 0?lP:cP:VB&&VB in Object(e)?KB(e):JB(e)}var Ft=gP;function dP(e){return e!=null&&typeof e=="object"}var He=dP;var fP="[object Symbol]";function uP(e){return typeof e=="symbol"||He(e)&&Ft(e)==fP}var cn=uP;function IP(e,t){for(var r=-1,n=e==null?0:e.length,o=Array(n);++r<n;)o[r]=t(e[r],r,e);return o}var Ma=IP;var pP=Array.isArray,xe=pP;var mP=1/0,zB=mt?mt.prototype:void 0,YB=zB?zB.toString:void 0;function WB(e){if(typeof e=="string")return e;if(xe(e))return Ma(e,WB)+"";if(cn(e))return YB?YB.call(e):"";var t=e+"";return t=="0"&&1/e==-mP?"-0":t}var jB=WB;var hP=/\s/;function CP(e){for(var t=e.length;t--&&hP.test(e.charAt(t)););return t}var XB=CP;var BP=/^\s+/;function EP(e){return e&&e.slice(0,XB(e)+1).replace(BP,"")}var ZB=EP;function yP(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var he=yP;var $B=NaN,QP=/^[-+]0x[0-9a-f]+$/i,wP=/^0b[01]+$/i,SP=/^0o[0-7]+$/i,xP=parseInt;function bP(e){if(typeof e=="number")return e;if(cn(e))return $B;if(he(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=he(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=ZB(e);var r=wP.test(e);return r||SP.test(e)?xP(e.slice(2),r?2:8):QP.test(e)?$B:+e}var ud=bP;function kP(e){return e}var yo=kP;var DP="[object AsyncFunction]",_P="[object Function]",FP="[object GeneratorFunction]",vP="[object Proxy]";function RP(e){if(!he(e))return!1;var t=Ft(e);return t==_P||t==FP||t==DP||t==vP}var Qo=RP;var TP=ke["__core-js_shared__"],Ua=TP;var eE=function(){var e=/[^.]+$/.exec(Ua&&Ua.keys&&Ua.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function NP(e){return!!eE&&eE in e}var tE=NP;var MP=Function.prototype,UP=MP.toString;function PP(e){if(e!=null){try{return UP.call(e)}catch{}try{return e+""}catch{}}return""}var Gr=PP;var OP=/[\\^$.*+?()[\]{}|]/g,GP=/^\[object .+?Constructor\]$/,qP=Function.prototype,HP=Object.prototype,LP=qP.toString,KP=HP.hasOwnProperty,JP=RegExp("^"+LP.call(KP).replace(OP,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function VP(e){if(!he(e)||tE(e))return!1;var t=Qo(e)?JP:GP;return t.test(Gr(e))}var rE=VP;function zP(e,t){return e?.[t]}var nE=zP;function YP(e,t){var r=nE(e,t);return rE(r)?r:void 0}var St=YP;var WP=St(ke,"WeakMap"),Pa=WP;var oE=Object.create,jP=function(){function e(){}return function(t){if(!he(t))return{};if(oE)return oE(t);e.prototype=t;var r=new e;return e.prototype=void 0,r}}(),iE=jP;function XP(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}var sE=XP;function ZP(){}var pr=ZP;function $P(e,t){var r=-1,n=e.length;for(t||(t=Array(n));++r<n;)t[r]=e[r];return t}var Oa=$P;var eO=800,tO=16,rO=Date.now;function nO(e){var t=0,r=0;return function(){var n=rO(),o=tO-(n-r);if(r=n,o>0){if(++t>=eO)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}var aE=nO;function oO(e){return function(){return e}}var AE=oO;var iO=function(){try{var e=St(Object,"defineProperty");return e({},"",{}),e}catch{}}(),wo=iO;var sO=wo?function(e,t){return wo(e,"toString",{configurable:!0,enumerable:!1,value:AE(t),writable:!0})}:yo,cE=sO;var aO=aE(cE),lE=aO;function AO(e,t){for(var r=-1,n=e==null?0:e.length;++r<n&&t(e[r],r,e)!==!1;);return e}var gE=AO;var cO=9007199254740991,lO=/^(?:0|[1-9]\d*)$/;function gO(e,t){var r=typeof e;return t=t??cO,!!t&&(r=="number"||r!="symbol"&&lO.test(e))&&e>-1&&e%1==0&&e<t}var ln=gO;function dO(e,t,r){t=="__proto__"&&wo?wo(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}var So=dO;function fO(e,t){return e===t||e!==e&&t!==t}var mr=fO;var uO=Object.prototype,IO=uO.hasOwnProperty;function pO(e,t,r){var n=e[t];(!(IO.call(e,t)&&mr(n,r))||r===void 0&&!(t in e))&&So(e,t,r)}var xo=pO;function mO(e,t,r,n){var o=!r;r||(r={});for(var i=-1,s=t.length;++i<s;){var a=t[i],A=n?n(r[a],e[a],a,r,e):void 0;A===void 0&&(A=e[a]),o?So(r,a,A):xo(r,a,A)}return r}var hr=mO;var dE=Math.max;function hO(e,t,r){return t=dE(t===void 0?e.length-1:t,0),function(){for(var n=arguments,o=-1,i=dE(n.length-t,0),s=Array(i);++o<i;)s[o]=n[t+o];o=-1;for(var a=Array(t+1);++o<t;)a[o]=n[o];return a[t]=r(s),sE(e,this,a)}}var fE=hO;function CO(e,t){return lE(fE(e,t,yo),e+"")}var uE=CO;var BO=9007199254740991;function EO(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=BO}var bo=EO;function yO(e){return e!=null&&bo(e.length)&&!Qo(e)}var Cr=yO;function QO(e,t,r){if(!he(r))return!1;var n=typeof t;return(n=="number"?Cr(r)&&ln(t,r.length):n=="string"&&t in r)?mr(r[t],e):!1}var IE=QO;function wO(e){return uE(function(t,r){var n=-1,o=r.length,i=o>1?r[o-1]:void 0,s=o>2?r[2]:void 0;for(i=e.length>3&&typeof i=="function"?(o--,i):void 0,s&&IE(r[0],r[1],s)&&(i=o<3?void 0:i,o=1),t=Object(t);++n<o;){var a=r[n];a&&e(t,a,n,i)}return t})}var pE=wO;var SO=Object.prototype;function xO(e){var t=e&&e.constructor,r=typeof t=="function"&&t.prototype||SO;return e===r}var gn=xO;function bO(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}var mE=bO;var kO="[object Arguments]";function DO(e){return He(e)&&Ft(e)==kO}var Id=DO;var hE=Object.prototype,_O=hE.hasOwnProperty,FO=hE.propertyIsEnumerable,vO=Id(function(){return arguments}())?Id:function(e){return He(e)&&_O.call(e,"callee")&&!FO.call(e,"callee")},qr=vO;function RO(){return!1}var CE=RO;var yE=typeof exports=="object"&&exports&&!exports.nodeType&&exports,BE=yE&&typeof module=="object"&&module&&!module.nodeType&&module,TO=BE&&BE.exports===yE,EE=TO?ke.Buffer:void 0,NO=EE?EE.isBuffer:void 0,MO=NO||CE,Zt=MO;var UO="[object Arguments]",PO="[object Array]",OO="[object Boolean]",GO="[object Date]",qO="[object Error]",HO="[object Function]",LO="[object Map]",KO="[object Number]",JO="[object Object]",VO="[object RegExp]",zO="[object Set]",YO="[object String]",WO="[object WeakMap]",jO="[object ArrayBuffer]",XO="[object DataView]",ZO="[object Float32Array]",$O="[object Float64Array]",eG="[object Int8Array]",tG="[object Int16Array]",rG="[object Int32Array]",nG="[object Uint8Array]",oG="[object Uint8ClampedArray]",iG="[object Uint16Array]",sG="[object Uint32Array]",we={};we[ZO]=we[$O]=we[eG]=we[tG]=we[rG]=we[nG]=we[oG]=we[iG]=we[sG]=!0;we[UO]=we[PO]=we[jO]=we[OO]=we[XO]=we[GO]=we[qO]=we[HO]=we[LO]=we[KO]=we[JO]=we[VO]=we[zO]=we[YO]=we[WO]=!1;function aG(e){return He(e)&&bo(e.length)&&!!we[Ft(e)]}var QE=aG;function AG(e){return function(t){return e(t)}}var ko=AG;var wE=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Xi=wE&&typeof module=="object"&&module&&!module.nodeType&&module,cG=Xi&&Xi.exports===wE,pd=cG&&Na.process,lG=function(){try{var e=Xi&&Xi.require&&Xi.require("util").types;return e||pd&&pd.binding&&pd.binding("util")}catch{}}(),Hr=lG;var SE=Hr&&Hr.isTypedArray,gG=SE?ko(SE):QE,dn=gG;var dG=Object.prototype,fG=dG.hasOwnProperty;function uG(e,t){var r=xe(e),n=!r&&qr(e),o=!r&&!n&&Zt(e),i=!r&&!n&&!o&&dn(e),s=r||n||o||i,a=s?mE(e.length,String):[],A=a.length;for(var c in e)(t||fG.call(e,c))&&!(s&&(c=="length"||o&&(c=="offset"||c=="parent")||i&&(c=="buffer"||c=="byteLength"||c=="byteOffset")||ln(c,A)))&&a.push(c);return a}var Ga=uG;function IG(e,t){return function(r){return e(t(r))}}var qa=IG;var pG=qa(Object.keys,Object),xE=pG;var mG=Object.prototype,hG=mG.hasOwnProperty;function CG(e){if(!gn(e))return xE(e);var t=[];for(var r in Object(e))hG.call(e,r)&&r!="constructor"&&t.push(r);return t}var Ha=CG;function BG(e){return Cr(e)?Ga(e):Ha(e)}var fn=BG;function EG(e){var t=[];if(e!=null)for(var r in Object(e))t.push(r);return t}var bE=EG;var yG=Object.prototype,QG=yG.hasOwnProperty;function wG(e){if(!he(e))return bE(e);var t=gn(e),r=[];for(var n in e)n=="constructor"&&(t||!QG.call(e,n))||r.push(n);return r}var kE=wG;function SG(e){return Cr(e)?Ga(e,!0):kE(e)}var Br=SG;var xG=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,bG=/^\w*$/;function kG(e,t){if(xe(e))return!1;var r=typeof e;return r=="number"||r=="symbol"||r=="boolean"||e==null||cn(e)?!0:bG.test(e)||!xG.test(e)||t!=null&&e in Object(t)}var Do=kG;var DG=St(Object,"create"),Lr=DG;function _G(){this.__data__=Lr?Lr(null):{},this.size=0}var DE=_G;function FG(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var _E=FG;var vG="__lodash_hash_undefined__",RG=Object.prototype,TG=RG.hasOwnProperty;function NG(e){var t=this.__data__;if(Lr){var r=t[e];return r===vG?void 0:r}return TG.call(t,e)?t[e]:void 0}var FE=NG;var MG=Object.prototype,UG=MG.hasOwnProperty;function PG(e){var t=this.__data__;return Lr?t[e]!==void 0:UG.call(t,e)}var vE=PG;var OG="__lodash_hash_undefined__";function GG(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=Lr&&t===void 0?OG:t,this}var RE=GG;function _o(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}_o.prototype.clear=DE;_o.prototype.delete=_E;_o.prototype.get=FE;_o.prototype.has=vE;_o.prototype.set=RE;var md=_o;function qG(){this.__data__=[],this.size=0}var TE=qG;function HG(e,t){for(var r=e.length;r--;)if(mr(e[r][0],t))return r;return-1}var un=HG;var LG=Array.prototype,KG=LG.splice;function JG(e){var t=this.__data__,r=un(t,e);if(r<0)return!1;var n=t.length-1;return r==n?t.pop():KG.call(t,r,1),--this.size,!0}var NE=JG;function VG(e){var t=this.__data__,r=un(t,e);return r<0?void 0:t[r][1]}var ME=VG;function zG(e){return un(this.__data__,e)>-1}var UE=zG;function YG(e,t){var r=this.__data__,n=un(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this}var PE=YG;function Fo(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}Fo.prototype.clear=TE;Fo.prototype.delete=NE;Fo.prototype.get=ME;Fo.prototype.has=UE;Fo.prototype.set=PE;var In=Fo;var WG=St(ke,"Map"),pn=WG;function jG(){this.size=0,this.__data__={hash:new md,map:new(pn||In),string:new md}}var OE=jG;function XG(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}var GE=XG;function ZG(e,t){var r=e.__data__;return GE(t)?r[typeof t=="string"?"string":"hash"]:r.map}var mn=ZG;function $G(e){var t=mn(this,e).delete(e);return this.size-=t?1:0,t}var qE=$G;function eq(e){return mn(this,e).get(e)}var HE=eq;function tq(e){return mn(this,e).has(e)}var LE=tq;function rq(e,t){var r=mn(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this}var KE=rq;function vo(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}vo.prototype.clear=OE;vo.prototype.delete=qE;vo.prototype.get=HE;vo.prototype.has=LE;vo.prototype.set=KE;var Kn=vo;var nq="Expected a function";function hd(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new TypeError(nq);var r=function(){var n=arguments,o=t?t.apply(this,n):n[0],i=r.cache;if(i.has(o))return i.get(o);var s=e.apply(this,n);return r.cache=i.set(o,s)||i,s};return r.cache=new(hd.Cache||Kn),r}hd.Cache=Kn;var JE=hd;var oq=500;function iq(e){var t=JE(e,function(n){return r.size===oq&&r.clear(),n}),r=t.cache;return t}var VE=iq;var sq=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,aq=/\\(\\)?/g,Aq=VE(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(sq,function(r,n,o,i){t.push(o?i.replace(aq,"$1"):n||r)}),t}),zE=Aq;function cq(e){return e==null?"":jB(e)}var YE=cq;function lq(e,t){return xe(e)?e:Do(e,t)?[e]:zE(YE(e))}var hn=lq;var gq=1/0;function dq(e){if(typeof e=="string"||cn(e))return e;var t=e+"";return t=="0"&&1/e==-gq?"-0":t}var Er=dq;function fq(e,t){t=hn(t,e);for(var r=0,n=t.length;e!=null&&r<n;)e=e[Er(t[r++])];return r&&r==n?e:void 0}var Ro=fq;function uq(e,t,r){var n=e==null?void 0:Ro(e,t);return n===void 0?r:n}var WE=uq;function Iq(e,t){for(var r=-1,n=t.length,o=e.length;++r<n;)e[o+r]=t[r];return e}var La=Iq;var pq=qa(Object.getPrototypeOf,Object),To=pq;var mq="[object Object]",hq=Function.prototype,Cq=Object.prototype,jE=hq.toString,Bq=Cq.hasOwnProperty,Eq=jE.call(Object);function yq(e){if(!He(e)||Ft(e)!=mq)return!1;var t=To(e);if(t===null)return!0;var r=Bq.call(t,"constructor")&&t.constructor;return typeof r=="function"&&r instanceof r&&jE.call(r)==Eq}var No=yq;function Qq(){this.__data__=new In,this.size=0}var XE=Qq;function wq(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r}var ZE=wq;function Sq(e){return this.__data__.get(e)}var $E=Sq;function xq(e){return this.__data__.has(e)}var ey=xq;var bq=200;function kq(e,t){var r=this.__data__;if(r instanceof In){var n=r.__data__;if(!pn||n.length<bq-1)return n.push([e,t]),this.size=++r.size,this;r=this.__data__=new Kn(n)}return r.set(e,t),this.size=r.size,this}var ty=kq;function Mo(e){var t=this.__data__=new In(e);this.size=t.size}Mo.prototype.clear=XE;Mo.prototype.delete=ZE;Mo.prototype.get=$E;Mo.prototype.has=ey;Mo.prototype.set=ty;var yr=Mo;function Dq(e,t){return e&&hr(t,fn(t),e)}var ry=Dq;function _q(e,t){return e&&hr(t,Br(t),e)}var ny=_q;var ay=typeof exports=="object"&&exports&&!exports.nodeType&&exports,oy=ay&&typeof module=="object"&&module&&!module.nodeType&&module,Fq=oy&&oy.exports===ay,iy=Fq?ke.Buffer:void 0,sy=iy?iy.allocUnsafe:void 0;function vq(e,t){if(t)return e.slice();var r=e.length,n=sy?sy(r):new e.constructor(r);return e.copy(n),n}var Ka=vq;function Rq(e,t){for(var r=-1,n=e==null?0:e.length,o=0,i=[];++r<n;){var s=e[r];t(s,r,e)&&(i[o++]=s)}return i}var Ay=Rq;function Tq(){return[]}var Ja=Tq;var Nq=Object.prototype,Mq=Nq.propertyIsEnumerable,cy=Object.getOwnPropertySymbols,Uq=cy?function(e){return e==null?[]:(e=Object(e),Ay(cy(e),function(t){return Mq.call(e,t)}))}:Ja,Uo=Uq;function Pq(e,t){return hr(e,Uo(e),t)}var ly=Pq;var Oq=Object.getOwnPropertySymbols,Gq=Oq?function(e){for(var t=[];e;)La(t,Uo(e)),e=To(e);return t}:Ja,Va=Gq;function qq(e,t){return hr(e,Va(e),t)}var gy=qq;function Hq(e,t,r){var n=t(e);return xe(e)?n:La(n,r(e))}var za=Hq;function Lq(e){return za(e,fn,Uo)}var Zi=Lq;function Kq(e){return za(e,Br,Va)}var Ya=Kq;var Jq=St(ke,"DataView"),Wa=Jq;var Vq=St(ke,"Promise"),ja=Vq;var zq=St(ke,"Set"),Xa=zq;var dy="[object Map]",Yq="[object Object]",fy="[object Promise]",uy="[object Set]",Iy="[object WeakMap]",py="[object DataView]",Wq=Gr(Wa),jq=Gr(pn),Xq=Gr(ja),Zq=Gr(Xa),$q=Gr(Pa),Jn=Ft;(Wa&&Jn(new Wa(new ArrayBuffer(1)))!=py||pn&&Jn(new pn)!=dy||ja&&Jn(ja.resolve())!=fy||Xa&&Jn(new Xa)!=uy||Pa&&Jn(new Pa)!=Iy)&&(Jn=function(e){var t=Ft(e),r=t==Yq?e.constructor:void 0,n=r?Gr(r):"";if(n)switch(n){case Wq:return py;case jq:return dy;case Xq:return fy;case Zq:return uy;case $q:return Iy}return t});var $t=Jn;var eH=Object.prototype,tH=eH.hasOwnProperty;function rH(e){var t=e.length,r=new e.constructor(t);return t&&typeof e[0]=="string"&&tH.call(e,"index")&&(r.index=e.index,r.input=e.input),r}var my=rH;var nH=ke.Uint8Array,Po=nH;function oH(e){var t=new e.constructor(e.byteLength);return new Po(t).set(new Po(e)),t}var Oo=oH;function iH(e,t){var r=t?Oo(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.byteLength)}var hy=iH;var sH=/\w*$/;function aH(e){var t=new e.constructor(e.source,sH.exec(e));return t.lastIndex=e.lastIndex,t}var Cy=aH;var By=mt?mt.prototype:void 0,Ey=By?By.valueOf:void 0;function AH(e){return Ey?Object(Ey.call(e)):{}}var yy=AH;function cH(e,t){var r=t?Oo(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.length)}var Za=cH;var lH="[object Boolean]",gH="[object Date]",dH="[object Map]",fH="[object Number]",uH="[object RegExp]",IH="[object Set]",pH="[object String]",mH="[object Symbol]",hH="[object ArrayBuffer]",CH="[object DataView]",BH="[object Float32Array]",EH="[object Float64Array]",yH="[object Int8Array]",QH="[object Int16Array]",wH="[object Int32Array]",SH="[object Uint8Array]",xH="[object Uint8ClampedArray]",bH="[object Uint16Array]",kH="[object Uint32Array]";function DH(e,t,r){var n=e.constructor;switch(t){case hH:return Oo(e);case lH:case gH:return new n(+e);case CH:return hy(e,r);case BH:case EH:case yH:case QH:case wH:case SH:case xH:case bH:case kH:return Za(e,r);case dH:return new n;case fH:case pH:return new n(e);case uH:return Cy(e);case IH:return new n;case mH:return yy(e)}}var Qy=DH;function _H(e){return typeof e.constructor=="function"&&!gn(e)?iE(To(e)):{}}var $a=_H;var FH="[object Map]";function vH(e){return He(e)&&$t(e)==FH}var wy=vH;var Sy=Hr&&Hr.isMap,RH=Sy?ko(Sy):wy,xy=RH;var TH="[object Set]";function NH(e){return He(e)&&$t(e)==TH}var by=NH;var ky=Hr&&Hr.isSet,MH=ky?ko(ky):by,Dy=MH;var UH=1,PH=2,OH=4,_y="[object Arguments]",GH="[object Array]",qH="[object Boolean]",HH="[object Date]",LH="[object Error]",Fy="[object Function]",KH="[object GeneratorFunction]",JH="[object Map]",VH="[object Number]",vy="[object Object]",zH="[object RegExp]",YH="[object Set]",WH="[object String]",jH="[object Symbol]",XH="[object WeakMap]",ZH="[object ArrayBuffer]",$H="[object DataView]",eL="[object Float32Array]",tL="[object Float64Array]",rL="[object Int8Array]",nL="[object Int16Array]",oL="[object Int32Array]",iL="[object Uint8Array]",sL="[object Uint8ClampedArray]",aL="[object Uint16Array]",AL="[object Uint32Array]",Ce={};Ce[_y]=Ce[GH]=Ce[ZH]=Ce[$H]=Ce[qH]=Ce[HH]=Ce[eL]=Ce[tL]=Ce[rL]=Ce[nL]=Ce[oL]=Ce[JH]=Ce[VH]=Ce[vy]=Ce[zH]=Ce[YH]=Ce[WH]=Ce[jH]=Ce[iL]=Ce[sL]=Ce[aL]=Ce[AL]=!0;Ce[LH]=Ce[Fy]=Ce[XH]=!1;function eA(e,t,r,n,o,i){var s,a=t&UH,A=t&PH,c=t&OH;if(r&&(s=o?r(e,n,o,i):r(e)),s!==void 0)return s;if(!he(e))return e;var l=xe(e);if(l){if(s=my(e),!a)return Oa(e,s)}else{var g=$t(e),d=g==Fy||g==KH;if(Zt(e))return Ka(e,a);if(g==vy||g==_y||d&&!o){if(s=A||d?{}:$a(e),!a)return A?gy(e,ny(s,e)):ly(e,ry(s,e))}else{if(!Ce[g])return o?e:{};s=Qy(e,g,a)}}i||(i=new yr);var f=i.get(e);if(f)return f;i.set(e,s),Dy(e)?e.forEach(function(C){s.add(eA(C,t,r,C,e,i))}):xy(e)&&e.forEach(function(C,p){s.set(p,eA(C,t,r,p,e,i))});var u=c?A?Ya:Zi:A?Br:fn,m=l?void 0:u(e);return gE(m||e,function(C,p){m&&(p=C,C=e[p]),xo(s,p,eA(C,t,r,p,e,i))}),s}var Ry=eA;var cL=4;function lL(e){return Ry(e,cL)}var Cd=lL;var gL="__lodash_hash_undefined__";function dL(e){return this.__data__.set(e,gL),this}var Ty=dL;function fL(e){return this.__data__.has(e)}var Ny=fL;function tA(e){var t=-1,r=e==null?0:e.length;for(this.__data__=new Kn;++t<r;)this.add(e[t])}tA.prototype.add=tA.prototype.push=Ty;tA.prototype.has=Ny;var My=tA;function uL(e,t){for(var r=-1,n=e==null?0:e.length;++r<n;)if(t(e[r],r,e))return!0;return!1}var Uy=uL;function IL(e,t){return e.has(t)}var Py=IL;var pL=1,mL=2;function hL(e,t,r,n,o,i){var s=r&pL,a=e.length,A=t.length;if(a!=A&&!(s&&A>a))return!1;var c=i.get(e),l=i.get(t);if(c&&l)return c==t&&l==e;var g=-1,d=!0,f=r&mL?new My:void 0;for(i.set(e,t),i.set(t,e);++g<a;){var u=e[g],m=t[g];if(n)var C=s?n(m,u,g,t,e,i):n(u,m,g,e,t,i);if(C!==void 0){if(C)continue;d=!1;break}if(f){if(!Uy(t,function(p,Q){if(!Py(f,Q)&&(u===p||o(u,p,r,n,i)))return f.push(Q)})){d=!1;break}}else if(!(u===m||o(u,m,r,n,i))){d=!1;break}}return i.delete(e),i.delete(t),d}var rA=hL;function CL(e){var t=-1,r=Array(e.size);return e.forEach(function(n,o){r[++t]=[o,n]}),r}var Oy=CL;function BL(e){var t=-1,r=Array(e.size);return e.forEach(function(n){r[++t]=n}),r}var Gy=BL;var EL=1,yL=2,QL="[object Boolean]",wL="[object Date]",SL="[object Error]",xL="[object Map]",bL="[object Number]",kL="[object RegExp]",DL="[object Set]",_L="[object String]",FL="[object Symbol]",vL="[object ArrayBuffer]",RL="[object DataView]",qy=mt?mt.prototype:void 0,Bd=qy?qy.valueOf:void 0;function TL(e,t,r,n,o,i,s){switch(r){case RL:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case vL:return!(e.byteLength!=t.byteLength||!i(new Po(e),new Po(t)));case QL:case wL:case bL:return mr(+e,+t);case SL:return e.name==t.name&&e.message==t.message;case kL:case _L:return e==t+"";case xL:var a=Oy;case DL:var A=n&EL;if(a||(a=Gy),e.size!=t.size&&!A)return!1;var c=s.get(e);if(c)return c==t;n|=yL,s.set(e,t);var l=rA(a(e),a(t),n,o,i,s);return s.delete(e),l;case FL:if(Bd)return Bd.call(e)==Bd.call(t)}return!1}var Hy=TL;var NL=1,ML=Object.prototype,UL=ML.hasOwnProperty;function PL(e,t,r,n,o,i){var s=r&NL,a=Zi(e),A=a.length,c=Zi(t),l=c.length;if(A!=l&&!s)return!1;for(var g=A;g--;){var d=a[g];if(!(s?d in t:UL.call(t,d)))return!1}var f=i.get(e),u=i.get(t);if(f&&u)return f==t&&u==e;var m=!0;i.set(e,t),i.set(t,e);for(var C=s;++g<A;){d=a[g];var p=e[d],Q=t[d];if(n)var v=s?n(Q,p,d,t,e,i):n(p,Q,d,e,t,i);if(!(v===void 0?p===Q||o(p,Q,r,n,i):v)){m=!1;break}C||(C=d=="constructor")}if(m&&!C){var E=e.constructor,w=t.constructor;E!=w&&"constructor"in e&&"constructor"in t&&!(typeof E=="function"&&E instanceof E&&typeof w=="function"&&w instanceof w)&&(m=!1)}return i.delete(e),i.delete(t),m}var Ly=PL;var OL=1,Ky="[object Arguments]",Jy="[object Array]",nA="[object Object]",GL=Object.prototype,Vy=GL.hasOwnProperty;function qL(e,t,r,n,o,i){var s=xe(e),a=xe(t),A=s?Jy:$t(e),c=a?Jy:$t(t);A=A==Ky?nA:A,c=c==Ky?nA:c;var l=A==nA,g=c==nA,d=A==c;if(d&&Zt(e)){if(!Zt(t))return!1;s=!0,l=!1}if(d&&!l)return i||(i=new yr),s||dn(e)?rA(e,t,r,n,o,i):Hy(e,t,A,r,n,o,i);if(!(r&OL)){var f=l&&Vy.call(e,"__wrapped__"),u=g&&Vy.call(t,"__wrapped__");if(f||u){var m=f?e.value():e,C=u?t.value():t;return i||(i=new yr),o(m,C,r,n,i)}}return d?(i||(i=new yr),Ly(e,t,r,n,o,i)):!1}var zy=qL;function Yy(e,t,r,n,o){return e===t?!0:e==null||t==null||!He(e)&&!He(t)?e!==e&&t!==t:zy(e,t,r,n,Yy,o)}var oA=Yy;var HL=1,LL=2;function KL(e,t,r,n){var o=r.length,i=o,s=!n;if(e==null)return!i;for(e=Object(e);o--;){var a=r[o];if(s&&a[2]?a[1]!==e[a[0]]:!(a[0]in e))return!1}for(;++o<i;){a=r[o];var A=a[0],c=e[A],l=a[1];if(s&&a[2]){if(c===void 0&&!(A in e))return!1}else{var g=new yr;if(n)var d=n(c,l,A,e,t,g);if(!(d===void 0?oA(l,c,HL|LL,n,g):d))return!1}}return!0}var Wy=KL;function JL(e){return e===e&&!he(e)}var iA=JL;function VL(e){for(var t=fn(e),r=t.length;r--;){var n=t[r],o=e[n];t[r]=[n,o,iA(o)]}return t}var jy=VL;function zL(e,t){return function(r){return r==null?!1:r[e]===t&&(t!==void 0||e in Object(r))}}var sA=zL;function YL(e){var t=jy(e);return t.length==1&&t[0][2]?sA(t[0][0],t[0][1]):function(r){return r===e||Wy(r,e,t)}}var Xy=YL;function WL(e,t){return e!=null&&t in Object(e)}var Zy=WL;function jL(e,t,r){t=hn(t,e);for(var n=-1,o=t.length,i=!1;++n<o;){var s=Er(t[n]);if(!(i=e!=null&&r(e,s)))break;e=e[s]}return i||++n!=o?i:(o=e==null?0:e.length,!!o&&bo(o)&&ln(s,o)&&(xe(e)||qr(e)))}var $y=jL;function XL(e,t){return e!=null&&$y(e,t,Zy)}var eQ=XL;var ZL=1,$L=2;function e1(e,t){return Do(e)&&iA(t)?sA(Er(e),t):function(r){var n=WE(r,e);return n===void 0&&n===t?eQ(r,e):oA(t,n,ZL|$L)}}var tQ=e1;function t1(e){return function(t){return t?.[e]}}var rQ=t1;function r1(e){return function(t){return Ro(t,e)}}var nQ=r1;function n1(e){return Do(e)?rQ(Er(e)):nQ(e)}var oQ=n1;function o1(e){return typeof e=="function"?e:e==null?yo:typeof e=="object"?xe(e)?tQ(e[0],e[1]):Xy(e):oQ(e)}var iQ=o1;function i1(e){return function(t,r,n){for(var o=-1,i=Object(t),s=n(t),a=s.length;a--;){var A=s[e?a:++o];if(r(i[A],A,i)===!1)break}return t}}var sQ=i1;var s1=sQ(),aQ=s1;var a1=function(){return ke.Date.now()},aA=a1;var A1="Expected a function",c1=Math.max,l1=Math.min;function g1(e,t,r){var n,o,i,s,a,A,c=0,l=!1,g=!1,d=!0;if(typeof e!="function")throw new TypeError(A1);t=ud(t)||0,he(r)&&(l=!!r.leading,g="maxWait"in r,i=g?c1(ud(r.maxWait)||0,t):i,d="trailing"in r?!!r.trailing:d);function f(B){var y=n,T=o;return n=o=void 0,c=B,s=e.apply(T,y),s}function u(B){return c=B,a=setTimeout(p,t),l?f(B):s}function m(B){var y=B-A,T=B-c,P=t-y;return g?l1(P,i-T):P}function C(B){var y=B-A,T=B-c;return A===void 0||y>=t||y<0||g&&T>=i}function p(){var B=aA();if(C(B))return Q(B);a=setTimeout(p,m(B))}function Q(B){return a=void 0,d&&n?f(B):(n=o=void 0,s)}function v(){a!==void 0&&clearTimeout(a),c=0,n=A=o=a=void 0}function E(){return a===void 0?s:Q(aA())}function w(){var B=aA(),y=C(B);if(n=arguments,o=this,A=B,y){if(a===void 0)return u(A);if(g)return clearTimeout(a),a=setTimeout(p,t),f(A)}return a===void 0&&(a=setTimeout(p,t)),s}return w.cancel=v,w.flush=E,w}var vt=g1;function d1(e,t,r){(r!==void 0&&!mr(e[t],r)||r===void 0&&!(t in e))&&So(e,t,r)}var $i=d1;function f1(e){return He(e)&&Cr(e)}var AQ=f1;function u1(e,t){if(!(t==="constructor"&&typeof e[t]=="function")&&t!="__proto__")return e[t]}var es=u1;function I1(e){return hr(e,Br(e))}var cQ=I1;function p1(e,t,r,n,o,i,s){var a=es(e,r),A=es(t,r),c=s.get(A);if(c){$i(e,r,c);return}var l=i?i(a,A,r+"",e,t,s):void 0,g=l===void 0;if(g){var d=xe(A),f=!d&&Zt(A),u=!d&&!f&&dn(A);l=A,d||f||u?xe(a)?l=a:AQ(a)?l=Oa(a):f?(g=!1,l=Ka(A,!0)):u?(g=!1,l=Za(A,!0)):l=[]:No(A)||qr(A)?(l=a,qr(a)?l=cQ(a):(!he(a)||Qo(a))&&(l=$a(A))):g=!1}g&&(s.set(A,l),o(l,A,n,i,s),s.delete(A)),$i(e,r,l)}var lQ=p1;function gQ(e,t,r,n,o){e!==t&&aQ(t,function(i,s){if(o||(o=new yr),he(i))lQ(e,t,s,r,gQ,n,o);else{var a=n?n(es(e,s),i,s+"",e,t,o):void 0;a===void 0&&(a=i),$i(e,s,a)}},Br)}var dQ=gQ;var m1=pE(function(e,t,r,n){dQ(e,t,r,n)}),ts=m1;var h1="[object Map]",C1="[object Set]",B1=Object.prototype,E1=B1.hasOwnProperty;function y1(e){if(e==null)return!0;if(Cr(e)&&(xe(e)||typeof e=="string"||typeof e.splice=="function"||Zt(e)||dn(e)||qr(e)))return!e.length;var t=$t(e);if(t==h1||t==C1)return!e.size;if(gn(e))return!Ha(e).length;for(var r in e)if(E1.call(e,r))return!1;return!0}var Vn=y1;function Q1(e,t,r,n){if(!he(e))return e;t=hn(t,e);for(var o=-1,i=t.length,s=i-1,a=e;a!=null&&++o<i;){var A=Er(t[o]),c=r;if(A==="__proto__"||A==="constructor"||A==="prototype")return e;if(o!=s){var l=a[A];c=n?n(l,A,a):void 0,c===void 0&&(c=he(l)?l:ln(t[o+1])?[]:{})}xo(a,A,c),a=a[A]}return e}var fQ=Q1;function w1(e,t,r){for(var n=-1,o=t.length,i={};++n<o;){var s=t[n],a=Ro(e,s);r(a,s)&&fQ(i,hn(s,e),a)}return i}var uQ=w1;function S1(e,t){if(e==null)return{};var r=Ma(Ya(e),function(n){return[n]});return t=iQ(t),uQ(e,r,function(n,o){return t(n,o[0])})}var Ed=S1;async function*Cn(e){let t=e.pipeThrough(new TextDecoderStream).getReader();try{for(;;){let{done:r,value:n}=await t.read();if(r)return;yield n}}finally{t.releaseLock()}}var D1=V(IQ());var tr=V(Ae());var te=V(Ae());function j(e){return te.default.storage.local.get(e)}async function M(e){return te.default.storage.local.set(e)}async function ze(e){return te.default.storage.local.remove(e)}function yd(e,t,r){return typeof e=="string"&&(e=[e]),EQ(te.default.storage.local.onChanged,n=>{for(let o of e)if(o in n){t(e.reduce((i,s)=>(i[s]=n[s],i),{}));break}},{signal:r?.signal})}async function Qd(e){if(te.default.cookies){let t=await te.default.cookies.get(e);return t?.value?decodeURIComponent(t.value):""}return te.default.runtime.sendMessage({type:"GET_COOKIE",data:e})}async function wd(e){return te.default?.cookies?await te.default.cookies.set(e):te.default.runtime.sendMessage({type:"SET_COOKIE",data:e})}function cA(e){return Qd({name:e,url:fe.origin})}function lA(e,t,r=360){let n=Math.round(Date.now()/1e3)+86400*r;try{return wd({name:e,value:t,url:fe.origin,domain:"."+new URL(fe.origin).hostname,expirationDate:n,secure:!0})}catch{}}function Qr(e){return te.default.tabs?te.default.tabs.create(e):te.default.runtime.sendMessage({type:"OPEN_URL_IN_NEW_TAB",details:e})}async function pQ(e,t){let r=await te.default.tabs.query(e);for(let n of r)n.id&&await te.default.tabs.update(n.id,t)}async function mQ(e){return te.default?.tabs?gA(e):te.default.runtime.sendMessage({type:"SWITCH_TAB",queryInfo:e})}async function gA(e,t=!1,r){let{url:n,matchQuery:o,...i}=e,s=new URL(n),a=`${s.origin}${s.pathname}${o?s.search:""}*`,A=await te.default.tabs.query({url:a,...i});if(A.length)for(let c of A)c.id&&(await te.default.tabs.update(c.id,{active:!0}),t&&await te.default.tabs.reload(c.id,r));else{let{url:c,cookieStoreId:l,matchQuery:g,...d}=e,f={url:Array.isArray(c)?c[0]:c,...d};await te.default.tabs.create(f)}}function Sd(e="general",t,r){let n="/options.html";if(e&&(n+=`?section=${e}`),r){let o=new URLSearchParams(r);n+=`&${o.toString()}`}t&&(t.startsWith("#")||(t="#"+t),n+=t),te.default.tabs.create({url:n})}var hQ=(e,t)=>te.default.contextMenus?te.default.contextMenus.update(e,t):te.default.runtime.sendMessage({type:"UPDATE_CONTEXT_MENU",data:{id:e,opts:t}});function Kr(e){return te.default.runtime.getURL(e)}async function er(){return(await te.default.tabs.query({active:!0,currentWindow:!0}))[0]}function CQ(){return te.default.tabs?te.default.extension.isAllowedFileSchemeAccess():te.default.runtime.sendMessage({type:"IS_ALLOWED_FILE_SCHEME_ACCESS"})}function BQ(){return!!(te.default.tabs&&te.default.tabs.query)}function EQ(e,t,r={}){let n=r.signal;if(n?.aborted)return pr;e.addListener(t);let o=()=>e.removeListener(t);return n?(n.addEventListener("abort",o,{once:!0}),()=>{o(),n.removeEventListener("abort",o)}):o}async function xd(){let[e]=await te.default.tabs.query({active:!0,currentWindow:!0});if(!e)throw new Error("No active tab");let t=e.id;if(t===void 0)throw new Error("No active tab");return t}function yQ(){try{let t=te.default.runtime.getManifest().side_panel.default_path,r=new URL(te.default.runtime.getURL(t)),n=new URL(window.location.href);return n.pathname===r.pathname&&n.origin===r.origin}catch{return!1}}function QQ(){if(!("serviceWorker"in navigator)&&!te.default.extension.getViews)return!0;try{return browser.runtime.getManifest().background.scripts.some(t=>{let r=new URL(te.default.runtime.getURL(t));return location.pathname===r.pathname&&location.origin===r.origin})}catch{return!1}}async function Go(e){return!te.default.sidePanel||!te.default.sidePanel.open||e?.windowId===void 0?!1:te.default.sidePanel.open({windowId:e?.windowId}).then(async()=>te.default.runtime.getContexts?(await Gt(50),await te.default.runtime.getContexts({contextTypes:["SIDE_PANEL"]}).then(r=>r.length>0)):!1).catch(t=>!1)}async function qo(e,t){let{fileTextStatus:r}=await te.default.storage.local.get({fileTextStatus:{}});return e.forEach(n=>{r[n]=t}),te.default.storage.local.set({fileTextStatus:r})}var x1=V(Ae());var bd=Object.hasOwn;var b1=Array.isArray;var k1="_";function kd(e,t){let r=e in t?t[e]:t[k1];return typeof r=="function"?r():r}function Dd(e){return[...new Set(e)]}var Bn=(...e)=>e.join("/").replace(/([^:])\/{2,}/g,"$1/");function Gt(e=1e3,t){return new Promise((r,n)=>{let o=setTimeout(r,e);t&&t.addEventListener("abort",()=>{clearTimeout(o),n(new DOMException("Aborted","AbortError"))},{once:!0})})}function _d(e){return e!=null}async function En(e,t=1e3,r=2){let n=0;for(;;){try{return await e()}catch(o){if(r>=0&&n++>=r)throw o}await Gt(t)}}function wr(e,t=0){let r=!1,n;return function(...o){return r||(r=!0,n=new Promise((i,s)=>{e(...o).then(i).catch(s).finally(async()=>{t&&await Gt(t),r=!1})})),n}}function wQ(e,t,r){return async function(){let n=`__debounceJob:${e}__`,o=(await j({[n]:{running:!1,startAt:0,endAt:0,retryCount:0}}))[n],{running:i=!1,startAt:s=0,endAt:a=0,retryCount:A=0}=o,c=async m=>(Object.assign(o,m),M({[n]:o})),l=Date.now(),g=a===0,d=A>0,f=d?A*1e4:r??0;if((g||l-a>=f)&&(!i||l-s>3e3)){c({startAt:l,running:!0});try{return await t(),c({endAt:Date.now(),running:!1,retryCount:0}),""}catch{throw c({endAt:Date.now(),running:!1,retryCount:A>=60?60:A+1}),new Error(e)}}if(d)throw new Error(e);return""}}function Jr(e){return new Promise((t,r)=>{let n=new FileReader;n.readAsDataURL(e),n.onload=()=>{t(n.result)},n.onerror=r})}async function SQ(){return(await tr.default.cookies.getAll({domain:".chat.openai.com"})).some(r=>r.name=="__Secure-next-auth.session-token")}function xQ(e,t,r){let n=tr.default.runtime.getURL("chat/index.html");return tr.default.tabs.query({url:n+"*",currentWindow:!0}).then(async o=>{if(o.length){let i=await tr.default.tabs.update(o[0].id,{active:!0});return t&&t(),i}else return r&&await r(),tr.default.tabs.create({url:n+(e?"?reason="+e:"")})})}async function Ho(){let e=tr.default.runtime.getURL("standalone.html?from=sidebar"),[t]=await tr.default.tabs.query({currentWindow:!0,url:`${e}*`});return t&&t.id?tr.default.tabs.reload(t.id).then(()=>tr.default.tabs.update(t.id,{active:!0})):tr.default.tabs.create({url:e})}function Fd(e){let t=e.lastIndexOf(".");return e.substring(0,t)}function dA(e,t){if(!t)return[e,""];let r=e.indexOf(t);return r===-1?[e,""]:[e.slice(0,r),e.slice(r+t.length)]}function yn(e,t,r){let n=_1(e,r);switch(t){case"<":return n===-1;case"<=":return n===-1||n===0;case"=":return n===0;case">":return n===1;case">=":return n===1||n===0;default:break}}function _1(e,t){let r=e.split(".").map(Number),n=t.split(".").map(Number),o=Math.max(r.length,n.length);for(let i=0;i<o;i++){let s=r[i]||0,a=n[i]||0;if(s>a)return 1;if(s<a)return-1}return 0}var lz=V(Ae());var sz=V(Ae());var rt=[];for(let e=0;e<256;++e)rt.push((e+256).toString(16).slice(1));function bQ(e,t=0){return(rt[e[t+0]]+rt[e[t+1]]+rt[e[t+2]]+rt[e[t+3]]+"-"+rt[e[t+4]]+rt[e[t+5]]+"-"+rt[e[t+6]]+rt[e[t+7]]+"-"+rt[e[t+8]]+rt[e[t+9]]+"-"+rt[e[t+10]]+rt[e[t+11]]+rt[e[t+12]]+rt[e[t+13]]+rt[e[t+14]]+rt[e[t+15]]).toLowerCase()}var vd,F1=new Uint8Array(16);function Rd(){if(!vd){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");vd=crypto.getRandomValues.bind(crypto)}return vd(F1)}var v1=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Td={randomUUID:v1};function R1(e,t,r){if(Td.randomUUID&&!t&&!e)return Td.randomUUID();e=e||{};let n=e.random??e.rng?.()??Rd();if(n.length<16)throw new Error("Random bytes length must be >= 16");if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,t){if(r=r||0,r<0||r+16>t.length)throw new RangeError(`UUID byte range ${r}:${r+15} is out of buffer bounds`);for(let o=0;o<16;++o)t[r+o]=n[o];return t}return bQ(n)}var ne=R1;var us=V(Ae());var Yr=V(Ae());var Lo=class{constructor(){this.results=[]}getLastResult(){return this.results[this.results.length-1]}parse(t){let r=t.choices?.[0]?.delta?.content||t.choices?.[0]?.message?.content,n=t.choices?.[0]?.delta?.reasoning_content;return r&&r!=="<|im_end|>"&&r!=="<|im_sep|>"?this.handleTextMsg(r):n&&this.handleReasoningMessage(n),this.results}handleTextMsg(t){let r=this.getLastResult();r&&r.type==="thinking"&&(r.status="finish"),r&&r.type==="text"?r.text+=t:this.results.push({type:"text",text:t,id:ne()})}handleReasoningMessage(t){let r=this.getLastResult();r&&r.type==="reasoning_content"?r.reasoningContent&&(r.reasoningContent.text+=t):this.results.push({type:"reasoning_content",reasoningContent:{status:"start",text:t}})}};var Ko=V(Ae());var kQ="__webext_forward_tabs_message__",fA=new Map,T1=QQ(),N1=yQ(),Nd=(e,t)=>{if(T1){let o=M1(e,t);if(o)return o}if(e.view==="sidebar"&&!N1)return;let r=e.type,n=fA.get(r);if(n)return new Promise(async o=>{try{o({data:await n({sender:t,data:e.data,id:r,originalSender:e.sender})})}catch(i){o({error:Ln(i)})}})};function M1(e,t){if(e.type===kQ)return new Promise(async(r,n)=>{let{tabId:o,frameId:i,type:s,data:a,view:A}=e.data,c;try{c=o==="sender"?t.tab.id:o==="active"?await xd():o}catch(g){return n(g)}let l=i==="sender"?t.frameId:i;r(Ko.default.tabs.sendMessage(c,{type:s,data:a,sender:t,view:A},l===void 0?void 0:{frameId:l}))})}async function xt(e,...[t,r={}]){if(!Ko.default.runtime.id)throw new Error("Extension not initialized.");let n=r.tabId,o=r.frameId,i=r.view,s;if(n===void 0?s=await Ko.default.runtime.sendMessage({type:e,data:t,view:i}):n!=="sender"&&o!=="sender"&&BQ()?s=await Ko.default.tabs.sendMessage(n==="active"?await xd():n,{type:e,data:t,view:i},o===void 0?void 0:{frameId:o}):s=await Ko.default.runtime.sendMessage({type:kQ,data:{tabId:n,frameId:o,type:e,data:t,view:i}}),!s)throw new Error(`null for Message ID "${e}". Maybe multiple async runtime.onMessage listeners or no listener.`);if("error"in s)throw SB(s.error);return s.data}function nt(e,t,r={}){let n=r.signal;if(n?.aborted)return pr;if(fA.get(e))throw new Error(`Message ID "${e}" already has a listener.`);fA.set(e,t);let i=()=>fA.delete(e);return n&&n.addEventListener("abort",i,{once:!0}),()=>{i(),n&&n.removeEventListener("abort",i)}}var Md=function(e,t){return Md=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(r[o]=n[o])},Md(e,t)};function Qn(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");Md(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}function wn(e,t,r,n){function o(i){return i instanceof r?i:new r(function(s){s(i)})}return new(r||(r=Promise))(function(i,s){function a(l){try{c(n.next(l))}catch(g){s(g)}}function A(l){try{c(n.throw(l))}catch(g){s(g)}}function c(l){l.done?i(l.value):o(l.value).then(a,A)}c((n=n.apply(e,t||[])).next())})}function Sr(e,t){var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,s=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return s.next=a(0),s.throw=a(1),s.return=a(2),typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(c){return function(l){return A([c,l])}}function A(c){if(n)throw new TypeError("Generator is already executing.");for(;s&&(s=0,c[0]&&(r=0)),r;)try{if(n=1,o&&(i=c[0]&2?o.return:c[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,c[1])).done)return i;switch(o=0,i&&(c=[c[0]&2,i.value]),c[0]){case 0:case 1:i=c;break;case 4:return r.label++,{value:c[1],done:!1};case 5:r.label++,o=c[1],c=[0];continue;case 7:c=r.ops.pop(),r.trys.pop();continue;default:if(i=r.trys,!(i=i.length>0&&i[i.length-1])&&(c[0]===6||c[0]===2)){r=0;continue}if(c[0]===3&&(!i||c[1]>i[0]&&c[1]<i[3])){r.label=c[1];break}if(c[0]===6&&r.label<i[1]){r.label=i[1],i=c;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(c);break}i[2]&&r.ops.pop(),r.trys.pop();continue}c=t.call(e,r)}catch(l){c=[6,l],o=0}finally{n=i=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}function Rt(e){var t=typeof Symbol=="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function xr(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),o,i=[],s;try{for(;(t===void 0||t-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(a){s={error:a}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(s)throw s.error}}return i}function br(e,t,r){if(r||arguments.length===2)for(var n=0,o=t.length,i;n<o;n++)(i||!(n in t))&&(i||(i=Array.prototype.slice.call(t,0,n)),i[n]=t[n]);return e.concat(i||Array.prototype.slice.call(t))}function zn(e){return this instanceof zn?(this.v=e,this):new zn(e)}function DQ(e,t,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(e,t||[]),o,i=[];return o=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",s),o[Symbol.asyncIterator]=function(){return this},o;function s(f){return function(u){return Promise.resolve(u).then(f,g)}}function a(f,u){n[f]&&(o[f]=function(m){return new Promise(function(C,p){i.push([f,m,C,p])>1||A(f,m)})},u&&(o[f]=u(o[f])))}function A(f,u){try{c(n[f](u))}catch(m){d(i[0][3],m)}}function c(f){f.value instanceof zn?Promise.resolve(f.value.v).then(l,g):d(i[0][2],f)}function l(f){A("next",f)}function g(f){A("throw",f)}function d(f,u){f(u),i.shift(),i.length&&A(i[0][0],i[0][1])}}function _Q(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],r;return t?t.call(e):(e=typeof Rt=="function"?Rt(e):e[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(i){r[i]=e[i]&&function(s){return new Promise(function(a,A){s=e[i](s),o(a,A,s.done,s.value)})}}function o(i,s,a,A){Promise.resolve(A).then(function(c){i({value:c,done:a})},s)}}function ue(e){return typeof e=="function"}function uA(e){var t=function(n){Error.call(n),n.stack=new Error().stack},r=e(t);return r.prototype=Object.create(Error.prototype),r.prototype.constructor=r,r}var IA=uA(function(e){return function(r){e(this),this.message=r?r.length+` errors occurred during unsubscription:
`+r.map(function(n,o){return o+1+") "+n.toString()}).join(`
  `):"",this.name="UnsubscriptionError",this.errors=r}});function rs(e,t){if(e){var r=e.indexOf(t);0<=r&&e.splice(r,1)}}var Jo=function(){function e(t){this.initialTeardown=t,this.closed=!1,this._parentage=null,this._finalizers=null}return e.prototype.unsubscribe=function(){var t,r,n,o,i;if(!this.closed){this.closed=!0;var s=this._parentage;if(s)if(this._parentage=null,Array.isArray(s))try{for(var a=Rt(s),A=a.next();!A.done;A=a.next()){var c=A.value;c.remove(this)}}catch(m){t={error:m}}finally{try{A&&!A.done&&(r=a.return)&&r.call(a)}finally{if(t)throw t.error}}else s.remove(this);var l=this.initialTeardown;if(ue(l))try{l()}catch(m){i=m instanceof IA?m.errors:[m]}var g=this._finalizers;if(g){this._finalizers=null;try{for(var d=Rt(g),f=d.next();!f.done;f=d.next()){var u=f.value;try{FQ(u)}catch(m){i=i??[],m instanceof IA?i=br(br([],xr(i)),xr(m.errors)):i.push(m)}}}catch(m){n={error:m}}finally{try{f&&!f.done&&(o=d.return)&&o.call(d)}finally{if(n)throw n.error}}}if(i)throw new IA(i)}},e.prototype.add=function(t){var r;if(t&&t!==this)if(this.closed)FQ(t);else{if(t instanceof e){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=(r=this._finalizers)!==null&&r!==void 0?r:[]).push(t)}},e.prototype._hasParent=function(t){var r=this._parentage;return r===t||Array.isArray(r)&&r.includes(t)},e.prototype._addParent=function(t){var r=this._parentage;this._parentage=Array.isArray(r)?(r.push(t),r):r?[r,t]:t},e.prototype._removeParent=function(t){var r=this._parentage;r===t?this._parentage=null:Array.isArray(r)&&rs(r,t)},e.prototype.remove=function(t){var r=this._finalizers;r&&rs(r,t),t instanceof e&&t._removeParent(this)},e.EMPTY=function(){var t=new e;return t.closed=!0,t}(),e}();var Ud=Jo.EMPTY;function pA(e){return e instanceof Jo||e&&"closed"in e&&ue(e.remove)&&ue(e.add)&&ue(e.unsubscribe)}function FQ(e){ue(e)?e():e.unsubscribe()}var rr={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var Vo={setTimeout:function(e,t){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];var o=Vo.delegate;return o?.setTimeout?o.setTimeout.apply(o,br([e,t],xr(r))):setTimeout.apply(void 0,br([e,t],xr(r)))},clearTimeout:function(e){var t=Vo.delegate;return(t?.clearTimeout||clearTimeout)(e)},delegate:void 0};function mA(e){Vo.setTimeout(function(){var t=rr.onUnhandledError;if(t)t(e);else throw e})}function Pd(){}var vQ=function(){return Od("C",void 0,void 0)}();function RQ(e){return Od("E",void 0,e)}function TQ(e){return Od("N",e,void 0)}function Od(e,t,r){return{kind:e,value:t,error:r}}var Yn=null;function zo(e){if(rr.useDeprecatedSynchronousErrorHandling){var t=!Yn;if(t&&(Yn={errorThrown:!1,error:null}),e(),t){var r=Yn,n=r.errorThrown,o=r.error;if(Yn=null,n)throw o}}else e()}function NQ(e){rr.useDeprecatedSynchronousErrorHandling&&Yn&&(Yn.errorThrown=!0,Yn.error=e)}var ns=function(e){Qn(t,e);function t(r){var n=e.call(this)||this;return n.isStopped=!1,r?(n.destination=r,pA(r)&&r.add(n)):n.destination=G1,n}return t.create=function(r,n,o){return new Wn(r,n,o)},t.prototype.next=function(r){this.isStopped?qd(TQ(r),this):this._next(r)},t.prototype.error=function(r){this.isStopped?qd(RQ(r),this):(this.isStopped=!0,this._error(r))},t.prototype.complete=function(){this.isStopped?qd(vQ,this):(this.isStopped=!0,this._complete())},t.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,e.prototype.unsubscribe.call(this),this.destination=null)},t.prototype._next=function(r){this.destination.next(r)},t.prototype._error=function(r){try{this.destination.error(r)}finally{this.unsubscribe()}},t.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},t}(Jo);var U1=Function.prototype.bind;function Gd(e,t){return U1.call(e,t)}var P1=function(){function e(t){this.partialObserver=t}return e.prototype.next=function(t){var r=this.partialObserver;if(r.next)try{r.next(t)}catch(n){hA(n)}},e.prototype.error=function(t){var r=this.partialObserver;if(r.error)try{r.error(t)}catch(n){hA(n)}else hA(t)},e.prototype.complete=function(){var t=this.partialObserver;if(t.complete)try{t.complete()}catch(r){hA(r)}},e}(),Wn=function(e){Qn(t,e);function t(r,n,o){var i=e.call(this)||this,s;if(ue(r)||!r)s={next:r??void 0,error:n??void 0,complete:o??void 0};else{var a;i&&rr.useDeprecatedNextContext?(a=Object.create(r),a.unsubscribe=function(){return i.unsubscribe()},s={next:r.next&&Gd(r.next,a),error:r.error&&Gd(r.error,a),complete:r.complete&&Gd(r.complete,a)}):s=r}return i.destination=new P1(s),i}return t}(ns);function hA(e){rr.useDeprecatedSynchronousErrorHandling?NQ(e):mA(e)}function O1(e){throw e}function qd(e,t){var r=rr.onStoppedNotification;r&&Vo.setTimeout(function(){return r(e,t)})}var G1={closed:!0,next:Pd,error:O1,complete:Pd};var Yo=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}();function MQ(e){return e}function UQ(e){return e.length===0?MQ:e.length===1?e[0]:function(r){return e.reduce(function(n,o){return o(n)},r)}}var qt=function(){function e(t){t&&(this._subscribe=t)}return e.prototype.lift=function(t){var r=new e;return r.source=this,r.operator=t,r},e.prototype.subscribe=function(t,r,n){var o=this,i=H1(t)?t:new Wn(t,r,n);return zo(function(){var s=o,a=s.operator,A=s.source;i.add(a?a.call(i,A):A?o._subscribe(i):o._trySubscribe(i))}),i},e.prototype._trySubscribe=function(t){try{return this._subscribe(t)}catch(r){t.error(r)}},e.prototype.forEach=function(t,r){var n=this;return r=PQ(r),new r(function(o,i){var s=new Wn({next:function(a){try{t(a)}catch(A){i(A),s.unsubscribe()}},error:i,complete:o});n.subscribe(s)})},e.prototype._subscribe=function(t){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(t)},e.prototype[Yo]=function(){return this},e.prototype.pipe=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return UQ(t)(this)},e.prototype.toPromise=function(t){var r=this;return t=PQ(t),new t(function(n,o){var i;r.subscribe(function(s){return i=s},function(s){return o(s)},function(){return n(i)})})},e.create=function(t){return new e(t)},e}();function PQ(e){var t;return(t=e??rr.Promise)!==null&&t!==void 0?t:Promise}function q1(e){return e&&ue(e.next)&&ue(e.error)&&ue(e.complete)}function H1(e){return e&&e instanceof ns||q1(e)&&pA(e)}function L1(e){return ue(e?.lift)}function CA(e){return function(t){if(L1(t))return t.lift(function(r){try{return e(r,this)}catch(n){this.error(n)}});throw new TypeError("Unable to lift unknown Observable type")}}function OQ(e,t,r,n,o){return new K1(e,t,r,n,o)}var K1=function(e){Qn(t,e);function t(r,n,o,i,s,a){var A=e.call(this,r)||this;return A.onFinalize=s,A.shouldUnsubscribe=a,A._next=n?function(c){try{n(c)}catch(l){r.error(l)}}:e.prototype._next,A._error=i?function(c){try{i(c)}catch(l){r.error(l)}finally{this.unsubscribe()}}:e.prototype._error,A._complete=o?function(){try{o()}catch(c){r.error(c)}finally{this.unsubscribe()}}:e.prototype._complete,A}return t.prototype.unsubscribe=function(){var r;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var n=this.closed;e.prototype.unsubscribe.call(this),!n&&((r=this.onFinalize)===null||r===void 0||r.call(this))}},t}(ns);var GQ=uA(function(e){return function(){e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}});var Hd=function(e){Qn(t,e);function t(){var r=e.call(this)||this;return r.closed=!1,r.currentObservers=null,r.observers=[],r.isStopped=!1,r.hasError=!1,r.thrownError=null,r}return t.prototype.lift=function(r){var n=new qQ(this,this);return n.operator=r,n},t.prototype._throwIfClosed=function(){if(this.closed)throw new GQ},t.prototype.next=function(r){var n=this;zo(function(){var o,i;if(n._throwIfClosed(),!n.isStopped){n.currentObservers||(n.currentObservers=Array.from(n.observers));try{for(var s=Rt(n.currentObservers),a=s.next();!a.done;a=s.next()){var A=a.value;A.next(r)}}catch(c){o={error:c}}finally{try{a&&!a.done&&(i=s.return)&&i.call(s)}finally{if(o)throw o.error}}}})},t.prototype.error=function(r){var n=this;zo(function(){if(n._throwIfClosed(),!n.isStopped){n.hasError=n.isStopped=!0,n.thrownError=r;for(var o=n.observers;o.length;)o.shift().error(r)}})},t.prototype.complete=function(){var r=this;zo(function(){if(r._throwIfClosed(),!r.isStopped){r.isStopped=!0;for(var n=r.observers;n.length;)n.shift().complete()}})},t.prototype.unsubscribe=function(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null},Object.defineProperty(t.prototype,"observed",{get:function(){var r;return((r=this.observers)===null||r===void 0?void 0:r.length)>0},enumerable:!1,configurable:!0}),t.prototype._trySubscribe=function(r){return this._throwIfClosed(),e.prototype._trySubscribe.call(this,r)},t.prototype._subscribe=function(r){return this._throwIfClosed(),this._checkFinalizedStatuses(r),this._innerSubscribe(r)},t.prototype._innerSubscribe=function(r){var n=this,o=this,i=o.hasError,s=o.isStopped,a=o.observers;return i||s?Ud:(this.currentObservers=null,a.push(r),new Jo(function(){n.currentObservers=null,rs(a,r)}))},t.prototype._checkFinalizedStatuses=function(r){var n=this,o=n.hasError,i=n.thrownError,s=n.isStopped;o?r.error(i):s&&r.complete()},t.prototype.asObservable=function(){var r=new qt;return r.source=this,r},t.create=function(r,n){return new qQ(r,n)},t}(qt);var qQ=function(e){Qn(t,e);function t(r,n){var o=e.call(this)||this;return o.destination=r,o.source=n,o}return t.prototype.next=function(r){var n,o;(o=(n=this.destination)===null||n===void 0?void 0:n.next)===null||o===void 0||o.call(n,r)},t.prototype.error=function(r){var n,o;(o=(n=this.destination)===null||n===void 0?void 0:n.error)===null||o===void 0||o.call(n,r)},t.prototype.complete=function(){var r,n;(n=(r=this.destination)===null||r===void 0?void 0:r.complete)===null||n===void 0||n.call(r)},t.prototype._subscribe=function(r){var n,o;return(o=(n=this.source)===null||n===void 0?void 0:n.subscribe(r))!==null&&o!==void 0?o:Ud},t}(Hd);var HQ=function(e){return e&&typeof e.length=="number"&&typeof e!="function"};function LQ(e){return ue(e?.then)}function KQ(e){return ue(e[Yo])}function JQ(e){return Symbol.asyncIterator&&ue(e?.[Symbol.asyncIterator])}function VQ(e){return new TypeError("You provided "+(e!==null&&typeof e=="object"?"an invalid object":"'"+e+"'")+" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.")}function J1(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var zQ=J1();function YQ(e){return ue(e?.[zQ])}function WQ(e){return DQ(this,arguments,function(){var r,n,o,i;return Sr(this,function(s){switch(s.label){case 0:r=e.getReader(),s.label=1;case 1:s.trys.push([1,,9,10]),s.label=2;case 2:return[4,zn(r.read())];case 3:return n=s.sent(),o=n.value,i=n.done,i?[4,zn(void 0)]:[3,5];case 4:return[2,s.sent()];case 5:return[4,zn(o)];case 6:return[4,s.sent()];case 7:return s.sent(),[3,2];case 8:return[3,10];case 9:return r.releaseLock(),[7];case 10:return[2]}})})}function jQ(e){return ue(e?.getReader)}function Ld(e){if(e instanceof qt)return e;if(e!=null){if(KQ(e))return V1(e);if(HQ(e))return z1(e);if(LQ(e))return Y1(e);if(JQ(e))return XQ(e);if(YQ(e))return W1(e);if(jQ(e))return j1(e)}throw VQ(e)}function V1(e){return new qt(function(t){var r=e[Yo]();if(ue(r.subscribe))return r.subscribe(t);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function z1(e){return new qt(function(t){for(var r=0;r<e.length&&!t.closed;r++)t.next(e[r]);t.complete()})}function Y1(e){return new qt(function(t){e.then(function(r){t.closed||(t.next(r),t.complete())},function(r){return t.error(r)}).then(null,mA)})}function W1(e){return new qt(function(t){var r,n;try{for(var o=Rt(e),i=o.next();!i.done;i=o.next()){var s=i.value;if(t.next(s),t.closed)return}}catch(a){r={error:a}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}t.complete()})}function XQ(e){return new qt(function(t){X1(e,t).catch(function(r){return t.error(r)})})}function j1(e){return XQ(WQ(e))}function X1(e,t){var r,n,o,i;return wn(this,void 0,void 0,function(){var s,a;return Sr(this,function(A){switch(A.label){case 0:A.trys.push([0,5,6,11]),r=_Q(e),A.label=1;case 1:return[4,r.next()];case 2:if(n=A.sent(),!!n.done)return[3,4];if(s=n.value,t.next(s),t.closed)return[2];A.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return a=A.sent(),o={error:a},[3,11];case 6:return A.trys.push([6,,9,10]),n&&!n.done&&(i=r.return)?[4,i.call(r)]:[3,8];case 7:A.sent(),A.label=8;case 8:return[3,10];case 9:if(o)throw o.error;return[7];case 10:return[7];case 11:return t.complete(),[2]}})})}function ZQ(e,t){return CA(function(r,n){var o=0;r.subscribe(OQ(n,function(i){n.next(e.call(t,i,o++))}))})}var Z1=Array.isArray;function $1(e,t){return Z1(t)?e.apply(void 0,br([],xr(t))):e(t)}function $Q(e){return ZQ(function(t){return $1(e,t)})}function BA(e,t,r){return r?BA(e,t).pipe($Q(r)):new qt(function(n){var o=function(){for(var s=[],a=0;a<arguments.length;a++)s[a]=arguments[a];return n.next(s.length===1?s[0]:s)},i=e(o);return ue(t)?function(){return t(o,i)}:void 0})}function Jd(e){e===void 0&&(e={});var t=e.connector,r=t===void 0?function(){return new Hd}:t,n=e.resetOnError,o=n===void 0?!0:n,i=e.resetOnComplete,s=i===void 0?!0:i,a=e.resetOnRefCountZero,A=a===void 0?!0:a;return function(c){var l,g,d,f=0,u=!1,m=!1,C=function(){g?.unsubscribe(),g=void 0},p=function(){C(),l=d=void 0,u=m=!1},Q=function(){var v=l;p(),v?.unsubscribe()};return CA(function(v,E){f++,!m&&!u&&C();var w=d=d??r();E.add(function(){f--,f===0&&!m&&!u&&(g=Kd(Q,A))}),w.subscribe(E),!l&&f>0&&(l=new Wn({next:function(B){return w.next(B)},error:function(B){m=!0,C(),g=Kd(p,o,B),w.error(B)},complete:function(){u=!0,C(),g=Kd(p,s),w.complete()}}),Ld(v).subscribe(l))})(c)}}function Kd(e,t){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];if(t===!0){e();return}if(t!==!1){var o=new Wn({next:function(){o.unsubscribe(),e()}});return Ld(t.apply(void 0,br([],xr(r)))).subscribe(o)}}var jn=V(Ae());async function z(e,t){let r=await jn.default.storage.local.get(e);return typeof e=="string"?Object.hasOwn(r,e)?r[e]:t:r}async function Ht(e,t){return typeof e=="string"?jn.default.storage.local.set({[e]:t}):jn.default.storage.local.set(e)}var Vd=BA(e=>jn.default.storage.local.onChanged.addListener(e),e=>jn.default.runtime.id&&jn.default.storage.local.onChanged.removeListener(e),e=>e).pipe(Jd({resetOnRefCountZero:!0}));var eK=V(Ae()),EA=new Map;function yA(e,t){if(EA.get(e))throw new Error(`Channel "${e}" already has a listener.`);return EA.set(e,t),()=>{EA.delete(e)}}function zd(e){let t=e.name,r=EA.get(t);return r?(r(tK(e)),!0):!1}function tK(e){let t=new AbortController,r=!0;e.onDisconnect.addListener(()=>{t.abort(),r=!1});function n(i){return e.onDisconnect.addListener(i),()=>e.onDisconnect.removeListener(i)}function o(i){return e.onMessage.addListener(i),()=>e.onMessage.removeListener(i)}return{signal:t.signal,send:i=>r&&e.postMessage(i),close:()=>r&&e.disconnect(),onMessage:o,onClose:n,async*iter(...i){let s,a=o(c=>s(c)),A=n(()=>s=pr);i.length&&e.postMessage(i[0]);try{for(;;)yield new Promise(c=>s=c)}finally{a(),A()}}}}var rK=Object.prototype.toString,nK=e=>rK.call(e)==="[object Error]",oK=new Set(["network error","Failed to fetch","NetworkError when attempting to fetch resource.","The Internet connection appears to be offline.","Load failed","Network request failed","fetch failed","terminated"]);function Yd(e){return e&&nK(e)&&e.name==="TypeError"&&typeof e.message=="string"?e.message==="Load failed"?e.stack===void 0:oK.has(e.message):!1}var iK="https://apidomain.gptshere.com/api/static/v2/domain_list",ew="AES-GCM",sK="SHA-256";async function aK(e){let t=new TextEncoder().encode(e);return(await crypto.subtle.digest({name:sK},t)).slice(0,16)}async function tw(){let e=Date.now(),t=await fetch(iK,{method:"GET",headers:{iv:e.toString()}}),r=t.headers.get("kl");if(!r)throw new Error("api error");let n=parseInt(r,10);if(isNaN(n)||n<0||n>64)throw new Error("api error");let i=await(await t.blob()).arrayBuffer(),s=new Uint8Array(i,0,n),a=new Uint8Array(i,n),A=await aK(e.toString()),c=await crypto.subtle.importKey("raw",s,{name:ew},!1,["decrypt"]),l=await crypto.subtle.decrypt({name:ew,iv:A},c,a),g=new TextDecoder().decode(l),d=JSON.parse(g);if(d.code!==0)throw new Error("api error");let f=d?.data?.api_list,u=d?.data?.event;if(!f||f.length===0||!u)throw new Error("api error");return{apiDomainList:f,eventDomain:u}}var Wd=V(Ae());var kr={installSuccess(){return Z.googleAnalytics(`${Ve?"edge_":""}sider_install_success`,{id:"install"})},report(e,t){let n=(Ve?"edge_":"chrome_")+e;Z.googleAnalytics(n,{...t}).catch(()=>{})},async tts(e={}){let t=e.id||(await j({lastTab:""})).lastTab,r=e.voice||(await j({lastVoiceRole:""})).lastVoiceRole;kr.report(`tts_${t}_${r}`)}};async function AK(){let e=await z("sider_event_device_id");if(!e){let t=ne();return await M({sider_event_device_id:t}),t}return e}async function cK(){let e=await z("sider_event_unique_id");if(!e){let t=ne();return await M({sider_event_unique_id:t}),t}return e}function lK(){let e={Win:"Windows",Mac:"MacOS",X11:"UNIX",Linux:"Linux",Android:"Android",iPhone:"iOS"};for(let[t,r]of Object.entries(e))if(navigator.userAgent.includes(t))return r;return"Unknown"}async function gK(){return(await z("userInfo"))?.id}async function dK(){return(await z("vipInfo"))?.isVIP}function rw(e){let t=typeof e;return t==="string"||t==="number"||t==="boolean"}var nw="sider_extension",jd="https://event.sider.ai",fK="/collect",Xd=async(e,t)=>{if(!Wd.default.tabs)return Wd.default.runtime.sendMessage({type:"SIDER_STAT_API",args:[e,t]});let r=await ow(),n=new URL(fK,r).toString(),o=e.replace(/-/gi,"_").trim();o.length>50,t&&Object.entries(t).forEach(([A,c])=>{Array.isArray(c)?t[A]=c.filter(rw).join("&"):rw(c)||delete t[A]});let i=Date.now(),s="others";typeof window<"u"&&(window?.isInStandalone?s="full_page":window?.isInSidepanel&&(s="side_panel"));let a={app_id:nw,event_type:o,event_id:ne(),device_id:await AK(),unique_id:await cK(),timestamp:i,host_name:"sider.ai",locale:await z("language"),system_language:await z("language"),country_code:navigator.language.split("-")[1],zone_offset:-new Date().getTimezoneOffset()*6e4,make:"Node",screen_height:typeof window<"u"?window.screen.height:0,screen_width:typeof window<"u"?window.screen.width:0,viewport_height:typeof window<"u"?window.innerHeight:0,viewport_width:typeof window<"u"?window.innerWidth:0,sdk_name:"aws-solution-clickstream-sdk",sdk_version:"0.12.2",platform:"Extension",app_version:at,app_package_name:`Sider_${Ve?"edge":"chrome"}`,attributes:{...t,os:lK(),user_id:await gK(),user_premium:await dK(),use_scenario:s}};return fetch(`${n}?appId=${nw}&platform=Ext&event_bundle_sequence_id=1&upload_timestamp=${i}`,{method:"POST",headers:new Headers({"Content-Type":"application/json; charset=utf-8"}),body:JSON.stringify([a])}).catch(A=>{})},QA={report:async(e,t)=>{try{await Xd(e,t)}catch{}}};var Zd="eventDomain",nr="domainPool",os="domainPoolIndex";async function $d(){let e=await j({[nr]:[],[os]:0}),t=e[os]+1;t>=e[nr].length&&(t=0),e[nr].length>0&&M({[os]:t})}async function uK(){let e=await j({[nr]:[fe.origin],[os]:0});return e[nr]?.[e[os]]??fe.origin}async function Wo(){let e=await uK();return new URL("api",e).toString()}async function ow(){return(await j({[Zd]:jd}))?.[Zd]||jd}async function iw(){let e=await j({[nr]:[]}),t=null,r=[],n="";try{({apiDomainList:r,eventDomain:n}=await tw())}catch(o){throw t=o,o}finally{(t||!r?.length)&&(r=[fe.origin]),M({[nr]:[...new Set(r??[fe.origin])],[Zd]:n})}}async function jo(e,t){let r=await j({[nr]:[]});if(Yd(e)&&navigator.onLine)if(t){let n=!1;t instanceof URL?n=r[nr].some(o=>t.origin.includes(o)):n=r[nr].some(o=>t.includes(o)),n&&await $d()}else await $d()}var Ow=V(tf()),Me=V(Ae());var bw=V(tf());function As(e,t,r,n){function o(i){return i instanceof r?i:new r(function(s){s(i)})}return new(r||(r=Promise))(function(i,s){function a(l){try{c(n.next(l))}catch(g){s(g)}}function A(l){try{c(n.throw(l))}catch(g){s(g)}}function c(l){l.done?i(l.value):o(l.value).then(a,A)}c((n=n.apply(e,t||[])).next())})}var Se=class{constructor(){this.mutex=Promise.resolve()}lock(){let t=()=>{};return this.mutex=this.mutex.then(()=>new Promise(t)),new Promise(r=>{t=r})}dispatch(t){return As(this,void 0,void 0,function*(){let r=yield this.lock();try{return yield Promise.resolve(t())}finally{r()}})}},rf;function hK(){return typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global}var sf=hK(),nf=(rf=sf.Buffer)!==null&&rf!==void 0?rf:null,CK=sf.TextEncoder?new sf.TextEncoder:null;function mw(e,t){return(e&15)+(e>>6|e>>3&8)<<4|(t&15)+(t>>6|t>>3&8)}function BK(e,t){let r=t.length>>1;for(let n=0;n<r;n++){let o=n<<1;e[n]=mw(t.charCodeAt(o),t.charCodeAt(o+1))}}function EK(e,t){if(e.length!==t.length*2)return!1;for(let r=0;r<t.length;r++){let n=r<<1;if(t[r]!==mw(e.charCodeAt(n),e.charCodeAt(n+1)))return!1}return!0}var gw=87,dw=48;function fw(e,t,r){let n=0;for(let o=0;o<r;o++){let i=t[o]>>>4;e[n++]=i>9?i+gw:i+dw,i=t[o]&15,e[n++]=i>9?i+gw:i+dw}return String.fromCharCode.apply(null,e)}var uw=nf!==null?e=>{if(typeof e=="string"){let t=nf.from(e,"utf8");return new Uint8Array(t.buffer,t.byteOffset,t.length)}if(nf.isBuffer(e))return new Uint8Array(e.buffer,e.byteOffset,e.length);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw new Error("Invalid data type!")}:e=>{if(typeof e=="string")return CK.encode(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw new Error("Invalid data type!")},Iw="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",as=new Uint8Array(256);for(let e=0;e<Iw.length;e++)as[Iw.charCodeAt(e)]=e;function yK(e){let t=Math.floor(e.length*.75),r=e.length;return e[r-1]==="="&&(t-=1,e[r-2]==="="&&(t-=1)),t}function QK(e){let t=yK(e),r=e.length,n=new Uint8Array(t),o=0;for(let i=0;i<r;i+=4){let s=as[e.charCodeAt(i)],a=as[e.charCodeAt(i+1)],A=as[e.charCodeAt(i+2)],c=as[e.charCodeAt(i+3)];n[o]=s<<2|a>>4,o+=1,n[o]=(a&15)<<4|A>>2,o+=1,n[o]=(A&3)<<6|c&63,o+=1}return n}var wA=16*1024,is=4,wK=new Se,of=new Map;function SK(e,t){return As(this,void 0,void 0,function*(){let r=null,n=null,o=!1;if(typeof WebAssembly>"u")throw new Error("WebAssembly is not supported in this environment!");let i=(B,y=0)=>{n.set(B,y)},s=()=>n,a=()=>r.exports,A=B=>{r.exports.Hash_SetMemorySize(B);let y=r.exports.Hash_GetBuffer(),T=r.exports.memory.buffer;n=new Uint8Array(T,y,B)},c=()=>new DataView(r.exports.memory.buffer).getUint32(r.exports.STATE_SIZE,!0),l=wK.dispatch(()=>As(this,void 0,void 0,function*(){if(!of.has(e.name)){let y=QK(e.data),T=WebAssembly.compile(y);of.set(e.name,T)}let B=yield of.get(e.name);r=yield WebAssembly.instantiate(B,{})})),g=()=>As(this,void 0,void 0,function*(){r||(yield l);let B=r.exports.Hash_GetBuffer(),y=r.exports.memory.buffer;n=new Uint8Array(y,B,wA)}),d=(B=null)=>{o=!0,r.exports.Hash_Init(B)},f=B=>{let y=0;for(;y<B.length;){let T=B.subarray(y,y+wA);y+=T.length,n.set(T),r.exports.Hash_Update(T.length)}},u=B=>{if(!o)throw new Error("update() called before init()");let y=uw(B);f(y)},m=new Uint8Array(t*2),C=(B,y=null)=>{if(!o)throw new Error("digest() called before init()");return o=!1,r.exports.Hash_Final(y),B==="binary"?n.slice(0,t):fw(m,n,t)},p=()=>{if(!o)throw new Error("save() can only be called after init() and before digest()");let B=r.exports.Hash_GetState(),y=c(),T=r.exports.memory.buffer,P=new Uint8Array(T,B,y),S=new Uint8Array(is+y);return BK(S,e.hash),S.set(P,is),S},Q=B=>{if(!(B instanceof Uint8Array))throw new Error("load() expects an Uint8Array generated by save()");let y=r.exports.Hash_GetState(),T=c(),P=is+T,S=r.exports.memory.buffer;if(B.length!==P)throw new Error(`Bad state length (expected ${P} bytes, got ${B.length})`);if(!EK(e.hash,B.subarray(0,is)))throw new Error("This state was written by an incompatible hash implementation");let U=B.subarray(is);new Uint8Array(S,y,T).set(U),o=!0},v=B=>typeof B=="string"?B.length<wA/4:B.byteLength<wA,E=v;switch(e.name){case"argon2":case"scrypt":E=()=>!0;break;case"blake2b":case"blake2s":E=(B,y)=>y<=512&&v(B);break;case"blake3":E=(B,y)=>y===0&&v(B);break;case"xxhash64":case"xxhash3":case"xxhash128":case"crc64":E=()=>!1;break}let w=(B,y=null,T=null)=>{if(!E(B,y))return d(y),u(B),C("hex",T);let P=uw(B);return n.set(P),r.exports.Hash_Calculate(P.length,y,T),fw(m,n,t)};return yield g(),{getMemory:s,writeMemory:i,getExports:a,setMemorySize:A,init:d,update:u,digest:C,save:p,load:Q,calculate:w,hashLength:t}})}function hw(e,t,r){return As(this,void 0,void 0,function*(){let n=yield e.lock(),o=yield SK(t,r);return n(),o})}var Kie=new Se;var Jie=new Se;var Vie=new DataView(new ArrayBuffer(4));var zie=new Se;var Yie=new Se;var Wie=new Se;var jie=new Se;var Xie=new Uint8Array(8);var Zie=new Se;var xK="md5",bK="AGFzbQEAAAABEgRgAAF/YAAAYAF/AGACf38BfwMIBwABAgMBAAIFBAEBAgIGDgJ/AUGgigULfwBBgAgLB3AIBm1lbW9yeQIADkhhc2hfR2V0QnVmZmVyAAAJSGFzaF9Jbml0AAELSGFzaF9VcGRhdGUAAgpIYXNoX0ZpbmFsAAQNSGFzaF9HZXRTdGF0ZQAFDkhhc2hfQ2FsY3VsYXRlAAYKU1RBVEVfU0laRQMBCoMaBwUAQYAJCy0AQQBC/rnrxemOlZkQNwKQiQFBAEKBxpS6lvHq5m83AoiJAUEAQgA3AoCJAQu+BQEHf0EAQQAoAoCJASIBIABqQf////8BcSICNgKAiQFBAEEAKAKEiQEgAiABSWogAEEddmo2AoSJAQJAAkACQAJAAkACQCABQT9xIgMNAEGACSEEDAELIABBwAAgA2siBUkNASAFQQNxIQZBACEBAkAgA0E/c0EDSQ0AIANBgIkBaiEEIAVB/ABxIQdBACEBA0AgBCABaiICQRhqIAFBgAlqLQAAOgAAIAJBGWogAUGBCWotAAA6AAAgAkEaaiABQYIJai0AADoAACACQRtqIAFBgwlqLQAAOgAAIAcgAUEEaiIBRw0ACwsCQCAGRQ0AIANBmIkBaiECA0AgAiABaiABQYAJai0AADoAACABQQFqIQEgBkF/aiIGDQALC0GYiQFBwAAQAxogACAFayEAIAVBgAlqIQQLIABBwABPDQEgACECDAILIABFDQIgAEEDcSEGQQAhAQJAIABBBEkNACADQYCJAWohBCAAQXxxIQBBACEBA0AgBCABaiICQRhqIAFBgAlqLQAAOgAAIAJBGWogAUGBCWotAAA6AAAgAkEaaiABQYIJai0AADoAACACQRtqIAFBgwlqLQAAOgAAIAAgAUEEaiIBRw0ACwsgBkUNAiADQZiJAWohAgNAIAIgAWogAUGACWotAAA6AAAgAUEBaiEBIAZBf2oiBg0ADAMLCyAAQT9xIQIgBCAAQUBxEAMhBAsgAkUNACACQQNxIQZBACEBAkAgAkEESQ0AIAJBPHEhAEEAIQEDQCABQZiJAWogBCABaiICLQAAOgAAIAFBmYkBaiACQQFqLQAAOgAAIAFBmokBaiACQQJqLQAAOgAAIAFBm4kBaiACQQNqLQAAOgAAIAAgAUEEaiIBRw0ACwsgBkUNAANAIAFBmIkBaiAEIAFqLQAAOgAAIAFBAWohASAGQX9qIgYNAAsLC4cQARl/QQAoApSJASECQQAoApCJASEDQQAoAoyJASEEQQAoAoiJASEFA0AgACgCCCIGIAAoAhgiByAAKAIoIgggACgCOCIJIAAoAjwiCiAAKAIMIgsgACgCHCIMIAAoAiwiDSAMIAsgCiANIAkgCCAHIAMgBmogAiAAKAIEIg5qIAUgBCACIANzcSACc2ogACgCACIPakH4yKq7fWpBB3cgBGoiECAEIANzcSADc2pB1u6exn5qQQx3IBBqIhEgECAEc3EgBHNqQdvhgaECakERdyARaiISaiAAKAIUIhMgEWogACgCECIUIBBqIAQgC2ogEiARIBBzcSAQc2pB7p33jXxqQRZ3IBJqIhAgEiARc3EgEXNqQa+f8Kt/akEHdyAQaiIRIBAgEnNxIBJzakGqjJ+8BGpBDHcgEWoiEiARIBBzcSAQc2pBk4zBwXpqQRF3IBJqIhVqIAAoAiQiFiASaiAAKAIgIhcgEWogDCAQaiAVIBIgEXNxIBFzakGBqppqakEWdyAVaiIQIBUgEnNxIBJzakHYsYLMBmpBB3cgEGoiESAQIBVzcSAVc2pBr++T2nhqQQx3IBFqIhIgESAQc3EgEHNqQbG3fWpBEXcgEmoiFWogACgCNCIYIBJqIAAoAjAiGSARaiANIBBqIBUgEiARc3EgEXNqQb6v88p4akEWdyAVaiIQIBUgEnNxIBJzakGiosDcBmpBB3cgEGoiESAQIBVzcSAVc2pBk+PhbGpBDHcgEWoiFSARIBBzcSAQc2pBjofls3pqQRF3IBVqIhJqIAcgFWogDiARaiAKIBBqIBIgFSARc3EgEXNqQaGQ0M0EakEWdyASaiIQIBJzIBVxIBJzakHiyviwf2pBBXcgEGoiESAQcyAScSAQc2pBwOaCgnxqQQl3IBFqIhIgEXMgEHEgEXNqQdG0+bICakEOdyASaiIVaiAIIBJqIBMgEWogDyAQaiAVIBJzIBFxIBJzakGqj9vNfmpBFHcgFWoiECAVcyAScSAVc2pB3aC8sX1qQQV3IBBqIhEgEHMgFXEgEHNqQdOokBJqQQl3IBFqIhIgEXMgEHEgEXNqQYHNh8V9akEOdyASaiIVaiAJIBJqIBYgEWogFCAQaiAVIBJzIBFxIBJzakHI98++fmpBFHcgFWoiECAVcyAScSAVc2pB5puHjwJqQQV3IBBqIhEgEHMgFXEgEHNqQdaP3Jl8akEJdyARaiISIBFzIBBxIBFzakGHm9Smf2pBDncgEmoiFWogBiASaiAYIBFqIBcgEGogFSAScyARcSASc2pB7anoqgRqQRR3IBVqIhAgFXMgEnEgFXNqQYXSj896akEFdyAQaiIRIBBzIBVxIBBzakH4x75nakEJdyARaiISIBFzIBBxIBFzakHZhby7BmpBDncgEmoiFWogFyASaiATIBFqIBkgEGogFSAScyARcSASc2pBipmp6XhqQRR3IBVqIhAgFXMiFSASc2pBwvJoakEEdyAQaiIRIBVzakGB7ce7eGpBC3cgEWoiEiARcyIaIBBzakGiwvXsBmpBEHcgEmoiFWogFCASaiAOIBFqIAkgEGogFSAac2pBjPCUb2pBF3cgFWoiECAVcyIVIBJzakHE1PulempBBHcgEGoiESAVc2pBqZ/73gRqQQt3IBFqIhIgEXMiCSAQc2pB4JbttX9qQRB3IBJqIhVqIA8gEmogGCARaiAIIBBqIBUgCXNqQfD4/vV7akEXdyAVaiIQIBVzIhUgEnNqQcb97cQCakEEdyAQaiIRIBVzakH6z4TVfmpBC3cgEWoiEiARcyIIIBBzakGF4bynfWpBEHcgEmoiFWogGSASaiAWIBFqIAcgEGogFSAIc2pBhbqgJGpBF3cgFWoiESAVcyIQIBJzakG5oNPOfWpBBHcgEWoiEiAQc2pB5bPutn5qQQt3IBJqIhUgEnMiByARc2pB+PmJ/QFqQRB3IBVqIhBqIAwgFWogDyASaiAGIBFqIBAgB3NqQeWssaV8akEXdyAQaiIRIBVBf3NyIBBzakHExKShf2pBBncgEWoiEiAQQX9zciARc2pBl/+rmQRqQQp3IBJqIhAgEUF/c3IgEnNqQafH0Nx6akEPdyAQaiIVaiALIBBqIBkgEmogEyARaiAVIBJBf3NyIBBzakG5wM5kakEVdyAVaiIRIBBBf3NyIBVzakHDs+2qBmpBBncgEWoiECAVQX9zciARc2pBkpmz+HhqQQp3IBBqIhIgEUF/c3IgEHNqQf3ov39qQQ93IBJqIhVqIAogEmogFyAQaiAOIBFqIBUgEEF/c3IgEnNqQdG7kax4akEVdyAVaiIQIBJBf3NyIBVzakHP/KH9BmpBBncgEGoiESAVQX9zciAQc2pB4M2zcWpBCncgEWoiEiAQQX9zciARc2pBlIaFmHpqQQ93IBJqIhVqIA0gEmogFCARaiAYIBBqIBUgEUF/c3IgEnNqQaGjoPAEakEVdyAVaiIQIBJBf3NyIBVzakGC/c26f2pBBncgEGoiESAVQX9zciAQc2pBteTr6XtqQQp3IBFqIhIgEEF/c3IgEXNqQbul39YCakEPdyASaiIVIARqIBYgEGogFSARQX9zciASc2pBkaeb3H5qQRV3aiEEIBUgA2ohAyASIAJqIQIgESAFaiEFIABBwABqIQAgAUFAaiIBDQALQQAgAjYClIkBQQAgAzYCkIkBQQAgBDYCjIkBQQAgBTYCiIkBIAALyAMBBX9BACgCgIkBQT9xIgBBmIkBakGAAToAACAAQQFqIQECQAJAAkACQCAAQT9zIgJBB0sNACACRQ0BIAFBmIkBakEAOgAAIAJBAUYNASAAQZqJAWpBADoAACACQQJGDQEgAEGbiQFqQQA6AAAgAkEDRg0BIABBnIkBakEAOgAAIAJBBEYNASAAQZ2JAWpBADoAACACQQVGDQEgAEGeiQFqQQA6AAAgAkEGRg0BIABBn4kBakEAOgAADAELIAJBCEYNAkE2IABrIgMhBAJAIAJBA3EiAEUNAEEAIABrIQRBACEAA0AgAEHPiQFqQQA6AAAgBCAAQX9qIgBHDQALIAMgAGohBAsgA0EDSQ0CDAELQZiJAUHAABADGkEAIQFBNyEECyABQYCJAWohAEF/IQIDQCAAIARqQRVqQQA2AAAgAEF8aiEAIAQgAkEEaiICRw0ACwtBAEEAKAKEiQE2AtSJAUEAQQAoAoCJASIAQRV2OgDTiQFBACAAQQ12OgDSiQFBACAAQQV2OgDRiQFBACAAQQN0IgA6ANCJAUEAIAA2AoCJAUGYiQFBwAAQAxpBAEEAKQKIiQE3A4AJQQBBACkCkIkBNwOICQsGAEGAiQELMwBBAEL+uevF6Y6VmRA3ApCJAUEAQoHGlLqW8ermbzcCiIkBQQBCADcCgIkBIAAQAhAECwsLAQBBgAgLBJgAAAA=",kK="e6508e4b",DK={name:xK,data:bK,hash:kK},_K=new Se,SA=null;function Cw(e){if(SA===null)return hw(_K,DK,16).then(t=>(SA=t,SA.calculate(e)));try{let t=SA.calculate(e);return Promise.resolve(t)}catch(t){return Promise.reject(t)}}var $ie=new Se;var FK="sha3",vK="AGFzbQEAAAABFARgAAF/YAF/AGACf38AYAN/f38AAwgHAAEBAgEAAwUEAQECAgYOAn8BQZCNBQt/AEGACAsHcAgGbWVtb3J5AgAOSGFzaF9HZXRCdWZmZXIAAAlIYXNoX0luaXQAAQtIYXNoX1VwZGF0ZQACCkhhc2hfRmluYWwABA1IYXNoX0dldFN0YXRlAAUOSGFzaF9DYWxjdWxhdGUABgpTVEFURV9TSVpFAwEKpBwHBQBBgAoL1wMAQQBCADcDgI0BQQBCADcD+IwBQQBCADcD8IwBQQBCADcD6IwBQQBCADcD4IwBQQBCADcD2IwBQQBCADcD0IwBQQBCADcDyIwBQQBCADcDwIwBQQBCADcDuIwBQQBCADcDsIwBQQBCADcDqIwBQQBCADcDoIwBQQBCADcDmIwBQQBCADcDkIwBQQBCADcDiIwBQQBCADcDgIwBQQBCADcD+IsBQQBCADcD8IsBQQBCADcD6IsBQQBCADcD4IsBQQBCADcD2IsBQQBCADcD0IsBQQBCADcDyIsBQQBCADcDwIsBQQBCADcDuIsBQQBCADcDsIsBQQBCADcDqIsBQQBCADcDoIsBQQBCADcDmIsBQQBCADcDkIsBQQBCADcDiIsBQQBCADcDgIsBQQBCADcD+IoBQQBCADcD8IoBQQBCADcD6IoBQQBCADcD4IoBQQBCADcD2IoBQQBCADcD0IoBQQBCADcDyIoBQQBCADcDwIoBQQBCADcDuIoBQQBCADcDsIoBQQBCADcDqIoBQQBCADcDoIoBQQBCADcDmIoBQQBCADcDkIoBQQBCADcDiIoBQQBCADcDgIoBQQBBwAwgAEEBdGtBA3Y2AoyNAUEAQQA2AoiNAQuMAwEIfwJAQQAoAoiNASIBQQBIDQBBACABIABqQQAoAoyNASICcDYCiI0BAkACQCABDQBBgAohAwwBCwJAIAIgAWsiBCAAIAQgAEkbIgNFDQAgA0EDcSEFQQAhBgJAIANBBEkNACABQYCKAWohByADQXxxIQhBACEGA0AgByAGaiIDQcgBaiAGQYAKai0AADoAACADQckBaiAGQYEKai0AADoAACADQcoBaiAGQYIKai0AADoAACADQcsBaiAGQYMKai0AADoAACAIIAZBBGoiBkcNAAsLIAVFDQAgAUHIiwFqIQMDQCADIAZqIAZBgApqLQAAOgAAIAZBAWohBiAFQX9qIgUNAAsLIAAgBEkNAUHIiwEgAhADIAAgBGshACAEQYAKaiEDCwJAIAAgAkkNAANAIAMgAhADIAMgAmohAyAAIAJrIgAgAk8NAAsLIABFDQBBACECQcgBIQYDQCAGQYCKAWogAyAGakG4fmotAAA6AAAgBkEBaiEGIAAgAkEBaiICQf8BcUsNAAsLC+ALAS1+IAApA0AhAkEAKQPAigEhAyAAKQM4IQRBACkDuIoBIQUgACkDMCEGQQApA7CKASEHIAApAyghCEEAKQOoigEhCSAAKQMgIQpBACkDoIoBIQsgACkDGCEMQQApA5iKASENIAApAxAhDkEAKQOQigEhDyAAKQMIIRBBACkDiIoBIREgACkDACESQQApA4CKASETQQApA8iKASEUAkACQCABQcgASw0AQQApA+iKASEVQQApA/iKASEWQQApA/CKASEXQQApA4CLASEYQQApA9CKASEZQQApA+CKASEaQQApA9iKASEbDAELQQApA+CKASAAKQNghSEaQQApA9iKASAAKQNYhSEbQQApA9CKASAAKQNQhSEZIBQgACkDSIUhFEEAKQPoigEhFUEAKQP4igEhFkEAKQPwigEhF0EAKQOAiwEhGCABQekASQ0AIBggACkDgAGFIRggFiAAKQN4hSEWIBcgACkDcIUhFyAVIAApA2iFIRUgAUGJAUkNAEEAQQApA4iLASAAKQOIAYU3A4iLAQsgAyAChSEcIAUgBIUhHSAHIAaFIQcgCSAIhSEIIAsgCoUhHiANIAyFIQkgDyAOhSEKIBEgEIUhCyATIBKFIQxBACkDuIsBIRBBACkDkIsBIRFBACkDoIsBIRJBACkDsIsBIRNBACkDiIsBIQ1BACkDwIsBIQ5BACkDmIsBIR9BACkDqIsBIQ9BwH4hAANAIB4gByALhSAbhSAYhSAPhUIBiYUgFIUgF4UgH4UgDoUhAiAMIB0gCoUgGoUgDYUgE4VCAYmFIAiFIBmFIBaFIBKFIgMgB4UhICAJIAggDIUgGYUgFoUgEoVCAYmFIByFIBWFIBGFIBCFIgQgDoUhISAcIAogFCAehSAXhSAfhSAOhUIBiYUgHYUgGoUgDYUgE4UiBYVCN4kiIiALIBwgCYUgFYUgEYUgEIVCAYmFIAeFIBuFIBiFIA+FIgYgCoVCPokiI0J/hYMgAyAPhUICiSIkhSEOIBYgAoVCKYkiJSAEIBeFQieJIiZCf4WDICKFIQ8gECAFhUI4iSIQIAYgDYVCD4kiJ0J/hYMgAyAbhUIKiSIohSENIAQgHoVCG4kiKSAoIAggAoVCJIkiKkJ/hYOFIRYgBiAdhUIGiSIrIAMgC4VCAYkiLEJ/hYMgEiAChUISiSIthSEXICsgBCAfhUIIiSIuIBUgBYVCGYkiFUJ/hYOFIRsgBiAThUI9iSIdIAQgFIVCFIkiBCAJIAWFQhyJIghCf4WDhSEUIAggHUJ/hYMgAyAYhUItiSIDhSEcIB0gA0J/hYMgGSAChUIDiSIJhSEdIAQgAyAJQn+Fg4UhByAJIARCf4WDIAiFIQggDCAChSICICFCDokiA0J/hYMgESAFhUIViSIEhSEJIAYgGoVCK4kiBSADIARCf4WDhSEKIAQgBUJ/hYMgIEIsiSIEhSELIABB0AlqKQMAIAUgBEJ/hYOFIAKFIQwgJyAoQn+FgyAqhSIFIRggAyAEIAJCf4WDhSICIR4gKiApQn+FgyAQhSIDIR8gLSAuQn+FgyAVhSIEIRogJiAkICVCf4WDhSIGIRMgFSArQn+FgyAshSIoIRkgIyAmICJCf4WDhSIiIRIgLiAsIC1Cf4WDhSImIRUgJyApIBBCf4WDhSInIREgIyAkQn+FgyAlhSIjIRAgAEEIaiIADQALQQAgDzcDqIsBQQAgBTcDgIsBQQAgGzcD2IoBQQAgBzcDsIoBQQAgCzcDiIoBQQAgDjcDwIsBQQAgAzcDmIsBQQAgFzcD8IoBQQAgFDcDyIoBQQAgAjcDoIoBQQAgBjcDsIsBQQAgDTcDiIsBQQAgBDcD4IoBQQAgHTcDuIoBQQAgCjcDkIoBQQAgIjcDoIsBQQAgFjcD+IoBQQAgKDcD0IoBQQAgCDcDqIoBQQAgDDcDgIoBQQAgIzcDuIsBQQAgJzcDkIsBQQAgJjcD6IoBQQAgHDcDwIoBQQAgCTcDmIoBC/gCAQV/QeQAQQAoAoyNASIBQQF2ayECAkBBACgCiI0BIgNBAEgNACABIQQCQCABIANGDQAgA0HIiwFqIQVBACEDA0AgBSADakEAOgAAIANBAWoiAyABQQAoAoiNASIEa0kNAAsLIARByIsBaiIDIAMtAAAgAHI6AAAgAUHHiwFqIgMgAy0AAEGAAXI6AABByIsBIAEQA0EAQYCAgIB4NgKIjQELAkAgAkEESQ0AIAJBAnYiA0EDcSEFQQAhBAJAIANBf2pBA0kNACADQfz///8DcSEBQQAhA0EAIQQDQCADQYAKaiADQYCKAWooAgA2AgAgA0GECmogA0GEigFqKAIANgIAIANBiApqIANBiIoBaigCADYCACADQYwKaiADQYyKAWooAgA2AgAgA0EQaiEDIAEgBEEEaiIERw0ACwsgBUUNACAFQQJ0IQEgBEECdCEDA0AgA0GACmogA0GAigFqKAIANgIAIANBBGohAyABQXxqIgENAAsLCwYAQYCKAQvRBgEDf0EAQgA3A4CNAUEAQgA3A/iMAUEAQgA3A/CMAUEAQgA3A+iMAUEAQgA3A+CMAUEAQgA3A9iMAUEAQgA3A9CMAUEAQgA3A8iMAUEAQgA3A8CMAUEAQgA3A7iMAUEAQgA3A7CMAUEAQgA3A6iMAUEAQgA3A6CMAUEAQgA3A5iMAUEAQgA3A5CMAUEAQgA3A4iMAUEAQgA3A4CMAUEAQgA3A/iLAUEAQgA3A/CLAUEAQgA3A+iLAUEAQgA3A+CLAUEAQgA3A9iLAUEAQgA3A9CLAUEAQgA3A8iLAUEAQgA3A8CLAUEAQgA3A7iLAUEAQgA3A7CLAUEAQgA3A6iLAUEAQgA3A6CLAUEAQgA3A5iLAUEAQgA3A5CLAUEAQgA3A4iLAUEAQgA3A4CLAUEAQgA3A/iKAUEAQgA3A/CKAUEAQgA3A+iKAUEAQgA3A+CKAUEAQgA3A9iKAUEAQgA3A9CKAUEAQgA3A8iKAUEAQgA3A8CKAUEAQgA3A7iKAUEAQgA3A7CKAUEAQgA3A6iKAUEAQgA3A6CKAUEAQgA3A5iKAUEAQgA3A5CKAUEAQgA3A4iKAUEAQgA3A4CKAUEAQcAMIAFBAXRrQQN2NgKMjQFBAEEANgKIjQEgABACQeQAQQAoAoyNASIAQQF2ayEDAkBBACgCiI0BIgFBAEgNACAAIQQCQCAAIAFGDQAgAUHIiwFqIQVBACEBA0AgBSABakEAOgAAIAFBAWoiASAAQQAoAoiNASIEa0kNAAsLIARByIsBaiIBIAEtAAAgAnI6AAAgAEHHiwFqIgEgAS0AAEGAAXI6AABByIsBIAAQA0EAQYCAgIB4NgKIjQELAkAgA0EESQ0AIANBAnYiAUEDcSEFQQAhBAJAIAFBf2pBA0kNACABQfz///8DcSEAQQAhAUEAIQQDQCABQYAKaiABQYCKAWooAgA2AgAgAUGECmogAUGEigFqKAIANgIAIAFBiApqIAFBiIoBaigCADYCACABQYwKaiABQYyKAWooAgA2AgAgAUEQaiEBIAAgBEEEaiIERw0ACwsgBUUNACAFQQJ0IQAgBEECdCEBA0AgAUGACmogAUGAigFqKAIANgIAIAFBBGohASAAQXxqIgANAAsLCwvYAQEAQYAIC9ABkAEAAAAAAAAAAAAAAAAAAAEAAAAAAAAAgoAAAAAAAACKgAAAAAAAgACAAIAAAACAi4AAAAAAAAABAACAAAAAAIGAAIAAAACACYAAAAAAAICKAAAAAAAAAIgAAAAAAAAACYAAgAAAAAAKAACAAAAAAIuAAIAAAAAAiwAAAAAAAICJgAAAAAAAgAOAAAAAAACAAoAAAAAAAICAAAAAAAAAgAqAAAAAAAAACgAAgAAAAICBgACAAAAAgICAAAAAAACAAQAAgAAAAAAIgACAAAAAgA==",RK="fb24e536",TK={name:FK,data:vK,hash:RK},NK=new Se,ss=null;function pw(e){return[224,256,384,512].includes(e)?null:new Error("Invalid variant! Valid values: 224, 256, 384, 512")}function Bw(e,t=512){if(pw(t))return Promise.reject(pw(t));let r=t/8;if(ss===null||ss.hashLength!==r)return hw(NK,TK,r).then(n=>(ss=n,ss.calculate(e,t,6)));try{let n=ss.calculate(e,t,6);return Promise.resolve(n)}catch(n){return Promise.reject(n)}}var ese=new Se;var tse=new Se;var rse=new Se;var nse=new Se;var ose=new Se;var ise=new Se;var sse=new Se;var ase=new Uint8Array(8);var Ase=new Se;var cse=new Uint8Array(8);var lse=new Se;var gse=new Uint8Array(8);var dse=new Se;var fse=new Se;var use=new Se;var Sn=V(Ae());var Ew=["text/x-java","text/javascript","text/html","text/x-c++","application/msword","text/x-csharp","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/pdf","text/x-script.python","text/x-c","text/x-tex","application/json","text/markdown","application/vnd.openxmlformats-officedocument.presentationml.presentation","text/x-ruby","text/x-sh","text/x-php","application/x-latext","text/x-typescript","text/plain"];var xA=class{constructor(){this.results=[];this.isBrowsing=!1}parseMessage(t){let r=t.message,n=this.results.findIndex(o=>o.id===r?.id);return r&&(r.author.role==="assistant"?r.recipient!=="bio"&&this.handleAssistantMessage(r,n):r.author.role==="tool"&&(r.author.name==="browser"||r.author.name==="myfiles_browser"?this.handleBrowserMessage(r):this.handlePluginResponseMessage(r))),this.results}handleAssistantMessage(t,r){if(t.recipient!=="all")if(t.recipient!=="browser"&&t.recipient!=="myfiles_browser")if(r===-1){let n=this.results[this.results.length-1];if(n&&n.type==="browsing"){let o=n;o.isLoading=!1,o.actions.push({messageId:"1",command:"finishBrowsing"}),this.isBrowsing=!1}this.results.push({id:t?.id,type:"plugin",pluginName:t?.recipient,isLoading:!0,info:[{type:"request",text:t?.content?.parts?.[0]||t?.content?.text}]})}else{let n=this.results[r];n.info[0].text=t?.content?.parts?.[0]||t?.content?.text}else this.isBrowsing||(this.results.push({id:t?.id,type:"browsing",subType:t?.recipient==="myfiles_browser"?"myfiles":"web",isLoading:!0,actions:[{messageId:"0",command:"startBrowsing",model_slug:t.metadata?.model_slug||""}]}),this.isBrowsing=!0);else if(r===-1)this.handleNewTextMessage(t);else{let n=this.results[r],o=this.getTextWithCitations(t);n.text=o.text,n.searchSnippets=o.searchSnippets}}handleBrowserMessage(t){if(this.isBrowsing){let r=this.results[this.results.length-1];if(r.type==="browsing"){let n=r,o=t.metadata;(n.actions.length===0||o.command!==n.actions[n.actions.length-1].command||n.actions[n.actions.length-1].messageId!==t?.id)&&(o.command!=="quote_lines"||n.actions[n.actions.length-1].command!=="quote_lines")?(o.command==="search"||o.command==="click"||o.command==="quote_lines"&&n.subType==="web")&&n.actions.push({messageId:t?.id,command:o.command,model_slug:o.model_slug,status:o.status,args:o.args,_cite_metadata:o.command==="click"?this.getClickMetadata(o._cite_metadata):{}}):(n.actions[n.actions.length-1].status=o.status,(o.command==="click"||o.command==="quote_lines")&&(n.actions[n.actions.length-1]._cite_metadata=this.getClickMetadata(o._cite_metadata)))}}}handlePluginResponseMessage(t){let r=this.results[this.results.length-1];r&&(r.isLoading=!1);let n=null;if(t?.author?.name==="python"?n=JSON.stringify(t.content):t?.author?.name==="dalle.text2im"?typeof t?.content?.parts?.[0]!="string"&&(n=t?.content?.text):n=t?.content?.parts?.[0],n&&r&&r.info.push({type:"response",text:n}),t?.author?.name==="dalle.text2im"){let o=t?.content?.parts?.[0];typeof o=="object"&&o.asset_pointer&&this.results.push({id:o.asset_pointer.replace("file-service://",""),type:"image",gen_id:o?.metadata?.dalle?.gen_id,prompt:o?.metadata?.dalle?.prompt})}else t?.metadata?.jit_plugin_data?.from_server.type==="confirm_action"&&this.results.push({id:t?.id,type:"pluginConfirm",metadata:t?.metadata?.jit_plugin_data?.from_server.body})}handleNewTextMessage(t){if(this.results.length>0){let r=this.results[this.results.length-1];if(r.type==="browsing"){let n=r;n.isLoading=!1,n.actions.push({messageId:"1",command:"finishBrowsing"}),this.isBrowsing=!1}}t?.content?.parts?.[0]&&this.results.push({id:t?.id,type:"text",text:t?.content?.parts?.[0]})}getClickMetadata(t){return{metadata_list:[{url:t?.metadata_list?.[0]?.url,title:t?.metadata_list?.[0]?.title}]}}getTextWithCitations(t){let r=t?.content?.parts?.[0],n=t?.metadata?.citations,o={};if(n&&n.length>0){let i=r,s=n.length;return n.sort((a,A)=>A.end_ix-a.end_ix).forEach((a,A)=>{let c=a.start_ix,l=a.end_ix,g=a.metadata?.url;g?(i=i.slice(0,c)+`[^${s-A}](${g})`+i.slice(l),o[s-A]={link:g,title:a.metadata.title,snippet:a.metadata.text}):i=i.slice(0,c)+i.slice(l)}),{text:i,searchSnippets:o}}else return{text:r}}};var yw=V(Ae());async function MK(e,t){return yw.default.runtime.sendMessage({type:"getArkoseToken",target:"offscreen",userType:e,dx:t})}async function Qw(e,t){return MK(e,t)}var or="ChatGPT Webapp",lf=`${or}: error_chatgpt_auth`,DA="https://chatgpt.com",af="accessToken",Af=new bw.default(10*1e3);async function bt(e,t,r,n){let o={"Content-Type":"application/json"};e&&(o.Authorization=`Bearer ${e}`),o={...o,...await Uw()};let i={method:t,headers:o};return n&&(i.body=JSON.stringify(n)),Xo(`${DA}/backend-api${r}`,i)}async function kw(e,t){await bt(e,"POST","/conversation/message_feedback",t)}async function ww(e,t,r){return!0}async function Dw(e){let t=await At({isForce:!0});return bt(t,"GET","/models",null).then(r=>r.json())}async function _w(e){let t=await At({isForce:!0});return bt(t,"GET","/gizmos/bootstrap?limit=2",null).then(r=>r.json()).catch(r=>({gizmos:[]}))}async function Sw(e,t){let r=await At({isForce:!0});return bt(r,"POST","/conversation/gen_title/"+e,{message_id:t}).then(n=>n.json())}function UK(){return[navigator.hardwareConcurrency+1920+1080,new Date().toString(),4294705152,0,navigator.userAgent,"","",navigator.language,navigator.languages.join(","),0]}async function Fw(e,t){let r=performance.now(),n=UK();for(let o=0;o<5e5;o++){n[3]=o,n[9]=Math.round(performance.now()-r);let i=JSON.stringify(n),s=btoa(String.fromCharCode(...new TextEncoder().encode(i)));if((await Bw(e+s,512)).slice(0,t.length)<=t)return s}return"wQ8Lk5FbGpA2NcR9dShT6gYjU7VxZ4D"+btoa(String.fromCharCode(...new TextEncoder().encode(JSON.stringify(e+""))))}async function PK(e,t){return"gAAAAAB"+await Fw(e,t)}async function OK(){return"gAAAAAC"+await Fw(Math.random()+"","0")}async function vw(e,t){let r=await At({isForce:!0});return bt(r,"POST","/files",{file_name:e.name,file_size:e.size,use_case:t?"my_files":"multimodal"}).then(n=>n.json())}async function Rw(e){let t=await At({});return bt(t,"POST","/files/"+e+"/uploaded",{}).then(r=>r.json())}async function gf(e){let t=await At({isForce:!0});return bt(t,"GET","/files/"+e+"/download",null).then(r=>r.json())}async function GK(){let e=await At({});return bt(e,"GET","/accounts/check/v4-2023-04-27",null).then(t=>t.json())}async function qK(){let e=await At({});return bt(e,"POST","/sentinel/chat-requirements",{p:await OK()}).then(t=>t.json())}async function xw(){let e=await At({});return bt(e,"POST","/register-websocket",null).then(t=>t.json()).then(t=>t.wss_url)}async function Tw({conversationId:e,messageId:t,sandboxPath:r}){let n=await At({isForce:!0});return bt(n,"GET","/conversation/"+e+"/interpreter/download?message_id="+t+"&sandbox_path="+r.replace("sandbox:",""),null).then(o=>o.json())}async function Nw(e){e||(e=await At());let t=`${DA}/backend-api/aip/p?offset=0&limit=250&is_installed=true`;return await(await Xo(t,{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`}})).json()}async function df(){if(Af.get(af))return Af.get(af);let e=null;try{e=await fetch(Or.openaiApiSession)}catch(n){throw new Error(`${or}: ${n.message}`)}let t=lf;if(e?.status===403)throw new Error(t);let r=await e?.json().catch(()=>({}));if(!r.accessToken)throw new Error(t);return Af.set(af,r.accessToken),r.accessToken}async function Mw(e){let t=await At();return bt(t,"POST",`/gizmos/${e}/sidebar`,{action:"keep"})}async function Uw(){let e="Oai-",t={};return t[e+"Device-Id"]=await HK(),t[e+"Language"]="en-US",t}async function HK(){return(await chrome.cookies.get({url:DA,name:"oai-did"}))?.value||ne()}async function LK(e){try{return(await Sn.default.storage.local.get({selectWebAppModel:"gpt-4"})).selectWebAppModel}catch{return null}}async function Pw(e){let t="";return t||(t=await At()),new Promise((r,n)=>{let o=setInterval(async()=>{let s=await(await bt(t,"GET","/files/"+e,null)).json();s.retrieval_index_status==="success"&&(clearInterval(o),r(s))},1e3)})}function cf(e){return e.map(t=>{let r={name:t.name,size:t.size,mimeType:t.type,id:t.id};return t.type.startsWith("image")?(r.width=t.width,r.height=t.height):Ew.includes(t.type)&&(r.fileTokenSize=t.fileTokenSize),r})}var Vr={};function KK(e){let t=ff(e);if(Vr[t])return Vr[t];{let r=new WebSocket(e);return Vr[t]=r,r}}function JK(e){let t=ff(e);if(Vr[t]&&Vr[t].readyState===WebSocket.OPEN)return{ws:Vr[t],isNew:!1};{let r=new WebSocket(e);return Vr[t]=r,{ws:r,isNew:!0}}}function ff(e){return e.split("?")[0]}function bA(e){let t=ff(e);Vr[t]&&delete Vr[t]}async function VK(e){let t=await Sn.default.storage.local.get("chatRequirements");return qK().then(r=>(Sn.default.storage.local.set({chatRequirements:{data:r,expireTime:Date.now()+9*60*1e3,token:e}}),r))}var kA=class{constructor(t){this.token=t;this.token=t}async generateAnswer(t){let r,n,o,i=Promise.resolve(),s=!1,a=await VK(this.token);async function A(){if(f.filter(b=>b.type==="image").length>0){let b=f.filter(R=>R.type==="image").map(async R=>{let J=await gf(R.id);if(J.download_url)return fetch(J.download_url).then(K=>K.blob()).then(async K=>{let me=await Jr(K);return M({[UB+R.id]:me})})});await Promise.all(b)}}let c=async()=>{try{await i}catch(b){throw r&&(await A(),await ww(this.token,r,{is_visible:!1}),n&&r&&await Sw(r,n),r="",n=""),new Error(`${or}: ${b}`)}o&&(o.onmessage=()=>{},o.onerror=()=>{},o.onclose=()=>{}),r&&(await A(),await ww(this.token,r,{is_visible:!1}),n&&r&&await Sw(r,n),r="",n="")};t.getCleanupMethod?.(c);function l(b,R){let J=R&&R.some(K=>K.type.startsWith("image"));return{content_type:J?"multimodal_text":"text",parts:J?R?.filter(K=>K.type.startsWith("image")).map(K=>({asset_pointer:"file-service://"+K.id,size_bytes:K.size,width:K.width,height:K.height})).concat([b]):[b]}}let g=[];if(t.prompt)g=Array.isArray(t.prompt)?t.prompt.map((b,R)=>({id:ne(),recipient:t.actionData?"all":void 0,author:t.actionData?t.actionData.author:{role:b.role},content:R===t.prompt.length-1?l(b.content,t.chatgptFiles):{content_type:"text",parts:[b.content]},metadata:t.actionData?t.actionData.metaData:R===t.prompt.length-1&&t.chatgptFiles&&t.chatgptFiles.length>0?{attachments:cf(t.chatgptFiles)}:void 0})):[{id:ne(),recipient:t.actionData?"all":void 0,author:t.actionData?t.actionData.author:{role:"user"},content:l(t.prompt,t.chatgptFiles),metadata:t.actionData?t.actionData.metaData:t.chatgptFiles?{attachments:cf(t.chatgptFiles)}:void 0}];else if(t.multiContent){let b=t.multiContent[0].text||t.multiContent[0].userInputText;g=[{id:ne(),recipient:t.actionData?"all":void 0,author:t.actionData?t.actionData.author:{role:"user"},content:l(b,t.chatgptFiles),metadata:t.actionData?t.actionData.metaData:t.chatgptFiles?{attachments:cf(t.chatgptFiles)}:void 0}]}let d=()=>{d=null,t.onEvent({type:"done"}),c()},f=[],u=new xA,m=t.model||await LK(this.token)||"text-davinci-002-render-sha",{needArkoseToken:C}=await Sn.default.storage.local.get("needArkoseToken");function p(b){if(b.error&&Sn.default.storage.local.set({needArkoseToken:!0}),!b.message?.content?.parts?.[0]&&!b.message?.content?.text&&b.message?.author.role!=="assistant"&&!b.message?.metadata?.command&&!b.message?.metadata?.jit_plugin_data||b.message?.author.role==="system"||b.message?.author.role==="user"||b.message?.content?.content_type==="text"&&b.message?.author.name===null&&b.message?.status==="finished_successfully"&&!b.message?.end_turn&&!b.message_id)return;f=u.parseMessage(b);let R=b.message?.content?.parts?.[0];(R||f.length>0)&&(r=b.conversation_id,t.onEvent({type:"answer",data:{message:b.message,contents:f,text:R,messageId:b.message.id,conversationId:b.conversation_id}}),t.parentMsgId||(n=b.message.id))}function Q(b){try{let R=JSON.parse(b);return R.wss_url?R.wss_url:!1}catch{return!1}}async function v(b){return b||(b=await xw()),E(b)}function E(b){return new Promise((R,J)=>{let K=JK(b);o=K.ws,o.onopen=()=>{K.isNew&&setTimeout(()=>{R(!0)},500)},o.onclose=()=>{throw bA(b),t.onEvent({type:"error",data:{error:`${or}: Websoket error: close`}}),new Error("Websoket error: close")},o.onerror=me=>{throw bA(b),t.onEvent({type:"error",data:{error:`${or}: Websoket error: ${me}`}}),new Error("Websoket error: "+me)},o.onmessage=me=>{let be=JSON.parse(me.data),_t=atob(be.body).trim();if(!_t.startsWith("data: "))return;let dr=_t.replace("data: ",""),qe;if(dr==="[DONE]"){d?.();return}try{qe=JSON.parse(dr)}catch{return}p(qe)},K.isNew||R(!0)})}function w(b){o=KK(b),o.onopen=()=>{},o.onclose=()=>{throw bA(b),t.onEvent({type:"error",data:{error:`${or}: Websoket error: close`}}),new Error("Websoket error: close")},o.onerror=R=>{throw bA(b),t.onEvent({type:"error",data:{error:`${or}: Websoket error: ${R}`}}),new Error("Websoket error: "+R)},o.onmessage=R=>{let J=JSON.parse(R.data),K=atob(J.body).trim();if(!K.startsWith("data: "))return;let me=K.replace("data: ",""),be;if(me==="[DONE]"){d?.();return}try{be=JSON.parse(me)}catch{return}p(be)}}try{t.parentMsgId||(m==="gpt-4-gizmo:g-BlafpMvzd"?kr.report("browser_pro_new_chat"):m==="gpt-4-gizmo:g-nleealfRT"&&kr.report("shoppingGPT_new_chat"))}catch{}let y=(await Sn.default.storage.local.get("webAppNetwork")).webAppNetwork,T="";if(!y){let b=await GK(),R=b.accounts[b.account_ordering[0]].features.includes("shared_websocket")?"websocket":"http";R==="websocket"&&(T=await xw()),y={method:R,wss_url:T},Sn.default.storage.local.set({webAppNetwork:y})}y.method==="websocket"&&await v(y.wss_url);let P=null;if(chrome.offscreen&&a.arkose?.required)try{P=await Qw(a.persona,a.arkose?.dx)}catch(b){throw new Error(b)}let S=()=>{let b={};return this.token&&(b.Authorization=`Bearer ${this.token}`),b};async function U(){let b="OpenAI-Sentinel-",R={};if(a.token&&(R[`${b}Chat-Requirements-Token`]=a.token),P&&(R[`${b}Arkose-Token`]=P),a.proofofwork?.required){let{seed:J,difficulty:K}=a.proofofwork;R[`${b}Proof-Token`]=await PK(J,K)}return R}let W={"Content-Type":"application/json",...S(),...await U(),...await Uw()};i=zr(DA+"/backend-api/conversation",{method:"POST",signal:t.signal,headers:W,body:JSON.stringify({action:"next",conversation_mode:m.startsWith("gpt-4-gizmo:")?{gizmo_id:m.replace("gpt-4-gizmo:",""),kind:"gizmo_interaction"}:{kind:"primary_assistant"},force_paragen:!1,force_nulligen:this.token?void 0:!1,force_rate_limit:!1,force_paragen_model_slug:"",history_and_training_disabled:!1,messages:g,model:m.startsWith("gpt-4-gizmo:")?"gpt-4-gizmo":m,parent_message_id:t.parentMsgId||ne(),plugin_ids:t.pluginIds,timezone_offset_min:new Date().getTimezoneOffset(),arkose_token:P||void 0,conversation_id:t.cid?t.cid:void 0,suggestions:[],websocket_request_id:ne()}),onMessage(b){if(b==="[DONE]"){d?.();return}else if(Q(b))s=!0,w(Q(b));else if(b.startsWith("event: typing"))return;let R;try{R=JSON.parse(b)}catch{return}p(R)}},!0,!0).catch(b=>{let R=b.message;try{let J=JSON.parse(R);R=J.message||J.msg||J.error?.message||J.detail?.message||J.detail||R}catch{}throw t.onEvent({type:"error",data:{error:`${or}: ${R}`}}),new Error(`${or}: ${R}`)}).finally(()=>{s||d?.()})}};var xn=0,_A=!1,Zo=new Ow.default(1e3*30),uf="accessToken",Gw="noCacheToken",zK="alwaysProxyFetch";Me.default.storage.local.get({guardChatgptTabId:0}).then(({guardChatgptTabId:e})=>{xn==0&&(xn=e),_A=e!=0});async function qw(){let e=null;try{e=await Me.default.tabs.get(xn),await Me.default.tabs.update(e.id,{active:!0})}catch{}e||(e=await Me.default.tabs.create({url:Or.openaiChat,pinned:!0,active:!0}));let t=e.id;await Me.default.storage.local.set({guardChatgptTabId:t}),xn=t,_A=!0,await new Promise(r=>{let n=(o,i)=>{switch(o.type){case"loaded":i.tab?.id==t&&Me.default.tabs.sendMessage(t,{type:"guard-session-activate"});break;case"guard-session-activated":Me.default.runtime.onMessage.removeListener(n),r();break}};Me.default.runtime.onMessage.addListener(n),setTimeout(()=>r(),1e3*40)})}async function YK(){let e=await Me.default.tabs.create({url:Or.openaiChat,pinned:!0,active:!1});return await Me.default.storage.local.set({guardChatgptTabId:e.id}),xn=e.id,_A=!0,e}async function WK(){let t=await Me.default.tabs.query({pinned:!0,url:"https://chatgpt.com/*"});if(t.length>0){let r=t[0];return xn=r.id,await Me.default.tabs.reload(r.id),r}return null}async function jK(){let e=null;try{e=await Me.default.tabs.get(xn),/chat\.openai\.com/.test(e.url||"")?await Me.default.tabs.reload(e.id):e=await Me.default.tabs.update(e.id,{url:Or.openaiChat})}catch{}e||(e=await WK()),e||(e=await YK());let t=e?.id||0;await new Promise(r=>{let n=(o,i)=>{switch(o.type){case"loaded":i.tab?.id==t&&Me.default.tabs.sendMessage(t,{type:"guard-session-activate"});break;case"guard-session-activated":Me.default.runtime.onMessage.removeListener(n),r();break;case"guard-session-logout":throw Error("")}};Me.default.runtime.onMessage.addListener(n),setTimeout(()=>r(),1e3*40)})}async function At({onRefresh:e,throwGuideError:t,isForce:r}={}){if(!r&&Zo.get(Gw)!==!0&&Zo.get(uf))return Zo.get(uf);let o=await(await Xo(Or.openaiApiSession,{},{onRefresh:e,throwGuideError:t})).json().catch(()=>({}));return Zo.set(uf,o.accessToken),o.accessToken}async function XK(e,t,r){let n=Me.default.tabs.connect(e,{name:"guard-proxy"}),o=null,i=null,s=new Promise((f,u)=>{o=f,i=u}),a;n.onDisconnect.addListener(()=>{i(new Error("proxy fetch aborted")),a?.close()}),r?.signal?.addEventListener("abort",()=>{a?.close(),n.disconnect()});let A={type:"guard-proxy-request",key:Date.now()+"",url:t,options:r};n.postMessage(A);let c=new ReadableStream({start(f){a=f},cancel(){n.disconnect()}}),l=setTimeout(()=>i(new Error("connect timeout")),1e3*1),g=f=>{switch(f.type){case"guard-proxy-request-received":clearTimeout(l);break;case"guard-proxy-response":o(new Response(c,f.options));break;case"guard-proxy-response-chunk":a.enqueue(new TextEncoder().encode(f.value)),f.done&&(a.close(),n.onMessage.removeListener(g),n.disconnect());break;case"guard-proxy-response-error":n.onMessage.removeListener(g),n.disconnect(),i(new Error(f.error)),a.close();break}};return n.onMessage.addListener(g),await s}async function Xo(e,t,r){let n=null;try{n=await fetch(e,t)}catch{}if(!n)throw new Error(lf);if(n.status===401)throw new Error("");if(n.status==403){if(Zo.set(Gw,!0),Zo.set(zK,!0),!_A&&r?.throwGuideError)throw Error(`${or}: error_chatgpt_session_timeout`);r?.onRefresh?.(),await jK(),n=await XK(xn,e,t)}return n}async function zr(e,t,r=!1,n=!1,o=!1){let{onMessage:i,...s}=t,A=await(r?Xo:fetch)(e,s).catch(l=>{throw jo(l,e),l});if(!A.ok){let l=await A.json().catch(()=>({}));throw new Error(Vn(l)?`${A.status} ${A.statusText}`:JSON.stringify({...l,responseStatus:A.status}))}let c=Eo(l=>{l.type==="event"&&i(l.data)});for await(let l of Cn(A.body)){if(n)try{if(JSON.parse(l).wss_url){i(l);return}}catch{}if(o){i(l),i("[DONE]");return}c.feed(l)}}var ir="OpenAI";function bn(e,t){let r=t.trim();if(r.endsWith("/")&&(r=r.slice(0,-1)),e==="ollama")r.endsWith("/api/chat")&&(r=r.slice(0,-9));else if(e==="anthropic")r.endsWith("/v1/messages")&&(r=r.slice(0,-12));else{if(e==="azureopenai"||e==="azureai")return r;r.endsWith("/chat/completions")&&(r=r.slice(0,-17))}return r}var If="\u2062",mf="\u2063",Lw="\u034F";function ZK(e){return e.split("").map(t=>t.charCodeAt(0).toString(2).padStart(8,"0").split("").map(n=>n==="0"?mf:Lw).join("")).join("")}function $K(e){return(e.match(/.{8}/g)||[]).map(r=>{let n=r.split("").map(o=>o===mf?"0":"1").join("");return String.fromCharCode(parseInt(n,2))}).join("")}function Kw(e,t,r){t=t.replaceAll(new RegExp(`[${If}${mf}${Lw}]`,"g"),""),r||=e+"_"+ne().split("-")[0];let n=ZK(r)+If+t;return{id:r,name:n,vendor:e}}function Hw(e){let t=e.split(If);if(t.length!==2)return{name:e,vendor:"",id:""};{let[r,n]=t,o=$K(r),i=o.indexOf("_");return{name:n,vendor:i===-1?o:o.slice(0,i),id:o}}}var pf=[{id:"openai",displayName:"OpenAI",schema:"openai",baseUrl:"https://api.openai.com/v1",chatPath:"/chat/completions",showApiKey:!0,async validateConnection(e,t){return this.fetchModels(e,t)},async fetchModels(e,t){let r=t?bn("openai",t):"https://api.openai.com/v1",n=await fetch(`${r}/models`,{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`}});if(!n.ok)throw new Error(`Failed to fetch models: ${n.status} ${n.statusText}`);let o=await n.json();if(!Array.isArray(o.data))throw new Error("Invalid response");return o.data.map(i=>({id:i.id}))}},{id:"deepseek",displayName:"DeepSeek",schema:"openai",baseUrl:"https://api.deepseek.com/v1",chatPath:"/chat/completions",showApiKey:!0,async validateConnection(e,t){return this.fetchModels(e,t)},async fetchModels(e,t){let r=t?bn("openai",t):"https://api.deepseek.com/v1",n=await fetch(`${r}/models`,{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`}});if(!n.ok)throw new Error(`Failed to fetch models: ${n.status} ${n.statusText}`);let o=await n.json();if(!Array.isArray(o.data))throw new Error("Invalid response");return o.data.map(i=>({id:i.id}))}},{id:"groq",displayName:"Groq",schema:"openai",baseUrl:"https://api.groq.com/openai/v1",chatPath:"/chat/completions",showApiKey:!0,async validateConnection(e,t){return this.fetchModels(e,t)},async fetchModels(e,t){let r=t?bn("openai",t):"https://api.groq.com/openai/v1",n=await fetch(`${r}/models`,{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`}});if(!n.ok)throw new Error(`Failed to fetch models: ${n.status} ${n.statusText}`);let o=await n.json();if(!Array.isArray(o.data))throw new Error("Invalid response");return o.data.map(i=>({id:i.id}))}},{id:"google",displayName:"Google (Gemini)",schema:"openai",baseUrl:"https://generativelanguage.googleapis.com/v1beta/openai",chatPath:"/chat/completions",showApiKey:!0,async validateConnection(e,t){return this.fetchModels(e,t)},async fetchModels(e,t){let r=t?bn("openai",t):"https://generativelanguage.googleapis.com/v1beta/openai",n=await fetch(`${r}/models`,{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`}});if(!n.ok)throw new Error(`Failed to fetch models: ${n.status} ${n.statusText}`);let o=await n.json();if(!Array.isArray(o.data))throw new Error("Invalid response");return o.data.map(i=>({id:i.id}))}},{id:"ollama",displayName:"Ollama",schema:"openai",baseUrl:"http://localhost:11434",chatPath:"/api/chat",showApiKey:!1,async validateConnection(e,t){return this.fetchModels(e,t)},async fetchModels(e,t){let r=t?bn("ollama",t):this.baseUrl,n=await fetch(`${r}/api/tags`,{method:"GET",headers:{"Content-Type":"application/json"}});if(!n.ok)throw new Error(`Failed to fetch models: ${n.status} ${n.statusText}`);let o=await n.json();if(!Array.isArray(o.models))throw new Error("Invalid response");return o.models.map(i=>({id:i.model}))}},{id:"anthropic",displayName:"Anthropic (Claude)",schema:"openai",baseUrl:"https://api.anthropic.com",chatPath:"/v1/messages",showApiKey:!0,async validateConnection(e,t){return this.fetchModels(e,t)},async fetchModels(e,t){let r=t?bn("anthropic",t):"https://api.anthropic.com",n=await fetch(`${r}/v1/models`,{method:"GET",headers:{"Content-Type":"application/json","x-api-key":`${e}`,"anthropic-version":"2023-06-01"}});if(!n.ok)throw new Error(`Failed to fetch models: ${n.status} ${n.statusText}`);let o=await n.json();if(!Array.isArray(o.data))throw new Error("Invalid response");return o.data.map(i=>({id:i.id}))}},{id:"azureopenai",displayName:"Azure OpenAI",schema:"openai",baseUrl:"https://RESOURCE_NAME.openai.azure.com/openai/deployments/DEPLOYMENT_NAME/chat/completions?api-version=2024-10-21",chatPath:"",showApiKey:!0,async validateConnection(e,t){let r=new URL(t?bn("azureopenai",t):this.baseUrl);if(r.searchParams.has("api-version")||r.searchParams.append("api-version","2024-10-21"),r.pathname||(r.pathname="/openai/deployments/YOUR_DEPLOYMENT_NAME/chat/completions"),(await fetch(r.toString(),{method:"POST",body:JSON.stringify({stream:!1,max_tokens:1,messages:[{role:"user",content:" "}]}),headers:{"api-key":e,"Content-Type":"application/json"}})).status!==200)throw new Error("Connection failed");return null}},{id:"azureai",displayName:"Azure AI",schema:"openai",baseUrl:"https://RESOURCE_NAME.services.ai.azure.com/models",chatPath:"",showApiKey:!0,async validateConnection(e,t,r){let n=URL.parse(t+"/info");if(!n)throw new Error("Connection failed");n.searchParams.append("api-version",r||"2025-05-01");let o=await fetch(n,{method:"GET",headers:{"Content-Type":"application/json","api-key":e,Authorization:`Bearer ${e}`}});if(o.status===400)try{if((await o.json()).error?.code==="no_model_name")return null}catch{throw new Error("Connection failed")}throw new Error("Connection failed")}}];function Jw({apiKeyCustomSettings:e,apiKeyModelPresets:t}){return pf.flatMap(r=>{let n=e[r.id]?.apiKey||"",o=e[r.id]?.apiBaseUrl,i=e[r.id]?.disabled===!0,s=e[r.id]?.models||[],a=t[r.id]?.models||[],A=e[r.id]?.apiModels||[],c=e[r.id]?.visibility||{},l=r.id==="azureopenai"?!!n&&!!o:r.showApiKey?!!n:!!o,g=A.length>0;return[...s.map(d=>({...d,visible:c[d.id]!==!1,vendor:r.id,vendorDisabled:i,apiKey:n,avaliable:l&&!i&&!d.isDeleted,isDeleted:!!d.isDeleted,isCustom:!0})),...A.map(d=>({...d,visible:c[d.id]!==!1,vendor:r.id,vendorDisabled:i,apiKey:n,avaliable:l&&!i,isDeleted:!1,isCustom:!1})),...a.map(d=>{let f=d.visible!==!1,u=c[d.id];return{...d,visible:g?!1:f?u!==!1:u===!0,vendor:r.id,avaliable:l&&!i,isDeleted:!1,isCustom:!1,vendorDisabled:i,apiKey:n}})]})}var FA=class{constructor(t,r){this.token=t;this.model=r;this.token=t,this.model=r}async generateAnswer(t){let r="",{apiKeyCustomSettings:n,apiKeyModelPresets:o}=await z({apiKeyCustomSettings:{},apiKeyModelPresets:{}}),i=Jw({apiKeyModelPresets:o,apiKeyCustomSettings:n}),s=t.model||this.model,a=Hw(s),A=i.find(E=>E.id===a.id),c=A?Hw(A.name).name:"",l=a.vendor||"openai",g=n[l]?.apiKey||this.token,d=n[l]?.apiBaseUrl,f=n[l]?.apiVersion,u=d||pf.find(E=>E.id===l)?.baseUrl||"https://api.openai.com/v1",m=pf.find(E=>E.id===l)?.chatPath??"/chat/completions",C=m?Bn(bn(l,u),m):u,p=c||a.name,Q={model:p,stream:p==="o1"?void 0:!0};if(Array.isArray(t.prompt)?Q.messages=t.prompt:t.prompt?Q.messages=[{role:"user",content:t.prompt}]:t.multiContent&&(Q.messages=[{role:"user",content:t.multiContent[0]?.text||""}]),l==="ollama"){let E=ne();Q.messages=Q.messages?.map(B=>{if(!Array.isArray(B.content))return B;let y=B.content.find(P=>P.type==="text")?.text||"",T=B.content.filter(P=>P.type==="image_url").map(P=>dA(P.image_url.url,";base64,")[1]);return{...B,content:y,images:T}});let w=await fetch(C,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Q),signal:t.signal});if(!w.ok){let B=await w.json().catch(()=>({}));throw new Error(Vn(B)?`${ir}: ${w.status} ${w.statusText}`:`${ir}: ${B.message||B.error||JSON.stringify(B)}`)}if(!w.body)throw new Error(`${ir}: No response body`);for await(let B of Cn(w.body))for(let y of B.split(`
`))if(y.trim())try{let T=JSON.parse(y);if(T.done){t.onEvent({type:"done"});return}T.message?.content&&(r+=T.message.content),t.onEvent({type:"answer",data:{text:r,contents:[],messageId:E,conversationId:""}})}catch{}return}if(l==="anthropic"){Q.max_tokens=4096,Q.stream=!0;let E=ne();Q.messages=Q.messages?.map(w=>Array.isArray(w.content)?{...w,content:w.content.map(B=>B.type==="image_url"?{type:"image",source:{type:"base64",data:dA(B.image_url.url,";base64,")[1],media_type:dA(B.image_url.url.slice(5),";")[0]}}:B)}:w),await zr(C,{method:"POST",headers:{"Content-Type":"application/json","x-api-key":g,"anthropic-version":"2023-06-01","anthropic-dangerous-direct-browser-access":"true"},body:JSON.stringify(Q),signal:t.signal,onMessage(w){try{let B=JSON.parse(w);B.type==="message_stop"?t.onEvent({type:"done"}):B.type==="content_block_delta"&&B.delta.type==="text_delta"&&(r+=B.delta.text,t.onEvent({type:"answer",data:{text:r,contents:[],messageId:E,conversationId:""}}))}catch{}}}).catch(w=>{let B=w.message;try{let y=JSON.parse(B);if(B=y.message||y.msg||y.error?.message||y.detail?.message||B,[502,503].includes(y.responseStatus))throw new Error(`${ir}: error_service_unavailable`)}catch{}throw new Error(`${ir}: ${B}`)});return}if(l==="azureopenai"){let E=new URL(C);E.searchParams.has("api-version")||E.searchParams.append("api-version","2024-10-21"),E.pathname||(E.pathname="/openai/deployments/YOUR_DEPLOYMENT_NAME/chat/completions"),E.pathname=E.pathname.replace(/\/openai\/deployments\/([^/]+)\/chat\/completions/,`/openai/deployments/${p}/chat/completions`);let w=new Lo;await zr(E.toString(),{method:"POST",body:JSON.stringify(Q),signal:t.signal,headers:{"api-key":g,"Content-Type":"application/json"},onMessage(B){if(B==="[DONE]"){t.onEvent({type:"done"});return}try{let y=JSON.parse(B),T=w.parse(y),P=y.choices?.[0]?.delta?.content||y.choices?.[0]?.message?.content||"";if(P==="<|im_end|>"||P==="<|im_sep|>"||!P&&T.length===0)return;r+=P,t.onEvent({type:"answer",data:{text:r,contents:T,messageId:y.id,conversationId:""}})}catch{return}}}).catch(B=>{let y=B.message;try{let T=JSON.parse(y);if(y=T.message||T.msg||T.error?.message||T.detail?.message||y,[502,503].includes(T.responseStatus))throw new Error(`${ir}: error_service_unavailable`)}catch{}throw new Error(`${ir}: ${y}`)});return}if(l==="azureai"){let E=new Lo,w=URL.parse(u+"/chat/completions");if(!w)throw new Error("Invalid url");w.searchParams.append("api-version",f||"2025-05-01"),await zr(w.toString(),{method:"POST",body:JSON.stringify(Q),headers:{"Content-Type":"application/json","api-key":g,Authorization:`Bearer ${g}`},onMessage(B){if(B==="[DONE]"){t.onEvent({type:"done"});return}try{let y=JSON.parse(B),T=E.parse(y),P=y.choices?.[0]?.delta?.content||y.choices?.[0]?.message?.content||"";if(P==="<|im_end|>"||P==="<|im_sep|>"||!P&&T.length===0)return;r+=P,t.onEvent({type:"answer",data:{text:r,contents:T,messageId:y.id,conversationId:""}})}catch{return}}}).catch(B=>{let y=B.message;try{let T=JSON.parse(y);if(y=T.message||T.msg||T.error?.message||T.detail?.message||y,[502,503].includes(T.responseStatus))throw new Error(`${ir}: error_service_unavailable`)}catch{}throw new Error(`${ir}: ${y}`)});return}let v=new Lo;await zr(C,{method:"POST",signal:t.signal,headers:{"Content-Type":"application/json",Authorization:`Bearer ${g}`},body:JSON.stringify(Q),onMessage(E){if(E==="[DONE]"){t.onEvent({type:"done"});return}try{let w=JSON.parse(E),B=v.parse(w),y=w.choices?.[0]?.delta?.content||w.choices?.[0]?.message?.content||"";if(y==="<|im_end|>"||y==="<|im_sep|>"||!y&&B.length===0)return;r+=y,t.onEvent({type:"answer",data:{text:r,multiContent:B,messageId:w.id,conversationId:""}})}catch{return}}},!1,!1,p==="o1").catch(E=>{let w=E.message;try{let B=JSON.parse(w);if(w=B.message||B.msg||B.error?.message||B.detail?.message||w,[502,503].includes(B.responseStatus))throw new Error(`${ir}: error_service_unavailable`)}catch{}throw new Error(`${ir}: ${w}`)})}};var cs=V(Ae());function ls(e){return cs.default.tabs.sendMessage(e,{type:"check"}).catch(t=>{if(cs.default.scripting?.executeScript)return Promise.all([cs.default.scripting.executeScript({target:{tabId:e},files:["content-all.js"]}),cs.default.scripting.executeScript({target:{tabId:e,allFrames:!0},files:["all-frames.js"]})]).then(r=>r).catch(r=>{if(!(r instanceof Error&&r.message.startsWith("Cannot access a chrome")))throw new Error("Failed to inject content script")})})}var vA=class{constructor(){this.queue=[];this.isRunning=!1}async run(t){if(this.queue.push(t),!this.isRunning){for(this.isRunning=!0;this.queue.length;){let r=this.queue.shift();r&&await r()}this.isRunning=!1}}};async function*zw(e=200,t=15){let r=0;for(;r++<t;)yield Yr.default.runtime.sendMessage({type:"is-sidepanel-open"}).catch(()=>!1),await Gt(e)}async function Yw(e,t=!1){let{siderModelsLastUpdateTime:r}=await j({siderModelsLastUpdateTime:0});if(!r||Date.now()-r>60*60*1e3||t)return Z.loadSiderModels(e).then(n=>{n&&n.length&&e2(n)&&(M({siderModels:n.map(o=>({name:o.name,displayName:o.display_name,cost:o.cost,level:o.level,category:o.category,creator:o.creator,icon:o.logo,desc:o.desc,enable:o.enable,replaceBy:o.replace_by,is_think_model:o.is_think_model})),siderModelsLastUpdateTime:Date.now()}),j({"provider:siderApi":{model:"sider"},siderGrammarKey:{model:"sider"},"quickAction:provider:siderApi":"sider"}).then(o=>{let i=o["provider:siderApi"]?.model,s=o.siderGrammarKey?.model,a=o["quickAction:provider:siderApi"];if(i){let A=n.find(c=>c.name===i);A&&A.replace_by&&Yr.default.storage.local.set({"provider:siderApi":{model:A.replace_by}})}if(s){let A=n.find(c=>c.name===s);A&&A.replace_by&&Yr.default.storage.local.set({siderGrammarKey:{model:A.replace_by}})}if(a){let A=n.find(c=>c.name===a);A&&A.replace_by&&Yr.default.storage.local.set({"quickAction:provider:siderApi":{model:A.replace_by}})}}))})}async function Ww(e,t=!1){let{websiteToolsLastUpdateTime:r}=await j({websiteToolsLastUpdateTime:0});if(!r||Date.now()-r>60*60*1e3||t)return Z.loadWebsiteTools(e).then(n=>{if(n&&n.categories&&n.categories.length){let o=n.categories;M({websiteTools:o,websiteToolsLastUpdateTime:Date.now()})}})}function e2(e){return Array.isArray(e)?e.every(t=>typeof t!="object"||t===null?!1:typeof t.name=="string"&&typeof t.display_name=="string"&&typeof t.creator=="string"&&typeof t.logo=="string"&&typeof t.desc=="string"&&typeof t.category=="number"&&typeof t.enable=="boolean"&&typeof t.replace_by=="string"&&typeof t.cost=="object"&&t.cost!==null&&typeof t.cost.type=="string"&&typeof t.cost.count=="number"):!1}function jw(e){switch(e.split(".").pop()){case"cs":return"text/x-csharp";case"md":return"text/markdown";case"jpg":case"jpeg":return"image/jpeg";case"png":return"image/png";case"gif":return"image/gif";default:return""}}async function hf(){Yr.default.storage.local.remove(["chat_history_next_sync_tag","chatTempData"]),Yr.default.storage.local.get("chat:conversations").then(({"chat:conversations":e})=>{let t=e.filter(r=>r.provider!=="siderApi");Yr.default.storage.local.set({"chat:conversations":t})}),Yr.default.runtime.sendMessage({type:"RUNTIME_FORWARD_MSG",msg:{type:"new-chat"}})}async function Xn(e){return await Cw(new Uint8Array(await e.arrayBuffer()))}var Xw=V(Ae());async function gs(){let{generatedRandomId:e}=await j({generatedRandomId:""});if(!e){let t=await t2();return t||(t=ne(),r2(t)),Xw.default.storage.local.set({generatedRandomId:t}),t}return e}var Zw=fe.origin.replace(/\/\/\w+?\./,"//Y2hhdGdwdC1zaWRlYmFy."),$w="zgv2awnlswq";async function t2(){try{return await Qd({url:Zw,name:$w})}catch{return""}}async function r2(e){let t=Math.round(Date.now()/1e3)+31104e3;try{return await wd({url:Zw,name:$w,value:e,expirationDate:t,secure:!0})}catch{}}function sr(e,t=!1){let r=new Map,n=new WeakMap,o=s=>{let a=r.get(s);return a||(t?a=s.replace(/[A-Z]/g,A=>`_${A.toLowerCase()}`):a=s.replace(/_([a-z])/g,(A,c)=>c.toUpperCase()),r.set(s,a),a)},i=s=>{if(s===null||typeof s!="object")return s;if(n.has(s))return n.get(s);if(Array.isArray(s)){let A=s.map(i);return n.set(s,A),A}let a={};n.set(s,a);for(let A in s)if(Object.prototype.hasOwnProperty.call(s,A)){let c=o(A);a[c]=i(s[A])}return a};return i(e)}var Zn={609:"error_sider_premium_required",610:"error_sider_high_traffic",700:"error_sider_basic_credit_limit",701:"error_sider_advanced_credit_limit",1001:"error_sider_invalid_token ",1003:"error_sider_need_login",1006:"error_sider_device_bind_account",1011:"error_sider_login_expired",1012:"error_sider_admin_kickout",1013:"error_sider_device_limit_logout",1018:"error_sider_login_expired",1019:"error_sider_user_banned",1101:"error_sider_processing",1102:"error_sider_api_limit",1107:"error_sider_api_limit2",1109:"error_sider_gpt4_highload",1110:"error_sider_gpt_highload",1112:"error_sider_gpt4_limit",1113:"error_sider_gpt4_limit",1136:"error_sider_o1_limit",1137:"error_sider_unlimited_limit",1138:"error_sider_new_unlimited_limit_1",1139:"error_sider_new_unlimited_limit_2",1141:"error_sider_new_unlimited_limit_3",1142:"error_sider_data_analysis_credit",1143:"error_sider_translate_api_limit",1144:"error_sider_gpt45_rate_limit",3509:"error_sider_audio_advanced_limit",5522:"error_sider_thinking_model_credit_limit",1118:"error_sider_image_limit",1127:"error_sider_ocr_limit",1128:"error_sider_summary_video_limit",1501:"error_sider_openai_fault",1515:"error_sider_gemini_pro_busy",1129:"error_sider_basic_text_limit",1130:"error_sider_advanced_text_limit",1135:"error_sider_credit_freq_limit",1132:"error_sider_openai_filter",2003:"error_sider_embedding_limit_by_count",3511:"error_sider_audio_to_text_service_overload",4e3:"error_sider_trial_feat_limit",4500:"error_sider_video_too_long",4501:"error_sider_failed_to_create_user_video_task",4502:"error_sider_failed_to_send_whisper_request",4503:"error_sider_got_error_response_from_whisper",4504:"error_sider_failed_to_get_subtitle",4505:"error_sider_failed_to_get_video_info",4506:"error_sider_not_support_live_video",5200:"error_sider_upgrade_ext_needed"};function ds(e,t){switch(e){case 1001:case 1011:case 1012:case 1013:case 1018:M({__force_logout_reason__:Zn[e]}).then(()=>{fs()});break;case 609:case 1102:case 1107:case 1112:case 1113:case 1118:case 1127:case 1128:case 3511:case 4e3:case 4501:case 4502:case 4503:case 4504:Z.getVipInfoCached();break;default:break}throw new Error(RA(e,t))}function RA(e,t){if(e===1136)return t.includes(`ask.${fe.domain}`)?Zn[e]:t;if(e===1135){let r=t.match(/after (.*) minutes/i)?.[1]||60;return`${Zn[e]}|${r}`}if(e===1137){let r=t.match(/is \( (.*) uses/i)?.[1],n=t.match(/every (.*) hours, resetting/i)?.[1],o=t.match(/resetting at (.*). Full/i)?.[1];return`${Zn[e]}|${r}|${n}|${o}`}if(e===1139||e===1141){let r=t.match(/Current speed limit is \((.*) times \//i)?.[1],n=t.match(/\/ (.*) hour/i)?.[1];return`${Zn[e]}|${r}|${n}`}return e in Zn?Zn[e]:typeof t=="string"&&t.startsWith("504")?"error_sider_timeout":t}async function n2(e,t,r){return new Promise((n,o)=>{let i=new XMLHttpRequest;i.open(t.method||"GET",e),t.headers instanceof Headers&&t.headers.forEach((s,a)=>{i.setRequestHeader(a,s)}),i.onload=function(){n(new Response(i.responseText,{status:i.status,statusText:i.statusText}))},i.upload.onprogress=function(s){s.lengthComputable&&r&&r?.(s.loaded/s.total*100)},i.onerror=function(){o(new TypeError("Network request failed"))},i.ontimeout=function(){o(new TypeError("Network request timed out"))},i.send(t.body),t.signal&&(t.signal.onabort=function(){i.abort(),o(new DOMException("Aborted","AbortError"))})})}async function TA(e,t=null,r={}){if(!e.startsWith("http")){let u=await Wo();e=Bn(u,e)}e=new URL(e).href;let{onStreamData:n,getAbortMethod:o,noAuth:i,timeout:s,returnRawResponse:a,onProgress:A,...c}=r;c.method&&(c.method=c.method.toUpperCase());let l=new AbortController;if(c.signal||(c.signal=l.signal),o?.(()=>{l.abort()}),c.headers=new Headers(c.headers||{}),!i&&!c.headers.has("Authorization")){let u=(await $o()).token;if(u)c.headers.set("Authorization",u),ze("ERR_MUST_LOGIN");else throw new Error("Need Login",{cause:{url:e,method:c.method}})}if(t)try{t instanceof FormData||t instanceof Blob||t instanceof URLSearchParams||t instanceof ReadableStream||t instanceof ArrayBuffer||t instanceof DataView?c.body=t:(c.body=JSON.stringify(t),c.headers.set("Content-Type","application/json"))}catch{c.body=t}let g;s&&(g=setTimeout(()=>l.abort(),s));let d=null;try{d=A?await n2(e,c,A):await fetch(e,c)}catch(u){throw jo(u,e),u}if(!d)throw new Error("No response");if(s&&clearTimeout(g),a)return d;let f=null;if(n||(f=await d.json().catch(()=>({}))),!d.ok||d.status!==204&&f&&f.code!==0){if(f||(f=await d.json().catch(()=>({}))),f.errMsg=f.msg||f.message,Vn(f))f.errMsg=`${d.status} ${d.statusText}`;else{(f.code===1003||f.code===1006)&&M({ERR_MUST_LOGIN:!0});try{ds(f.code,f.msg||f.message)}catch(u){f.errMsg=u.message}}throw n&&n({data:null,done:!0}),f}if(n&&d.body){let u=Eo(m=>{if(m.type==="event"){let C={code:0,data:null,msg:"",errMsg:"",done:m.data==="[DONE]"},p=null;try{p=JSON.parse(m.data)}catch{}if(p&&(C={...C,...p}),C.code!==0){try{ds(C.code,C.msg)}catch(Q){C.errMsg=Q.message}throw n({data:null,done:!0}),C}n({data:C.data,done:C.done})}});for await(let m of Cn(d.body))u.feed(m)}return f?.data}var ge=(...e)=>TA(e[0],e[1],{...e[2],method:"GET"}),L=(...e)=>TA(e[0],e[1],{...e[2],method:"POST"}),eS=(...e)=>TA(e[0],e[1],{...e[2],method:"PUT"}),NA=(...e)=>TA(e[0],e[1],{...e[2],method:"DELETE"});var X=va,oe=at,de=Intl.DateTimeFormat().resolvedOptions().timeZone,De=`app_name=${X}&app_version=${oe}&tz_name=${de}`,Cf="ChitChat_Ext",Bf="ChitChat_Ext_UserStatus",Z={async refreshToken(e){let t=await L("/v1/user/token/refresh",{refresh_token:e},{noAuth:!0});return{token:t.token.token,refreshToken:t.token.refresh_token}},getSiderAnonymousToken:wr(async()=>{let e=await gs();return L("/v1/user/login/device_id",{device_id:e,uuid:e,app_name:X,app_version:oe},{noAuth:!0})}),getUserInfo:async()=>{let e=await ge(`/v1/user/info?app_name=${X}&app_version=${oe}`);return await M({userInfo:e}),e},getVipInfo:tS,getVipInfoCached:wr(tS,5e3),getVipPeriodInfo:wr(async()=>{let e=await ge(`/v1/completion/limit/static?app_name=${X}&app_version=${oe}&tz_name=${de}`);return await M({vipPeriodInfo:e}),e},3e3),async getPricingPlan(){let e=await ge("/v1/app/ipinfo",null,{noAuth:!0}),t=e.region==="CN"||de==="Asia/Shanghai"&&await z("language","en")==="zh_CN",r=await ge(`/v1/payment/pricing?from=web&location=${t?"CN":e.region}`,null,{noAuth:!0});Ht({isCNUser:t,pricingPlan:r.plan.map(n=>({name:n.name,displayName:n.display_name,currency:n.currency,interval:n.interval,originPrice:n.origin_price/100,price:n.price/100,discount:n.discount/100||0,current:n.id==r.current_plan?.id}))})},getClientConfig:async e=>{let t=await ge(`/v1/app/config?app_name=${X}&app_version=${oe}&tz_name=${de}`);return t&&await M({configByServer:t}),e?t?.[e]:t},getUserSettings:wr(async()=>await _e()?(await ge(`/v1/user/settings?app_name=${X}&keys=${Cf}`)).keys?.[Cf]:{},2e3),setUserSettings(e){if(!(!e||Object.keys(e).length===0))return En(()=>L("/v1/user/settings",{app_name:X,key:Cf,key_setting:e}))},getUserStatus:wr(async()=>{let t=(await ge(`/v1/user/settings?app_name=${X}&keys=${Bf}`)).keys?.[Bf];return t&&Object.keys(t).length&&await M({userStatus:t}),t},2e3),async setUserStatus(e){if(!e||Object.keys(e).length===0)return;await En(()=>L("/v1/user/settings",{app_name:X,key:Bf,key_setting:e}));let{userStatus:t}=await z({userStatus:{}});M({userStatus:{...t||{},...e}})},getUserPromptList(e){return ge(`/v1/prompt/list?type=${e}&page_size=999`)},getAllPromptList:async()=>{let e=await z({language:"",chatVisiblePromptKeys:null,readVisiblePromptKeys:null,writeVisiblePromptKeys:null}),t=e.language;if(!t)throw new Error("no language");let r=await Z.getUserSettings(),[n,o]=await Promise.all([ge(`/v1/prompt/list_all?app_name=${X}&page_size=999&language=${t}`,null,{headers:{Authorization:(await $n())?.token||""}}),ge(`/v1/prompt/list?type=special&app_name=${X}&page_size=999&language=${t}`,null,{headers:{Authorization:(await $n())?.token||""}})]),i=n.List;i.sort((p,Q)=>(p.sort!==0||p.key==="improve_writing")&&(Q.sort!==0||Q.key==="improve_writing")?Q.sort-p.sort:Q.sort===0?1:p.sort===0?-1:0);let s=i.reduce((p,Q)=>(p[Q.key||Q.id]=Q,p),{});function a(p){return{id:String(p.id),key:String(p.key||p.id),isCustom:!p.key||p.key.startsWith("custom"),name:p.display_name||p.name,shortName:p.short_name,content:p.content,icon:p.icon,placeholder:p.placeholder,usedIn:p.use||void 0,children:p.has_child?[]:void 0,parentKey:p.parent_key}}let A=[],c={};for(let p of i){let{key:Q,has_child:v,parent_key:E}=p;if(v){if(!(Q in c)){let B=a(p);c[Q]=B,A.push(B)}continue}if(E){let B=s[E];if(!B)continue;if(!(E in c)){let y=a(B);c[E]=y,A.push(y)}c[E]?.children?.push(a(p));continue}let w=a(p);A.push(w)}let l=new Map(A.map(p=>[p.key,p]));function g(p,Q){let v=l.get(p);if(v){let{usedIn:E}=v;return!E||E.includes(Q)}return!1}function d(p,Q=!1){let v=[];for(let E of A)g(E.key,p)&&(!Q||E.isCustom)&&v.push(E.key);return v}let f=n.Sort,u={chat:["chatVisiblePromptKeys","ChatAsk"],read:["readVisiblePromptKeys","ReadingAssistant"],write:["writeVisiblePromptKeys","WritingAssistant"]},m={};for(let[p,[Q,v]]of Object.entries(u)){let E=f[v].split(",").map(y=>y.trim()).filter(y=>l.has(y)),w=r?.[Q],B=e[Q]||w;if(B?m[Q]=Dd([...B.filter(y=>l.has(y)),...d(p)]):m[Q]=Dd([...d(p,!0),...E,...d(p)]),w?.length){let y=w.reduce((T,P,S)=>(T[P]=S,T),{});m[Q].sort((T,P)=>{let S=y[T],U=y[P],W=S===void 0,b=U===void 0;return W&&b?0:W?1:b?-1:S-U})}}let C=o.List.map(p=>a(p));await M({...m,allPromptList:A,specialPromptList:C,__DONT_SYNC__:`visiblePromptKeys${Date.now()}`})},createPrompt(e){return En(()=>L("/v1/prompt/create",{is_template:!1,type:"sidebar",...e}))},editUserPrompt(e){return En(()=>L("/v1/prompt/edit",e))},delUserPrompt(e){return En(()=>L("/v1/prompt/update",{id:e,status:"Deleted"}))},async uploadHistoryMsg(e,t){let r=Array.from(new Set(e.flatMap(o=>o.files??[]))),n=await L("/chat/v1/conversation/create",{title:t,messages:e},{headers:{"X-App-Name":X,"X-App-Version":oe,"X-Time-Zone":de,"X-Trace-Id":ne()}});return{conversation:n.conversation,messages:n.messages}},uploadConversion(e){return L("/v1/conversation/upload",{share:!0,app_name:X,app_version:oe,messages:e})},saveConversion(e){return L("/v1/conversation/upload",{save_by_user:!0,app_name:X,app_version:oe,messages:e})},async shareConversion(e){return(await ge(`/v1/conversation/share/${e}`)).share_key},saveSiderConversion(e){return ge(`/v1/conversation/save-by-user/${e}`)},unSaveSiderConversion(e){return ge(`/v1/conversation/unsave-by-user/${e}`)},delConversion(e){return NA(`/v1/conversation/delete/${e}`)},checkGrammarError(e){return L("/v1/completion/grammar_check",{content:e,tz_name:de,app_name:X,app_version:oe})},async improveWriting(e){function t(n){if(n?.total){let i={[e.model]:{total:n.total,remain:n.remain,extraTotal:n.extra_total,extraRemain:n.extra_quota,period:n.remain_period}};Wr(i)}}let r=vt(t,1e3,{leading:!0});return L("/v1/completion/improve_writing",{content:e.content,model:e.model,tz_name:de,app_name:X,app_version:oe},{onStreamData({data:n,done:o}){!o&&n&&r(n),e.onStreamData({text:n?.text||"",done:o})},getAbortMethod(){}})},async sendFeedback({title:e,detail:t,email:r}){let n=await $n();return L("/v1/app/feedback",{title:e,email:r,data:{detail:t},app_name:X,app_version:oe},{headers:{Authorization:n?.token||""}})},async sendFiveStarFeedback(e,t){let r=await $n(),n=await z("language","en"),o=`[FiveStarRate][${at}][${n}] Feedback by FiveStarRate`;return L("/v1/app/feedback",{title:o,data:{from:t,detail:e},app_name:X,app_version:oe},{headers:{Authorization:r?.token||""}})},async sendSearchAgentDislikeFeedback(e,t,r){let n=await $n(),o=await z("language","en"),i=`[SearchAgentDislike][${at}][${o}] Feedback by SearchAgentDislike`;return L("/v1/app/feedback",{title:i,data:{from:t,feedbackData:r||{}},app_name:X,app_version:oe},{headers:{Authorization:n?.token||""}})},async getInviteRewardConfig(){let e=await ge("/v1/invite/config",null,{noAuth:!0});return await M({inviteRewardConfig:{"gpt3.5":e.GPT3Dot5Count,gpt4:e.GPT4Count,"1_person_gpt3.5":e.SendUpTo1GPT3Dot5Count,"1_person_gpt4":e.SendUpTo1GPT4Count,"2_person_gpt3.5":e.SendUpTo2GPT3Dot5Count,"2_person_gpt4":e.SendUpTo2GPT4Count}}),e},async getInvitedFriendsList(){let e=await ge("/v1/invite/list?page=1&page_size=1");return e?.list&&M({invitedFriendsCount:e.list.filter(t=>t.status==="Finished").length}),e},createInviteLink(){return L("/v1/invite/create",{type:"link"})},async getInviteRewardCount(e){let t=await ge(`/v1/invite/reward?app_name=${X}&app_version=${oe}&last_req_time=${e}`);return{addedQuery:t.recent_reward_gpt3dot5_count+t.recent_reward_gpt4_count,addedUser:t.recent_invited_count}},inviteFinish:async()=>{let e=await gs();return L("/v1/invite/finish",{device_id:e})},async summaryVideo(e){function t(f){if(f?.total)if(e.vip){let u={"gpt-3.5":{total:f.total,remain:f.remain,extraTotal:f.extra_total,extraRemain:f.extra_quota,period:f.remain_period}};Wr(u)}else{let u={summary:{remain:f.remain}};Wr(u)}}let r=vt(t,1e3,{leading:!0}),n={app_name:X,app_version:oe,tz_name:de,content:e.text,title:e.title,language:e.lang,source:e.source,source_type:e.sourceType,request_id:ne(),cid:""},o=[];e.getAbortMethod(()=>{for(let f of o)f()});let{content:i,cid:s,...a}=n,A=null;try{A=await L("/v1/completion/summarize_init",a,{getAbortMethod(f){o.push(f)}})}catch{}A&&(n.cid=A.cid||"");let c=L("/v1/completion/summarize_all",n,{onStreamData({data:f,done:u}){!u&&f&&r(f),e.onStreamData({text:f?.text||"",done:u})},getAbortMethod(f){o.push(f)}}),l=L("/v1/completion/summarize",n,{getAbortMethod(f){o.push(f)}}),[g,d]=await Promise.all([c,l]);return t(d),{text:d.text,subtitle:d.subtitle}},async summaryVideoByEid(e){function t(i){i?.total&&jr(i?.chat_model??"gpt-3.5",i,i.feature_info)}let r=vt(t,1e3,{leading:!0}),n={app_name:X,app_version:oe,tz_name:de,use_whisper:!!e.useWhisper,eid:e.eid,language:e.language,re_summarize:!!e.reSummarize},o=await L("/v1/completion/video_summarize",n,{onStreamData({data:i,done:s}){!s&&i?(r(i),i.type==="text"?e.onStreamTextData({text:i.text,done:s}):i.type==="text_done"?e.onStreamTextData({text:i.text,done:!0}):i.type==="key_moments"&&e.onKey_momentsData(i.key_moments)):e.onStreamTextData({text:"",done:s})},getAbortMethod:i=>{e.getAbortMethod&&e.getAbortMethod(()=>{i()})}})},async getSummaryCache(e){let{is_creator:t,eid:r,summary:n,key_moments:o,language:i,from_whisper:s}=await L("/v1/completion/video_info",{source:e.source,source_type:e.source_type,title:e.title,app_name:X,app_version:oe,tz_name:de,language:e.language});return{is_creator:t,eid:r,summary:n,key_moments:o,from_whisper:s,language:i}},async getSummaryCacheRaw(e){let{is_creator:t,eid:r,summary:n,key_moments:o,language:i,task_id:s,subtitle:a,summary_language:A}=await L("/v1/completion/raw_video_info",{source:e.source,source_type:e.source_type,title:e.title,app_name:X,app_version:oe,tz_name:de,language:e.language});return{is_creator:t,eid:r,summary:n,subtitle:a,task_id:s,key_moments:o,language:i,summary_language:A}},async uploadWhisperSubtitle(e,t){return(await L("/v1/whisper/upload-subtitle",{app_name:X,app_version:oe,tz_name:de,url:e,summary_language:t})).task_id},async poolingWhisperProgress(e,t){let r=await L("/v1/whisper/progress",{app_name:X,app_version:oe,tz_name:de,task_id:e,webpage_url:t});return await jr("gpt-4",r.quota_map),{eid:r.eid,subtitle:r.subtitle_info.subtitle,language:r.subtitle_info.language,progress:r.progress}},async uploadSubtitleCache(e){let t=new FormData;return t.append("video_url",e.videoUrl),t.append("language",e.language),t.append("subtitle",e.subtitle),t.append("app_name",X),t.append("app_version",oe),L("/v1/video/cache_subtitle",t)},async getSubtitleCacheURL(e){let t={video_id:e.videoID,language:e.language,app_name:X,app_version:oe};return(await ge("/v1/video/get_subtitle?"+new URLSearchParams(t))).subtitle_url},statUserStop(e,t){return L("/v1/completion/mark-user-stop",{app_name:X,app_version:oe,cid:e,mid:t})},async OCR(e,t){let r=new FormData;return r.append("file",e),r.append("app_name",X),r.append("app_version",oe),r.append("tz_name",de),(await L("/v1/ocr/math",r,{getAbortMethod:t}))?.result?.text||""},adStat(e){return L("/v1/lp/action",{...e,meta:{browser:Ve?"Edge":"Chrome",ext_version:at}},{noAuth:!0})},async googleAnalytics(e,t){if(!us.default.tabs)return us.default.runtime.sendMessage({type:"GA_API",args:[e,t]});let r=e.replace(/-/gi,"_");return r.length>40,L(`${RB}?measurement_id=${TB}&api_secret=${NB}`,{client_id:await gs(),events:[{name:r,params:{...t}}]},{noAuth:!0})},uploadImage(e){let t=new FormData;return t.append("file",e),L("/v1/imagechat/upload",t,{onProgress:r=>{}})},signImageCookie(){return ge("/v1/user/sign-file-cookies")},createWisebaseByFileIds(e,t){return L("/library/v1/wisebase-by-files",{desc:e,fileIds:t},{headers:{"x-app-name":X,"x-app-version":oe,"x-time-zone":de}})},loadSiderModels(e){return ge(`/v1/app/load_models?app_name=${X}&app_version=${oe}&lang=${e}`,null,{noAuth:!0})},loadWebsiteTools(e){return ge(`/v1/app/load_tools?app_name=${X}&app_version=${oe}&lang=${e}`,null,{noAuth:!0})},uploadFile(e,t,r,n,o){let i=new FormData;return i.append("file",e),i.append("app_name",X),i.append("app_version",oe),i.append("tz_name",de),r&&i.append("webpage_url",r),n&&i.append("file_for",n),L("/v1/embedding/upload-file",i,{onProgress:t,getAbortMethod:s=>{o&&o(()=>{s()})}}).then(s=>{try{(s?.text_ready||!s.is_embedding)&&qo([s?.id],!0)}catch{}return s})},async uploadFileV2({file:e,onProgress:t,url:r,title:n,desc:o,fileFor:i,getAbortMethod:s,meta:a,tasks:A,noDirectUpload:c=!1}){let l=e.type||jw(e.name),g=[];l.startsWith("image")||g.push({type:"RAG"});let d=new FormData;return d.append("file",e),d.append("hash",String(await Xn(e))),d.append("mime",l),d.append("app_name",X),d.append("app_version",oe),d.append("tz_name",de),d.append("tasks",JSON.stringify(A||[...g,...e.type.startsWith("audio")?[{type:"audioDuration"}]:[]])),r&&d.append("type","webpage"),(r||i||a||n||o)&&d.append("meta",JSON.stringify({url:r,title:n,desc:o,fileFor:i,...a||{}})),L(c?"/uploader/v1/file/upload":"/uploader/v1/file/upload-directly",d,{onProgress:t,getAbortMethod:f=>{s&&s(()=>{f()})},headers:{"x-app-name":X,"x-app-version":oe,"x-time-zone":de,"x-trace-id":ne()}}).then(f=>{let{fileID:u,cdnURL:m}=f;try{(f?.textReady||!f?.textInTask||l.startsWith("image"))&&qo([u],!0)}catch{}return{id:u,url:m,limit:f.limit}})},getUploadPermission({name:e,mime:t,hash:r,size:n,subFiles:o}){return L(`/uploader/v1/file/upload-permission?${De}`,{name:e,mime:t,hash:r,size:n,subFiles:o})},fileUploaded({fileID:e,tasks:t,meta:r}){return L(`/uploader/v1/file/complete?${De}`,{id:e,meta:r,tasks:t})},getFileStauts(e){return L("uploader/v1/files/status",e)},async getPromotionCountdown(e){return await ge(`/v2/user/promotion/promotion_info?app_name=${X}&app_version=${oe}&tz_name=${de}${e?"&event_name="+e:""}`)},async getVoiceRoleList(){let e=vB,{voiceRoleList:t}=await j({voiceRoleList:[]});t?.length===0&&M({voiceRoleList:[e]});let n=(await ge(`/v1/audio/voice/list?app_name=${X}&app_version=${oe}&tz_name=${de}&page=1&page_size=999`,null,{noAuth:!0})).list.map(o=>({name:o.name,avatar:o.avatar,gender:o.gender,platform:o.platform,requireVIP:o.need_premium}));M({voiceRoleList:[e,...n]}),Promise.allSettled(n.map(o=>new Promise((i,s)=>{o.avatar?.startsWith("http")?fetch(o.avatar).then(async a=>{o.avatar=await Jr(await a.blob()),i("")}).catch(s):i("")}))).then(()=>{M({voiceRoleList:[e,...n]})})},async getTTSDemoText(){let{language:e}=await j({language:""});if(e){let t=await ge(`/v1/audio/audition/text?language_code=${e}`);return M({systemVoiceDemoText:t.text}),t.text}return""},async ttsPrepay(e,t){let r=await L("/v1/audio/speech/prepaid",{app_name:X,app_version:oe,tz_name:de,texts:e.texts,voice:e.voice,scene:e.scene,scene_id:e.sceneId},{getAbortMethod:t});return r?.quota&&r?.quota_type&&jr(r.quota_type==="basic"?"gpt-3.5":"gpt-4",r.quota,r.feature_info),r},tts(e,t){return L("/v1/audio/speech",{app_name:X,app_version:oe,tz_name:de,input:e.input,voice:e.voice,scene:e.scene,scene_id:e.sceneId,...e.demoLang?{audition_opt:{audition:!0,language_code:e.demoLang}}:null},{returnRawResponse:!0,getAbortMethod:t})},publishArtifact(e){return L("/v1/artifacts_publish",e)},unpublishArtifact(e){return L("/v1/artifacts_unpublish",e)},syncSingleChatHistory(e){return L("/chat/v1/history/sync",{...e},{headers:{"X-App-Name":X,"X-App-Version":oe,"X-Time-Zone":de,"X-Trace-Id":ne()}})},async getChatHistoryList(e,t,r=200){let o=[],i,s=[];async function a(A,c,l=0){try{return await L("/chat/v1/conversation/list",{sync_tag:A,limit:c,client_type:e,favorite:!0},{headers:{"X-App-Name":X,"X-App-Version":oe,"X-Time-Zone":de,"X-Trace-Id":ne()}})}catch(g){if(g.code===429)throw g;if(l<2){let d=Math.pow(2,l)*1e3;return await new Promise(f=>setTimeout(f,d)),a(A,c,l+1)}throw g}}try{let A=await a(t,r);for(o.push(...A.conversations),i=A.next_sync_tag,s=A.deleted_ids||[];A.has_more;)A=await a(A.next_sync_tag,r),o.push(...A.conversations),i=A.next_sync_tag,s=A.deleted_ids||[];return{conversations:o,next_sync_tag:i,deleted_ids:s,favorites:A.favorites||[]}}catch(A){throw A}},async getChatHistoryByCid(e,t,r=200,n){let i={id:"",cid:"",messages:[]},s,a=[];async function A(c,l,g,d=0){try{return await L("/chat/v1/conversation/messages",{cid:c,sync_tag:l,limit:g},{headers:{"X-App-Name":X,"X-App-Version":oe,"X-Time-Zone":de,"X-Trace-Id":ne()},getAbortMethod:n})}catch(f){if(f.name==="AbortError"&&Promise.reject(),d<2){let u=Math.pow(2,d)*1e3;return await new Promise(m=>setTimeout(m,u)),A(c,l,g,d+1)}throw f}}try{let c=await A(e,t,r),l=sr(c);for(i={...i,id:l.conversation.cid,nextSyncTag:l.nextSyncTag,...l.conversation},i.messages.push(...l.messages),s=l.nextSyncTag,a=l.latestSwitchList||[];l.hasMore;){let g=await A(e,l.nextSyncTag,r);l=sr(g),i={...i,id:l.conversation.cid,nextSyncTag:l.nextSyncTag,...l.conversation},i.messages.push(...l.messages),s=l.nextSyncTag,a=l.latestSwitchList||[]}return{chatData:i,conversation:l.conversation,next_sync_tag:s,latest_switch_list:a}}catch(c){throw c}},switchChatBranch(e,t,r){return L("/chat/v1/conversation/switch",{cid:e,message_id:t,current_leaf_message_id:r},{headers:{"X-App-Name":X,"X-App-Version":oe,"X-Time-Zone":de,"X-Trace-Id":ne()}})},updateConversationTitle(e,t){return L("/chat/v1/conversation/update",{cid:e,title:t},{headers:{"X-App-Name":X,"X-App-Version":oe,"X-Time-Zone":de,"X-Trace-Id":ne()}})},deleteConversation(e,t){return L("/chat/v1/conversation/delete",{cid:t,delete_type:e},{headers:{"x-app-name":X,"x-app-version":oe,"x-time-zone":de,"x-trace-id":ne()}})}};async function tS(){let e=await ge(`/v1/completion/limit/user?${De}`);if(!e.basic_credit.count)throw M({ERR_MUST_LOGIN:!0}),new Error("wrong_data");let t=e.user_type,r=["device","login","premium"],{vipPeriodInfo:n}=await j({vipPeriodInfo:null});n||(n=await Z.getVipPeriodInfo());let o=n.basic_credit_period_info,i=n.advanced_credit_period_info,s=n.ocr_period_info,a=n.feature_total,A=e.feature_used,c={isVIP:e.user_type==="premium",isTrial:e.is_trial,payment:{interval:""},userTypeDetail:e.user_type_detail,resetTimeSec:e.basic_credit.reset_time,showNewPlan:!!e.show_new_plan,"gpt-3.5":{total:e.basic_credit.count,remain:e.basic_credit.remain,extraTotal:e.basic_credit.extra_total,extraRemain:e.basic_credit.extra_quota,used:e.basic_credit.used,period:e.basic_credit.period,maxToken:o[t]?.prompt_max_token,award:r.reduce((l,g)=>(l[g]={count:o[g].count},l),{})},"gpt-4":{total:e.advanced_credit.count,remain:e.advanced_credit.remain,extraTotal:e.advanced_credit.extra_total,extraRemain:e.advanced_credit.extra_quota,used:e.advanced_credit.used,period:e.advanced_credit.period,maxToken:i[t]?.prompt_max_token,award:r.reduce((l,g)=>(l[g]={count:i[g].count},l),{})},trial:{chatFile:{total:a.chat_file,used:A.chat_file,remain:a.chat_file-A.chat_file},painter:{total:a.painter,used:A.painter,remain:a.painter-A.painter},videoSummary:{total:a.video_summary,used:A.video_summary,remain:a.video_summary-A.video_summary},tts:{total:a.tts,used:A.tts,remain:a.tts-A.tts},data_analysis:{total:a.data_analysis,used:A.data_analysis,remain:a.data_analysis-A.data_analysis},artifacts:{total:a.artifacts,used:A.artifacts,remain:a.artifacts-A.artifacts},text_to_image:{total:a.text_to_image,used:A.text_to_image,remain:a.text_to_image-A.text_to_image},search:{total:a.search,used:A.search,remain:a.search-A.search},thinking_mode:{total:a.thinking_mode,used:A.thinking_mode,remain:a.thinking_mode-A.thinking_mode},...a.short_video?{shortVideo:{total:a.short_video,used:A.short_video,remain:a.short_video-A.short_video}}:{}},summary:{total:e.summarize.count,remain:e.summarize.remain,cost:e.summarize.deduct_count,period:e.summarize.period},ocr:{cost:s?.deduct_count||1},"image-creator":{total:e.image.count,remain:e.image.remain,used:e.image.used,extraTotal:e.image.extra_total,extraRemain:e.image.extra_quota,period:e.image.period},reader:{total:e.embedding.count,remain:e.embedding.remain,used:e.embedding.used,period:e.embedding.period,limitSize:e.embedding.size}};if(c.isVIP){let l=await ge(`/v1/payment/info?${De}`);c.payment.interval=l.interval}if(Wr(c),c.isVIP){let{autoTools:l,isDoneAutoToolsAction:g}=await us.default.storage.local.get(["autoTools","isDoneAutoToolsAction"]);(l===void 0||l&&!l.includes("search"))&&!g&&M({autoTools:qB.filter(d=>d.autoOn).map(d=>d.name),isDoneAutoToolsAction:!0})}else{let{autoTools:l}=await us.default.storage.local.get("autoTools");typeof l<"u"&&M({autoTools:[]})}return c}async function rS(e){let t=await ge(`/v1/newcomer-guide/task?${De}`,null,{signal:e}),r=t?.map(n=>({id:n.task_id,key:n.task_key,credit:n.reward,isAdvance:n.reward_type==="advanced",status:n.status}));return t&&M({taskCenterTasks:r}),r}function nS(e,t){return L(`/v1/newcomer-guide/task/update?${De}`,{task_id:e,target_state:t})}var oS=e=>{let t=e.httpHandler;return{setHttpHandler(r){t=r},httpHandler(){return t},updateHttpClientConfig(r,n){t.updateHttpClientConfig(r,n)},httpHandlerConfigs(){return t.httpHandlerConfigs()}}},iS=e=>({httpHandler:e.httpHandler()});var sS;(function(e){e.HEADER="header",e.QUERY="query"})(sS||(sS={}));var yf;(function(e){e.HEADER="header",e.QUERY="query"})(yf||(yf={}));var ei;(function(e){e.HTTP="http",e.HTTPS="https"})(ei||(ei={}));var ti;(function(e){e.MD5="md5",e.CRC32="crc32",e.CRC32C="crc32c",e.SHA1="sha1",e.SHA256="sha256"})(ti||(ti={}));var Qf;(function(e){e[e.HEADER=0]="HEADER",e[e.TRAILER=1]="TRAILER"})(Qf||(Qf={}));var ri="__smithy_context";var aS;(function(e){e.PROFILE="profile",e.SSO_SESSION="sso-session",e.SERVICES="services"})(aS||(aS={}));var AS;(function(e){e.HTTP_0_9="http/0.9",e.HTTP_1_0="http/1.0",e.TDS_8_0="tds/8.0"})(AS||(AS={}));var ie=class e{constructor(t){this.method=t.method||"GET",this.hostname=t.hostname||"localhost",this.port=t.port,this.query=t.query||{},this.headers=t.headers||{},this.body=t.body,this.protocol=t.protocol?t.protocol.slice(-1)!==":"?`${t.protocol}:`:t.protocol:"https:",this.path=t.path?t.path.charAt(0)!=="/"?`/${t.path}`:t.path:"/",this.username=t.username,this.password=t.password,this.fragment=t.fragment}static clone(t){let r=new e({...t,headers:{...t.headers}});return r.query&&(r.query=o2(r.query)),r}static isInstance(t){if(!t)return!1;let r=t;return"method"in r&&"protocol"in r&&"hostname"in r&&"path"in r&&typeof r.query=="object"&&typeof r.headers=="object"}clone(){return e.clone(this)}};function o2(e){return Object.keys(e).reduce((t,r)=>{let n=e[r];return{...t,[r]:Array.isArray(n)?[...n]:n}},{})}var Tt=class{constructor(t){this.statusCode=t.statusCode,this.reason=t.reason,this.headers=t.headers||{},this.body=t.body}static isInstance(t){if(!t)return!1;let r=t;return typeof r.statusCode=="number"&&typeof r.headers=="object"}};function i2(e){return t=>async r=>{let{request:n}=r;return ie.isInstance(n)&&n.body&&e.runtime==="node"&&e.requestHandler?.constructor?.name!=="FetchHttpHandler"&&(n.headers={...n.headers,Expect:"100-continue"}),t({...r,request:n})}}var s2={step:"build",tags:["SET_EXPECT_HEADER","EXPECT_HEADER"],name:"addExpectContinueMiddleware",override:!0},cS=e=>({applyToStack:t=>{t.add(i2(e),s2)}});var wf={WHEN_SUPPORTED:"WHEN_SUPPORTED",WHEN_REQUIRED:"WHEN_REQUIRED"},Sf=wf.WHEN_SUPPORTED;var xf=wf.WHEN_SUPPORTED,Be;(function(e){e.MD5="MD5",e.CRC32="CRC32",e.CRC32C="CRC32C",e.SHA1="SHA1",e.SHA256="SHA256"})(Be||(Be={}));var lS;(function(e){e.HEADER="header",e.TRAILER="trailer"})(lS||(lS={}));var gS=Be.MD5,dS=Be.CRC32;var MA;(function(e){e.ENV="env",e.CONFIG="shared config entry"})(MA||(MA={}));function fS(e,t,r){return e.$source||(e.$source={}),e.$source[t]=r,e}function Ye(e,t,r){e.__aws_sdk_context?e.__aws_sdk_context.features||(e.__aws_sdk_context.features={}):e.__aws_sdk_context={features:{}},e.__aws_sdk_context.features[t]=r}var bf=e=>Tt.isInstance(e)?e.headers?.date??e.headers?.Date:void 0;var ni=e=>new Date(Date.now()+e);var uS=(e,t)=>Math.abs(ni(t).getTime()-e)>=3e5;var kf=(e,t)=>{let r=Date.parse(e);return uS(r,t)?r-Date.now():t};var ps=(e,t)=>{if(!t)throw new Error(`Property \`${e}\` is not resolved for AWS SDK SigV4Auth`);return t},UA=async e=>{let t=ps("context",e.context),r=ps("config",e.config),n=t.endpointV2?.properties?.authSchemes?.[0],i=await ps("signer",r.signer)(n),s=e?.signingRegion,a=e?.signingRegionSet,A=e?.signingName;return{config:r,signer:i,signingRegion:s,signingRegionSet:a,signingName:A}},eo=class{async sign(t,r,n){if(!ie.isInstance(t))throw new Error("The request is not an instance of `HttpRequest` and cannot be signed");let o=await UA(n),{config:i,signer:s}=o,{signingRegion:a,signingName:A}=o,c=n.context;if(c?.authSchemes?.length??!1){let[g,d]=c.authSchemes;g?.name==="sigv4a"&&d?.name==="sigv4"&&(a=d?.signingRegion??a,A=d?.signingName??A)}return await s.sign(t,{signingDate:ni(i.systemClockOffset),signingRegion:a,signingService:A})}errorHandler(t){return r=>{let n=r.ServerTime??bf(r.$response);if(n){let o=ps("config",t.config),i=o.systemClockOffset;o.systemClockOffset=kf(n,o.systemClockOffset),o.systemClockOffset!==i&&r.$metadata&&(r.$metadata.clockSkewCorrected=!0)}throw r}}successHandler(t,r){let n=bf(t);if(n){let o=ps("config",r.config);o.systemClockOffset=kf(n,o.systemClockOffset)}}};var ms=class extends eo{async sign(t,r,n){if(!ie.isInstance(t))throw new Error("The request is not an instance of `HttpRequest` and cannot be signed");let{config:o,signer:i,signingRegion:s,signingRegionSet:a,signingName:A}=await UA(n),l=(await o.sigv4aSigningRegionSet?.()??a??[s]).join(",");return await i.sign(t,{signingDate:ni(o.systemClockOffset),signingRegion:l,signingService:A})}};var ar=e=>e[ri]||(e[ri]={});var ot=e=>{if(typeof e=="function")return e;let t=Promise.resolve(e);return()=>t};function A2(e){let t=new Map;for(let r of e)t.set(r.schemeId,r);return t}var Df=(e,t)=>(r,n)=>async o=>{let i=e.httpAuthSchemeProvider(await t.httpAuthSchemeParametersProvider(e,n,o.input)),s=A2(e.httpAuthSchemes),a=ar(n),A=[];for(let c of i){let l=s.get(c.schemeId);if(!l){A.push(`HttpAuthScheme \`${c.schemeId}\` was not enabled for this service.`);continue}let g=l.identityProvider(await t.identityProviderConfigProvider(e));if(!g){A.push(`HttpAuthScheme \`${c.schemeId}\` did not have an IdentityProvider configured.`);continue}let{identityProperties:d={},signingProperties:f={}}=c.propertiesExtractor?.(e,n)||{};c.identityProperties=Object.assign(c.identityProperties||{},d),c.signingProperties=Object.assign(c.signingProperties||{},f),a.selectedHttpAuthScheme={httpAuthOption:c,identity:await g(c.identityProperties),signer:l.signer};break}if(!a.selectedHttpAuthScheme)throw new Error(A.join(`
`));return r(o)};var c2={step:"serialize",tags:["HTTP_AUTH_SCHEME"],name:"httpAuthSchemeMiddleware",override:!0,relation:"before",toMiddleware:"endpointV2Middleware"},IS=(e,{httpAuthSchemeParametersProvider:t,identityProviderConfigProvider:r})=>({applyToStack:n=>{n.addRelativeTo(Df(e,{httpAuthSchemeParametersProvider:t,identityProviderConfigProvider:r}),c2)}});var pS=(e,t)=>r=>async n=>{let{response:o}=await r(n);try{let i=await t(o,e);return{response:o,output:i}}catch(i){if(Object.defineProperty(i,"$response",{value:o}),!("$metadata"in i)){let s="Deserialization error: to see the raw response, inspect the hidden field {error}.$response on this object.";i.message+=`
  `+s,typeof i.$responseBodyText<"u"&&i.$response&&(i.$response.body=i.$responseBodyText)}throw i}};var mS=(e,t)=>(r,n)=>async o=>{let i=n.endpointV2?.url&&e.urlParser?async()=>e.urlParser(n.endpointV2.url):e.endpoint;if(!i)throw new Error("No valid endpoint provider available.");let s=await t(o.input,{...e,endpoint:i});return r({...o,request:s})};var l2={name:"deserializerMiddleware",step:"deserialize",tags:["DESERIALIZER"],override:!0},hs={name:"serializerMiddleware",step:"serialize",tags:["SERIALIZER"],override:!0};function PA(e,t,r){return{applyToStack:n=>{n.add(pS(e,r),l2),n.add(mS(e,t),hs)}}}var Mle={step:"serialize",tags:["HTTP_AUTH_SCHEME"],name:"httpAuthSchemeMiddleware",override:!0,relation:"before",toMiddleware:hs.name};var g2=e=>t=>{throw t},d2=(e,t)=>{},hS=e=>(t,r)=>async n=>{if(!ie.isInstance(n.request))return t(n);let i=ar(r).selectedHttpAuthScheme;if(!i)throw new Error("No HttpAuthScheme was selected: unable to sign request");let{httpAuthOption:{signingProperties:s={}},identity:a,signer:A}=i,c=await t({...n,request:await A.sign(n.request,a,s)}).catch((A.errorHandler||g2)(s));return(A.successHandler||d2)(c.response,s),c};var _f={step:"finalizeRequest",tags:["HTTP_SIGNING"],name:"httpSigningMiddleware",aliases:["apiKeyMiddleware","tokenMiddleware","awsAuthMiddleware"],override:!0,relation:"after",toMiddleware:"retryMiddleware"},CS=e=>({applyToStack:t=>{t.addRelativeTo(hS(e),_f)}});var Xr=e=>{if(typeof e=="function")return e;let t=Promise.resolve(e);return()=>t};var Zr={},to=new Array(64);for(let e=0,t=65,r=90;e+t<=r;e++){let n=String.fromCharCode(e+t);Zr[n]=e,to[e]=n}for(let e=0,t=97,r=122;e+t<=r;e++){let n=String.fromCharCode(e+t),o=e+26;Zr[n]=o,to[o]=n}for(let e=0;e<10;e++){Zr[e.toString(10)]=e+52;let t=e.toString(10),r=e+52;Zr[t]=r,to[r]=t}Zr["+"]=62;to[62]="+";Zr["/"]=63;to[63]="/";var kn=6,ro=8,BS=63;var OA=e=>{let t=e.length/4*3;e.slice(-2)==="=="?t-=2:e.slice(-1)==="="&&t--;let r=new ArrayBuffer(t),n=new DataView(r);for(let o=0;o<e.length;o+=4){let i=0,s=0;for(let c=o,l=o+3;c<=l;c++)if(e[c]!=="="){if(!(e[c]in Zr))throw new TypeError(`Invalid character ${e[c]} in base64 string.`);i|=Zr[e[c]]<<(l-c)*kn,s+=kn}else i>>=kn;let a=o/4*3;i>>=s%ro;let A=Math.floor(s/ro);for(let c=0;c<A;c++){let l=(A-c-1)*ro;n.setUint8(a+c,(i&255<<l)>>l)}}return new Uint8Array(r)};var Nt=e=>new TextEncoder().encode(e);var Dr=e=>typeof e=="string"?Nt(e):ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(e);var oi=e=>{if(typeof e=="string")return e;if(typeof e!="object"||typeof e.byteOffset!="number"||typeof e.byteLength!="number")throw new Error("@smithy/util-utf8: toUtf8 encoder function only accepts string | Uint8Array.");return new TextDecoder("utf-8").decode(e)};function Dn(e){let t;typeof e=="string"?t=Nt(e):t=e;let r=typeof t=="object"&&typeof t.length=="number",n=typeof t=="object"&&typeof t.byteOffset=="number"&&typeof t.byteLength=="number";if(!r&&!n)throw new Error("@smithy/util-base64: toBase64 encoder function only accepts string | Uint8Array.");let o="";for(let i=0;i<t.length;i+=3){let s=0,a=0;for(let c=i,l=Math.min(i+3,t.length);c<l;c++)s|=t[c]<<(l-c-1)*ro,a+=ro;let A=Math.ceil(a/kn);s<<=A*kn-a;for(let c=1;c<=A;c++){let l=(A-c)*kn;o+=to[(s&BS<<l)>>l]}o+="==".slice(0,4-A)}return o}function ES(e,t="utf-8"){return t==="base64"?Dn(e):oi(e)}function yS(e,t){return t==="base64"?$r.mutate(OA(e)):$r.mutate(Nt(e))}var $r=class e extends Uint8Array{static fromString(t,r="utf-8"){switch(typeof t){case"string":return yS(t,r);default:throw new Error(`Unsupported conversion from ${typeof t} to Uint8ArrayBlobAdapter.`)}}static mutate(t){return Object.setPrototypeOf(t,e.prototype),t}transformToString(t="utf-8"){return ES(this,t)}};var QS=(e,t)=>{let{base64Encoder:r,bodyLengthChecker:n,checksumAlgorithmFn:o,checksumLocationName:i,streamHasher:s}=t,a=r!==void 0&&n!==void 0&&o!==void 0&&i!==void 0&&s!==void 0,A=a?s(o,e):void 0,c=e.getReader();return new ReadableStream({async pull(l){let{value:g,done:d}=await c.read();if(d){if(l.enqueue(`0\r
`),a){let f=r(await A);l.enqueue(`${i}:${f}\r
`),l.enqueue(`\r
`)}l.close()}else l.enqueue(`${(n(g)||0).toString(16)}\r
${g}\r
`)}})};var Ar=e=>encodeURIComponent(e).replace(/[!'()*]/g,f2),f2=e=>`%${e.charCodeAt(0).toString(16).toUpperCase()}`;function wS(e){let t=[];for(let r of Object.keys(e).sort()){let n=e[r];if(r=Ar(r),Array.isArray(n))for(let o=0,i=n.length;o<i;o++)t.push(`${r}=${Ar(n[o])}`);else{let o=r;(n||typeof n=="string")&&(o+=`=${Ar(n)}`),t.push(o)}}return t.join("&")}function Ff(e,t){return new Request(e,t)}function SS(e=0){return new Promise((t,r)=>{e&&setTimeout(()=>{let n=new Error(`Request did not complete within ${e} ms`);n.name="TimeoutError",r(n)},e)})}var vf={supported:void 0},GA=class e{static create(t){return typeof t?.handle=="function"?t:new e(t)}constructor(t){typeof t=="function"?this.configProvider=t().then(r=>r||{}):(this.config=t??{},this.configProvider=Promise.resolve(this.config)),vf.supported===void 0&&(vf.supported=typeof Request<"u"&&"keepalive"in Ff("https://[::1]"))}destroy(){}async handle(t,{abortSignal:r}={}){this.config||(this.config=await this.configProvider);let n=this.config.requestTimeout,o=this.config.keepAlive===!0,i=this.config.credentials;if(r?.aborted){let p=new Error("Request aborted");return p.name="AbortError",Promise.reject(p)}let s=t.path,a=wS(t.query||{});a&&(s+=`?${a}`),t.fragment&&(s+=`#${t.fragment}`);let A="";if(t.username!=null||t.password!=null){let p=t.username??"",Q=t.password??"";A=`${p}:${Q}@`}let{port:c,method:l}=t,g=`${t.protocol}//${A}${t.hostname}${c?`:${c}`:""}${s}`,d=l==="GET"||l==="HEAD"?void 0:t.body,f={body:d,headers:new Headers(t.headers),method:l,credentials:i};this.config?.cache&&(f.cache=this.config.cache),d&&(f.duplex="half"),typeof AbortController<"u"&&(f.signal=r),vf.supported&&(f.keepalive=o),typeof this.config.requestInit=="function"&&Object.assign(f,this.config.requestInit(t));let u=()=>{},m=Ff(g,f),C=[fetch(m).then(p=>{let Q=p.headers,v={};for(let w of Q.entries())v[w[0]]=w[1];return p.body!=null?{response:new Tt({headers:v,reason:p.statusText,statusCode:p.status,body:p.body})}:p.blob().then(w=>({response:new Tt({headers:v,reason:p.statusText,statusCode:p.status,body:w})}))}),SS(n)];return r&&C.push(new Promise((p,Q)=>{let v=()=>{let E=new Error("Request aborted");E.name="AbortError",Q(E)};if(typeof r.addEventListener=="function"){let E=r;E.addEventListener("abort",v,{once:!0}),u=()=>E.removeEventListener("abort",v)}else r.onabort=v})),Promise.race(C).finally(u)}updateHttpClientConfig(t,r){this.config=void 0,this.configProvider=this.configProvider.then(n=>(n[t]=r,n))}httpHandlerConfigs(){return this.config??{}}};var qA=async e=>typeof Blob=="function"&&e instanceof Blob||e.constructor?.name==="Blob"?new Uint8Array(await e.arrayBuffer()):u2(e);async function u2(e){let t=[],r=e.getReader(),n=!1,o=0;for(;!n;){let{done:a,value:A}=await r.read();A&&(t.push(A),o+=A.length),n=a}let i=new Uint8Array(o),s=0;for(let a of t)i.set(a,s),s+=a.length;return i}var xS={},Rf={};for(let e=0;e<256;e++){let t=e.toString(16).toLowerCase();t.length===1&&(t=`0${t}`),xS[e]=t,Rf[t]=e}function HA(e){if(e.length%2!==0)throw new Error("Hex encoded strings must have an even number length");let t=new Uint8Array(e.length/2);for(let r=0;r<e.length;r+=2){let n=e.slice(r,r+2).toLowerCase();if(n in Rf)t[r/2]=Rf[n];else throw new Error(`Cannot decode unrecognized sequence ${n} as hexadecimal`)}return t}function Fe(e){let t="";for(let r=0;r<e.byteLength;r++)t+=xS[e[r]];return t}var Cs=e=>typeof ReadableStream=="function"&&(e?.constructor?.name===ReadableStream.name||e instanceof ReadableStream);var bS="The stream has already been transformed.",DS=e=>{if(!kS(e)&&!Cs(e)){let o=e?.__proto__?.constructor?.name||e;throw new Error(`Unexpected stream implementation, expect Blob or ReadableStream, got ${o}`)}let t=!1,r=async()=>{if(t)throw new Error(bS);return t=!0,await qA(e)},n=o=>{if(typeof o.stream!="function")throw new Error(`Cannot transform payload Blob to web stream. Please make sure the Blob.stream() is polyfilled.
If you are using React Native, this API is not yet supported, see: https://react-native.canny.io/feature-requests/p/fetch-streaming-body`);return o.stream()};return Object.assign(e,{transformToByteArray:r,transformToString:async o=>{let i=await r();if(o==="base64")return Dn(i);if(o==="hex")return Fe(i);if(o===void 0||o==="utf8"||o==="utf-8")return oi(i);if(typeof TextDecoder=="function")return new TextDecoder(o).decode(i);throw new Error("TextDecoder is not available, please make sure polyfill is provided.")},transformToWebStream:()=>{if(t)throw new Error(bS);if(t=!0,kS(e))return n(e);if(Cs(e))return e;throw new Error(`Cannot transform payload to web stream, got ${e}`)}})},kS=e=>typeof Blob=="function"&&e instanceof Blob;async function _S(e){return typeof e.stream=="function"&&(e=e.stream()),e.tee()}async function FS(e,t){let r=0,n=[],o=e.getReader(),i=!1;for(;!i;){let{done:A,value:c}=await o.read();if(c&&(n.push(c),r+=c?.byteLength??0),r>=t)break;i=A}o.releaseLock();let s=new Uint8Array(Math.min(t,r)),a=0;for(let A of n){if(A.byteLength>s.byteLength-a){s.set(A.subarray(0,s.byteLength-a),a);break}else s.set(A,a);a+=A.length}return s}var I2=typeof ReadableStream=="function"?ReadableStream:function(){},LA=class extends I2{};var vS=({expectedChecksum:e,checksum:t,source:r,checksumSourceLocation:n,base64Encoder:o})=>{if(!Cs(r))throw new Error(`@smithy/util-stream: unsupported source type ${r?.constructor?.name??r} in ChecksumStream.`);let i=o??Dn;if(typeof TransformStream!="function")throw new Error("@smithy/util-stream: unable to instantiate ChecksumStream because API unavailable: ReadableStream/TransformStream.");let s=new TransformStream({start(){},async transform(A,c){t.update(A),c.enqueue(A)},async flush(A){let c=await t.digest(),l=i(c);if(e!==l){let g=new Error(`Checksum mismatch: expected "${e}" but received "${l}" in response header "${n}".`);A.error(g)}else A.terminate()}});r.pipeThrough(s);let a=s.readable;return Object.setPrototypeOf(a,LA.prototype),a};var Bs=async(e=new Uint8Array,t)=>{if(e instanceof Uint8Array)return $r.mutate(e);if(!e)return $r.mutate(new Uint8Array);let r=t.streamCollector(e);return $r.mutate(await r)};function KA(e){return encodeURIComponent(e).replace(/[!'()*]/g,function(t){return"%"+t.charCodeAt(0).toString(16).toUpperCase()})}var Tf=(e,t,r,n,o,i)=>{if(t!=null&&t[r]!==void 0){let s=n();if(s.length<=0)throw new Error("Empty value provided for input HTTP label: "+r+".");e=e.replace(o,i?s.split("/").map(a=>KA(a)).join("/"):KA(s))}else throw new Error("No value provided for input HTTP label: "+r+".");return e};function JA(e,t){return new Nf(e,t)}var Nf=class{constructor(t,r){this.input=t,this.context=r,this.query={},this.method="",this.headers={},this.path="",this.body=null,this.hostname="",this.resolvePathStack=[]}async build(){let{hostname:t,protocol:r="https",port:n,path:o}=await this.context.endpoint();this.path=o;for(let i of this.resolvePathStack)i(this.path);return new ie({protocol:r,hostname:this.hostname||t,port:n,method:this.method,path:this.path,query:this.query,body:this.body,headers:this.headers})}hn(t){return this.hostname=t,this}bp(t){return this.resolvePathStack.push(r=>{this.path=`${r?.endsWith("/")?r.slice(0,-1):r||""}`+t}),this}p(t,r,n,o){return this.resolvePathStack.push(i=>{this.path=Tf(i,this.input,t,r,n,o)}),this}h(t){return this.headers=t,this}q(t){return this.query=t,this}b(t){return this.body=t,this}m(t){return this.method=t,this}};function RS(e,t,r){e.__smithy_context?e.__smithy_context.features||(e.__smithy_context.features={}):e.__smithy_context={features:{}},e.__smithy_context.features[t]=r}var VA=class{constructor(t){this.authSchemes=new Map;for(let[r,n]of Object.entries(t))n!==void 0&&this.authSchemes.set(r,n)}getIdentityProvider(t){return this.authSchemes.get(t)}};var p2=e=>t=>Mf(t)&&t.expiration.getTime()-Date.now()<e;var TS=p2(3e5),Mf=e=>e.expiration!==void 0,NS=(e,t,r)=>{if(e===void 0)return;let n=typeof e!="function"?async()=>Promise.resolve(e):e,o,i,s,a=!1,A=async c=>{i||(i=n(c));try{o=await i,s=!0,a=!1}finally{i=void 0}return o};return t===void 0?async c=>((!s||c?.forceRefresh)&&(o=await A(c)),o):async c=>((!s||c?.forceRefresh)&&(o=await A(c)),a?o:r(o)?(t(o)&&await A(c),o):(a=!0,o))};var MS=(e,t,r)=>{let n,o,i,s=!1,a=async()=>{o||(o=e());try{n=await o,i=!0,s=!1}finally{o=void 0}return n};return t===void 0?async A=>((!i||A?.forceRefresh)&&(n=await a()),n):async A=>((!i||A?.forceRefresh)&&(n=await a()),s?n:r&&!r(n)?(s=!0,n):(t(n)&&await a(),n))};var US=e=>(e.sigv4aSigningRegionSet=Xr(e.sigv4aSigningRegionSet),e);var PS="X-Amz-Algorithm",OS="X-Amz-Credential",Pf="X-Amz-Date",GS="X-Amz-SignedHeaders",qS="X-Amz-Expires",Of="X-Amz-Signature",Gf="X-Amz-Security-Token";var qf="authorization",Hf=Pf.toLowerCase(),m2="date",HS=[qf,Hf,m2],LS=Of.toLowerCase(),Es="x-amz-content-sha256",KS=Gf.toLowerCase();var JS={authorization:!0,"cache-control":!0,connection:!0,expect:!0,from:!0,"keep-alive":!0,"max-forwards":!0,pragma:!0,referer:!0,te:!0,trailer:!0,"transfer-encoding":!0,upgrade:!0,"user-agent":!0,"x-amzn-trace-id":!0},VS=/^proxy-/,zS=/^sec-/;var zA="AWS4-HMAC-SHA256";var YS="AWS4-HMAC-SHA256-PAYLOAD",WS="UNSIGNED-PAYLOAD",jS=50,Lf="aws4_request",XS=60*60*24*7;var YA={},Kf=[],WA=(e,t,r)=>`${e}/${t}/${r}/${Lf}`,$S=async(e,t,r,n,o)=>{let i=await ZS(e,t.secretAccessKey,t.accessKeyId),s=`${r}:${n}:${o}:${Fe(i)}:${t.sessionToken}`;if(s in YA)return YA[s];for(Kf.push(s);Kf.length>jS;)delete YA[Kf.shift()];let a=`AWS4${t.secretAccessKey}`;for(let A of[r,n,o,Lf])a=await ZS(e,a,A);return YA[s]=a};var ZS=(e,t,r)=>{let n=new e(t);return n.update(Dr(r)),n.digest()};var jA=({headers:e},t,r)=>{let n={};for(let o of Object.keys(e).sort()){if(e[o]==null)continue;let i=o.toLowerCase();(i in JS||t?.has(i)||VS.test(i)||zS.test(i))&&(!r||r&&!r.has(i))||(n[i]=e[o].trim().replace(/\s+/g," "))}return n};var Jf=({query:e={}})=>{let t=[],r={};for(let n of Object.keys(e)){if(n.toLowerCase()===LS)continue;let o=Ar(n);t.push(o);let i=e[n];typeof i=="string"?r[o]=`${o}=${Ar(i)}`:Array.isArray(i)&&(r[o]=i.slice(0).reduce((s,a)=>s.concat([`${o}=${Ar(a)}`]),[]).sort().join("&"))}return t.sort().map(n=>r[n]).filter(n=>n).join("&")};var XA=e=>typeof ArrayBuffer=="function"&&e instanceof ArrayBuffer||Object.prototype.toString.call(e)==="[object ArrayBuffer]";var ys=async({headers:e,body:t},r)=>{for(let n of Object.keys(e))if(n.toLowerCase()===Es)return e[n];if(t==null)return"e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855";if(typeof t=="string"||ArrayBuffer.isView(t)||XA(t)){let n=new r;return n.update(Dr(t)),Fe(await n.digest())}return WS};var ZA=class{format(t){let r=[];for(let i of Object.keys(t)){let s=Nt(i);r.push(Uint8Array.from([s.byteLength]),s,this.formatHeaderValue(t[i]))}let n=new Uint8Array(r.reduce((i,s)=>i+s.byteLength,0)),o=0;for(let i of r)n.set(i,o),o+=i.byteLength;return n}formatHeaderValue(t){switch(t.type){case"boolean":return Uint8Array.from([t.value?0:1]);case"byte":return Uint8Array.from([2,t.value]);case"short":let r=new DataView(new ArrayBuffer(3));return r.setUint8(0,3),r.setInt16(1,t.value,!1),new Uint8Array(r.buffer);case"integer":let n=new DataView(new ArrayBuffer(5));return n.setUint8(0,4),n.setInt32(1,t.value,!1),new Uint8Array(n.buffer);case"long":let o=new Uint8Array(9);return o[0]=5,o.set(t.value.bytes,1),o;case"binary":let i=new DataView(new ArrayBuffer(3+t.value.byteLength));i.setUint8(0,6),i.setUint16(1,t.value.byteLength,!1);let s=new Uint8Array(i.buffer);return s.set(t.value,3),s;case"string":let a=Nt(t.value),A=new DataView(new ArrayBuffer(3+a.byteLength));A.setUint8(0,7),A.setUint16(1,a.byteLength,!1);let c=new Uint8Array(A.buffer);return c.set(a,3),c;case"timestamp":let l=new Uint8Array(9);return l[0]=8,l.set(Vf.fromNumber(t.value.valueOf()).bytes,1),l;case"uuid":if(!h2.test(t.value))throw new Error(`Invalid UUID received: ${t.value}`);let g=new Uint8Array(17);return g[0]=9,g.set(HA(t.value.replace(/\-/g,"")),1),g}}},ex;(function(e){e[e.boolTrue=0]="boolTrue",e[e.boolFalse=1]="boolFalse",e[e.byte=2]="byte",e[e.short=3]="short",e[e.integer=4]="integer",e[e.long=5]="long",e[e.byteArray=6]="byteArray",e[e.string=7]="string",e[e.timestamp=8]="timestamp",e[e.uuid=9]="uuid"})(ex||(ex={}));var h2=/^[a-f0-9]{8}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{12}$/,Vf=class e{constructor(t){if(this.bytes=t,t.byteLength!==8)throw new Error("Int64 buffers must be exactly 8 bytes")}static fromNumber(t){if(t>9223372036854776e3||t<-9223372036854776e3)throw new Error(`${t} is too large (or, if negative, too small) to represent as an Int64`);let r=new Uint8Array(8);for(let n=7,o=Math.abs(Math.round(t));n>-1&&o>0;n--,o/=256)r[n]=o;return t<0&&tx(r),new e(r)}valueOf(){let t=this.bytes.slice(0),r=t[0]&128;return r&&tx(t),parseInt(Fe(t),16)*(r?-1:1)}toString(){return String(this.valueOf())}};function tx(e){for(let t=0;t<8;t++)e[t]^=255;for(let t=7;t>-1&&(e[t]++,e[t]===0);t--);}var rx=(e,t)=>{e=e.toLowerCase();for(let r of Object.keys(t))if(e===r.toLowerCase())return!0;return!1};var zf=(e,t={})=>{let{headers:r,query:n={}}=ie.clone(e);for(let o of Object.keys(r)){let i=o.toLowerCase();(i.slice(0,6)==="x-amz-"&&!t.unhoistableHeaders?.has(i)||t.hoistableHeaders?.has(i))&&(n[o]=r[o],delete r[o])}return{...e,headers:r,query:n}};var $A=e=>{e=ie.clone(e);for(let t of Object.keys(e.headers))HS.indexOf(t.toLowerCase())>-1&&delete e.headers[t];return e};var nx=e=>C2(e).toISOString().replace(/\.\d{3}Z$/,"Z"),C2=e=>typeof e=="number"?new Date(e*1e3):typeof e=="string"?Number(e)?new Date(Number(e)*1e3):new Date(e):e;var no=class{constructor({applyChecksum:t,credentials:r,region:n,service:o,sha256:i,uriEscapePath:s=!0}){this.headerFormatter=new ZA,this.service=o,this.sha256=i,this.uriEscapePath=s,this.applyChecksum=typeof t=="boolean"?t:!0,this.regionProvider=ot(n),this.credentialProvider=ot(r)}async presign(t,r={}){let{signingDate:n=new Date,expiresIn:o=3600,unsignableHeaders:i,unhoistableHeaders:s,signableHeaders:a,hoistableHeaders:A,signingRegion:c,signingService:l}=r,g=await this.credentialProvider();this.validateResolvedCredentials(g);let d=c??await this.regionProvider(),{longDate:f,shortDate:u}=ec(n);if(o>XS)return Promise.reject("Signature version 4 presigned URLs must have an expiration date less than one week in the future");let m=WA(u,d,l??this.service),C=zf($A(t),{unhoistableHeaders:s,hoistableHeaders:A});g.sessionToken&&(C.query[Gf]=g.sessionToken),C.query[PS]=zA,C.query[OS]=`${g.accessKeyId}/${m}`,C.query[Pf]=f,C.query[qS]=o.toString(10);let p=jA(C,i,a);return C.query[GS]=ox(p),C.query[Of]=await this.getSignature(f,m,this.getSigningKey(g,d,u,l),this.createCanonicalRequest(C,p,await ys(t,this.sha256))),C}async sign(t,r){return typeof t=="string"?this.signString(t,r):t.headers&&t.payload?this.signEvent(t,r):t.message?this.signMessage(t,r):this.signRequest(t,r)}async signEvent({headers:t,payload:r},{signingDate:n=new Date,priorSignature:o,signingRegion:i,signingService:s}){let a=i??await this.regionProvider(),{shortDate:A,longDate:c}=ec(n),l=WA(A,a,s??this.service),g=await ys({headers:{},body:r},this.sha256),d=new this.sha256;d.update(t);let f=Fe(await d.digest()),u=[YS,c,l,o,f,g].join(`
`);return this.signString(u,{signingDate:n,signingRegion:a,signingService:s})}async signMessage(t,{signingDate:r=new Date,signingRegion:n,signingService:o}){return this.signEvent({headers:this.headerFormatter.format(t.message.headers),payload:t.message.body},{signingDate:r,signingRegion:n,signingService:o,priorSignature:t.priorSignature}).then(s=>({message:t.message,signature:s}))}async signString(t,{signingDate:r=new Date,signingRegion:n,signingService:o}={}){let i=await this.credentialProvider();this.validateResolvedCredentials(i);let s=n??await this.regionProvider(),{shortDate:a}=ec(r),A=new this.sha256(await this.getSigningKey(i,s,a,o));return A.update(Dr(t)),Fe(await A.digest())}async signRequest(t,{signingDate:r=new Date,signableHeaders:n,unsignableHeaders:o,signingRegion:i,signingService:s}={}){let a=await this.credentialProvider();this.validateResolvedCredentials(a);let A=i??await this.regionProvider(),c=$A(t),{longDate:l,shortDate:g}=ec(r),d=WA(g,A,s??this.service);c.headers[Hf]=l,a.sessionToken&&(c.headers[KS]=a.sessionToken);let f=await ys(c,this.sha256);!rx(Es,c.headers)&&this.applyChecksum&&(c.headers[Es]=f);let u=jA(c,o,n),m=await this.getSignature(l,d,this.getSigningKey(a,A,g,s),this.createCanonicalRequest(c,u,f));return c.headers[qf]=`${zA} Credential=${a.accessKeyId}/${d}, SignedHeaders=${ox(u)}, Signature=${m}`,c}createCanonicalRequest(t,r,n){let o=Object.keys(r).sort();return`${t.method}
${this.getCanonicalPath(t)}
${Jf(t)}
${o.map(i=>`${i}:${r[i]}`).join(`
`)}

${o.join(";")}
${n}`}async createStringToSign(t,r,n){let o=new this.sha256;o.update(Dr(n));let i=await o.digest();return`${zA}
${t}
${r}
${Fe(i)}`}getCanonicalPath({path:t}){if(this.uriEscapePath){let r=[];for(let i of t.split("/"))i?.length!==0&&i!=="."&&(i===".."?r.pop():r.push(i));let n=`${t?.startsWith("/")?"/":""}${r.join("/")}${r.length>0&&t?.endsWith("/")?"/":""}`;return Ar(n).replace(/%2F/g,"/")}return t}async getSignature(t,r,n,o){let i=await this.createStringToSign(t,r,o),s=new this.sha256(await n);return s.update(Dr(i)),Fe(await s.digest())}getSigningKey(t,r,n,o){return $S(this.sha256,t,n,r,o||this.service)}validateResolvedCredentials(t){if(typeof t!="object"||typeof t.accessKeyId!="string"||typeof t.secretAccessKey!="string")throw new Error("Resolved credential object is not valid")}},ec=e=>{let t=nx(e).replace(/[\-:]/g,"");return{longDate:t,shortDate:t.slice(0,8)}},ox=e=>Object.keys(e).sort().join(";");var ix=e=>{let t=!1,r;e.credentials&&(t=!0,r=NS(e.credentials,TS,Mf)),r||(e.credentialDefaultProvider?r=Xr(e.credentialDefaultProvider(Object.assign({},e,{parentClientConfig:e}))):r=async()=>{throw new Error("`credentials` is missing")});let{signingEscapePath:n=!0,systemClockOffset:o=e.systemClockOffset||0,sha256:i}=e,s;return e.signer?s=Xr(e.signer):e.regionInfoProvider?s=()=>Xr(e.region)().then(async a=>[await e.regionInfoProvider(a,{useFipsEndpoint:await e.useFipsEndpoint(),useDualstackEndpoint:await e.useDualstackEndpoint()})||{},a]).then(([a,A])=>{let{signingRegion:c,signingService:l}=a;e.signingRegion=e.signingRegion||c||A,e.signingName=e.signingName||l||e.serviceId;let g={...e,credentials:r,region:e.signingRegion,service:e.signingName,sha256:i,uriEscapePath:n},d=e.signerConstructor||no;return new d(g)}):s=async a=>{a=Object.assign({},{name:"sigv4",signingName:e.signingName||e.defaultSigningName,signingRegion:await Xr(e.region)(),properties:{}},a);let A=a.signingRegion,c=a.signingName;e.signingRegion=e.signingRegion||A,e.signingName=e.signingName||c||e.serviceId;let l={...e,credentials:r,region:e.signingRegion,service:e.signingName,sha256:i,uriEscapePath:n},g=e.signerConstructor||no;return new g(l)},{...e,systemClockOffset:o,signingEscapePath:n,credentials:t?async()=>r().then(a=>fS(a,"CREDENTIALS_CODE","e")):r,signer:s}};var oo=(e,t)=>{let r=[];if(e&&r.push(e),t)for(let n of t)r.push(n);return r},_n=(e,t)=>`${e||"anonymous"}${t&&t.length>0?` (a.k.a. ${t.join(",")})`:""}`,ii=()=>{let e=[],t=[],r=!1,n=new Set,o=g=>g.sort((d,f)=>sx[f.step]-sx[d.step]||ax[f.priority||"normal"]-ax[d.priority||"normal"]),i=g=>{let d=!1,f=u=>{let m=oo(u.name,u.aliases);if(m.includes(g)){d=!0;for(let C of m)n.delete(C);return!1}return!0};return e=e.filter(f),t=t.filter(f),d},s=g=>{let d=!1,f=u=>{if(u.middleware===g){d=!0;for(let m of oo(u.name,u.aliases))n.delete(m);return!1}return!0};return e=e.filter(f),t=t.filter(f),d},a=g=>(e.forEach(d=>{g.add(d.middleware,{...d})}),t.forEach(d=>{g.addRelativeTo(d.middleware,{...d})}),g.identifyOnResolve?.(l.identifyOnResolve()),g),A=g=>{let d=[];return g.before.forEach(f=>{f.before.length===0&&f.after.length===0?d.push(f):d.push(...A(f))}),d.push(g),g.after.reverse().forEach(f=>{f.before.length===0&&f.after.length===0?d.push(f):d.push(...A(f))}),d},c=(g=!1)=>{let d=[],f=[],u={};return e.forEach(C=>{let p={...C,before:[],after:[]};for(let Q of oo(p.name,p.aliases))u[Q]=p;d.push(p)}),t.forEach(C=>{let p={...C,before:[],after:[]};for(let Q of oo(p.name,p.aliases))u[Q]=p;f.push(p)}),f.forEach(C=>{if(C.toMiddleware){let p=u[C.toMiddleware];if(p===void 0){if(g)return;throw new Error(`${C.toMiddleware} is not found when adding ${_n(C.name,C.aliases)} middleware ${C.relation} ${C.toMiddleware}`)}C.relation==="after"&&p.after.push(C),C.relation==="before"&&p.before.push(C)}}),o(d).map(A).reduce((C,p)=>(C.push(...p),C),[])},l={add:(g,d={})=>{let{name:f,override:u,aliases:m}=d,C={step:"initialize",priority:"normal",middleware:g,...d},p=oo(f,m);if(p.length>0){if(p.some(Q=>n.has(Q))){if(!u)throw new Error(`Duplicate middleware name '${_n(f,m)}'`);for(let Q of p){let v=e.findIndex(w=>w.name===Q||w.aliases?.some(B=>B===Q));if(v===-1)continue;let E=e[v];if(E.step!==C.step||C.priority!==E.priority)throw new Error(`"${_n(E.name,E.aliases)}" middleware with ${E.priority} priority in ${E.step} step cannot be overridden by "${_n(f,m)}" middleware with ${C.priority} priority in ${C.step} step.`);e.splice(v,1)}}for(let Q of p)n.add(Q)}e.push(C)},addRelativeTo:(g,d)=>{let{name:f,override:u,aliases:m}=d,C={middleware:g,...d},p=oo(f,m);if(p.length>0){if(p.some(Q=>n.has(Q))){if(!u)throw new Error(`Duplicate middleware name '${_n(f,m)}'`);for(let Q of p){let v=t.findIndex(w=>w.name===Q||w.aliases?.some(B=>B===Q));if(v===-1)continue;let E=t[v];if(E.toMiddleware!==C.toMiddleware||E.relation!==C.relation)throw new Error(`"${_n(E.name,E.aliases)}" middleware ${E.relation} "${E.toMiddleware}" middleware cannot be overridden by "${_n(f,m)}" middleware ${C.relation} "${C.toMiddleware}" middleware.`);t.splice(v,1)}}for(let Q of p)n.add(Q)}t.push(C)},clone:()=>a(ii()),use:g=>{g.applyToStack(l)},remove:g=>typeof g=="string"?i(g):s(g),removeByTag:g=>{let d=!1,f=u=>{let{tags:m,name:C,aliases:p}=u;if(m&&m.includes(g)){let Q=oo(C,p);for(let v of Q)n.delete(v);return d=!0,!1}return!0};return e=e.filter(f),t=t.filter(f),d},concat:g=>{let d=a(ii());return d.use(g),d.identifyOnResolve(r||d.identifyOnResolve()||(g.identifyOnResolve?.()??!1)),d},applyToStack:a,identify:()=>c(!0).map(g=>{let d=g.step??g.relation+" "+g.toMiddleware;return _n(g.name,g.aliases)+" - "+d}),identifyOnResolve(g){return typeof g=="boolean"&&(r=g),r},resolve:(g,d)=>{for(let f of c().map(u=>u.middleware).reverse())g=f(g,d);return g}};return l},sx={initialize:5,serialize:4,build:3,finalizeRequest:2,deserialize:1},ax={high:3,normal:2,low:1};var tc=class{constructor(t){this.config=t,this.middlewareStack=ii()}send(t,r,n){let o=typeof r!="function"?r:void 0,i=typeof r=="function"?r:n,s=o===void 0&&this.config.cacheMiddleware===!0,a;if(s){this.handlers||(this.handlers=new WeakMap);let A=this.handlers;A.has(t.constructor)?a=A.get(t.constructor):(a=t.resolveMiddleware(this.middlewareStack,this.config,o),A.set(t.constructor,a))}else delete this.handlers,a=t.resolveMiddleware(this.middlewareStack,this.config,o);if(i)a(t).then(A=>i(null,A.output),A=>i(A)).catch(()=>{});else return a(t).then(A=>A.output)}destroy(){this.config?.requestHandler?.destroy?.(),delete this.handlers}};var io=class{constructor(){this.middlewareStack=ii()}static classBuilder(){return new Yf}resolveMiddlewareWithContext(t,r,n,{middlewareFn:o,clientName:i,commandName:s,inputFilterSensitiveLog:a,outputFilterSensitiveLog:A,smithyContext:c,additionalContext:l,CommandCtor:g}){for(let C of o.bind(this)(g,t,r,n))this.middlewareStack.use(C);let d=t.concat(this.middlewareStack),{logger:f}=r,u={logger:f,clientName:i,commandName:s,inputFilterSensitiveLog:a,outputFilterSensitiveLog:A,[ri]:{commandInstance:this,...c},...l},{requestHandler:m}=r;return d.resolve(C=>m.handle(C.request,n||{}),u)}},Yf=class{constructor(){this._init=()=>{},this._ep={},this._middlewareFn=()=>[],this._commandName="",this._clientName="",this._additionalContext={},this._smithyContext={},this._inputFilterSensitiveLog=t=>t,this._outputFilterSensitiveLog=t=>t,this._serializer=null,this._deserializer=null}init(t){this._init=t}ep(t){return this._ep=t,this}m(t){return this._middlewareFn=t,this}s(t,r,n={}){return this._smithyContext={service:t,operation:r,...n},this}c(t={}){return this._additionalContext=t,this}n(t,r){return this._clientName=t,this._commandName=r,this}f(t=n=>n,r=n=>n){return this._inputFilterSensitiveLog=t,this._outputFilterSensitiveLog=r,this}ser(t){return this._serializer=t,this}de(t){return this._deserializer=t,this}build(){let t=this,r;return r=class extends io{static getEndpointParameterInstructions(){return t._ep}constructor(...[n]){super(),this.serialize=t._serializer,this.deserialize=t._deserializer,this.input=n??{},t._init(this)}resolveMiddleware(n,o,i){return this.resolveMiddlewareWithContext(n,o,i,{CommandCtor:r,middlewareFn:t._middlewareFn,clientName:t._clientName,commandName:t._commandName,inputFilterSensitiveLog:t._inputFilterSensitiveLog,outputFilterSensitiveLog:t._outputFilterSensitiveLog,smithyContext:t._smithyContext,additionalContext:t._additionalContext})}}}};var Mt="***SensitiveInformation***";var jf=e=>{switch(e){case"true":return!0;case"false":return!1;default:throw new Error(`Unable to parse boolean value "${e}"`)}};var B2=e=>{if(e!=null){if(typeof e=="string"){let t=parseFloat(e);if(!Number.isNaN(t))return String(t)!==String(e)&&hx.warn(mx(`Expected number but observed string: ${e}`)),t}if(typeof e=="number")return e;throw new TypeError(`Expected number, got ${typeof e}: ${e}`)}},E2=Math.ceil(34028234663852886e22),Ax=e=>{let t=B2(e);if(t!==void 0&&!Number.isNaN(t)&&t!==1/0&&t!==-1/0&&Math.abs(t)>E2)throw new TypeError(`Expected 32-bit float, got ${e}`);return t},Wf=e=>{if(e!=null){if(Number.isInteger(e)&&!Number.isNaN(e))return e;throw new TypeError(`Expected integer, got ${typeof e}: ${e}`)}};var cx=e=>gx(e,16),lx=e=>gx(e,8),gx=(e,t)=>{let r=Wf(e);if(r!==void 0&&y2(r,t)!==r)throw new TypeError(`Expected ${t}-bit integer, got ${e}`);return r},y2=(e,t)=>{switch(t){case 32:return Int32Array.of(e)[0];case 16:return Int16Array.of(e)[0];case 8:return Int8Array.of(e)[0]}},Xf=(e,t)=>{if(e==null)throw t?new TypeError(`Expected a non-null value for ${t}`):new TypeError("Expected a non-null value");return e},dx=e=>{if(e==null)return;if(typeof e=="object"&&!Array.isArray(e))return e;let t=Array.isArray(e)?"array":typeof e;throw new TypeError(`Expected object, got ${t}: ${e}`)},si=e=>{if(e!=null){if(typeof e=="string")return e;if(["boolean","number","bigint"].includes(typeof e))return hx.warn(mx(`Expected string, got ${typeof e}: ${e}`)),String(e);throw new TypeError(`Expected string, got ${typeof e}: ${e}`)}};var fx=e=>Ax(typeof e=="string"?rc(e):e),Q2=/(-?(?:0|[1-9]\d*)(?:\.\d+)?(?:[eE][+-]?\d+)?)|(-?Infinity)|(NaN)/g,rc=e=>{let t=e.match(Q2);if(t===null||t[0].length!==e.length)throw new TypeError("Expected real number, got implicit NaN");return parseFloat(e)};var ux=e=>Wf(typeof e=="string"?rc(e):e);var Ix=e=>cx(typeof e=="string"?rc(e):e),px=e=>lx(typeof e=="string"?rc(e):e),mx=e=>String(new TypeError(e).stack||e).split(`
`).slice(0,5).filter(t=>!t.includes("stackTraceWarning")).join(`
`),hx={warn:console.warn};var w2=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],Cx=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function Bx(e){let t=e.getUTCFullYear(),r=e.getUTCMonth(),n=e.getUTCDay(),o=e.getUTCDate(),i=e.getUTCHours(),s=e.getUTCMinutes(),a=e.getUTCSeconds(),A=o<10?`0${o}`:`${o}`,c=i<10?`0${i}`:`${i}`,l=s<10?`0${s}`:`${s}`,g=a<10?`0${a}`:`${a}`;return`${w2[n]}, ${A} ${Cx[r]} ${t} ${c}:${l}:${g} GMT`}var que=new RegExp(/^(\d{4})-(\d{2})-(\d{2})[tT](\d{2}):(\d{2}):(\d{2})(?:\.(\d+))?[zZ]$/);var S2=new RegExp(/^(\d{4})-(\d{2})-(\d{2})[tT](\d{2}):(\d{2}):(\d{2})(?:\.(\d+))?(([-+]\d{2}\:\d{2})|[zZ])$/),Ex=e=>{if(e==null)return;if(typeof e!="string")throw new TypeError("RFC-3339 date-times must be expressed as strings");let t=S2.exec(e);if(!t)throw new TypeError("Invalid RFC-3339 date-time value");let[r,n,o,i,s,a,A,c,l]=t,g=Ix(yx(n)),d=Qs(o,"month",1,12),f=Qs(i,"day",1,31),u=x2(g,d,f,{hours:s,minutes:a,seconds:A,fractionalMilliseconds:c});return l.toUpperCase()!="Z"&&u.setTime(u.getTime()-F2(l)),u},Hue=new RegExp(/^(?:Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d{2}) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d{1,2}):(\d{2}):(\d{2})(?:\.(\d+))? GMT$/),Lue=new RegExp(/^(?:Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday), (\d{2})-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d{2}) (\d{1,2}):(\d{2}):(\d{2})(?:\.(\d+))? GMT$/),Kue=new RegExp(/^(?:Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( [1-9]|\d{2}) (\d{1,2}):(\d{2}):(\d{2})(?:\.(\d+))? (\d{4})$/);var x2=(e,t,r,n)=>{let o=t-1;return k2(e,o,r),new Date(Date.UTC(e,o,r,Qs(n.hours,"hour",0,23),Qs(n.minutes,"minute",0,59),Qs(n.seconds,"seconds",0,60),_2(n.fractionalMilliseconds)))};var Jue=50*365*24*60*60*1e3;var b2=[31,28,31,30,31,30,31,31,30,31,30,31],k2=(e,t,r)=>{let n=b2[t];if(t===1&&D2(e)&&(n=29),r>n)throw new TypeError(`Invalid day for ${Cx[t]} in ${e}: ${r}`)},D2=e=>e%4===0&&(e%100!==0||e%400===0),Qs=(e,t,r,n)=>{let o=px(yx(e));if(o<r||o>n)throw new TypeError(`${t} must be between ${r} and ${n}, inclusive`);return o},_2=e=>e==null?0:fx("0."+e)*1e3,F2=e=>{let t=e[0],r=1;if(t=="+")r=1;else if(t=="-")r=-1;else throw new TypeError(`Offset direction, ${t}, must be "+" or "-"`);let n=Number(e.substring(1,3)),o=Number(e.substring(4,6));return r*(n*60+o)*60*1e3},yx=e=>{let t=0;for(;t<e.length-1&&e.charAt(t)==="0";)t++;return t===0?e:e.slice(t)};var nc=class e extends Error{constructor(t){super(t.message),Object.setPrototypeOf(this,e.prototype),this.name=t.name,this.$fault=t.$fault,this.$metadata=t.$metadata}},ct=(e,t={})=>{Object.entries(t).filter(([,n])=>n!==void 0).forEach(([n,o])=>{(e[n]==null||e[n]==="")&&(e[n]=o)});let r=e.message||e.Message||"UnknownError";return e.message=r,delete e.Message,e};var v2=({output:e,parsedBody:t,exceptionCtor:r,errorCode:n})=>{let o=R2(e),i=o.httpStatusCode?o.httpStatusCode+"":void 0,s=new r({name:t?.code||t?.Code||n||i||"UnknownError",$fault:"client",$metadata:o});throw ct(s,t)},Qx=e=>({output:t,parsedBody:r,errorCode:n})=>{v2({output:t,parsedBody:r,exceptionCtor:e,errorCode:n})},R2=e=>({httpStatusCode:e.statusCode,requestId:e.headers["x-amzn-requestid"]??e.headers["x-amzn-request-id"]??e.headers["x-amz-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]});var wx=e=>{switch(e){case"standard":return{retryMode:"standard",connectionTimeout:3100};case"in-region":return{retryMode:"standard",connectionTimeout:1100};case"cross-region":return{retryMode:"standard",connectionTimeout:3100};case"mobile":return{retryMode:"standard",connectionTimeout:3e4};default:return{}}};var Sx=e=>{let t=[];for(let r in ti){let n=ti[r];e[n]!==void 0&&t.push({algorithmId:()=>n,checksumConstructor:()=>e[n]})}return{_checksumAlgorithms:t,addChecksumAlgorithm(r){this._checksumAlgorithms.push(r)},checksumAlgorithms(){return this._checksumAlgorithms}}},xx=e=>{let t={};return e.checksumAlgorithms().forEach(r=>{t[r.algorithmId()]=r.checksumConstructor()}),t};var bx=e=>{let t=e.retryStrategy;return{setRetryStrategy(r){t=r},retryStrategy(){return t}}},kx=e=>{let t={};return t.retryStrategy=e.retryStrategy(),t};var Dx=e=>({...Sx(e),...bx(e)});var _x=e=>({...xx(e),...kx(e)});var Zf=e=>{let t="#text";for(let r in e)e.hasOwnProperty(r)&&e[r][t]!==void 0?e[r]=e[r][t]:typeof e[r]=="object"&&e[r]!==null&&(e[r]=Zf(e[r]));return e};var en=e=>e!=null;var ai=function(t){return Object.assign(new String(t),{deserializeJSON(){return JSON.parse(String(t))},toString(){return String(t)},toJSON(){return String(t)}})};ai.from=e=>e&&typeof e=="object"&&(e instanceof ai||"deserializeJSON"in e)?e:typeof e=="string"||Object.getPrototypeOf(e)===String.prototype?ai(String(e)):ai(JSON.stringify(e));ai.fromObject=ai.from;var Fn=class{trace(){}debug(){}info(){}warn(){}error(){}};function ve(e,t,r){let n,o,i;if(typeof t>"u"&&typeof r>"u")n={},i=e;else{if(n=e,typeof t=="function")return o=t,i=r,T2(n,o,i);i=t}for(let s of Object.keys(i)){if(!Array.isArray(i[s])){n[s]=i[s];continue}N2(n,null,i,s)}return n}var T2=(e,t,r)=>ve(e,Object.entries(r).reduce((n,[o,i])=>(Array.isArray(i)?n[o]=i:typeof i=="function"?n[o]=[t,i()]:n[o]=[t,i],n),{})),N2=(e,t,r,n)=>{if(t!==null){let s=r[n];typeof s=="function"&&(s=[,s]);let[a=M2,A=U2,c=n]=s;(typeof a=="function"&&a(t[c])||typeof a!="function"&&a)&&(e[n]=A(t[c]));return}let[o,i]=r[n];if(typeof i=="function"){let s,a=o===void 0&&(s=i())!=null,A=typeof o=="function"&&!!o(void 0)||typeof o!="function"&&!!o;a?e[n]=s:A&&(e[n]=i())}else{let s=o===void 0&&i!=null,a=typeof o=="function"&&!!o(i)||typeof o!="function"&&!!o;(s||a)&&(e[n]=i)}},M2=e=>e!=null,U2=e=>e;var Fx=e=>e.toISOString().replace(".000Z","Z");var vx=(e,t)=>Bs(e,t).then(r=>t.utf8Encoder(r));var gb=V(lb());var au=(e,t)=>vx(e,t).then(r=>{if(r.length){let n=new gb.XMLParser({attributeNamePrefix:"",htmlEntities:!0,ignoreAttributes:!1,ignoreDeclaration:!0,parseTagValue:!1,trimValues:!1,tagValueProcessor:(A,c)=>c.trim()===""&&c.includes(`
`)?"":void 0});n.addEntity("#xD","\r"),n.addEntity("#10",`
`);let o;try{o=n.parse(r,!0)}catch(A){throw A&&typeof A=="object"&&Object.defineProperty(A,"$responseBodyText",{value:r}),A}let i="#text",s=Object.keys(o)[0],a=o[s];return a[i]&&(a[s]=a[i],delete a[i]),Zf(a)}return{}}),db=async(e,t)=>{let r=await au(e,t);return r.Error&&(r.Error.message=r.Error.message??r.Error.Message),r},fb=(e,t)=>{if(t?.Error?.Code!==void 0)return t.Error.Code;if(t?.Code!==void 0)return t.Code;if(e.statusCode==404)return"NotFound"};var xs=[Be.CRC32,Be.CRC32C,Be.SHA1,Be.SHA256],ub=[Be.SHA256,Be.SHA1,Be.CRC32,Be.CRC32C];var Ib=(e,{requestChecksumRequired:t,requestAlgorithmMember:r},n)=>{let o=n?dS:gS;if(!r||!e[r])return t?o:void 0;let i=e[r];if(!xs.includes(i))throw new Error(`The checksum algorithm "${i}" is not supported by the client. Select one of ${xs}.`);return i};var Ai=e=>e===Be.MD5?"content-md5":`x-amz-checksum-${e.toLowerCase()}`;var pb=(e,t)=>{let r=e.toLowerCase();for(let n of Object.keys(t))if(r===n.toLowerCase())return!0;return!1};var ci=e=>e!==void 0&&typeof e!="string"&&!ArrayBuffer.isView(e)&&!XA(e);var Au=e=>new TextEncoder().encode(e);var VJ=typeof Buffer<"u"&&Buffer.from?function(e){return Buffer.from(e,"utf8")}:Au;function Ct(e){return e instanceof Uint8Array?e:typeof e=="string"?VJ(e):ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(e)}function _r(e){return typeof e=="string"?e.length===0:e.byteLength===0}function bs(e){return new Uint8Array([(e&4278190080)>>24,(e&16711680)>>16,(e&65280)>>8,e&255])}function ks(e){if(!Uint32Array.from){for(var t=new Uint32Array(e.length),r=0;r<e.length;)t[r]=e[r],r+=1;return t}return Uint32Array.from(e)}var lu=function(){function e(){this.crc32c=new cu}return e.prototype.update=function(t){_r(t)||this.crc32c.update(Ct(t))},e.prototype.digest=function(){return wn(this,void 0,void 0,function(){return Sr(this,function(t){return[2,bs(this.crc32c.digest())]})})},e.prototype.reset=function(){this.crc32c=new cu},e}();var cu=function(){function e(){this.checksum=4294967295}return e.prototype.update=function(t){var r,n;try{for(var o=Rt(t),i=o.next();!i.done;i=o.next()){var s=i.value;this.checksum=this.checksum>>>8^YJ[(this.checksum^s)&255]}}catch(a){r={error:a}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return this},e.prototype.digest=function(){return(this.checksum^4294967295)>>>0},e}();var zJ=[0,4067132163,3778769143,324072436,3348797215,904991772,648144872,3570033899,2329499855,2024987596,1809983544,2575936315,1296289744,3207089363,2893594407,1578318884,274646895,3795141740,4049975192,51262619,3619967088,632279923,922689671,3298075524,2592579488,1760304291,2075979607,2312596564,1562183871,2943781820,3156637768,1313733451,549293790,3537243613,3246849577,871202090,3878099393,357341890,102525238,4101499445,2858735121,1477399826,1264559846,3107202533,1845379342,2677391885,2361733625,2125378298,820201905,3263744690,3520608582,598981189,4151959214,85089709,373468761,3827903834,3124367742,1213305469,1526817161,2842354314,2107672161,2412447074,2627466902,1861252501,1098587580,3004210879,2688576843,1378610760,2262928035,1955203488,1742404180,2511436119,3416409459,969524848,714683780,3639785095,205050476,4266873199,3976438427,526918040,1361435347,2739821008,2954799652,1114974503,2529119692,1691668175,2005155131,2247081528,3690758684,697762079,986182379,3366744552,476452099,3993867776,4250756596,255256311,1640403810,2477592673,2164122517,1922457750,2791048317,1412925310,1197962378,3037525897,3944729517,427051182,170179418,4165941337,746937522,3740196785,3451792453,1070968646,1905808397,2213795598,2426610938,1657317369,3053634322,1147748369,1463399397,2773627110,4215344322,153784257,444234805,3893493558,1021025245,3467647198,3722505002,797665321,2197175160,1889384571,1674398607,2443626636,1164749927,3070701412,2757221520,1446797203,137323447,4198817972,3910406976,461344835,3484808360,1037989803,781091935,3705997148,2460548119,1623424788,1939049696,2180517859,1429367560,2807687179,3020495871,1180866812,410100952,3927582683,4182430767,186734380,3756733383,763408580,1053836080,3434856499,2722870694,1344288421,1131464017,2971354706,1708204729,2545590714,2229949006,1988219213,680717673,3673779818,3383336350,1002577565,4010310262,493091189,238226049,4233660802,2987750089,1082061258,1395524158,2705686845,1972364758,2279892693,2494862625,1725896226,952904198,3399985413,3656866545,731699698,4283874585,222117402,510512622,3959836397,3280807620,837199303,582374963,3504198960,68661723,4135334616,3844915500,390545967,1230274059,3141532936,2825850620,1510247935,2395924756,2091215383,1878366691,2644384480,3553878443,565732008,854102364,3229815391,340358836,3861050807,4117890627,119113024,1493875044,2875275879,3090270611,1247431312,2660249211,1828433272,2141937292,2378227087,3811616794,291187481,34330861,4032846830,615137029,3603020806,3314634738,939183345,1776939221,2609017814,2295496738,2058945313,2926798794,1545135305,1330124605,3173225534,4084100981,17165430,307568514,3762199681,888469610,3332340585,3587147933,665062302,2042050490,2346497209,2559330125,1793573966,3190661285,1279665062,1595330642,2910671697],YJ=ks(zJ);var gu=function(){function e(){this.crc32=new ao}return e.prototype.update=function(t){_r(t)||this.crc32.update(Ct(t))},e.prototype.digest=function(){return wn(this,void 0,void 0,function(){return Sr(this,function(t){return[2,bs(this.crc32.digest())]})})},e.prototype.reset=function(){this.crc32=new ao},e}();var ao=function(){function e(){this.checksum=4294967295}return e.prototype.update=function(t){var r,n;try{for(var o=Rt(t),i=o.next();!i.done;i=o.next()){var s=i.value;this.checksum=this.checksum>>>8^jJ[(this.checksum^s)&255]}}catch(a){r={error:a}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return this},e.prototype.digest=function(){return(this.checksum^4294967295)>>>0},e}();var WJ=[0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117],jJ=ks(WJ);var mb=()=>gu;var ic=(e,t)=>({[Be.MD5]:t.md5,[Be.CRC32]:mb(),[Be.CRC32C]:lu,[Be.SHA1]:t.sha1,[Be.SHA256]:t.sha256})[e];var sc=(e,t)=>{let r=new e;return r.update(Dr(t||"")),r.digest()};var hb={name:"flexibleChecksumsMiddleware",step:"build",tags:["BODY_CHECKSUM"],override:!0},Cb=(e,t)=>(r,n)=>async o=>{if(!ie.isInstance(o.request))return r(o);let{request:i,input:s}=o,{body:a,headers:A}=i,{base64Encoder:c,streamHasher:l}=e,{requestChecksumRequired:g,requestAlgorithmMember:d}=t,f=Ib(s,{requestChecksumRequired:g,requestAlgorithmMember:d},!!n.isS3ExpressBucket),u=a,m=A;if(f){switch(f){case Be.CRC32:Ye(n,"FLEXIBLE_CHECKSUMS_REQ_CRC32","U");break;case Be.CRC32C:Ye(n,"FLEXIBLE_CHECKSUMS_REQ_CRC32C","V");break;case Be.SHA1:Ye(n,"FLEXIBLE_CHECKSUMS_REQ_SHA1","X");break;case Be.SHA256:Ye(n,"FLEXIBLE_CHECKSUMS_REQ_SHA256","Y");break}let p=Ai(f),Q=ic(f,e);if(ci(a)){let{getAwsChunkedEncodingStream:v,bodyLengthChecker:E}=e;u=v(a,{base64Encoder:c,bodyLengthChecker:E,checksumLocationName:p,checksumAlgorithmFn:Q,streamHasher:l}),m={...A,"content-encoding":A["content-encoding"]?`${A["content-encoding"]},aws-chunked`:"aws-chunked","transfer-encoding":"chunked","x-amz-decoded-content-length":A["content-length"],"x-amz-content-sha256":"STREAMING-UNSIGNED-PAYLOAD-TRAILER","x-amz-trailer":p},delete m["content-length"]}else if(!pb(p,A)){let v=await sc(Q,a);m={...A,[p]:c(v)}}}return await r({...o,request:{...i,headers:m,body:u}})};var ac=(e=[])=>{let t=[];for(let r of ub)!e.includes(r)||!xs.includes(r)||t.push(r);return t};var Bb=e=>{let t=e.lastIndexOf("-");if(t!==-1){let r=e.slice(t+1);if(!r.startsWith("0")){let n=parseInt(r,10);if(!isNaN(n)&&n>=1&&n<=1e4)return!0}}return!1};function du(e){return new Blob([e]).stream()}var Eb=async(e,{checksumAlgorithmFn:t,base64Encoder:r})=>r(await sc(t,e));var yb=async(e,{config:t,responseAlgorithms:r})=>{let n=ac(r),{body:o,headers:i}=e;for(let s of n){let a=Ai(s),A=i[a];if(A){let c=ic(s,t),{base64Encoder:l}=t;if(ci(o)){e.body=vS({expectedChecksum:A,checksumSourceLocation:a,checksum:new c,source:o,base64Encoder:l});return}let g=await Eb(o,{checksumAlgorithmFn:c,base64Encoder:l});if(g===A)break;throw new Error(`Checksum mismatch: expected "${g}" but received "${A}" in response header "${a}".`)}}};var Qb={name:"flexibleChecksumsResponseMiddleware",toMiddleware:"deserializerMiddleware",relation:"after",tags:["BODY_CHECKSUM"],override:!0},wb=(e,t)=>(r,n)=>async o=>{if(!ie.isInstance(o.request))return r(o);let i=o.input,s=await r(o),a=s.response,A,{requestValidationModeMember:c,responseAlgorithms:l}=t;if(c&&i[c]==="ENABLED"){let{clientName:g,commandName:d}=n;if(g==="S3Client"&&d==="GetObjectCommand"&&ac(l).every(m=>{let C=Ai(m),p=a.headers[C];return!p||Bb(p)}))return s;let u=ci(a.body);u&&(A=await e.streamCollector(a.body),a.body=du(A)),await yb(s.response,{config:e,responseAlgorithms:l}),u&&A&&(a.body=du(A))}return s};var Sb=(e,t)=>({applyToStack:r=>{r.add(Cb(e,t),hb),r.addRelativeTo(wb(e,t),Qb)}});var xb=e=>({...e,requestChecksumCalculation:ot(e.requestChecksumCalculation??Sf),responseChecksumValidation:ot(e.responseChecksumValidation??xf)});var XJ=e=>t=>async r=>{if(!ie.isInstance(r.request))return t(r);let{request:n}=r,{handlerProtocol:o=""}=e.requestHandler.metadata||{};if(o.indexOf("h2")>=0&&!n.headers[":authority"])delete n.headers.host,n.headers[":authority"]=n.hostname+(n.port?":"+n.port:"");else if(!n.headers.host){let i=n.hostname;n.port!=null&&(i+=`:${n.port}`),n.headers.host=i}return t(r)},ZJ={name:"hostHeaderMiddleware",step:"build",priority:"low",tags:["HOST"],override:!0},bb=e=>({applyToStack:t=>{t.add(XJ(e),ZJ)}});var $J=()=>(e,t)=>async r=>{try{let n=await e(r),{clientName:o,commandName:i,logger:s,dynamoDbDocumentClientOptions:a={}}=t,{overrideInputFilterSensitiveLog:A,overrideOutputFilterSensitiveLog:c}=a,l=A??t.inputFilterSensitiveLog,g=c??t.outputFilterSensitiveLog,{$metadata:d,...f}=n.output;return s?.info?.({clientName:o,commandName:i,input:l(r.input),output:g(f),metadata:d}),n}catch(n){let{clientName:o,commandName:i,logger:s,dynamoDbDocumentClientOptions:a={}}=t,{overrideInputFilterSensitiveLog:A}=a,c=A??t.inputFilterSensitiveLog;throw s?.error?.({clientName:o,commandName:i,input:c(r.input),error:n,metadata:n.$metadata}),n}},e8={name:"loggerMiddleware",tags:["LOGGER"],step:"initialize",override:!0},kb=e=>({applyToStack:t=>{t.add($J(),e8)}});var Db="X-Amzn-Trace-Id",t8="AWS_LAMBDA_FUNCTION_NAME",r8="_X_AMZN_TRACE_ID",n8=e=>t=>async r=>{let{request:n}=r;if(!ie.isInstance(n)||e.runtime!=="node"||n.headers.hasOwnProperty(Db))return t(r);let o=process.env[t8],i=process.env[r8],s=a=>typeof a=="string"&&a.length>0;return s(o)&&s(i)&&(n.headers[Db]=i),t({...r,request:n})},o8={step:"build",tags:["RECURSION_DETECTION"],name:"recursionDetectionMiddleware",override:!0,priority:"low"},_b=e=>({applyToStack:t=>{t.add(n8(e),o8)}});var i8="content-length";function s8(){return(e,t)=>async r=>{let{request:n}=r;return ie.isInstance(n)&&(i8 in n.headers||typeof t?.logger?.warn=="function"&&!(t.logger instanceof Fn)&&t.logger.warn("Are you using a Stream of unknown length as the Body of a PutObject request? Consider using Upload instead from @aws-sdk/lib-storage.")),e({...r})}}var a8={step:"finalizeRequest",tags:["CHECK_CONTENT_LENGTH_HEADER"],name:"getCheckContentLengthHeaderPlugin",override:!0},Fb=e=>({applyToStack:t=>{t.add(s8(),a8)}});var vb=e=>(t,r)=>async n=>{let o=await e.region(),i=e.region,s=()=>{};r.__s3RegionRedirect&&(Object.defineProperty(e,"region",{writable:!1,value:async()=>r.__s3RegionRedirect}),s=()=>Object.defineProperty(e,"region",{writable:!0,value:i}));try{let a=await t(n);if(r.__s3RegionRedirect){s();let A=await e.region();if(o!==A)throw new Error("Region was not restored following S3 region redirect.")}return a}catch(a){throw s(),a}},Rb={tags:["REGION_REDIRECT","S3"],name:"regionRedirectEndpointMiddleware",override:!0,relation:"before",toMiddleware:"endpointV2Middleware"};function A8(e){return(t,r)=>async n=>{try{return await t(n)}catch(o){if(e.followRegionRedirects&&(o?.$metadata?.httpStatusCode===301||o?.$metadata?.httpStatusCode===400&&o?.name==="IllegalLocationConstraintException")){try{let i=o.$response.headers["x-amz-bucket-region"];r.logger?.debug(`Redirecting from ${await e.region()} to ${i}`),r.__s3RegionRedirect=i}catch(i){throw new Error("Region redirect failed: "+i)}return t(n)}throw o}}}var c8={step:"initialize",tags:["REGION_REDIRECT","S3"],name:"regionRedirectMiddleware",override:!0},Tb=e=>({applyToStack:t=>{t.add(A8(e),c8),t.addRelativeTo(vb(e),Rb)}});var li=class e{constructor(t={}){this.data=t,this.lastPurgeTime=Date.now()}get(t){let r=this.data[t];if(r)return r}set(t,r){return this.data[t]=r,r}delete(t){delete this.data[t]}async purgeExpired(){let t=Date.now();if(!(this.lastPurgeTime+e.EXPIRED_CREDENTIAL_PURGE_INTERVAL_MS>t))for(let r in this.data){let n=this.data[r];if(!n.isRefreshing){let o=await n.identity;o.expiration&&o.expiration.getTime()<t&&delete this.data[r]}}}};li.EXPIRED_CREDENTIAL_PURGE_INTERVAL_MS=3e4;var Ao=class{constructor(t,r=!1,n=Date.now()){this._identity=t,this.isRefreshing=r,this.accessed=n}get identity(){return this.accessed=Date.now(),this._identity}};var gi=class e{constructor(t,r=new li){this.createSessionFn=t,this.cache=r}async getS3ExpressIdentity(t,r){let n=r.Bucket,{cache:o}=this,i=o.get(n);return i?i.identity.then(s=>(s.expiration?.getTime()??0)<Date.now()?o.set(n,new Ao(this.getIdentity(n))).identity:((s.expiration?.getTime()??0)<Date.now()+e.REFRESH_WINDOW_MS&&!i.isRefreshing&&(i.isRefreshing=!0,this.getIdentity(n).then(c=>{o.set(n,new Ao(Promise.resolve(c)))})),s)):o.set(n,new Ao(this.getIdentity(n))).identity}async getIdentity(t){await this.cache.purgeExpired().catch(o=>{});let r=await this.createSessionFn(t);if(!r.Credentials?.AccessKeyId||!r.Credentials?.SecretAccessKey)throw new Error("s3#createSession response credential missing AccessKeyId or SecretAccessKey.");return{accessKeyId:r.Credentials.AccessKeyId,secretAccessKey:r.Credentials.SecretAccessKey,sessionToken:r.Credentials.SessionToken,expiration:r.Credentials.Expiration?new Date(r.Credentials.Expiration):void 0}}};gi.REFRESH_WINDOW_MS=6e4;var Ds;(function(e){e.ENV="env",e.CONFIG="shared config entry"})(Ds||(Ds={}));var Mb="Directory",Ub="S3Express",Pb="sigv4-s3express",Ac="X-Amz-S3session-Token",_s=Ac.toLowerCase();var Fs=class extends no{async signWithCredentials(t,r,n){let o=Ob(r);t.headers[_s]=r.sessionToken;let i=this;return Gb(i,o),i.signRequest(t,n??{})}async presignWithCredentials(t,r,n){let o=Ob(r);return delete t.headers[_s],t.headers[Ac]=r.sessionToken,t.query=t.query??{},t.query[Ac]=r.sessionToken,Gb(this,o),this.presign(t,n)}};function Ob(e){return{accessKeyId:e.accessKeyId,secretAccessKey:e.secretAccessKey,expiration:e.expiration}}function Gb(e,t){let r=setTimeout(()=>{throw new Error("SignatureV4S3Express credential override was created but not called.")},10),n=e.credentialProvider,o=()=>(clearTimeout(r),e.credentialProvider=n,Promise.resolve(t));e.credentialProvider=o}var qb=e=>(t,r)=>async n=>{if(r.endpointV2){let o=r.endpointV2,i=o.properties?.authSchemes?.[0]?.name===Pb;if((o.properties?.backend===Ub||o.properties?.bucketType===Mb)&&(Ye(r,"S3_EXPRESS_BUCKET","J"),r.isS3ExpressBucket=!0),i){let a=n.input.Bucket;if(a){let A=await e.s3ExpressIdentityProvider.getS3ExpressIdentity(await e.credentials(),{Bucket:a});r.s3ExpressIdentity=A,ie.isInstance(n.request)&&A.sessionToken&&(n.request.headers[_s]=A.sessionToken)}}}return t(n)},Hb={name:"s3ExpressMiddleware",step:"build",tags:["S3","S3_EXPRESS"],override:!0},fu=e=>({applyToStack:t=>{t.add(qb(e),Hb)}});var Lb=async(e,t,r,n)=>{let o=await n.signWithCredentials(r,e,{});if(o.headers["X-Amz-Security-Token"]||o.headers["x-amz-security-token"])throw new Error("X-Amz-Security-Token must not be set for s3-express requests.");return o};var g8=e=>t=>{throw t},d8=(e,t)=>{};var Kb=e=>(t,r)=>async n=>{if(!ie.isInstance(n.request))return t(n);let i=ar(r).selectedHttpAuthScheme;if(!i)throw new Error("No HttpAuthScheme was selected: unable to sign request");let{httpAuthOption:{signingProperties:s={}},identity:a,signer:A}=i,c;r.s3ExpressIdentity?c=await Lb(r.s3ExpressIdentity,s,n.request,await e.signer()):c=await A.sign(n.request,a,s);let l=await t({...n,request:c}).catch((A.errorHandler||g8)(s));return(A.successHandler||d8)(l.response,s),l},uu=e=>({applyToStack:t=>{t.addRelativeTo(Kb(e),_f)}});var Jb=(e,{session:t})=>{let[r,n]=t;return{...e,forcePathStyle:e.forcePathStyle??!1,useAccelerateEndpoint:e.useAccelerateEndpoint??!1,disableMultiregionAccessPoints:e.disableMultiregionAccessPoints??!1,followRegionRedirects:e.followRegionRedirects??!1,s3ExpressIdentityProvider:e.s3ExpressIdentityProvider??new gi(async o=>r().send(new n({Bucket:o,SessionMode:"ReadWrite"}))),bucketEndpoint:e.bucketEndpoint??!1}};var f8={CopyObjectCommand:!0,UploadPartCopyCommand:!0,CompleteMultipartUploadCommand:!0},u8=3e3,I8=e=>(t,r)=>async n=>{let o=await t(n),{response:i}=o;if(!Tt.isInstance(i))return o;let{statusCode:s,body:a}=i;if(s<200||s>=300||!(typeof a?.stream=="function"||typeof a?.pipe=="function"||typeof a?.tee=="function"))return o;let c=a,l=a;a&&typeof a=="object"&&!(a instanceof Uint8Array)&&([c,l]=await _S(a)),i.body=l;let g=await p8(c,{streamCollector:async f=>FS(f,u8)});typeof c?.destroy=="function"&&c.destroy();let d=e.utf8Encoder(g.subarray(g.length-16));if(g.length===0&&f8[r.commandName]){let f=new Error("S3 aborted request");throw f.name="InternalError",f}return d&&d.endsWith("</Error>")&&(i.statusCode=400),o},p8=(e=new Uint8Array,t)=>e instanceof Uint8Array?Promise.resolve(e):t.streamCollector(e)||Promise.resolve(new Uint8Array),m8={relation:"after",toMiddleware:"deserializerMiddleware",tags:["THROW_200_EXCEPTIONS","S3"],name:"throw200ExceptionsMiddleware",override:!0},cc=e=>({applyToStack:t=>{t.addRelativeTo(I8(e),m8)}});var Vb=e=>typeof e=="string"&&e.indexOf("arn:")===0&&e.split(":").length>=6;function zb(e){return(t,r)=>async n=>{if(e.bucketEndpoint){let o=r.endpointV2;if(o){let i=n.input.Bucket;if(typeof i=="string")try{let s=new URL(i);r.endpointV2={...o,url:s}}catch(s){let a=`@aws-sdk/middleware-sdk-s3: bucketEndpoint=true was set but Bucket=${i} could not be parsed as URL.`;throw r.logger?.constructor?.name==="NoOpLogger"||r.logger?.warn?.(a),s}}}return t(n)}}var Yb={name:"bucketEndpointMiddleware",override:!0,relation:"after",toMiddleware:"endpointV2Middleware"};function h8({bucketEndpoint:e}){return t=>async r=>{let{input:{Bucket:n}}=r;if(!e&&typeof n=="string"&&!Vb(n)&&n.indexOf("/")>=0){let o=new Error(`Bucket name shouldn't contain '/', received '${n}'`);throw o.name="InvalidBucketName",o}return t({...r})}}var C8={step:"initialize",tags:["VALIDATE_BUCKET_NAME"],name:"validateBucketNameMiddleware",override:!0},Wb=e=>({applyToStack:t=>{t.add(h8(e),C8),t.addRelativeTo(zb(e),Yb)}});var B8=void 0;function E8(e){return e===void 0?!0:typeof e=="string"&&e.length<=50}function jb(e){let t=Xr(e.userAgentAppId??B8);return{...e,customUserAgent:typeof e.customUserAgent=="string"?[[e.customUserAgent]]:e.customUserAgent,userAgentAppId:async()=>{let r=await t();if(!E8(r)){let n=e.logger?.constructor?.name==="NoOpLogger"||!e.logger?console:e.logger;typeof r!="string"?n?.warn("userAgentAppId must be a string or undefined."):r.length>50&&n?.warn("The provided userAgentAppId exceeds the maximum length of 50 characters.")}return r}}}var lc=class{constructor({size:t,params:r}){this.data=new Map,this.parameters=[],this.capacity=t??50,r&&(this.parameters=r)}get(t,r){let n=this.hash(t);if(n===!1)return r();if(!this.data.has(n)){if(this.data.size>this.capacity+10){let o=this.data.keys(),i=0;for(;;){let{value:s,done:a}=o.next();if(this.data.delete(s),a||++i>10)break}}this.data.set(n,r())}return this.data.get(n)}size(){return this.data.size}hash(t){let r="",{parameters:n}=this;if(n.length===0)return!1;for(let o of n){let i=String(t[o]??"");if(i.includes("|;"))return!1;r+=i+"|;"}return r}};var y8=new RegExp("^(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}$"),vs=e=>y8.test(e)||e.startsWith("[")&&e.endsWith("]");var Q8=new RegExp("^(?!.*-$)(?!-)[a-zA-Z0-9-]{1,63}$"),Rs=(e,t=!1)=>{if(!t)return Q8.test(e);let r=e.split(".");for(let n of r)if(!Rs(n))return!1;return!0};var co={};var rn="endpoints";function Lt(e){return typeof e!="object"||e==null?e:"ref"in e?`$${Lt(e.ref)}`:"fn"in e?`${e.fn}(${(e.argv||[]).map(Lt).join(", ")})`:JSON.stringify(e,null,2)}var Ee=class extends Error{constructor(t){super(t),this.name="EndpointError"}};var Xb=(e,t)=>e===t;var Zb=e=>{let t=e.split("."),r=[];for(let n of t){let o=n.indexOf("[");if(o!==-1){if(n.indexOf("]")!==n.length-1)throw new Ee(`Path: '${e}' does not end with ']'`);let i=n.slice(o+1,-1);if(Number.isNaN(parseInt(i)))throw new Ee(`Invalid array index: '${i}' in path: '${e}'`);o!==0&&r.push(n.slice(0,o)),r.push(i)}else r.push(n)}return r};var gc=(e,t)=>Zb(t).reduce((r,n)=>{if(typeof r!="object")throw new Ee(`Index '${n}' in '${t}' not found in '${JSON.stringify(e)}'`);return Array.isArray(r)?r[parseInt(n)]:r[n]},e);var $b=e=>e!=null;var e0=e=>!e;var Iu={[ei.HTTP]:80,[ei.HTTPS]:443},t0=e=>{let t=(()=>{try{if(e instanceof URL)return e;if(typeof e=="object"&&"hostname"in e){let{hostname:d,port:f,protocol:u="",path:m="",query:C={}}=e,p=new URL(`${u}//${d}${f?`:${f}`:""}${m}`);return p.search=Object.entries(C).map(([Q,v])=>`${Q}=${v}`).join("&"),p}return new URL(e)}catch{return null}})();if(!t)return null;let r=t.href,{host:n,hostname:o,pathname:i,protocol:s,search:a}=t;if(a)return null;let A=s.slice(0,-1);if(!Object.values(ei).includes(A))return null;let c=vs(o),l=r.includes(`${n}:${Iu[A]}`)||typeof e=="string"&&e.includes(`${n}:${Iu[A]}`),g=`${n}${l?`:${Iu[A]}`:""}`;return{scheme:A,authority:g,path:i,normalizedPath:i.endsWith("/")?i:`${i}/`,isIp:c}};var r0=(e,t)=>e===t;var n0=(e,t,r,n)=>t>=r||e.length<r?null:n?e.substring(e.length-r,e.length-t):e.substring(t,r);var o0=e=>encodeURIComponent(e).replace(/[!*'()]/g,t=>`%${t.charCodeAt(0).toString(16).toUpperCase()}`);var i0={booleanEquals:Xb,getAttr:gc,isSet:$b,isValidHostLabel:Rs,not:e0,parseURL:t0,stringEquals:r0,substring:n0,uriEncode:o0};var dc=(e,t)=>{let r=[],n={...t.endpointParams,...t.referenceRecord},o=0;for(;o<e.length;){let i=e.indexOf("{",o);if(i===-1){r.push(e.slice(o));break}r.push(e.slice(o,i));let s=e.indexOf("}",i);if(s===-1){r.push(e.slice(i));break}e[i+1]==="{"&&e[s+1]==="}"&&(r.push(e.slice(i+1,s)),o=s+2);let a=e.substring(i+1,s);if(a.includes("#")){let[A,c]=a.split("#");r.push(gc(n[A],c))}else r.push(n[a]);o=s+1}return r.join("")};var s0=({ref:e},t)=>({...t.endpointParams,...t.referenceRecord})[e];var Rn=(e,t,r)=>{if(typeof e=="string")return dc(e,r);if(e.fn)return fc(e,r);if(e.ref)return s0(e,r);throw new Ee(`'${t}': ${String(e)} is not a string, function or reference.`)};var fc=({fn:e,argv:t},r)=>{let n=t.map(i=>["boolean","number"].includes(typeof i)?i:Rn(i,"arg",r)),o=e.split(".");return o[0]in co&&o[1]!=null?co[o[0]][o[1]](...n):i0[e](...n)};var a0=({assign:e,...t},r)=>{if(e&&e in r.referenceRecord)throw new Ee(`'${e}' is already defined in Reference Record.`);let n=fc(t,r);return r.logger?.debug?.(`${rn} evaluateCondition: ${Lt(t)} = ${Lt(n)}`),{result:n===""?!0:!!n,...e!=null&&{toAssign:{name:e,value:n}}}};var di=(e=[],t)=>{let r={};for(let n of e){let{result:o,toAssign:i}=a0(n,{...t,referenceRecord:{...t.referenceRecord,...r}});if(!o)return{result:o};i&&(r[i.name]=i.value,t.logger?.debug?.(`${rn} assign: ${i.name} := ${Lt(i.value)}`))}return{result:!0,referenceRecord:r}};var A0=(e,t)=>Object.entries(e).reduce((r,[n,o])=>({...r,[n]:o.map(i=>{let s=Rn(i,"Header value entry",t);if(typeof s!="string")throw new Ee(`Header '${n}' value '${s}' is not a string`);return s})}),{});var pu=(e,t)=>{if(Array.isArray(e))return e.map(r=>pu(r,t));switch(typeof e){case"string":return dc(e,t);case"object":if(e===null)throw new Ee(`Unexpected endpoint property: ${e}`);return uc(e,t);case"boolean":return e;default:throw new Ee(`Unexpected endpoint property type: ${typeof e}`)}};var uc=(e,t)=>Object.entries(e).reduce((r,[n,o])=>({...r,[n]:pu(o,t)}),{});var c0=(e,t)=>{let r=Rn(e,"Endpoint URL",t);if(typeof r=="string")try{return new URL(r)}catch(n){throw n}throw new Ee(`Endpoint URL must be a string, got ${typeof r}`)};var l0=(e,t)=>{let{conditions:r,endpoint:n}=e,{result:o,referenceRecord:i}=di(r,t);if(!o)return;let s={...t,referenceRecord:{...t.referenceRecord,...i}},{url:a,properties:A,headers:c}=n;return t.logger?.debug?.(`${rn} Resolving endpoint from template: ${Lt(n)}`),{...c!=null&&{headers:A0(c,s)},...A!=null&&{properties:uc(A,s)},url:c0(a,s)}};var g0=(e,t)=>{let{conditions:r,error:n}=e,{result:o,referenceRecord:i}=di(r,t);if(o)throw new Ee(Rn(n,"Error",{...t,referenceRecord:{...t.referenceRecord,...i}}))};var d0=(e,t)=>{let{conditions:r,rules:n}=e,{result:o,referenceRecord:i}=di(r,t);if(o)return Ic(n,{...t,referenceRecord:{...t.referenceRecord,...i}})};var Ic=(e,t)=>{for(let r of e)if(r.type==="endpoint"){let n=l0(r,t);if(n)return n}else if(r.type==="error")g0(r,t);else if(r.type==="tree"){let n=d0(r,t);if(n)return n}else throw new Ee(`Unknown endpoint rule: ${r}`);throw new Ee("Rules evaluation failed")};var mu=(e,t)=>{let{endpointParams:r,logger:n}=t,{parameters:o,rules:i}=e;t.logger?.debug?.(`${rn} Initial EndpointParams: ${Lt(r)}`);let s=Object.entries(o).filter(([,c])=>c.default!=null).map(([c,l])=>[c,l.default]);if(s.length>0)for(let[c,l]of s)r[c]=r[c]??l;let a=Object.entries(o).filter(([,c])=>c.required).map(([c])=>c);for(let c of a)if(r[c]==null)throw new Ee(`Missing required parameter: '${c}'`);let A=Ic(i,{endpointParams:r,logger:n,referenceRecord:{}});return t.logger?.debug?.(`${rn} Resolved endpoint: ${Lt(A)}`),A};var hu=(e,t=!1)=>{if(t){for(let r of e.split("."))if(!hu(r))return!1;return!0}return!(!Rs(e)||e.length<3||e.length>63||e!==e.toLowerCase()||vs(e))};var f0=":",w8="/",u0=e=>{let t=e.split(f0);if(t.length<6)return null;let[r,n,o,i,s,...a]=t;if(r!=="arn"||n===""||o===""||a.join(f0)==="")return null;let A=a.map(c=>c.split(w8)).flat();return{partition:n,service:o,region:i,accountId:s,resourceId:A}};var I0={partitions:[{id:"aws",outputs:{dnsSuffix:"amazonaws.com",dualStackDnsSuffix:"api.aws",implicitGlobalRegion:"us-east-1",name:"aws",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^(us|eu|ap|sa|ca|me|af|il|mx)\\-\\w+\\-\\d+$",regions:{"af-south-1":{description:"Africa (Cape Town)"},"ap-east-1":{description:"Asia Pacific (Hong Kong)"},"ap-northeast-1":{description:"Asia Pacific (Tokyo)"},"ap-northeast-2":{description:"Asia Pacific (Seoul)"},"ap-northeast-3":{description:"Asia Pacific (Osaka)"},"ap-south-1":{description:"Asia Pacific (Mumbai)"},"ap-south-2":{description:"Asia Pacific (Hyderabad)"},"ap-southeast-1":{description:"Asia Pacific (Singapore)"},"ap-southeast-2":{description:"Asia Pacific (Sydney)"},"ap-southeast-3":{description:"Asia Pacific (Jakarta)"},"ap-southeast-4":{description:"Asia Pacific (Melbourne)"},"ap-southeast-5":{description:"Asia Pacific (Malaysia)"},"aws-global":{description:"AWS Standard global region"},"ca-central-1":{description:"Canada (Central)"},"ca-west-1":{description:"Canada West (Calgary)"},"eu-central-1":{description:"Europe (Frankfurt)"},"eu-central-2":{description:"Europe (Zurich)"},"eu-north-1":{description:"Europe (Stockholm)"},"eu-south-1":{description:"Europe (Milan)"},"eu-south-2":{description:"Europe (Spain)"},"eu-west-1":{description:"Europe (Ireland)"},"eu-west-2":{description:"Europe (London)"},"eu-west-3":{description:"Europe (Paris)"},"il-central-1":{description:"Israel (Tel Aviv)"},"me-central-1":{description:"Middle East (UAE)"},"me-south-1":{description:"Middle East (Bahrain)"},"sa-east-1":{description:"South America (Sao Paulo)"},"us-east-1":{description:"US East (N. Virginia)"},"us-east-2":{description:"US East (Ohio)"},"us-west-1":{description:"US West (N. California)"},"us-west-2":{description:"US West (Oregon)"}}},{id:"aws-cn",outputs:{dnsSuffix:"amazonaws.com.cn",dualStackDnsSuffix:"api.amazonwebservices.com.cn",implicitGlobalRegion:"cn-northwest-1",name:"aws-cn",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^cn\\-\\w+\\-\\d+$",regions:{"aws-cn-global":{description:"AWS China global region"},"cn-north-1":{description:"China (Beijing)"},"cn-northwest-1":{description:"China (Ningxia)"}}},{id:"aws-us-gov",outputs:{dnsSuffix:"amazonaws.com",dualStackDnsSuffix:"api.aws",implicitGlobalRegion:"us-gov-west-1",name:"aws-us-gov",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^us\\-gov\\-\\w+\\-\\d+$",regions:{"aws-us-gov-global":{description:"AWS GovCloud (US) global region"},"us-gov-east-1":{description:"AWS GovCloud (US-East)"},"us-gov-west-1":{description:"AWS GovCloud (US-West)"}}},{id:"aws-iso",outputs:{dnsSuffix:"c2s.ic.gov",dualStackDnsSuffix:"c2s.ic.gov",implicitGlobalRegion:"us-iso-east-1",name:"aws-iso",supportsDualStack:!1,supportsFIPS:!0},regionRegex:"^us\\-iso\\-\\w+\\-\\d+$",regions:{"aws-iso-global":{description:"AWS ISO (US) global region"},"us-iso-east-1":{description:"US ISO East"},"us-iso-west-1":{description:"US ISO WEST"}}},{id:"aws-iso-b",outputs:{dnsSuffix:"sc2s.sgov.gov",dualStackDnsSuffix:"sc2s.sgov.gov",implicitGlobalRegion:"us-isob-east-1",name:"aws-iso-b",supportsDualStack:!1,supportsFIPS:!0},regionRegex:"^us\\-isob\\-\\w+\\-\\d+$",regions:{"aws-iso-b-global":{description:"AWS ISOB (US) global region"},"us-isob-east-1":{description:"US ISOB East (Ohio)"}}},{id:"aws-iso-e",outputs:{dnsSuffix:"cloud.adc-e.uk",dualStackDnsSuffix:"cloud.adc-e.uk",implicitGlobalRegion:"eu-isoe-west-1",name:"aws-iso-e",supportsDualStack:!1,supportsFIPS:!0},regionRegex:"^eu\\-isoe\\-\\w+\\-\\d+$",regions:{"eu-isoe-west-1":{description:"EU ISOE West"}}},{id:"aws-iso-f",outputs:{dnsSuffix:"csp.hci.ic.gov",dualStackDnsSuffix:"csp.hci.ic.gov",implicitGlobalRegion:"us-isof-south-1",name:"aws-iso-f",supportsDualStack:!1,supportsFIPS:!0},regionRegex:"^us\\-isof\\-\\w+\\-\\d+$",regions:{}}],version:"1.1"};var x8=I0,b8="",p0=e=>{let{partitions:t}=x8;for(let n of t){let{regions:o,outputs:i}=n;for(let[s,a]of Object.entries(o))if(s===e)return{...i,...a}}for(let n of t){let{regionRegex:o,outputs:i}=n;if(new RegExp(o).test(e))return{...i}}let r=t.find(n=>n.id==="aws");if(!r)throw new Error("Provided region was not found in the partition array or regex, and default partition with id 'aws' doesn't exist.");return{...r.outputs}};var m0=()=>b8;var Cu={isVirtualHostableS3Bucket:hu,parseArn:u0,partition:p0};co.aws=Cu;var k8=/\d{12}\.ddb/;async function h0(e,t,r){if(r.request?.headers?.["smithy-protocol"]==="rpc-v2-cbor"&&Ye(e,"PROTOCOL_RPC_V2_CBOR","M"),typeof t.retryStrategy=="function"){let i=await t.retryStrategy();typeof i.acquireInitialRetryToken=="function"?i.constructor?.name?.includes("Adaptive")?Ye(e,"RETRY_MODE_ADAPTIVE","F"):Ye(e,"RETRY_MODE_STANDARD","E"):Ye(e,"RETRY_MODE_LEGACY","D")}if(typeof t.accountIdEndpointMode=="function"){let i=e.endpointV2;switch(String(i?.url?.hostname).match(k8)&&Ye(e,"ACCOUNT_ID_ENDPOINT","O"),await t.accountIdEndpointMode?.()){case"disabled":Ye(e,"ACCOUNT_ID_MODE_DISABLED","Q");break;case"preferred":Ye(e,"ACCOUNT_ID_MODE_PREFERRED","P");break;case"required":Ye(e,"ACCOUNT_ID_MODE_REQUIRED","R");break}}let o=e.__smithy_context?.selectedHttpAuthScheme?.identity;if(o?.$source){let i=o;i.accountId&&Ye(e,"RESOLVED_ACCOUNT_ID","T");for(let[s,a]of Object.entries(i.$source??{}))Ye(e,s,a)}}var Bu="user-agent",pc="x-amz-user-agent",Eu=" ",mc="/",C0=/[^\!\$\%\&\'\*\+\-\.\^\_\`\|\~\d\w]/g,B0=/[^\!\$\%\&\'\*\+\-\.\^\_\`\|\~\d\w\#]/g,yu="-";function E0(e){let t="";for(let r in e){let n=e[r];if(t.length+n.length+1<=1024){t.length?t+=","+n:t+=n;continue}break}return t}var D8=e=>(t,r)=>async n=>{let{request:o}=n;if(!ie.isInstance(o))return t(n);let{headers:i}=o,s=r?.userAgent?.map(hc)||[],a=(await e.defaultUserAgentProvider()).map(hc);await h0(r,e,n);let A=r;a.push(`m/${E0(Object.assign({},r.__smithy_context?.features,A.__aws_sdk_context?.features))}`);let c=e?.customUserAgent?.map(hc)||[],l=await e.userAgentAppId();l&&a.push(hc([`app/${l}`]));let g=m0(),d=(g?[g]:[]).concat([...a,...s,...c]).join(Eu),f=[...a.filter(u=>u.startsWith("aws-sdk-")),...c].join(Eu);return e.runtime!=="browser"?(f&&(i[pc]=i[pc]?`${i[Bu]} ${f}`:f),i[Bu]=d):i[pc]=d,t({...n,request:o})},hc=e=>{let t=e[0].split(mc).map(s=>s.replace(C0,yu)).join(mc),r=e[1]?.replace(B0,yu),n=t.indexOf(mc),o=t.substring(0,n),i=t.substring(n+1);return o==="api"&&(i=i.toLowerCase()),[o,i,r].filter(s=>s&&s.length>0).reduce((s,a,A)=>{switch(A){case 0:return a;case 1:return`${s}/${a}`;default:return`${s}#${a}`}},"")},_8={name:"getUserAgentMiddleware",step:"build",priority:"low",tags:["SET_USER_AGENT","USER_AGENT"],override:!0},y0=e=>({applyToStack:t=>{t.add(D8(e),_8)}});var Q0=!1;var w0=!1;var Cc=e=>typeof e=="string"&&(e.startsWith("fips-")||e.endsWith("-fips"));var Qu=e=>Cc(e)?["fips-aws-global","aws-fips"].includes(e)?"us-east-1":e.replace(/fips-(dkr-|prod-)?|-fips/,""):e;var S0=e=>{let{region:t,useFipsEndpoint:r}=e;if(!t)throw new Error("Region is missing");return{...e,region:async()=>{if(typeof t=="string")return Qu(t);let n=await t();return Qu(n)},useFipsEndpoint:async()=>{let n=typeof t=="string"?t:await t();return Cc(n)?!0:typeof r!="function"?Promise.resolve(!!r):r()}}};var x0=e=>({...e,eventStreamMarshaller:e.eventStreamSerdeProvider(e)});var b0="content-length";function F8(e){return t=>async r=>{let n=r.request;if(ie.isInstance(n)){let{body:o,headers:i}=n;if(o&&Object.keys(i).map(s=>s.toLowerCase()).indexOf(b0)===-1)try{let s=e(o);n.headers={...n.headers,[b0]:String(s)}}catch{}}return t({...r,request:n})}}var v8={step:"build",tags:["SET_CONTENT_LENGTH","CONTENT_LENGTH"],name:"contentLengthMiddleware",override:!0},k0=e=>({applyToStack:t=>{t.add(F8(e.bodyLengthChecker),v8)}});var D0=async e=>{let t=e?.Bucket||"";if(typeof e.Bucket=="string"&&(e.Bucket=t.replace(/#/g,encodeURIComponent("#")).replace(/\?/g,encodeURIComponent("?"))),U8(t)){if(e.ForcePathStyle===!0)throw new Error("Path-style addressing cannot be used with ARN buckets")}else(!M8(t)||t.indexOf(".")!==-1&&!String(e.Endpoint).startsWith("http:")||t.toLowerCase()!==t||t.length<3)&&(e.ForcePathStyle=!0);return e.DisableMultiRegionAccessPoints&&(e.disableMultiRegionAccessPoints=!0,e.DisableMRAP=!0),e},R8=/^[a-z0-9][a-z0-9\.\-]{1,61}[a-z0-9]$/,T8=/(\d+\.){3}\d+/,N8=/\.\./;var M8=e=>R8.test(e)&&!T8.test(e)&&!N8.test(e),U8=e=>{let[t,r,n,,,o]=e.split(":"),i=t==="arn"&&e.split(":").length>=6,s=!!(i&&r&&n&&o);if(i&&!s)throw new Error(`Invalid ARN: ${e} was an invalid ARN.`);return s};var _0=(e,t,r)=>{let n=async()=>{let o=r[e]??r[t];return typeof o=="function"?o():o};return e==="credentialScope"||t==="CredentialScope"?async()=>{let o=typeof r.credentials=="function"?await r.credentials():r.credentials;return o?.credentialScope??o?.CredentialScope}:e==="accountId"||t==="AccountId"?async()=>{let o=typeof r.credentials=="function"?await r.credentials():r.credentials;return o?.accountId??o?.AccountId}:e==="endpoint"||t==="endpoint"?async()=>{let o=await n();if(o&&typeof o=="object"){if("url"in o)return o.url.href;if("hostname"in o){let{protocol:i,hostname:s,port:a,path:A}=o;return`${i}//${s}${a?":"+a:""}${A}`}}return o}:n};var Bc=async e=>{};function F0(e){let t={};if(e=e.replace(/^\?/,""),e)for(let r of e.split("&")){let[n,o=null]=r.split("=");n=decodeURIComponent(n),o&&(o=decodeURIComponent(o)),n in t?Array.isArray(t[n])?t[n].push(o):t[n]=[t[n],o]:t[n]=o}return t}var fi=e=>{if(typeof e=="string")return fi(new URL(e));let{hostname:t,pathname:r,port:n,protocol:o,search:i}=e,s;return i&&(s=F0(i)),{hostname:t,port:n?parseInt(n):void 0,protocol:o,path:r,query:s}};var Ec=e=>typeof e=="object"?"url"in e?fi(e.url):e:fi(e);var v0=async(e,t,r,n)=>{if(!r.endpoint){let s;r.serviceConfiguredEndpoint?s=await r.serviceConfiguredEndpoint():s=await Bc(r.serviceId),s&&(r.endpoint=()=>Promise.resolve(Ec(s)))}let o=await wu(e,t,r);if(typeof r.endpointProvider!="function")throw new Error("config.endpointProvider is not set.");return r.endpointProvider(o,n)},wu=async(e,t,r)=>{let n={},o=t?.getEndpointParameterInstructions?.()||{};for(let[i,s]of Object.entries(o))switch(s.type){case"staticContextParams":n[i]=s.value;break;case"contextParams":n[i]=e[s.name];break;case"clientContextParams":case"builtInParams":n[i]=await _0(s.name,i,r)();break;case"operationContextParams":n[i]=s.get(e);break;default:throw new Error("Unrecognized endpoint parameter instruction: "+JSON.stringify(s))}return Object.keys(o).length===0&&Object.assign(n,r),String(r.serviceId).toLowerCase()==="s3"&&await D0(n),n};var R0=({config:e,instructions:t})=>(r,n)=>async o=>{e.endpoint&&RS(n,"ENDPOINT_OVERRIDE","N");let i=await v0(o.input,{getEndpointParameterInstructions(){return t}},{...e},n);n.endpointV2=i,n.authSchemes=i.properties?.authSchemes;let s=n.authSchemes?.[0];if(s){n.signing_region=s.signingRegion,n.signing_service=s.signingName;let A=ar(n)?.selectedHttpAuthScheme?.httpAuthOption;A&&(A.signingProperties=Object.assign(A.signingProperties||{},{signing_region:s.signingRegion,signingRegion:s.signingRegion,signing_service:s.signingName,signingName:s.signingName,signingRegionSet:s.signingRegionSet},s.properties))}return r({...o})};var P8={step:"serialize",tags:["ENDPOINT_PARAMETERS","ENDPOINT_V2","ENDPOINT"],name:"endpointV2Middleware",override:!0,relation:"before",toMiddleware:hs.name},yc=(e,t)=>({applyToStack:r=>{r.addRelativeTo(R0({config:e,instructions:t}),P8)}});var T0=e=>{let t=e.tls??!0,{endpoint:r}=e,n=r!=null?async()=>Ec(await ot(r)()):void 0,i={...e,endpoint:n,tls:t,isCustomEndpoint:!!r,useDualstackEndpoint:ot(e.useDualstackEndpoint??!1),useFipsEndpoint:ot(e.useFipsEndpoint??!1)},s;return i.serviceConfiguredEndpoint=async()=>(e.serviceId&&!s&&(s=Bc(e.serviceId)),s),i};var cr;(function(e){e.STANDARD="standard",e.ADAPTIVE="adaptive"})(cr||(cr={}));var lo=3,Su=cr.STANDARD;var N0=["BandwidthLimitExceeded","EC2ThrottledException","LimitExceededException","PriorRequestNotComplete","ProvisionedThroughputExceededException","RequestLimitExceeded","RequestThrottled","RequestThrottledException","SlowDown","ThrottledException","Throttling","ThrottlingException","TooManyRequestsException","TransactionInProgressException"],M0=["TimeoutError","RequestTimeout","RequestTimeoutException"],U0=[500,502,503,504],P0=["ECONNRESET","ECONNREFUSED","EPIPE","ETIMEDOUT"];var O8=e=>e.$metadata?.clockSkewCorrected,ui=e=>e.$metadata?.httpStatusCode===429||N0.includes(e.name)||e.$retryable?.throttling==!0,Ts=(e,t=0)=>O8(e)||M0.includes(e.name)||P0.includes(e?.code||"")||U0.includes(e.$metadata?.httpStatusCode||0)||e.cause!==void 0&&t<=10&&Ts(e.cause,t+1),O0=e=>{if(e.$metadata?.httpStatusCode!==void 0){let t=e.$metadata.httpStatusCode;return 500<=t&&t<=599&&!Ts(e)}return!1};var Ii=class e{constructor(t){this.currentCapacity=0,this.enabled=!1,this.lastMaxRate=0,this.measuredTxRate=0,this.requestCount=0,this.lastTimestamp=0,this.timeWindow=0,this.beta=t?.beta??.7,this.minCapacity=t?.minCapacity??1,this.minFillRate=t?.minFillRate??.5,this.scaleConstant=t?.scaleConstant??.4,this.smooth=t?.smooth??.8;let r=this.getCurrentTimeInSeconds();this.lastThrottleTime=r,this.lastTxRateBucket=Math.floor(this.getCurrentTimeInSeconds()),this.fillRate=this.minFillRate,this.maxCapacity=this.minCapacity}getCurrentTimeInSeconds(){return Date.now()/1e3}async getSendToken(){return this.acquireTokenBucket(1)}async acquireTokenBucket(t){if(this.enabled){if(this.refillTokenBucket(),t>this.currentCapacity){let r=(t-this.currentCapacity)/this.fillRate*1e3;await new Promise(n=>e.setTimeoutFn(n,r))}this.currentCapacity=this.currentCapacity-t}}refillTokenBucket(){let t=this.getCurrentTimeInSeconds();if(!this.lastTimestamp){this.lastTimestamp=t;return}let r=(t-this.lastTimestamp)*this.fillRate;this.currentCapacity=Math.min(this.maxCapacity,this.currentCapacity+r),this.lastTimestamp=t}updateClientSendingRate(t){let r;if(this.updateMeasuredRate(),ui(t)){let o=this.enabled?Math.min(this.measuredTxRate,this.fillRate):this.measuredTxRate;this.lastMaxRate=o,this.calculateTimeWindow(),this.lastThrottleTime=this.getCurrentTimeInSeconds(),r=this.cubicThrottle(o),this.enableTokenBucket()}else this.calculateTimeWindow(),r=this.cubicSuccess(this.getCurrentTimeInSeconds());let n=Math.min(r,2*this.measuredTxRate);this.updateTokenBucketRate(n)}calculateTimeWindow(){this.timeWindow=this.getPrecise(Math.pow(this.lastMaxRate*(1-this.beta)/this.scaleConstant,1/3))}cubicThrottle(t){return this.getPrecise(t*this.beta)}cubicSuccess(t){return this.getPrecise(this.scaleConstant*Math.pow(t-this.lastThrottleTime-this.timeWindow,3)+this.lastMaxRate)}enableTokenBucket(){this.enabled=!0}updateTokenBucketRate(t){this.refillTokenBucket(),this.fillRate=Math.max(t,this.minFillRate),this.maxCapacity=Math.max(t,this.minCapacity),this.currentCapacity=Math.min(this.currentCapacity,this.maxCapacity)}updateMeasuredRate(){let t=this.getCurrentTimeInSeconds(),r=Math.floor(t*2)/2;if(this.requestCount++,r>this.lastTxRateBucket){let n=this.requestCount/(r-this.lastTxRateBucket);this.measuredTxRate=this.getPrecise(n*this.smooth+this.measuredTxRate*(1-this.smooth)),this.requestCount=0,this.lastTxRateBucket=r}}getPrecise(t){return parseFloat(t.toFixed(8))}};Ii.setTimeoutFn=setTimeout;var Qc="amz-sdk-invocation-id",wc="amz-sdk-request";var G0=()=>{let e=100;return{computeNextBackoffDelay:n=>Math.floor(Math.min(2e4,Math.random()*2**n*e)),setDelayBase:n=>{e=n}}};var xu=({retryDelay:e,retryCount:t,retryCost:r})=>({getRetryCount:()=>t,getRetryDelay:()=>Math.min(2e4,e),getRetryCost:()=>r});var go=class{constructor(t){this.maxAttempts=t,this.mode=cr.STANDARD,this.capacity=500,this.retryBackoffStrategy=G0(),this.maxAttemptsProvider=typeof t=="function"?t:async()=>t}async acquireInitialRetryToken(t){return xu({retryDelay:100,retryCount:0})}async refreshRetryTokenForRetry(t,r){let n=await this.getMaxAttempts();if(this.shouldRetry(t,r,n)){let o=r.errorType;this.retryBackoffStrategy.setDelayBase(o==="THROTTLING"?500:100);let i=this.retryBackoffStrategy.computeNextBackoffDelay(t.getRetryCount()),s=r.retryAfterHint?Math.max(r.retryAfterHint.getTime()-Date.now()||0,i):i,a=this.getCapacityCost(o);return this.capacity-=a,xu({retryDelay:s,retryCount:t.getRetryCount()+1,retryCost:a})}throw new Error("No retry token available")}recordSuccess(t){this.capacity=Math.max(500,this.capacity+(t.getRetryCost()??1))}getCapacity(){return this.capacity}async getMaxAttempts(){try{return await this.maxAttemptsProvider()}catch{return lo}}shouldRetry(t,r,n){return t.getRetryCount()+1<n&&this.capacity>=this.getCapacityCost(r.errorType)&&this.isRetryableError(r.errorType)}getCapacityCost(t){return t==="TRANSIENT"?10:5}isRetryableError(t){return t==="THROTTLING"||t==="TRANSIENT"}};var xc=class{constructor(t,r){this.maxAttemptsProvider=t,this.mode=cr.ADAPTIVE;let{rateLimiter:n}=r??{};this.rateLimiter=n??new Ii,this.standardRetryStrategy=new go(t)}async acquireInitialRetryToken(t){return await this.rateLimiter.getSendToken(),this.standardRetryStrategy.acquireInitialRetryToken(t)}async refreshRetryTokenForRetry(t,r){return this.rateLimiter.updateClientSendingRate(r),this.standardRetryStrategy.refreshRetryTokenForRetry(t,r)}recordSuccess(t){this.rateLimiter.updateClientSendingRate({}),this.standardRetryStrategy.recordSuccess(t)}};var bc,G8=new Uint8Array(16);function ku(){if(!bc&&(bc=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!bc))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return bc(G8)}var it=[];for(let e=0;e<256;++e)it.push((e+256).toString(16).slice(1));function J0(e,t=0){return it[e[t+0]]+it[e[t+1]]+it[e[t+2]]+it[e[t+3]]+"-"+it[e[t+4]]+it[e[t+5]]+"-"+it[e[t+6]]+it[e[t+7]]+"-"+it[e[t+8]]+it[e[t+9]]+"-"+it[e[t+10]]+it[e[t+11]]+it[e[t+12]]+it[e[t+13]]+it[e[t+14]]+it[e[t+15]]}var q8=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Du={randomUUID:q8};function H8(e,t,r){if(Du.randomUUID&&!t&&!e)return Du.randomUUID();e=e||{};let n=e.random||(e.rng||ku)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,t){r=r||0;for(let o=0;o<16;++o)t[r+o]=n[o];return t}return J0(n)}var _u=H8;var Fu=e=>e instanceof Error?e:e instanceof Object?Object.assign(new Error,e):typeof e=="string"?new Error(e):new Error(`AWS SDK error wrapper for ${e}`);var V0=e=>{let{retryStrategy:t}=e,r=ot(e.maxAttempts??lo);return{...e,maxAttempts:r,retryStrategy:async()=>t||(await ot(e.retryMode)()===cr.ADAPTIVE?new xc(r):new go(r))}};var z0=e=>e?.body instanceof ReadableStream;var L8=e=>(t,r)=>async n=>{let o=await e.retryStrategy(),i=await e.maxAttempts();if(K8(o)){o=o;let s=await o.acquireInitialRetryToken(r.partition_id),a=new Error,A=0,c=0,{request:l}=n,g=ie.isInstance(l);for(g&&(l.headers[Qc]=_u());;)try{g&&(l.headers[wc]=`attempt=${A+1}; max=${i}`);let{response:d,output:f}=await t(n);return o.recordSuccess(s),f.$metadata.attempts=A+1,f.$metadata.totalRetryDelay=c,{response:d,output:f}}catch(d){let f=J8(d);if(a=Fu(d),g&&z0(l))throw(r.logger instanceof Fn?console:r.logger)?.warn("An error was encountered in a non-retryable streaming request."),a;try{s=await o.refreshRetryTokenForRetry(s,f)}catch{throw a.$metadata||(a.$metadata={}),a.$metadata.attempts=A+1,a.$metadata.totalRetryDelay=c,a}A=s.getRetryCount();let u=s.getRetryDelay();c+=u,await new Promise(m=>setTimeout(m,u))}}else return o=o,o?.mode&&(r.userAgent=[...r.userAgent||[],["cfg/retry-mode",o.mode]]),o.retry(t,n)},K8=e=>typeof e.acquireInitialRetryToken<"u"&&typeof e.refreshRetryTokenForRetry<"u"&&typeof e.recordSuccess<"u",J8=e=>{let t={error:e,errorType:V8(e)},r=Y8(e.$response);return r&&(t.retryAfterHint=r),t},V8=e=>ui(e)?"THROTTLING":Ts(e)?"TRANSIENT":O0(e)?"SERVER_ERROR":"CLIENT_ERROR",z8={name:"retryMiddleware",tags:["RETRY"],step:"finalizeRequest",priority:"high",override:!0},Y0=e=>({applyToStack:t=>{t.add(L8(e),z8)}}),Y8=e=>{if(!Tt.isInstance(e))return;let t=Object.keys(e.headers).find(i=>i.toLowerCase()==="retry-after");if(!t)return;let r=e.headers[t],n=Number(r);return Number.isNaN(n)?new Date(r):new Date(n*1e3)};var kc={CrtSignerV4:null};var Dc=class{constructor(t){this.sigv4Signer=new Fs(t),this.signerOptions=t}async sign(t,r={}){if(r.signingRegion==="*"){if(this.signerOptions.runtime!=="node")throw new Error("This request requires signing with SigV4Asymmetric algorithm. It's only available in Node.js");return this.getSigv4aSigner().sign(t,r)}return this.sigv4Signer.sign(t,r)}async signWithCredentials(t,r,n={}){if(n.signingRegion==="*"){if(this.signerOptions.runtime!=="node")throw new Error("This request requires signing with SigV4Asymmetric algorithm. It's only available in Node.js");return this.getSigv4aSigner().signWithCredentials(t,r,n)}return this.sigv4Signer.signWithCredentials(t,r,n)}async presign(t,r={}){if(r.signingRegion==="*"){if(this.signerOptions.runtime!=="node")throw new Error("This request requires signing with SigV4Asymmetric algorithm. It's only available in Node.js");return this.getSigv4aSigner().presign(t,r)}return this.sigv4Signer.presign(t,r)}async presignWithCredentials(t,r,n={}){if(n.signingRegion==="*")throw new Error("Method presignWithCredentials is not supported for [signingRegion=*].");return this.sigv4Signer.presignWithCredentials(t,r,n)}getSigv4aSigner(){if(!this.sigv4aSigner){let t=null;try{if(t=kc.CrtSignerV4,typeof t!="function")throw new Error}catch(r){throw r.message=`${r.message}
Please check whether you have installed the "@aws-sdk/signature-v4-crt" package explicitly. 
You must also register the package by calling [require("@aws-sdk/signature-v4-crt");] or an ESM equivalent such as [import "@aws-sdk/signature-v4-crt";]. 
For more information please go to https://github.com/aws/aws-sdk-js-v3#functionality-requiring-aws-common-runtime-crt`,r}this.sigv4aSigner=new t({...this.signerOptions,signingAlgorithm:1})}return this.sigv4aSigner}};var nI="required",I="type",h="conditions",k="fn",D="argv",Y="ref",pe="assign",O="url",G="properties",jk="backend",gr="authSchemes",Ut="disableDoubleEncoding",Pt="signingName",vr="signingRegion",q="headers",oI="signingRegionSet";var Kt="isSet",Ze="booleanEquals",H="error",Mc="aws.partition",Ie="stringEquals",Te="getAttr",gt="name",lt="substring",W0="bucketSuffix",Xk="parseURL",j0="{url#scheme}://{url#authority}/{uri_encoded_bucket}{url#path}",N="endpoint",F="tree",Zk="aws.isVirtualHostableS3Bucket",Rc="{url#scheme}://{Bucket}.{url#authority}{url#path}",Fr="not",Tc="{url#scheme}://{url#authority}{url#path}",$k="hardwareType",eD="regionPrefix",X0="bucketAliasSuffix",tI="outpostId",uo="isValidHostLabel",iI="sigv4a",Os="s3-outposts",Bi="s3",tD="{url#scheme}://{url#authority}{url#normalizedPath}{Bucket}",rD="https://{Bucket}.s3-accelerate.{partitionResult#dnsSuffix}",Z0="https://{Bucket}.s3.{partitionResult#dnsSuffix}",nD="aws.parseArn",oD="bucketArn",iD="arnType",Uc="",sI="s3-object-lambda",sD="accesspoint",aI="accessPointName",$0="{url#scheme}://{accessPointName}-{bucketArn#accountId}.{url#authority}{url#path}",ek="mrapPartition",tk="outpostType",rk="arnPrefix",aD="{url#scheme}://{url#authority}{url#normalizedPath}{uri_encoded_bucket}",nk="https://s3.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",ok="https://s3.{partitionResult#dnsSuffix}",mi={[nI]:!1,[I]:"String"},hi={[nI]:!0,default:!1,[I]:"Boolean"},Ns={[nI]:!1,[I]:"Boolean"},lr={[k]:Ze,[D]:[{[Y]:"Accelerate"},!0]},Qe={[k]:Ze,[D]:[{[Y]:"UseFIPS"},!0]},ye={[k]:Ze,[D]:[{[Y]:"UseDualStack"},!0]},Pe={[k]:Kt,[D]:[{[Y]:"Endpoint"}]},AD={[k]:Mc,[D]:[{[Y]:"Region"}],[pe]:"partitionResult"},ik={[k]:Ie,[D]:[{[k]:Te,[D]:[{[Y]:"partitionResult"},gt]},"aws-cn"]},Pc={[k]:Kt,[D]:[{[Y]:"Bucket"}]},Ne={[Y]:"Bucket"},Bt={[k]:Xk,[D]:[{[Y]:"Endpoint"}],[pe]:"url"},Nc={[k]:Ze,[D]:[{[k]:Te,[D]:[{[Y]:"url"},"isIp"]},!0]},cD={[Y]:"url"},lD={[k]:"uriEncode",[D]:[Ne],[pe]:"uri_encoded_bucket"},nn={[jk]:"S3Express",[gr]:[{[Ut]:!0,[gt]:"sigv4",[Pt]:"s3express",[vr]:"{Region}"}]},$={},gD={[k]:Zk,[D]:[Ne,!1]},vu={[H]:"S3Express bucket name is not a valid virtual hostable name.",[I]:H},Oc={[jk]:"S3Express",[gr]:[{[Ut]:!0,[gt]:"sigv4-s3express",[Pt]:"s3express",[vr]:"{Region}"}]},sk={[k]:Kt,[D]:[{[Y]:"UseS3ExpressControlEndpoint"}]},ak={[k]:Ze,[D]:[{[Y]:"UseS3ExpressControlEndpoint"},!0]},re={[k]:Fr,[D]:[Pe]},Ak={[H]:"Unrecognized S3Express bucket name format.",[I]:H},ck={[k]:Fr,[D]:[Pc]},lk={[Y]:$k},gk={[h]:[re],[H]:"Expected a endpoint to be specified but no endpoint was found",[I]:H},_c={[gr]:[{[Ut]:!0,[gt]:iI,[Pt]:Os,[oI]:["*"]},{[Ut]:!0,[gt]:"sigv4",[Pt]:Os,[vr]:"{Region}"}]},Ru={[k]:Ze,[D]:[{[Y]:"ForcePathStyle"},!1]},W8={[Y]:"ForcePathStyle"},Ue={[k]:Ze,[D]:[{[Y]:"Accelerate"},!1]},Le={[k]:Ie,[D]:[{[Y]:"Region"},"aws-global"]},We={[gr]:[{[Ut]:!0,[gt]:"sigv4",[Pt]:Bi,[vr]:"us-east-1"}]},ce={[k]:Fr,[D]:[Le]},je={[k]:Ze,[D]:[{[Y]:"UseGlobalEndpoint"},!0]},dk={[O]:"https://{Bucket}.s3-fips.dualstack.{Region}.{partitionResult#dnsSuffix}",[G]:{[gr]:[{[Ut]:!0,[gt]:"sigv4",[Pt]:Bi,[vr]:"{Region}"}]},[q]:{}},Oe={[gr]:[{[Ut]:!0,[gt]:"sigv4",[Pt]:Bi,[vr]:"{Region}"}]},Xe={[k]:Ze,[D]:[{[Y]:"UseGlobalEndpoint"},!1]},ae={[k]:Ze,[D]:[{[Y]:"UseDualStack"},!1]},fk={[O]:"https://{Bucket}.s3-fips.{Region}.{partitionResult#dnsSuffix}",[G]:Oe,[q]:{}},se={[k]:Ze,[D]:[{[Y]:"UseFIPS"},!1]},uk={[O]:"https://{Bucket}.s3-accelerate.dualstack.{partitionResult#dnsSuffix}",[G]:Oe,[q]:{}},Ik={[O]:"https://{Bucket}.s3.dualstack.{Region}.{partitionResult#dnsSuffix}",[G]:Oe,[q]:{}},Tu={[k]:Ze,[D]:[{[k]:Te,[D]:[cD,"isIp"]},!1]},Nu={[O]:tD,[G]:Oe,[q]:{}},rI={[O]:Rc,[G]:Oe,[q]:{}},pk={[N]:rI,[I]:N},Mu={[O]:rD,[G]:Oe,[q]:{}},mk={[O]:"https://{Bucket}.s3.{Region}.{partitionResult#dnsSuffix}",[G]:Oe,[q]:{}},Fc={[H]:"Invalid region: region was not a valid DNS name.",[I]:H},kt={[Y]:oD},dD={[Y]:iD},Uu={[k]:Te,[D]:[kt,"service"]},AI={[Y]:aI},hk={[h]:[ye],[H]:"S3 Object Lambda does not support Dual-stack",[I]:H},Ck={[h]:[lr],[H]:"S3 Object Lambda does not support S3 Accelerate",[I]:H},Bk={[h]:[{[k]:Kt,[D]:[{[Y]:"DisableAccessPoints"}]},{[k]:Ze,[D]:[{[Y]:"DisableAccessPoints"},!0]}],[H]:"Access points are not supported for this operation",[I]:H},Pu={[h]:[{[k]:Kt,[D]:[{[Y]:"UseArnRegion"}]},{[k]:Ze,[D]:[{[Y]:"UseArnRegion"},!1]},{[k]:Fr,[D]:[{[k]:Ie,[D]:[{[k]:Te,[D]:[kt,"region"]},"{Region}"]}]}],[H]:"Invalid configuration: region from ARN `{bucketArn#region}` does not match client region `{Region}` and UseArnRegion is `false`",[I]:H},fD={[k]:Te,[D]:[{[Y]:"bucketPartition"},gt]},uD={[k]:Te,[D]:[kt,"accountId"]},Ou={[gr]:[{[Ut]:!0,[gt]:"sigv4",[Pt]:sI,[vr]:"{bucketArn#region}"}]},Ek={[H]:"Invalid ARN: The access point name may only contain a-z, A-Z, 0-9 and `-`. Found: `{accessPointName}`",[I]:H},Gu={[H]:"Invalid ARN: The account id may only contain a-z, A-Z, 0-9 and `-`. Found: `{bucketArn#accountId}`",[I]:H},qu={[H]:"Invalid region in ARN: `{bucketArn#region}` (invalid DNS name)",[I]:H},Hu={[H]:"Client was configured for partition `{partitionResult#name}` but ARN (`{Bucket}`) has `{bucketPartition#name}`",[I]:H},yk={[H]:"Invalid ARN: The ARN may only contain a single resource component after `accesspoint`.",[I]:H},Qk={[H]:"Invalid ARN: Expected a resource of the format `accesspoint:<accesspoint name>` but no name was provided",[I]:H},Ms={[gr]:[{[Ut]:!0,[gt]:"sigv4",[Pt]:Bi,[vr]:"{bucketArn#region}"}]},wk={[gr]:[{[Ut]:!0,[gt]:iI,[Pt]:Os,[oI]:["*"]},{[Ut]:!0,[gt]:"sigv4",[Pt]:Os,[vr]:"{bucketArn#region}"}]},Sk={[k]:nD,[D]:[Ne]},xk={[O]:"https://s3-fips.dualstack.{Region}.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",[G]:Oe,[q]:{}},bk={[O]:"https://s3-fips.{Region}.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",[G]:Oe,[q]:{}},kk={[O]:"https://s3.dualstack.{Region}.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",[G]:Oe,[q]:{}},Lu={[O]:aD,[G]:Oe,[q]:{}},Dk={[O]:"https://s3.{Region}.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",[G]:Oe,[q]:{}},_k={[Y]:"UseObjectLambdaEndpoint"},Ku={[gr]:[{[Ut]:!0,[gt]:"sigv4",[Pt]:sI,[vr]:"{Region}"}]},Fk={[O]:"https://s3-fips.dualstack.{Region}.{partitionResult#dnsSuffix}",[G]:Oe,[q]:{}},vk={[O]:"https://s3-fips.{Region}.{partitionResult#dnsSuffix}",[G]:Oe,[q]:{}},Rk={[O]:"https://s3.dualstack.{Region}.{partitionResult#dnsSuffix}",[G]:Oe,[q]:{}},Ju={[O]:Tc,[G]:Oe,[q]:{}},Tk={[O]:"https://s3.{Region}.{partitionResult#dnsSuffix}",[G]:Oe,[q]:{}},Vu=[{[Y]:"Region"}],j8=[{[Y]:"Endpoint"}],X8=[Ne],zu=[ye],vc=[lr],fo=[Pe,Bt],Nk=[{[k]:Kt,[D]:[{[Y]:"DisableS3ExpressSessionAuth"}]},{[k]:Ze,[D]:[{[Y]:"DisableS3ExpressSessionAuth"},!0]}],Mk=[Nc],Yu=[lD],Wu=[gD],Ci=[Qe],Uk=[{[k]:lt,[D]:[Ne,6,14,!0],[pe]:"s3expressAvailabilityZoneId"},{[k]:lt,[D]:[Ne,14,16,!0],[pe]:"s3expressAvailabilityZoneDelim"},{[k]:Ie,[D]:[{[Y]:"s3expressAvailabilityZoneDelim"},"--"]}],Us=[{[h]:[Qe],[N]:{[O]:"https://{Bucket}.s3express-fips-{s3expressAvailabilityZoneId}.{Region}.amazonaws.com",[G]:nn,[q]:{}},[I]:N},{[N]:{[O]:"https://{Bucket}.s3express-{s3expressAvailabilityZoneId}.{Region}.amazonaws.com",[G]:nn,[q]:{}},[I]:N}],Pk=[{[k]:lt,[D]:[Ne,6,15,!0],[pe]:"s3expressAvailabilityZoneId"},{[k]:lt,[D]:[Ne,15,17,!0],[pe]:"s3expressAvailabilityZoneDelim"},{[k]:Ie,[D]:[{[Y]:"s3expressAvailabilityZoneDelim"},"--"]}],Ok=[{[k]:lt,[D]:[Ne,6,19,!0],[pe]:"s3expressAvailabilityZoneId"},{[k]:lt,[D]:[Ne,19,21,!0],[pe]:"s3expressAvailabilityZoneDelim"},{[k]:Ie,[D]:[{[Y]:"s3expressAvailabilityZoneDelim"},"--"]}],Gk=[{[k]:lt,[D]:[Ne,6,20,!0],[pe]:"s3expressAvailabilityZoneId"},{[k]:lt,[D]:[Ne,20,22,!0],[pe]:"s3expressAvailabilityZoneDelim"},{[k]:Ie,[D]:[{[Y]:"s3expressAvailabilityZoneDelim"},"--"]}],qk=[{[k]:lt,[D]:[Ne,6,26,!0],[pe]:"s3expressAvailabilityZoneId"},{[k]:lt,[D]:[Ne,26,28,!0],[pe]:"s3expressAvailabilityZoneDelim"},{[k]:Ie,[D]:[{[Y]:"s3expressAvailabilityZoneDelim"},"--"]}],Ps=[{[h]:[Qe],[N]:{[O]:"https://{Bucket}.s3express-fips-{s3expressAvailabilityZoneId}.{Region}.amazonaws.com",[G]:Oc,[q]:{}},[I]:N},{[N]:{[O]:"https://{Bucket}.s3express-{s3expressAvailabilityZoneId}.{Region}.amazonaws.com",[G]:Oc,[q]:{}},[I]:N}],Z8=[Pc],Hk=[{[k]:uo,[D]:[{[Y]:tI},!1]}],Lk=[{[k]:Ie,[D]:[{[Y]:eD},"beta"]}],$8=["*"],Tn=[AD],Kk=[{[k]:uo,[D]:[{[Y]:"Region"},!1]}],Nn=[{[k]:Ie,[D]:[{[Y]:"Region"},"us-east-1"]}],ju=[{[k]:Ie,[D]:[dD,sD]}],Jk=[{[k]:Te,[D]:[kt,"resourceId[1]"],[pe]:aI},{[k]:Fr,[D]:[{[k]:Ie,[D]:[AI,Uc]}]}],e4=[kt,"resourceId[1]"],Xu=[{[k]:Fr,[D]:[{[k]:Ie,[D]:[{[k]:Te,[D]:[kt,"region"]},Uc]}]}],Vk=[{[k]:Fr,[D]:[{[k]:Kt,[D]:[{[k]:Te,[D]:[kt,"resourceId[2]"]}]}]}],t4=[kt,"resourceId[2]"],Zu=[{[k]:Mc,[D]:[{[k]:Te,[D]:[kt,"region"]}],[pe]:"bucketPartition"}],zk=[{[k]:Ie,[D]:[fD,{[k]:Te,[D]:[{[Y]:"partitionResult"},gt]}]}],$u=[{[k]:uo,[D]:[{[k]:Te,[D]:[kt,"region"]},!0]}],eI=[{[k]:uo,[D]:[uD,!1]}],Yk=[{[k]:uo,[D]:[AI,!1]}],Wk=[{[k]:uo,[D]:[{[Y]:"Region"},!0]}],r4={version:"1.0",parameters:{Bucket:mi,Region:mi,UseFIPS:hi,UseDualStack:hi,Endpoint:mi,ForcePathStyle:hi,Accelerate:hi,UseGlobalEndpoint:hi,UseObjectLambdaEndpoint:Ns,Key:mi,Prefix:mi,CopySource:mi,DisableAccessPoints:Ns,DisableMultiRegionAccessPoints:hi,UseArnRegion:Ns,UseS3ExpressControlEndpoint:Ns,DisableS3ExpressSessionAuth:Ns},rules:[{[h]:[{[k]:Kt,[D]:Vu}],rules:[{[h]:[lr,Qe],error:"Accelerate cannot be used with FIPS",[I]:H},{[h]:[ye,Pe],error:"Cannot set dual-stack in combination with a custom endpoint.",[I]:H},{[h]:[Pe,Qe],error:"A custom endpoint cannot be combined with FIPS",[I]:H},{[h]:[Pe,lr],error:"A custom endpoint cannot be combined with S3 Accelerate",[I]:H},{[h]:[Qe,AD,ik],error:"Partition does not support FIPS",[I]:H},{[h]:[Pc,{[k]:lt,[D]:[Ne,0,6,!0],[pe]:W0},{[k]:Ie,[D]:[{[Y]:W0},"--x-s3"]}],rules:[{[h]:zu,error:"S3Express does not support Dual-stack.",[I]:H},{[h]:vc,error:"S3Express does not support S3 Accelerate.",[I]:H},{[h]:fo,rules:[{[h]:Nk,rules:[{[h]:Mk,rules:[{[h]:Yu,rules:[{endpoint:{[O]:j0,[G]:nn,[q]:$},[I]:N}],[I]:F}],[I]:F},{[h]:Wu,rules:[{endpoint:{[O]:Rc,[G]:nn,[q]:$},[I]:N}],[I]:F},vu],[I]:F},{[h]:Mk,rules:[{[h]:Yu,rules:[{endpoint:{[O]:j0,[G]:Oc,[q]:$},[I]:N}],[I]:F}],[I]:F},{[h]:Wu,rules:[{endpoint:{[O]:Rc,[G]:Oc,[q]:$},[I]:N}],[I]:F},vu],[I]:F},{[h]:[sk,ak],rules:[{[h]:[lD,re],rules:[{[h]:Ci,endpoint:{[O]:"https://s3express-control-fips.{Region}.amazonaws.com/{uri_encoded_bucket}",[G]:nn,[q]:$},[I]:N},{endpoint:{[O]:"https://s3express-control.{Region}.amazonaws.com/{uri_encoded_bucket}",[G]:nn,[q]:$},[I]:N}],[I]:F}],[I]:F},{[h]:Wu,rules:[{[h]:Nk,rules:[{[h]:Uk,rules:Us,[I]:F},{[h]:Pk,rules:Us,[I]:F},{[h]:Ok,rules:Us,[I]:F},{[h]:Gk,rules:Us,[I]:F},{[h]:qk,rules:Us,[I]:F},Ak],[I]:F},{[h]:Uk,rules:Ps,[I]:F},{[h]:Pk,rules:Ps,[I]:F},{[h]:Ok,rules:Ps,[I]:F},{[h]:Gk,rules:Ps,[I]:F},{[h]:qk,rules:Ps,[I]:F},Ak],[I]:F},vu],[I]:F},{[h]:[ck,sk,ak],rules:[{[h]:fo,endpoint:{[O]:Tc,[G]:nn,[q]:$},[I]:N},{[h]:Ci,endpoint:{[O]:"https://s3express-control-fips.{Region}.amazonaws.com",[G]:nn,[q]:$},[I]:N},{endpoint:{[O]:"https://s3express-control.{Region}.amazonaws.com",[G]:nn,[q]:$},[I]:N}],[I]:F},{[h]:[Pc,{[k]:lt,[D]:[Ne,49,50,!0],[pe]:$k},{[k]:lt,[D]:[Ne,8,12,!0],[pe]:eD},{[k]:lt,[D]:[Ne,0,7,!0],[pe]:X0},{[k]:lt,[D]:[Ne,32,49,!0],[pe]:tI},{[k]:Mc,[D]:Vu,[pe]:"regionPartition"},{[k]:Ie,[D]:[{[Y]:X0},"--op-s3"]}],rules:[{[h]:Hk,rules:[{[h]:[{[k]:Ie,[D]:[lk,"e"]}],rules:[{[h]:Lk,rules:[gk,{[h]:fo,endpoint:{[O]:"https://{Bucket}.ec2.{url#authority}",[G]:_c,[q]:$},[I]:N}],[I]:F},{endpoint:{[O]:"https://{Bucket}.ec2.s3-outposts.{Region}.{regionPartition#dnsSuffix}",[G]:_c,[q]:$},[I]:N}],[I]:F},{[h]:[{[k]:Ie,[D]:[lk,"o"]}],rules:[{[h]:Lk,rules:[gk,{[h]:fo,endpoint:{[O]:"https://{Bucket}.op-{outpostId}.{url#authority}",[G]:_c,[q]:$},[I]:N}],[I]:F},{endpoint:{[O]:"https://{Bucket}.op-{outpostId}.s3-outposts.{Region}.{regionPartition#dnsSuffix}",[G]:_c,[q]:$},[I]:N}],[I]:F},{error:'Unrecognized hardware type: "Expected hardware type o or e but got {hardwareType}"',[I]:H}],[I]:F},{error:"Invalid ARN: The outpost Id must only contain a-z, A-Z, 0-9 and `-`.",[I]:H}],[I]:F},{[h]:Z8,rules:[{[h]:[Pe,{[k]:Fr,[D]:[{[k]:Kt,[D]:[{[k]:Xk,[D]:j8}]}]}],error:"Custom endpoint `{Endpoint}` was not a valid URI",[I]:H},{[h]:[Ru,gD],rules:[{[h]:Tn,rules:[{[h]:Kk,rules:[{[h]:[lr,ik],error:"S3 Accelerate cannot be used in this region",[I]:H},{[h]:[ye,Qe,Ue,re,Le],endpoint:{[O]:"https://{Bucket}.s3-fips.dualstack.us-east-1.{partitionResult#dnsSuffix}",[G]:We,[q]:$},[I]:N},{[h]:[ye,Qe,Ue,re,ce,je],rules:[{endpoint:dk,[I]:N}],[I]:F},{[h]:[ye,Qe,Ue,re,ce,Xe],endpoint:dk,[I]:N},{[h]:[ae,Qe,Ue,re,Le],endpoint:{[O]:"https://{Bucket}.s3-fips.us-east-1.{partitionResult#dnsSuffix}",[G]:We,[q]:$},[I]:N},{[h]:[ae,Qe,Ue,re,ce,je],rules:[{endpoint:fk,[I]:N}],[I]:F},{[h]:[ae,Qe,Ue,re,ce,Xe],endpoint:fk,[I]:N},{[h]:[ye,se,lr,re,Le],endpoint:{[O]:"https://{Bucket}.s3-accelerate.dualstack.us-east-1.{partitionResult#dnsSuffix}",[G]:We,[q]:$},[I]:N},{[h]:[ye,se,lr,re,ce,je],rules:[{endpoint:uk,[I]:N}],[I]:F},{[h]:[ye,se,lr,re,ce,Xe],endpoint:uk,[I]:N},{[h]:[ye,se,Ue,re,Le],endpoint:{[O]:"https://{Bucket}.s3.dualstack.us-east-1.{partitionResult#dnsSuffix}",[G]:We,[q]:$},[I]:N},{[h]:[ye,se,Ue,re,ce,je],rules:[{endpoint:Ik,[I]:N}],[I]:F},{[h]:[ye,se,Ue,re,ce,Xe],endpoint:Ik,[I]:N},{[h]:[ae,se,Ue,Pe,Bt,Nc,Le],endpoint:{[O]:tD,[G]:We,[q]:$},[I]:N},{[h]:[ae,se,Ue,Pe,Bt,Tu,Le],endpoint:{[O]:Rc,[G]:We,[q]:$},[I]:N},{[h]:[ae,se,Ue,Pe,Bt,Nc,ce,je],rules:[{[h]:Nn,endpoint:Nu,[I]:N},{endpoint:Nu,[I]:N}],[I]:F},{[h]:[ae,se,Ue,Pe,Bt,Tu,ce,je],rules:[{[h]:Nn,endpoint:rI,[I]:N},pk],[I]:F},{[h]:[ae,se,Ue,Pe,Bt,Nc,ce,Xe],endpoint:Nu,[I]:N},{[h]:[ae,se,Ue,Pe,Bt,Tu,ce,Xe],endpoint:rI,[I]:N},{[h]:[ae,se,lr,re,Le],endpoint:{[O]:rD,[G]:We,[q]:$},[I]:N},{[h]:[ae,se,lr,re,ce,je],rules:[{[h]:Nn,endpoint:Mu,[I]:N},{endpoint:Mu,[I]:N}],[I]:F},{[h]:[ae,se,lr,re,ce,Xe],endpoint:Mu,[I]:N},{[h]:[ae,se,Ue,re,Le],endpoint:{[O]:Z0,[G]:We,[q]:$},[I]:N},{[h]:[ae,se,Ue,re,ce,je],rules:[{[h]:Nn,endpoint:{[O]:Z0,[G]:Oe,[q]:$},[I]:N},{endpoint:mk,[I]:N}],[I]:F},{[h]:[ae,se,Ue,re,ce,Xe],endpoint:mk,[I]:N}],[I]:F},Fc],[I]:F}],[I]:F},{[h]:[Pe,Bt,{[k]:Ie,[D]:[{[k]:Te,[D]:[cD,"scheme"]},"http"]},{[k]:Zk,[D]:[Ne,!0]},Ru,se,ae,Ue],rules:[{[h]:Tn,rules:[{[h]:Kk,rules:[pk],[I]:F},Fc],[I]:F}],[I]:F},{[h]:[Ru,{[k]:nD,[D]:X8,[pe]:oD}],rules:[{[h]:[{[k]:Te,[D]:[kt,"resourceId[0]"],[pe]:iD},{[k]:Fr,[D]:[{[k]:Ie,[D]:[dD,Uc]}]}],rules:[{[h]:[{[k]:Ie,[D]:[Uu,sI]}],rules:[{[h]:ju,rules:[{[h]:Jk,rules:[hk,Ck,{[h]:Xu,rules:[Bk,{[h]:Vk,rules:[Pu,{[h]:Zu,rules:[{[h]:Tn,rules:[{[h]:zk,rules:[{[h]:$u,rules:[{[h]:[{[k]:Ie,[D]:[uD,Uc]}],error:"Invalid ARN: Missing account id",[I]:H},{[h]:eI,rules:[{[h]:Yk,rules:[{[h]:fo,endpoint:{[O]:$0,[G]:Ou,[q]:$},[I]:N},{[h]:Ci,endpoint:{[O]:"https://{accessPointName}-{bucketArn#accountId}.s3-object-lambda-fips.{bucketArn#region}.{bucketPartition#dnsSuffix}",[G]:Ou,[q]:$},[I]:N},{endpoint:{[O]:"https://{accessPointName}-{bucketArn#accountId}.s3-object-lambda.{bucketArn#region}.{bucketPartition#dnsSuffix}",[G]:Ou,[q]:$},[I]:N}],[I]:F},Ek],[I]:F},Gu],[I]:F},qu],[I]:F},Hu],[I]:F}],[I]:F}],[I]:F},yk],[I]:F},{error:"Invalid ARN: bucket ARN is missing a region",[I]:H}],[I]:F},Qk],[I]:F},{error:"Invalid ARN: Object Lambda ARNs only support `accesspoint` arn types, but found: `{arnType}`",[I]:H}],[I]:F},{[h]:ju,rules:[{[h]:Jk,rules:[{[h]:Xu,rules:[{[h]:ju,rules:[{[h]:Xu,rules:[Bk,{[h]:Vk,rules:[Pu,{[h]:Zu,rules:[{[h]:Tn,rules:[{[h]:[{[k]:Ie,[D]:[fD,"{partitionResult#name}"]}],rules:[{[h]:$u,rules:[{[h]:[{[k]:Ie,[D]:[Uu,Bi]}],rules:[{[h]:eI,rules:[{[h]:Yk,rules:[{[h]:vc,error:"Access Points do not support S3 Accelerate",[I]:H},{[h]:[Qe,ye],endpoint:{[O]:"https://{accessPointName}-{bucketArn#accountId}.s3-accesspoint-fips.dualstack.{bucketArn#region}.{bucketPartition#dnsSuffix}",[G]:Ms,[q]:$},[I]:N},{[h]:[Qe,ae],endpoint:{[O]:"https://{accessPointName}-{bucketArn#accountId}.s3-accesspoint-fips.{bucketArn#region}.{bucketPartition#dnsSuffix}",[G]:Ms,[q]:$},[I]:N},{[h]:[se,ye],endpoint:{[O]:"https://{accessPointName}-{bucketArn#accountId}.s3-accesspoint.dualstack.{bucketArn#region}.{bucketPartition#dnsSuffix}",[G]:Ms,[q]:$},[I]:N},{[h]:[se,ae,Pe,Bt],endpoint:{[O]:$0,[G]:Ms,[q]:$},[I]:N},{[h]:[se,ae],endpoint:{[O]:"https://{accessPointName}-{bucketArn#accountId}.s3-accesspoint.{bucketArn#region}.{bucketPartition#dnsSuffix}",[G]:Ms,[q]:$},[I]:N}],[I]:F},Ek],[I]:F},Gu],[I]:F},{error:"Invalid ARN: The ARN was not for the S3 service, found: {bucketArn#service}",[I]:H}],[I]:F},qu],[I]:F},Hu],[I]:F}],[I]:F}],[I]:F},yk],[I]:F}],[I]:F}],[I]:F},{[h]:[{[k]:uo,[D]:[AI,!0]}],rules:[{[h]:zu,error:"S3 MRAP does not support dual-stack",[I]:H},{[h]:Ci,error:"S3 MRAP does not support FIPS",[I]:H},{[h]:vc,error:"S3 MRAP does not support S3 Accelerate",[I]:H},{[h]:[{[k]:Ze,[D]:[{[Y]:"DisableMultiRegionAccessPoints"},!0]}],error:"Invalid configuration: Multi-Region Access Point ARNs are disabled.",[I]:H},{[h]:[{[k]:Mc,[D]:Vu,[pe]:ek}],rules:[{[h]:[{[k]:Ie,[D]:[{[k]:Te,[D]:[{[Y]:ek},gt]},{[k]:Te,[D]:[kt,"partition"]}]}],rules:[{endpoint:{[O]:"https://{accessPointName}.accesspoint.s3-global.{mrapPartition#dnsSuffix}",[G]:{[gr]:[{[Ut]:!0,name:iI,[Pt]:Bi,[oI]:$8}]},[q]:$},[I]:N}],[I]:F},{error:"Client was configured for partition `{mrapPartition#name}` but bucket referred to partition `{bucketArn#partition}`",[I]:H}],[I]:F}],[I]:F},{error:"Invalid Access Point Name",[I]:H}],[I]:F},Qk],[I]:F},{[h]:[{[k]:Ie,[D]:[Uu,Os]}],rules:[{[h]:zu,error:"S3 Outposts does not support Dual-stack",[I]:H},{[h]:Ci,error:"S3 Outposts does not support FIPS",[I]:H},{[h]:vc,error:"S3 Outposts does not support S3 Accelerate",[I]:H},{[h]:[{[k]:Kt,[D]:[{[k]:Te,[D]:[kt,"resourceId[4]"]}]}],error:"Invalid Arn: Outpost Access Point ARN contains sub resources",[I]:H},{[h]:[{[k]:Te,[D]:e4,[pe]:tI}],rules:[{[h]:Hk,rules:[Pu,{[h]:Zu,rules:[{[h]:Tn,rules:[{[h]:zk,rules:[{[h]:$u,rules:[{[h]:eI,rules:[{[h]:[{[k]:Te,[D]:t4,[pe]:tk}],rules:[{[h]:[{[k]:Te,[D]:[kt,"resourceId[3]"],[pe]:aI}],rules:[{[h]:[{[k]:Ie,[D]:[{[Y]:tk},sD]}],rules:[{[h]:fo,endpoint:{[O]:"https://{accessPointName}-{bucketArn#accountId}.{outpostId}.{url#authority}",[G]:wk,[q]:$},[I]:N},{endpoint:{[O]:"https://{accessPointName}-{bucketArn#accountId}.{outpostId}.s3-outposts.{bucketArn#region}.{bucketPartition#dnsSuffix}",[G]:wk,[q]:$},[I]:N}],[I]:F},{error:"Expected an outpost type `accesspoint`, found {outpostType}",[I]:H}],[I]:F},{error:"Invalid ARN: expected an access point name",[I]:H}],[I]:F},{error:"Invalid ARN: Expected a 4-component resource",[I]:H}],[I]:F},Gu],[I]:F},qu],[I]:F},Hu],[I]:F}],[I]:F}],[I]:F},{error:"Invalid ARN: The outpost Id may only contain a-z, A-Z, 0-9 and `-`. Found: `{outpostId}`",[I]:H}],[I]:F},{error:"Invalid ARN: The Outpost Id was not set",[I]:H}],[I]:F},{error:"Invalid ARN: Unrecognized format: {Bucket} (type: {arnType})",[I]:H}],[I]:F},{error:"Invalid ARN: No ARN type specified",[I]:H}],[I]:F},{[h]:[{[k]:lt,[D]:[Ne,0,4,!1],[pe]:rk},{[k]:Ie,[D]:[{[Y]:rk},"arn:"]},{[k]:Fr,[D]:[{[k]:Kt,[D]:[Sk]}]}],error:"Invalid ARN: `{Bucket}` was not a valid ARN",[I]:H},{[h]:[{[k]:Ze,[D]:[W8,!0]},Sk],error:"Path-style addressing cannot be used with ARN buckets",[I]:H},{[h]:Yu,rules:[{[h]:Tn,rules:[{[h]:[Ue],rules:[{[h]:[ye,re,Qe,Le],endpoint:{[O]:"https://s3-fips.dualstack.us-east-1.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",[G]:We,[q]:$},[I]:N},{[h]:[ye,re,Qe,ce,je],rules:[{endpoint:xk,[I]:N}],[I]:F},{[h]:[ye,re,Qe,ce,Xe],endpoint:xk,[I]:N},{[h]:[ae,re,Qe,Le],endpoint:{[O]:"https://s3-fips.us-east-1.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",[G]:We,[q]:$},[I]:N},{[h]:[ae,re,Qe,ce,je],rules:[{endpoint:bk,[I]:N}],[I]:F},{[h]:[ae,re,Qe,ce,Xe],endpoint:bk,[I]:N},{[h]:[ye,re,se,Le],endpoint:{[O]:"https://s3.dualstack.us-east-1.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",[G]:We,[q]:$},[I]:N},{[h]:[ye,re,se,ce,je],rules:[{endpoint:kk,[I]:N}],[I]:F},{[h]:[ye,re,se,ce,Xe],endpoint:kk,[I]:N},{[h]:[ae,Pe,Bt,se,Le],endpoint:{[O]:aD,[G]:We,[q]:$},[I]:N},{[h]:[ae,Pe,Bt,se,ce,je],rules:[{[h]:Nn,endpoint:Lu,[I]:N},{endpoint:Lu,[I]:N}],[I]:F},{[h]:[ae,Pe,Bt,se,ce,Xe],endpoint:Lu,[I]:N},{[h]:[ae,re,se,Le],endpoint:{[O]:nk,[G]:We,[q]:$},[I]:N},{[h]:[ae,re,se,ce,je],rules:[{[h]:Nn,endpoint:{[O]:nk,[G]:Oe,[q]:$},[I]:N},{endpoint:Dk,[I]:N}],[I]:F},{[h]:[ae,re,se,ce,Xe],endpoint:Dk,[I]:N}],[I]:F},{error:"Path-style addressing cannot be used with S3 Accelerate",[I]:H}],[I]:F}],[I]:F}],[I]:F},{[h]:[{[k]:Kt,[D]:[_k]},{[k]:Ze,[D]:[_k,!0]}],rules:[{[h]:Tn,rules:[{[h]:Wk,rules:[hk,Ck,{[h]:fo,endpoint:{[O]:Tc,[G]:Ku,[q]:$},[I]:N},{[h]:Ci,endpoint:{[O]:"https://s3-object-lambda-fips.{Region}.{partitionResult#dnsSuffix}",[G]:Ku,[q]:$},[I]:N},{endpoint:{[O]:"https://s3-object-lambda.{Region}.{partitionResult#dnsSuffix}",[G]:Ku,[q]:$},[I]:N}],[I]:F},Fc],[I]:F}],[I]:F},{[h]:[ck],rules:[{[h]:Tn,rules:[{[h]:Wk,rules:[{[h]:[Qe,ye,re,Le],endpoint:{[O]:"https://s3-fips.dualstack.us-east-1.{partitionResult#dnsSuffix}",[G]:We,[q]:$},[I]:N},{[h]:[Qe,ye,re,ce,je],rules:[{endpoint:Fk,[I]:N}],[I]:F},{[h]:[Qe,ye,re,ce,Xe],endpoint:Fk,[I]:N},{[h]:[Qe,ae,re,Le],endpoint:{[O]:"https://s3-fips.us-east-1.{partitionResult#dnsSuffix}",[G]:We,[q]:$},[I]:N},{[h]:[Qe,ae,re,ce,je],rules:[{endpoint:vk,[I]:N}],[I]:F},{[h]:[Qe,ae,re,ce,Xe],endpoint:vk,[I]:N},{[h]:[se,ye,re,Le],endpoint:{[O]:"https://s3.dualstack.us-east-1.{partitionResult#dnsSuffix}",[G]:We,[q]:$},[I]:N},{[h]:[se,ye,re,ce,je],rules:[{endpoint:Rk,[I]:N}],[I]:F},{[h]:[se,ye,re,ce,Xe],endpoint:Rk,[I]:N},{[h]:[se,ae,Pe,Bt,Le],endpoint:{[O]:Tc,[G]:We,[q]:$},[I]:N},{[h]:[se,ae,Pe,Bt,ce,je],rules:[{[h]:Nn,endpoint:Ju,[I]:N},{endpoint:Ju,[I]:N}],[I]:F},{[h]:[se,ae,Pe,Bt,ce,Xe],endpoint:Ju,[I]:N},{[h]:[se,ae,re,Le],endpoint:{[O]:ok,[G]:We,[q]:$},[I]:N},{[h]:[se,ae,re,ce,je],rules:[{[h]:Nn,endpoint:{[O]:ok,[G]:Oe,[q]:$},[I]:N},{endpoint:Tk,[I]:N}],[I]:F},{[h]:[se,ae,re,ce,Xe],endpoint:Tk,[I]:N}],[I]:F},Fc],[I]:F}],[I]:F}],[I]:F},{error:"A region must be set when sending requests to S3.",[I]:H}]},ID=r4;var n4=new lc({size:50,params:["Accelerate","Bucket","DisableAccessPoints","DisableMultiRegionAccessPoints","DisableS3ExpressSessionAuth","Endpoint","ForcePathStyle","Region","UseArnRegion","UseDualStack","UseFIPS","UseGlobalEndpoint","UseObjectLambdaEndpoint","UseS3ExpressControlEndpoint"]}),Gc=(e,t={})=>n4.get(e,()=>mu(ID,{endpointParams:e,logger:t.logger}));co.aws=Cu;var o4=e=>async(t,r,n)=>{if(!n)throw new Error("Could not find `input` for `defaultEndpointRuleSetHttpAuthSchemeParametersProvider`");let o=await e(t,r,n),i=ar(r)?.commandInstance?.constructor?.getEndpointParameterInstructions;if(!i)throw new Error(`getEndpointParameterInstructions() is not defined on \`${r.commandName}\``);let s=await wu(n,{getEndpointParameterInstructions:i},t);return Object.assign(o,s)},i4=async(e,t,r)=>({operation:ar(t).operation,region:await ot(e.region)()||(()=>{throw new Error("expected `region` to be configured for `aws.auth#sigv4`")})()}),pD=o4(i4);function mD(e){return{schemeId:"aws.auth#sigv4",signingProperties:{name:"s3",region:e.region},propertiesExtractor:(t,r)=>({signingProperties:{config:t,context:r}})}}function hD(e){return{schemeId:"aws.auth#sigv4a",signingProperties:{name:"s3",region:e.region},propertiesExtractor:(t,r)=>({signingProperties:{config:t,context:r}})}}var s4=(e,t,r)=>o=>{let s=e(o).properties?.authSchemes;if(!s)return t(o);let a=[];for(let A of s){let{name:c,properties:l={},...g}=A,d=c.toLowerCase(),f;if(d==="sigv4a"){f="aws.auth#sigv4a";let C=s.find(p=>{let Q=p.name.toLowerCase();return Q!=="sigv4a"&&Q.startsWith("sigv4")});if(!kc.CrtSignerV4&&C)continue}else if(d.startsWith("sigv4"))f="aws.auth#sigv4";else throw new Error(`Unknown HttpAuthScheme found in \`@smithy.rules#endpointRuleSet\`: \`${d}\``);let u=r[f];if(!u)throw new Error(`Could not find HttpAuthOption create function for \`${f}\``);let m=u(o);m.schemeId=f,m.signingProperties={...m.signingProperties||{},...g,...l},a.push(m)}return a},a4=e=>{let t=[];switch(e.operation){default:t.push(mD(e)),t.push(hD(e))}return t},CD=s4(Gc,a4,{"aws.auth#sigv4":mD,"aws.auth#sigv4a":hD}),BD=e=>{let t=ix(e);return{...US(t)}};var ED=e=>({...e,useFipsEndpoint:e.useFipsEndpoint??!1,useDualstackEndpoint:e.useDualstackEndpoint??!1,forcePathStyle:e.forcePathStyle??!1,useAccelerateEndpoint:e.useAccelerateEndpoint??!1,useGlobalEndpoint:e.useGlobalEndpoint??!1,disableMultiregionAccessPoints:e.disableMultiregionAccessPoints??!1,defaultSigningName:"s3"}),qc={ForcePathStyle:{type:"clientContextParams",name:"forcePathStyle"},UseArnRegion:{type:"clientContextParams",name:"useArnRegion"},DisableMultiRegionAccessPoints:{type:"clientContextParams",name:"disableMultiregionAccessPoints"},Accelerate:{type:"clientContextParams",name:"useAccelerateEndpoint"},DisableS3ExpressSessionAuth:{type:"clientContextParams",name:"disableS3ExpressSessionAuth"},UseGlobalEndpoint:{type:"builtInParams",name:"useGlobalEndpoint"},UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}};var Ke=class e extends nc{constructor(t){super(t),Object.setPrototypeOf(this,e.prototype)}};var Hc=class e extends Ke{constructor(t){super({name:"NoSuchUpload",$fault:"client",...t}),this.name="NoSuchUpload",this.$fault="client",Object.setPrototypeOf(this,e.prototype)}};var Lc=class e extends Ke{constructor(t){super({name:"ObjectNotInActiveTierError",$fault:"client",...t}),this.name="ObjectNotInActiveTierError",this.$fault="client",Object.setPrototypeOf(this,e.prototype)}},Kc=class e extends Ke{constructor(t){super({name:"BucketAlreadyExists",$fault:"client",...t}),this.name="BucketAlreadyExists",this.$fault="client",Object.setPrototypeOf(this,e.prototype)}},Jc=class e extends Ke{constructor(t){super({name:"BucketAlreadyOwnedByYou",$fault:"client",...t}),this.name="BucketAlreadyOwnedByYou",this.$fault="client",Object.setPrototypeOf(this,e.prototype)}};var Vc=class e extends Ke{constructor(t){super({name:"NoSuchBucket",$fault:"client",...t}),this.name="NoSuchBucket",this.$fault="client",Object.setPrototypeOf(this,e.prototype)}},cI;(function(e){e.visit=(t,r)=>t.Prefix!==void 0?r.Prefix(t.Prefix):t.Tag!==void 0?r.Tag(t.Tag):t.And!==void 0?r.And(t.And):r._(t.$unknown[0],t.$unknown[1])})(cI||(cI={}));var lI;(function(e){e.visit=(t,r)=>t.Prefix!==void 0?r.Prefix(t.Prefix):t.Tag!==void 0?r.Tag(t.Tag):t.AccessPointArn!==void 0?r.AccessPointArn(t.AccessPointArn):t.And!==void 0?r.And(t.And):r._(t.$unknown[0],t.$unknown[1])})(lI||(lI={}));var zc=class e extends Ke{constructor(t){super({name:"InvalidObjectState",$fault:"client",...t}),this.name="InvalidObjectState",this.$fault="client",Object.setPrototypeOf(this,e.prototype),this.StorageClass=t.StorageClass,this.AccessTier=t.AccessTier}},Yc=class e extends Ke{constructor(t){super({name:"NoSuchKey",$fault:"client",...t}),this.name="NoSuchKey",this.$fault="client",Object.setPrototypeOf(this,e.prototype)}};var Wc=class e extends Ke{constructor(t){super({name:"NotFound",$fault:"client",...t}),this.name="NotFound",this.$fault="client",Object.setPrototypeOf(this,e.prototype)}};var A4=e=>({...e,...e.SecretAccessKey&&{SecretAccessKey:Mt},...e.SessionToken&&{SessionToken:Mt}}),yD=e=>({...e,...e.SSEKMSKeyId&&{SSEKMSKeyId:Mt},...e.SSEKMSEncryptionContext&&{SSEKMSEncryptionContext:Mt},...e.Credentials&&{Credentials:A4(e.Credentials)}}),QD=e=>({...e,...e.SSEKMSKeyId&&{SSEKMSKeyId:Mt},...e.SSEKMSEncryptionContext&&{SSEKMSEncryptionContext:Mt}});var jc=class e extends Ke{constructor(t){super({name:"EncryptionTypeMismatch",$fault:"client",...t}),this.name="EncryptionTypeMismatch",this.$fault="client",Object.setPrototypeOf(this,e.prototype)}},Xc=class e extends Ke{constructor(t){super({name:"InvalidRequest",$fault:"client",...t}),this.name="InvalidRequest",this.$fault="client",Object.setPrototypeOf(this,e.prototype)}},Zc=class e extends Ke{constructor(t){super({name:"InvalidWriteOffset",$fault:"client",...t}),this.name="InvalidWriteOffset",this.$fault="client",Object.setPrototypeOf(this,e.prototype)}},$c=class e extends Ke{constructor(t){super({name:"TooManyParts",$fault:"client",...t}),this.name="TooManyParts",this.$fault="client",Object.setPrototypeOf(this,e.prototype)}},el=class e extends Ke{constructor(t){super({name:"ObjectAlreadyInActiveTierError",$fault:"client",...t}),this.name="ObjectAlreadyInActiveTierError",this.$fault="client",Object.setPrototypeOf(this,e.prototype)}};var wD;(function(e){e.visit=(t,r)=>t.Records!==void 0?r.Records(t.Records):t.Stats!==void 0?r.Stats(t.Stats):t.Progress!==void 0?r.Progress(t.Progress):t.Cont!==void 0?r.Cont(t.Cont):t.End!==void 0?r.End(t.End):r._(t.$unknown[0],t.$unknown[1])})(wD||(wD={}));var SD=e=>({...e,...e.SSEKMSKeyId&&{SSEKMSKeyId:Mt},...e.SSEKMSEncryptionContext&&{SSEKMSEncryptionContext:Mt}}),xD=e=>({...e,...e.SSECustomerKey&&{SSECustomerKey:Mt},...e.SSEKMSKeyId&&{SSEKMSKeyId:Mt},...e.SSEKMSEncryptionContext&&{SSEKMSEncryptionContext:Mt}});var vD=async(e,t)=>{let r=JA(e,t),n=ve({},en,{[lV]:e[J4],[sl]:e[nl],[al]:e[il],[Al]:e[ol],[yi]:[()=>en(e[Ei]),()=>e[Ei].toString()]});r.bp("/"),r.p("Bucket",()=>e.Bucket,"{Bucket}",!1);let o=ve({[AV]:[,""]});return r.m("GET").h(n).q(o).b(void 0),r.build()};var RD=async(e,t)=>{let r=JA(e,t),n=ve({},en,{[nV]:e[v4]||"application/octet-stream",[cV]:e[S4],[X4]:e[b4],[Z4]:e[k4],[$4]:e[D4],[eV]:e[_4],[tV]:[()=>en(e[bD]),()=>e[bD].toString()],[rV]:e[F4],[QV]:e[x4],[LD]:e[UD],[KD]:e[PD],[JD]:e[OD],[VD]:e[GD],[oV]:[()=>en(e[kD]),()=>Bx(e[kD]).toString()],[sV]:e[O4],[aV]:e[G4],[fV]:e[N4],[uV]:e[M4],[IV]:e[U4],[pV]:e[P4],[bV]:[()=>en(e[_D]),()=>e[_D].toString()],[sl]:e[nl],[yV]:e[rl],[kV]:e[j4],[zD]:e[qD],[wV]:e[V4],[YD]:e[HD],[al]:e[il],[Al]:e[ol],[yi]:[()=>en(e[Ei]),()=>e[Ei].toString()],[EV]:e[K4],[SV]:e[Y4],[hV]:e[H4],[CV]:[()=>en(e[DD]),()=>Fx(e[DD]).toString()],[mV]:e[q4],[dV]:e[R4],...e.Metadata!==void 0&&Object.keys(e.Metadata).reduce((a,A)=>(a[`x-amz-meta-${A.toLowerCase()}`]=e.Metadata[A],a),{})});r.bp("/{Key+}"),r.p("Bucket",()=>e.Bucket,"{Bucket}",!1),r.p("Key",()=>e.Key,"{Key+}",!0);let o=ve({[DV]:[,"PutObject"]}),i,s;return e.Body!==void 0&&(s=e.Body,i=s),r.m("PUT").h(n).q(o).b(i),r.build()};var TD=async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return MD(e,t);let r=ve({$metadata:Et(e),[nl]:[,e.headers[sl]],[il]:[,e.headers[al]],[ol]:[,e.headers[Al]],[Ei]:[()=>e.headers[yi]!==void 0,()=>jf(e.headers[yi])]}),n=Xf(dx(await au(e.body,t)),"body");return n[fI]!=null&&(r[fI]=w4(n[fI],t)),r};var ND=async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return MD(e,t);let r=ve({$metadata:Et(e),[tl]:[,e.headers[gV]],[T4]:[,e.headers[iV]],[UD]:[,e.headers[LD]],[PD]:[,e.headers[KD]],[OD]:[,e.headers[JD]],[GD]:[,e.headers[VD]],[nl]:[,e.headers[sl]],[W4]:[,e.headers[xV]],[qD]:[,e.headers[zD]],[HD]:[,e.headers[YD]],[il]:[,e.headers[al]],[ol]:[,e.headers[Al]],[Ei]:[()=>e.headers[yi]!==void 0,()=>jf(e.headers[yi])],[z4]:[()=>e.headers[FD]!==void 0,()=>ux(e.headers[FD])],[L4]:[,e.headers[BV]]});return await Bs(e.body,t),r};var MD=async(e,t)=>{let r={...e,body:await db(e.body,t)},n=fb(e,r.body);switch(n){case"NoSuchUpload":case"com.amazonaws.s3#NoSuchUpload":throw await C4(r,t);case"ObjectNotInActiveTierError":case"com.amazonaws.s3#ObjectNotInActiveTierError":throw await y4(r,t);case"BucketAlreadyExists":case"com.amazonaws.s3#BucketAlreadyExists":throw await g4(r,t);case"BucketAlreadyOwnedByYou":case"com.amazonaws.s3#BucketAlreadyOwnedByYou":throw await d4(r,t);case"NoSuchBucket":case"com.amazonaws.s3#NoSuchBucket":throw await m4(r,t);case"InvalidObjectState":case"com.amazonaws.s3#InvalidObjectState":throw await u4(r,t);case"NoSuchKey":case"com.amazonaws.s3#NoSuchKey":throw await h4(r,t);case"NotFound":case"com.amazonaws.s3#NotFound":throw await B4(r,t);case"EncryptionTypeMismatch":case"com.amazonaws.s3#EncryptionTypeMismatch":throw await f4(r,t);case"InvalidRequest":case"com.amazonaws.s3#InvalidRequest":throw await I4(r,t);case"InvalidWriteOffset":case"com.amazonaws.s3#InvalidWriteOffset":throw await p4(r,t);case"TooManyParts":case"com.amazonaws.s3#TooManyParts":throw await Q4(r,t);case"ObjectAlreadyInActiveTierError":case"com.amazonaws.s3#ObjectAlreadyInActiveTierError":throw await E4(r,t);default:let o=r.body;return l4({output:e,parsedBody:o,errorCode:n})}},l4=Qx(Ke),g4=async(e,t)=>{let r=ve({}),n=e.body,o=new Kc({$metadata:Et(e),...r});return ct(o,e.body)},d4=async(e,t)=>{let r=ve({}),n=e.body,o=new Jc({$metadata:Et(e),...r});return ct(o,e.body)},f4=async(e,t)=>{let r=ve({}),n=e.body,o=new jc({$metadata:Et(e),...r});return ct(o,e.body)},u4=async(e,t)=>{let r=ve({}),n=e.body;n[dI]!=null&&(r[dI]=si(n[dI])),n[rl]!=null&&(r[rl]=si(n[rl]));let o=new zc({$metadata:Et(e),...r});return ct(o,e.body)},I4=async(e,t)=>{let r=ve({}),n=e.body,o=new Xc({$metadata:Et(e),...r});return ct(o,e.body)},p4=async(e,t)=>{let r=ve({}),n=e.body,o=new Zc({$metadata:Et(e),...r});return ct(o,e.body)},m4=async(e,t)=>{let r=ve({}),n=e.body,o=new Vc({$metadata:Et(e),...r});return ct(o,e.body)},h4=async(e,t)=>{let r=ve({}),n=e.body,o=new Yc({$metadata:Et(e),...r});return ct(o,e.body)},C4=async(e,t)=>{let r=ve({}),n=e.body,o=new Hc({$metadata:Et(e),...r});return ct(o,e.body)},B4=async(e,t)=>{let r=ve({}),n=e.body,o=new Wc({$metadata:Et(e),...r});return ct(o,e.body)},E4=async(e,t)=>{let r=ve({}),n=e.body,o=new el({$metadata:Et(e),...r});return ct(o,e.body)},y4=async(e,t)=>{let r=ve({}),n=e.body,o=new Lc({$metadata:Et(e),...r});return ct(o,e.body)},Q4=async(e,t)=>{let r=ve({}),n=e.body,o=new $c({$metadata:Et(e),...r});return ct(o,e.body)};var w4=(e,t)=>{let r={};return e[gI]!=null&&(r[gI]=si(e[gI])),e[uI]!=null&&(r[uI]=si(e[uI])),e[II]!=null&&(r[II]=si(e[II])),e[tl]!=null&&(r[tl]=Xf(Ex(e[tl]))),r};var Et=e=>({httpStatusCode:e.statusCode,requestId:e.headers["x-amzn-requestid"]??e.headers["x-amzn-request-id"]??e.headers["x-amz-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]});var S4="ACL";var gI="AccessKeyId";var dI="AccessTier";var Ei="BucketKeyEnabled";var fI="Credentials",x4="ChecksumAlgorithm";var b4="CacheControl",UD="ChecksumCRC32",PD="ChecksumCRC32C",k4="ContentDisposition";var D4="ContentEncoding";var _4="ContentLanguage",bD="ContentLength";var F4="ContentMD5";var OD="ChecksumSHA1",GD="ChecksumSHA256";var v4="ContentType";var kD="Expires";var R4="ExpectedBucketOwner";var T4="ETag";var tl="Expiration";var N4="GrantFullControl";var M4="GrantRead",U4="GrantReadACP";var P4="GrantWriteACP";var O4="IfMatch";var G4="IfNoneMatch";var q4="ObjectLockLegalHoldStatus",H4="ObjectLockMode";var DD="ObjectLockRetainUntilDate";var L4="RequestCharged";var K4="RequestPayer";var uI="SecretAccessKey";var rl="StorageClass";var J4="SessionMode";var nl="ServerSideEncryption";var qD="SSECustomerAlgorithm",V4="SSECustomerKey",HD="SSECustomerKeyMD5";var ol="SSEKMSEncryptionContext",il="SSEKMSKeyId";var II="SessionToken";var z4="Size";var Y4="Tagging";var W4="VersionId";var _D="WriteOffsetBytes",j4="WebsiteRedirectLocation";var X4="cache-control",Z4="content-disposition",$4="content-encoding",eV="content-language",tV="content-length",rV="content-md5";var nV="content-type";var oV="expires";var iV="etag";var sV="if-match";var aV="if-none-match";var AV="session";var cV="x-amz-acl";var LD="x-amz-checksum-crc32",KD="x-amz-checksum-crc32c";var JD="x-amz-checksum-sha1",VD="x-amz-checksum-sha256";var lV="x-amz-create-session-mode";var gV="x-amz-expiration",dV="x-amz-expected-bucket-owner";var fV="x-amz-grant-full-control",uV="x-amz-grant-read",IV="x-amz-grant-read-acp";var pV="x-amz-grant-write-acp";var mV="x-amz-object-lock-legal-hold",hV="x-amz-object-lock-mode",CV="x-amz-object-lock-retain-until-date";var FD="x-amz-object-size";var BV="x-amz-request-charged";var EV="x-amz-request-payer";var yV="x-amz-storage-class",QV="x-amz-sdk-checksum-algorithm";var sl="x-amz-server-side-encryption",al="x-amz-server-side-encryption-aws-kms-key-id",yi="x-amz-server-side-encryption-bucket-key-enabled",Al="x-amz-server-side-encryption-context",zD="x-amz-server-side-encryption-customer-algorithm",wV="x-amz-server-side-encryption-customer-key",YD="x-amz-server-side-encryption-customer-key-md5",SV="x-amz-tagging";var xV="x-amz-version-id",bV="x-amz-write-offset-bytes",kV="x-amz-website-redirect-location",DV="x-id";var cl=class extends io.classBuilder().ep({...qc,DisableS3ExpressSessionAuth:{type:"staticContextParams",value:!0},Bucket:{type:"contextParams",name:"Bucket"}}).m(function(t,r,n,o){return[PA(n,this.serialize,this.deserialize),yc(n,t.getEndpointParameterInstructions()),cc(n)]}).s("AmazonS3","CreateSession",{}).n("S3Client","CreateSessionCommand").f(QD,yD).ser(vD).de(TD).build(){};var WD={name:"@aws-sdk/client-s3",description:"AWS SDK for JavaScript S3 Client for Node.js, Browser and React Native",version:"3.705.0",scripts:{build:"concurrently 'yarn:build:cjs' 'yarn:build:es' 'yarn:build:types'","build:cjs":"node ../../scripts/compilation/inline client-s3","build:es":"tsc -p tsconfig.es.json","build:include:deps":"lerna run --scope $npm_package_name --include-dependencies build","build:types":"tsc -p tsconfig.types.json","build:types:downlevel":"downlevel-dts dist-types dist-types/ts3.4",clean:"rimraf ./dist-* && rimraf *.tsbuildinfo","extract:docs":"api-extractor run --local","generate:client":"node ../../scripts/generate-clients/single-service --solo s3",test:"yarn g:vitest run","test:browser":"node ./test/browser-build/esbuild && vitest run -c vitest.config.browser.ts --mode development","test:browser:watch":"node ./test/browser-build/esbuild && yarn g:vitest watch -c vitest.config.browser.ts","test:e2e":"yarn g:vitest run -c vitest.config.e2e.ts --mode development && yarn test:browser","test:e2e:watch":"yarn g:vitest watch -c vitest.config.e2e.ts","test:watch":"yarn g:vitest watch"},main:"./dist-cjs/index.js",types:"./dist-types/index.d.ts",module:"./dist-es/index.js",sideEffects:!1,dependencies:{"@aws-crypto/sha1-browser":"5.2.0","@aws-crypto/sha256-browser":"5.2.0","@aws-crypto/sha256-js":"5.2.0","@aws-sdk/client-sso-oidc":"3.699.0","@aws-sdk/client-sts":"3.699.0","@aws-sdk/core":"3.696.0","@aws-sdk/credential-provider-node":"3.699.0","@aws-sdk/middleware-bucket-endpoint":"3.696.0","@aws-sdk/middleware-expect-continue":"3.696.0","@aws-sdk/middleware-flexible-checksums":"3.701.0","@aws-sdk/middleware-host-header":"3.696.0","@aws-sdk/middleware-location-constraint":"3.696.0","@aws-sdk/middleware-logger":"3.696.0","@aws-sdk/middleware-recursion-detection":"3.696.0","@aws-sdk/middleware-sdk-s3":"3.696.0","@aws-sdk/middleware-ssec":"3.696.0","@aws-sdk/middleware-user-agent":"3.696.0","@aws-sdk/region-config-resolver":"3.696.0","@aws-sdk/signature-v4-multi-region":"3.696.0","@aws-sdk/types":"3.696.0","@aws-sdk/util-endpoints":"3.696.0","@aws-sdk/util-user-agent-browser":"3.696.0","@aws-sdk/util-user-agent-node":"3.696.0","@aws-sdk/xml-builder":"3.696.0","@smithy/config-resolver":"^3.0.12","@smithy/core":"^2.5.3","@smithy/eventstream-serde-browser":"^3.0.13","@smithy/eventstream-serde-config-resolver":"^3.0.10","@smithy/eventstream-serde-node":"^3.0.12","@smithy/fetch-http-handler":"^4.1.1","@smithy/hash-blob-browser":"^3.1.9","@smithy/hash-node":"^3.0.10","@smithy/hash-stream-node":"^3.1.9","@smithy/invalid-dependency":"^3.0.10","@smithy/md5-js":"^3.0.10","@smithy/middleware-content-length":"^3.0.12","@smithy/middleware-endpoint":"^3.2.3","@smithy/middleware-retry":"^3.0.27","@smithy/middleware-serde":"^3.0.10","@smithy/middleware-stack":"^3.0.10","@smithy/node-config-provider":"^3.1.11","@smithy/node-http-handler":"^3.3.1","@smithy/protocol-http":"^4.1.7","@smithy/smithy-client":"^3.4.4","@smithy/types":"^3.7.1","@smithy/url-parser":"^3.0.10","@smithy/util-base64":"^3.0.0","@smithy/util-body-length-browser":"^3.0.0","@smithy/util-body-length-node":"^3.0.0","@smithy/util-defaults-mode-browser":"^3.0.27","@smithy/util-defaults-mode-node":"^3.0.27","@smithy/util-endpoints":"^2.1.6","@smithy/util-middleware":"^3.0.10","@smithy/util-retry":"^3.0.10","@smithy/util-stream":"^3.3.1","@smithy/util-utf8":"^3.0.0","@smithy/util-waiter":"^3.1.9",tslib:"^2.6.2"},devDependencies:{"@aws-sdk/signature-v4-crt":"3.696.0","@tsconfig/node16":"16.1.3","@types/node":"^16.18.96",concurrently:"7.0.0","downlevel-dts":"0.10.1",rimraf:"3.0.2",typescript:"~4.9.5"},engines:{node:">=16.0.0"},typesVersions:{"<4.0":{"dist-types/*":["dist-types/ts3.4/*"]}},files:["dist-*/**"],author:{name:"AWS SDK for JavaScript Team",url:"https://aws.amazon.com/javascript/"},license:"Apache-2.0",browser:{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.browser"},"react-native":{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.native"},homepage:"https://github.com/aws/aws-sdk-js-v3/tree/main/clients/client-s3",repository:{type:"git",url:"https://github.com/aws/aws-sdk-js-v3.git",directory:"clients/client-s3"}};var pI=e=>new TextEncoder().encode(e);function mI(e){return typeof e=="string"?e.length===0:e.byteLength===0}var hI={name:"SHA-1"},CI={name:"HMAC",hash:hI},jD=new Uint8Array([218,57,163,238,94,107,75,13,50,85,191,239,149,96,24,144,175,216,7,9]);var FV={};function Jt(){return typeof window<"u"?window:typeof self<"u"?self:FV}var BI=function(){function e(t){this.toHash=new Uint8Array(0),t!==void 0&&(this.key=new Promise(function(r,n){Jt().crypto.subtle.importKey("raw",XD(t),CI,!1,["sign"]).then(r,n)}),this.key.catch(function(){}))}return e.prototype.update=function(t){if(!mI(t)){var r=XD(t),n=new Uint8Array(this.toHash.byteLength+r.byteLength);n.set(this.toHash,0),n.set(r,this.toHash.byteLength),this.toHash=n}},e.prototype.digest=function(){var t=this;return this.key?this.key.then(function(r){return Jt().crypto.subtle.sign(CI,r,t.toHash).then(function(n){return new Uint8Array(n)})}):mI(this.toHash)?Promise.resolve(jD):Promise.resolve().then(function(){return Jt().crypto.subtle.digest(hI,t.toHash)}).then(function(r){return Promise.resolve(new Uint8Array(r))})},e.prototype.reset=function(){this.toHash=new Uint8Array(0)},e}();function XD(e){return typeof e=="string"?pI(e):ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(e)}var vV=["decrypt","digest","encrypt","exportKey","generateKey","importKey","sign","verify"];function ll(e){if(RV(e)&&typeof e.crypto.subtle=="object"){var t=e.crypto.subtle;return TV(t)}return!1}function RV(e){if(typeof e=="object"&&typeof e.crypto=="object"){var t=e.crypto.getRandomValues;return typeof t=="function"}return!1}function TV(e){return e&&vV.every(function(t){return typeof e[t]=="function"})}var ZD=function(){function e(t){if(ll(Jt()))this.hash=new BI(t);else throw new Error("SHA1 not supported")}return e.prototype.update=function(t,r){this.hash.update(Ct(t))},e.prototype.digest=function(){return this.hash.digest()},e.prototype.reset=function(){this.hash.reset()},e}();var EI={name:"SHA-256"},yI={name:"HMAC",hash:EI},$D=new Uint8Array([227,176,196,66,152,252,28,20,154,251,244,200,153,111,185,36,39,174,65,228,100,155,147,76,164,149,153,27,120,82,184,85]);var QI=function(){function e(t){this.toHash=new Uint8Array(0),this.secret=t,this.reset()}return e.prototype.update=function(t){if(!_r(t)){var r=Ct(t),n=new Uint8Array(this.toHash.byteLength+r.byteLength);n.set(this.toHash,0),n.set(r,this.toHash.byteLength),this.toHash=n}},e.prototype.digest=function(){var t=this;return this.key?this.key.then(function(r){return Jt().crypto.subtle.sign(yI,r,t.toHash).then(function(n){return new Uint8Array(n)})}):_r(this.toHash)?Promise.resolve($D):Promise.resolve().then(function(){return Jt().crypto.subtle.digest(EI,t.toHash)}).then(function(r){return Promise.resolve(new Uint8Array(r))})},e.prototype.reset=function(){var t=this;this.toHash=new Uint8Array(0),this.secret&&this.secret!==void 0&&(this.key=new Promise(function(r,n){Jt().crypto.subtle.importKey("raw",Ct(t.secret),yI,!1,["sign"]).then(r,n)}),this.key.catch(function(){}))},e}();var Dt=64,e_=32,t_=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),r_=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],n_=Math.pow(2,53)-1;var Gs=function(){function e(){this.state=Int32Array.from(r_),this.temp=new Int32Array(64),this.buffer=new Uint8Array(64),this.bufferLength=0,this.bytesHashed=0,this.finished=!1}return e.prototype.update=function(t){if(this.finished)throw new Error("Attempted to update an already finished hash.");var r=0,n=t.byteLength;if(this.bytesHashed+=n,this.bytesHashed*8>n_)throw new Error("Cannot hash more than 2^53 - 1 bits");for(;n>0;)this.buffer[this.bufferLength++]=t[r++],n--,this.bufferLength===Dt&&(this.hashBuffer(),this.bufferLength=0)},e.prototype.digest=function(){if(!this.finished){var t=this.bytesHashed*8,r=new DataView(this.buffer.buffer,this.buffer.byteOffset,this.buffer.byteLength),n=this.bufferLength;if(r.setUint8(this.bufferLength++,128),n%Dt>=Dt-8){for(var o=this.bufferLength;o<Dt;o++)r.setUint8(o,0);this.hashBuffer(),this.bufferLength=0}for(var o=this.bufferLength;o<Dt-8;o++)r.setUint8(o,0);r.setUint32(Dt-8,Math.floor(t/4294967296),!0),r.setUint32(Dt-4,t),this.hashBuffer(),this.finished=!0}for(var i=new Uint8Array(e_),o=0;o<8;o++)i[o*4]=this.state[o]>>>24&255,i[o*4+1]=this.state[o]>>>16&255,i[o*4+2]=this.state[o]>>>8&255,i[o*4+3]=this.state[o]>>>0&255;return i},e.prototype.hashBuffer=function(){for(var t=this,r=t.buffer,n=t.state,o=n[0],i=n[1],s=n[2],a=n[3],A=n[4],c=n[5],l=n[6],g=n[7],d=0;d<Dt;d++){if(d<16)this.temp[d]=(r[d*4]&255)<<24|(r[d*4+1]&255)<<16|(r[d*4+2]&255)<<8|r[d*4+3]&255;else{var f=this.temp[d-2],u=(f>>>17|f<<15)^(f>>>19|f<<13)^f>>>10;f=this.temp[d-15];var m=(f>>>7|f<<25)^(f>>>18|f<<14)^f>>>3;this.temp[d]=(u+this.temp[d-7]|0)+(m+this.temp[d-16]|0)}var C=(((A>>>6|A<<26)^(A>>>11|A<<21)^(A>>>25|A<<7))+(A&c^~A&l)|0)+(g+(t_[d]+this.temp[d]|0)|0)|0,p=((o>>>2|o<<30)^(o>>>13|o<<19)^(o>>>22|o<<10))+(o&i^o&s^i&s)|0;g=l,l=c,c=A,A=a+C|0,a=s,s=i,i=o,o=C+p|0}n[0]+=o,n[1]+=i,n[2]+=s,n[3]+=a,n[4]+=A,n[5]+=c,n[6]+=l,n[7]+=g},e}();var o_=function(){function e(t){this.secret=t,this.hash=new Gs,this.reset()}return e.prototype.update=function(t){if(!(_r(t)||this.error))try{this.hash.update(Ct(t))}catch(r){this.error=r}},e.prototype.digestSync=function(){if(this.error)throw this.error;return this.outer?(this.outer.finished||this.outer.update(this.hash.digest()),this.outer.digest()):this.hash.digest()},e.prototype.digest=function(){return wn(this,void 0,void 0,function(){return Sr(this,function(t){return[2,this.digestSync()]})})},e.prototype.reset=function(){if(this.hash=new Gs,this.secret){this.outer=new Gs;var t=NV(this.secret),r=new Uint8Array(Dt);r.set(t);for(var n=0;n<Dt;n++)t[n]^=54,r[n]^=92;this.hash.update(t),this.outer.update(r);for(var n=0;n<t.byteLength;n++)t[n]=0}},e}();function NV(e){var t=Ct(e);if(t.byteLength>Dt){var r=new Gs;r.update(t),t=r.digest()}var n=new Uint8Array(Dt);return n.set(t),n}var i_=function(){function e(t){ll(Jt())?this.hash=new QI(t):this.hash=new o_(t)}return e.prototype.update=function(t,r){this.hash.update(Ct(t))},e.prototype.digest=function(){return this.hash.digest()},e.prototype.reset=function(){this.hash.reset()},e}();var s_=V(SI()),a_=({serviceId:e,clientVersion:t})=>async r=>{let n=typeof window<"u"&&window?.navigator?.userAgent?s_.default.parse(window.navigator.userAgent):void 0,o=[["aws-sdk-js",t],["ua","2.1"],[`os/${n?.os?.name||"other"}`,n?.os?.version],["lang/js"],["md/browser",`${n?.browser?.name??"unknown"}_${n?.browser?.version??"unknown"}`]];e&&o.push([`api/${e}`,t]);let i=await r?.userAgentAppId?.();return i&&o.push([`app/${i}`]),o};var Qi=class e{constructor(t){if(this.bytes=t,t.byteLength!==8)throw new Error("Int64 buffers must be exactly 8 bytes")}static fromNumber(t){if(t>9223372036854776e3||t<-9223372036854776e3)throw new Error(`${t} is too large (or, if negative, too small) to represent as an Int64`);let r=new Uint8Array(8);for(let n=7,o=Math.abs(Math.round(t));n>-1&&o>0;n--,o/=256)r[n]=o;return t<0&&A_(r),new e(r)}valueOf(){let t=this.bytes.slice(0),r=t[0]&128;return r&&A_(t),parseInt(Fe(t),16)*(r?-1:1)}toString(){return String(this.valueOf())}};function A_(e){for(let t=0;t<8;t++)e[t]^=255;for(let t=7;t>-1&&(e[t]++,e[t]===0);t--);}var gl=class{constructor(t,r){this.toUtf8=t,this.fromUtf8=r}format(t){let r=[];for(let i of Object.keys(t)){let s=this.fromUtf8(i);r.push(Uint8Array.from([s.byteLength]),s,this.formatHeaderValue(t[i]))}let n=new Uint8Array(r.reduce((i,s)=>i+s.byteLength,0)),o=0;for(let i of r)n.set(i,o),o+=i.byteLength;return n}formatHeaderValue(t){switch(t.type){case"boolean":return Uint8Array.from([t.value?0:1]);case"byte":return Uint8Array.from([2,t.value]);case"short":let r=new DataView(new ArrayBuffer(3));return r.setUint8(0,3),r.setInt16(1,t.value,!1),new Uint8Array(r.buffer);case"integer":let n=new DataView(new ArrayBuffer(5));return n.setUint8(0,4),n.setInt32(1,t.value,!1),new Uint8Array(n.buffer);case"long":let o=new Uint8Array(9);return o[0]=5,o.set(t.value.bytes,1),o;case"binary":let i=new DataView(new ArrayBuffer(3+t.value.byteLength));i.setUint8(0,6),i.setUint16(1,t.value.byteLength,!1);let s=new Uint8Array(i.buffer);return s.set(t.value,3),s;case"string":let a=this.fromUtf8(t.value),A=new DataView(new ArrayBuffer(3+a.byteLength));A.setUint8(0,7),A.setUint16(1,a.byteLength,!1);let c=new Uint8Array(A.buffer);return c.set(a,3),c;case"timestamp":let l=new Uint8Array(9);return l[0]=8,l.set(Qi.fromNumber(t.value.valueOf()).bytes,1),l;case"uuid":if(!KV.test(t.value))throw new Error(`Invalid UUID received: ${t.value}`);let g=new Uint8Array(17);return g[0]=9,g.set(HA(t.value.replace(/\-/g,"")),1),g}}parse(t){let r={},n=0;for(;n<t.byteLength;){let o=t.getUint8(n++),i=this.toUtf8(new Uint8Array(t.buffer,t.byteOffset+n,o));switch(n+=o,t.getUint8(n++)){case 0:r[i]={type:l_,value:!0};break;case 1:r[i]={type:l_,value:!1};break;case 2:r[i]={type:MV,value:t.getInt8(n++)};break;case 3:r[i]={type:UV,value:t.getInt16(n,!1)},n+=2;break;case 4:r[i]={type:PV,value:t.getInt32(n,!1)},n+=4;break;case 5:r[i]={type:OV,value:new Qi(new Uint8Array(t.buffer,t.byteOffset+n,8))},n+=8;break;case 6:let s=t.getUint16(n,!1);n+=2,r[i]={type:GV,value:new Uint8Array(t.buffer,t.byteOffset+n,s)},n+=s;break;case 7:let a=t.getUint16(n,!1);n+=2,r[i]={type:qV,value:this.toUtf8(new Uint8Array(t.buffer,t.byteOffset+n,a))},n+=a;break;case 8:r[i]={type:HV,value:new Date(new Qi(new Uint8Array(t.buffer,t.byteOffset+n,8)).valueOf())},n+=8;break;case 9:let A=new Uint8Array(t.buffer,t.byteOffset+n,16);n+=16,r[i]={type:LV,value:`${Fe(A.subarray(0,4))}-${Fe(A.subarray(4,6))}-${Fe(A.subarray(6,8))}-${Fe(A.subarray(8,10))}-${Fe(A.subarray(10))}`};break;default:throw new Error("Unrecognized header type tag")}}return r}},c_;(function(e){e[e.boolTrue=0]="boolTrue",e[e.boolFalse=1]="boolFalse",e[e.byte=2]="byte",e[e.short=3]="short",e[e.integer=4]="integer",e[e.long=5]="long",e[e.byteArray=6]="byteArray",e[e.string=7]="string",e[e.timestamp=8]="timestamp",e[e.uuid=9]="uuid"})(c_||(c_={}));var l_="boolean",MV="byte",UV="short",PV="integer",OV="long",GV="binary",qV="string",HV="timestamp",LV="uuid",KV=/^[a-f0-9]{8}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{12}$/;var g_=4,Mn=g_*2,Io=4,JV=Mn+Io*2;function d_({byteLength:e,byteOffset:t,buffer:r}){if(e<JV)throw new Error("Provided message too short to accommodate event stream message overhead");let n=new DataView(r,t,e),o=n.getUint32(0,!1);if(e!==o)throw new Error("Reported message length does not match received message length");let i=n.getUint32(g_,!1),s=n.getUint32(Mn,!1),a=n.getUint32(e-Io,!1),A=new ao().update(new Uint8Array(r,t,Mn));if(s!==A.digest())throw new Error(`The prelude checksum specified in the message (${s}) does not match the calculated CRC32 checksum (${A.digest()})`);if(A.update(new Uint8Array(r,t+Mn,e-(Mn+Io))),a!==A.digest())throw new Error(`The message checksum (${A.digest()}) did not match the expected value of ${a}`);return{headers:new DataView(r,t+Mn+Io,i),body:new Uint8Array(r,t+Mn+Io+i,o-i-(Mn+Io+Io))}}var dl=class{constructor(t,r){this.headerMarshaller=new gl(t,r),this.messageBuffer=[],this.isEndOfStream=!1}feed(t){this.messageBuffer.push(this.decode(t))}endOfStream(){this.isEndOfStream=!0}getMessage(){let t=this.messageBuffer.pop(),r=this.isEndOfStream;return{getMessage(){return t},isEndOfStream(){return r}}}getAvailableMessages(){let t=this.messageBuffer;this.messageBuffer=[];let r=this.isEndOfStream;return{getMessages(){return t},isEndOfStream(){return r}}}encode({headers:t,body:r}){let n=this.headerMarshaller.format(t),o=n.byteLength+r.byteLength+16,i=new Uint8Array(o),s=new DataView(i.buffer,i.byteOffset,i.byteLength),a=new ao;return s.setUint32(0,o,!1),s.setUint32(4,n.byteLength,!1),s.setUint32(8,a.update(i.subarray(0,8)).digest(),!1),i.set(n,12),i.set(r,n.byteLength+12),s.setUint32(o-4,a.update(i.subarray(8,o-4)).digest(),!1),i}decode(t){let{headers:r,body:n}=d_(t);return{headers:this.headerMarshaller.parse(r),body:n}}formatHeaders(t){return this.headerMarshaller.format(t)}};var fl=class{constructor(t){this.options=t}[Symbol.asyncIterator](){return this.asyncIterator()}async*asyncIterator(){for await(let t of this.options.inputStream)yield this.options.decoder.decode(t)}};var ul=class{constructor(t){this.options=t}[Symbol.asyncIterator](){return this.asyncIterator()}async*asyncIterator(){for await(let t of this.options.messageStream)yield this.options.encoder.encode(t);this.options.includeEndFrame&&(yield new Uint8Array(0))}};var Il=class{constructor(t){this.options=t}[Symbol.asyncIterator](){return this.asyncIterator()}async*asyncIterator(){for await(let t of this.options.messageStream){let r=await this.options.deserializer(t);r!==void 0&&(yield r)}}};var pl=class{constructor(t){this.options=t}[Symbol.asyncIterator](){return this.asyncIterator()}async*asyncIterator(){for await(let t of this.options.inputStream)yield this.options.serializer(t)}};function f_(e){let t=0,r=0,n=null,o=null,i=a=>{if(typeof a!="number")throw new Error("Attempted to allocate an event message where size was not a number: "+a);t=a,r=4,n=new Uint8Array(a),new DataView(n.buffer).setUint32(0,a,!1)},s=async function*(){let a=e[Symbol.asyncIterator]();for(;;){let{value:A,done:c}=await a.next();if(c){if(t)if(t===r)yield n;else throw new Error("Truncated event message received.");else return;return}let l=A.length,g=0;for(;g<l;){if(!n){let f=l-g;o||(o=new Uint8Array(4));let u=Math.min(4-r,f);if(o.set(A.slice(g,g+u),r),r+=u,g+=u,r<4)break;i(new DataView(o.buffer).getUint32(0,!1)),o=null}let d=Math.min(t-r,l-g);n.set(A.slice(g,g+d),r),r+=d,g+=d,t&&t===r&&(yield n,n=null,t=0,r=0)}}};return{[Symbol.asyncIterator]:s}}function u_(e,t){return async function(r){let{value:n}=r.headers[":message-type"];if(n==="error"){let o=new Error(r.headers[":error-message"].value||"UnknownError");throw o.name=r.headers[":error-code"].value,o}else if(n==="exception"){let o=r.headers[":exception-type"].value,i={[o]:r},s=await e(i);if(s.$unknown){let a=new Error(t(r.body));throw a.name=o,a}throw s[o]}else if(n==="event"){let o={[r.headers[":event-type"].value]:r},i=await e(o);return i.$unknown?void 0:i}else throw Error(`Unrecognizable event type: ${r.headers[":event-type"].value}`)}}var Hs=class{constructor({utf8Encoder:t,utf8Decoder:r}){this.eventStreamCodec=new dl(t,r),this.utfEncoder=t}deserialize(t,r){let n=f_(t);return new Il({messageStream:new fl({inputStream:n,decoder:this.eventStreamCodec}),deserializer:u_(r,this.utfEncoder)})}serialize(t,r){return new ul({messageStream:new pl({inputStream:t,serializer:r}),encoder:this.eventStreamCodec,includeEndFrame:!0})}};var I_=e=>({[Symbol.asyncIterator]:async function*(){let t=e.getReader();try{for(;;){let{done:r,value:n}=await t.read();if(r)return;yield n}}finally{t.releaseLock()}}}),p_=e=>{let t=e[Symbol.asyncIterator]();return new ReadableStream({async pull(r){let{done:n,value:o}=await t.next();if(n)return r.close();r.enqueue(o)}})};var ml=class{constructor({utf8Encoder:t,utf8Decoder:r}){this.universalMarshaller=new Hs({utf8Decoder:r,utf8Encoder:t})}deserialize(t,r){let n=VV(t)?I_(t):t;return this.universalMarshaller.deserialize(n,r)}serialize(t,r){let n=this.universalMarshaller.serialize(t,r);return typeof ReadableStream=="function"?p_(n):n}},VV=e=>typeof ReadableStream=="function"&&e instanceof ReadableStream;var m_=e=>new ml(e);async function h_(e,t,r=1024*1024){let n=e.size,o=0;for(;o<n;){let i=e.slice(o,Math.min(n,o+r));t(new Uint8Array(await i.arrayBuffer())),o+=i.size}}var C_=async function(t,r){let n=new t;return await h_(r,o=>{n.update(o)}),n.digest()};var B_=e=>()=>Promise.reject(e);var E_=[1732584193,4023233417,2562383102,271733878];var hl=class{constructor(){this.reset()}update(t){if(YV(t))return;if(this.finished)throw new Error("Attempted to update an already finished hash.");let r=WV(t),n=0,{byteLength:o}=r;for(this.bytesHashed+=o;o>0;)this.buffer.setUint8(this.bufferLength++,r[n++]),o--,this.bufferLength===64&&(this.hashBuffer(),this.bufferLength=0)}async digest(){if(!this.finished){let{buffer:r,bufferLength:n,bytesHashed:o}=this,i=o*8;if(r.setUint8(this.bufferLength++,128),n%64>=56){for(let s=this.bufferLength;s<64;s++)r.setUint8(s,0);this.hashBuffer(),this.bufferLength=0}for(let s=this.bufferLength;s<56;s++)r.setUint8(s,0);r.setUint32(56,i>>>0,!0),r.setUint32(60,Math.floor(i/4294967296),!0),this.hashBuffer(),this.finished=!0}let t=new DataView(new ArrayBuffer(16));for(let r=0;r<4;r++)t.setUint32(r*4,this.state[r],!0);return new Uint8Array(t.buffer,t.byteOffset,t.byteLength)}hashBuffer(){let{buffer:t,state:r}=this,n=r[0],o=r[1],i=r[2],s=r[3];n=dt(n,o,i,s,t.getUint32(0,!0),7,3614090360),s=dt(s,n,o,i,t.getUint32(4,!0),12,3905402710),i=dt(i,s,n,o,t.getUint32(8,!0),17,606105819),o=dt(o,i,s,n,t.getUint32(12,!0),22,3250441966),n=dt(n,o,i,s,t.getUint32(16,!0),7,4118548399),s=dt(s,n,o,i,t.getUint32(20,!0),12,1200080426),i=dt(i,s,n,o,t.getUint32(24,!0),17,2821735955),o=dt(o,i,s,n,t.getUint32(28,!0),22,4249261313),n=dt(n,o,i,s,t.getUint32(32,!0),7,1770035416),s=dt(s,n,o,i,t.getUint32(36,!0),12,2336552879),i=dt(i,s,n,o,t.getUint32(40,!0),17,4294925233),o=dt(o,i,s,n,t.getUint32(44,!0),22,2304563134),n=dt(n,o,i,s,t.getUint32(48,!0),7,1804603682),s=dt(s,n,o,i,t.getUint32(52,!0),12,4254626195),i=dt(i,s,n,o,t.getUint32(56,!0),17,2792965006),o=dt(o,i,s,n,t.getUint32(60,!0),22,1236535329),n=ft(n,o,i,s,t.getUint32(4,!0),5,4129170786),s=ft(s,n,o,i,t.getUint32(24,!0),9,3225465664),i=ft(i,s,n,o,t.getUint32(44,!0),14,643717713),o=ft(o,i,s,n,t.getUint32(0,!0),20,3921069994),n=ft(n,o,i,s,t.getUint32(20,!0),5,3593408605),s=ft(s,n,o,i,t.getUint32(40,!0),9,38016083),i=ft(i,s,n,o,t.getUint32(60,!0),14,3634488961),o=ft(o,i,s,n,t.getUint32(16,!0),20,3889429448),n=ft(n,o,i,s,t.getUint32(36,!0),5,568446438),s=ft(s,n,o,i,t.getUint32(56,!0),9,3275163606),i=ft(i,s,n,o,t.getUint32(12,!0),14,4107603335),o=ft(o,i,s,n,t.getUint32(32,!0),20,1163531501),n=ft(n,o,i,s,t.getUint32(52,!0),5,2850285829),s=ft(s,n,o,i,t.getUint32(8,!0),9,4243563512),i=ft(i,s,n,o,t.getUint32(28,!0),14,1735328473),o=ft(o,i,s,n,t.getUint32(48,!0),20,2368359562),n=ut(n,o,i,s,t.getUint32(20,!0),4,4294588738),s=ut(s,n,o,i,t.getUint32(32,!0),11,2272392833),i=ut(i,s,n,o,t.getUint32(44,!0),16,1839030562),o=ut(o,i,s,n,t.getUint32(56,!0),23,4259657740),n=ut(n,o,i,s,t.getUint32(4,!0),4,2763975236),s=ut(s,n,o,i,t.getUint32(16,!0),11,1272893353),i=ut(i,s,n,o,t.getUint32(28,!0),16,4139469664),o=ut(o,i,s,n,t.getUint32(40,!0),23,3200236656),n=ut(n,o,i,s,t.getUint32(52,!0),4,681279174),s=ut(s,n,o,i,t.getUint32(0,!0),11,3936430074),i=ut(i,s,n,o,t.getUint32(12,!0),16,3572445317),o=ut(o,i,s,n,t.getUint32(24,!0),23,76029189),n=ut(n,o,i,s,t.getUint32(36,!0),4,3654602809),s=ut(s,n,o,i,t.getUint32(48,!0),11,3873151461),i=ut(i,s,n,o,t.getUint32(60,!0),16,530742520),o=ut(o,i,s,n,t.getUint32(8,!0),23,3299628645),n=It(n,o,i,s,t.getUint32(0,!0),6,4096336452),s=It(s,n,o,i,t.getUint32(28,!0),10,1126891415),i=It(i,s,n,o,t.getUint32(56,!0),15,2878612391),o=It(o,i,s,n,t.getUint32(20,!0),21,4237533241),n=It(n,o,i,s,t.getUint32(48,!0),6,1700485571),s=It(s,n,o,i,t.getUint32(12,!0),10,2399980690),i=It(i,s,n,o,t.getUint32(40,!0),15,4293915773),o=It(o,i,s,n,t.getUint32(4,!0),21,2240044497),n=It(n,o,i,s,t.getUint32(32,!0),6,1873313359),s=It(s,n,o,i,t.getUint32(60,!0),10,4264355552),i=It(i,s,n,o,t.getUint32(24,!0),15,2734768916),o=It(o,i,s,n,t.getUint32(52,!0),21,1309151649),n=It(n,o,i,s,t.getUint32(16,!0),6,4149444226),s=It(s,n,o,i,t.getUint32(44,!0),10,3174756917),i=It(i,s,n,o,t.getUint32(8,!0),15,718787259),o=It(o,i,s,n,t.getUint32(36,!0),21,3951481745),r[0]=n+r[0]&4294967295,r[1]=o+r[1]&4294967295,r[2]=i+r[2]&4294967295,r[3]=s+r[3]&4294967295}reset(){this.state=Uint32Array.from(E_),this.buffer=new DataView(new ArrayBuffer(64)),this.bufferLength=0,this.bytesHashed=0,this.finished=!1}};function Cl(e,t,r,n,o,i){return t=(t+e&4294967295)+(n+i&4294967295)&4294967295,(t<<o|t>>>32-o)+r&4294967295}function dt(e,t,r,n,o,i,s){return Cl(t&r|~t&n,e,t,o,i,s)}function ft(e,t,r,n,o,i,s){return Cl(t&n|r&~n,e,t,o,i,s)}function ut(e,t,r,n,o,i,s){return Cl(t^r^n,e,t,o,i,s)}function It(e,t,r,n,o,i,s){return Cl(r^(t|~n),e,t,o,i,s)}function YV(e){return typeof e=="string"?e.length===0:e.byteLength===0}function WV(e){return typeof e=="string"?Nt(e):ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(e)}var y_=typeof TextEncoder=="function"?new TextEncoder:null,Q_=e=>{if(typeof e=="string"){if(y_)return y_.encode(e).byteLength;let t=e.length;for(let r=t-1;r>=0;r--){let n=e.charCodeAt(r);n>127&&n<=2047?t++:n>2047&&n<=65535&&(t+=2),n>=56320&&n<=57343&&r--}return t}else{if(typeof e.byteLength=="number")return e.byteLength;if(typeof e.size=="number")return e.size}throw new Error(`Body Length computation failed for ${e}`)};var w_=e=>({apiVersion:"2006-03-01",base64Decoder:e?.base64Decoder??OA,base64Encoder:e?.base64Encoder??Dn,disableHostPrefix:e?.disableHostPrefix??!1,endpointProvider:e?.endpointProvider??Gc,extensions:e?.extensions??[],getAwsChunkedEncodingStream:e?.getAwsChunkedEncodingStream??QS,httpAuthSchemeProvider:e?.httpAuthSchemeProvider??CD,httpAuthSchemes:e?.httpAuthSchemes??[{schemeId:"aws.auth#sigv4",identityProvider:t=>t.getIdentityProvider("aws.auth#sigv4"),signer:new eo},{schemeId:"aws.auth#sigv4a",identityProvider:t=>t.getIdentityProvider("aws.auth#sigv4a"),signer:new ms}],logger:e?.logger??new Fn,sdkStreamMixin:e?.sdkStreamMixin??DS,serviceId:e?.serviceId??"S3",signerConstructor:e?.signerConstructor??Dc,signingEscapePath:e?.signingEscapePath??!1,urlParser:e?.urlParser??fi,useArnRegion:e?.useArnRegion??!1,utf8Decoder:e?.utf8Decoder??Nt,utf8Encoder:e?.utf8Encoder??oi});var x_=V(SI());var S_=["in-region","cross-region","mobile","standard","legacy"];var b_=({defaultsMode:e}={})=>MS(async()=>{let t=typeof e=="function"?await e():e;switch(t?.toLowerCase()){case"auto":return Promise.resolve(jV()?"mobile":"standard");case"mobile":case"in-region":case"cross-region":case"standard":case"legacy":return Promise.resolve(t?.toLocaleLowerCase());case void 0:return Promise.resolve("legacy");default:throw new Error(`Invalid parameter for "defaultsMode", expect ${S_.join(", ")}, got ${t}`)}}),jV=()=>{let t=(typeof window<"u"&&window?.navigator?.userAgent?x_.default.parse(window.navigator.userAgent):void 0)?.platform?.type;return t==="tablet"||t==="mobile"};var k_=e=>{let t=b_(e),r=()=>t().then(wx),n=w_(e);return{...n,...e,runtime:"browser",defaultsMode:t,bodyLengthChecker:e?.bodyLengthChecker??Q_,credentialDefaultProvider:e?.credentialDefaultProvider??(o=>()=>Promise.reject(new Error("Credential is missing"))),defaultUserAgentProvider:e?.defaultUserAgentProvider??a_({serviceId:n.serviceId,clientVersion:WD.version}),eventStreamSerdeProvider:e?.eventStreamSerdeProvider??m_,maxAttempts:e?.maxAttempts??lo,md5:e?.md5??hl,region:e?.region??B_("Region is missing"),requestHandler:GA.create(e?.requestHandler??r),retryMode:e?.retryMode??(async()=>(await r()).retryMode||Su),sha1:e?.sha1??ZD,sha256:e?.sha256??i_,streamCollector:e?.streamCollector??qA,streamHasher:e?.streamHasher??C_,useDualstackEndpoint:e?.useDualstackEndpoint??(()=>Promise.resolve(Q0)),useFipsEndpoint:e?.useFipsEndpoint??(()=>Promise.resolve(w0))}};var D_=e=>{let t=async()=>{if(e.region===void 0)throw new Error("Region is missing from runtimeConfig");let r=e.region;return typeof r=="string"?r:r()};return{setRegion(r){t=r},region(){return t}}},__=e=>({region:e.region()});var F_=e=>{let t=e.httpAuthSchemes,r=e.httpAuthSchemeProvider,n=e.credentials;return{setHttpAuthScheme(o){let i=t.findIndex(s=>s.schemeId===o.schemeId);i===-1?t.push(o):t.splice(i,1,o)},httpAuthSchemes(){return t},setHttpAuthSchemeProvider(o){r=o},httpAuthSchemeProvider(){return r},setCredentials(o){n=o},credentials(){return n}}},v_=e=>({httpAuthSchemes:e.httpAuthSchemes(),httpAuthSchemeProvider:e.httpAuthSchemeProvider(),credentials:e.credentials()});var Bl=e=>e,R_=(e,t)=>{let r={...Bl(D_(e)),...Bl(Dx(e)),...Bl(oS(e)),...Bl(F_(e))};return t.forEach(n=>n.configure(r)),{...e,...__(r),..._x(r),...iS(r),...v_(r)}};var El=class extends tc{constructor(...[t]){let r=k_(t||{}),n=ED(r),o=jb(n),i=xb(o),s=V0(i),a=S0(s),A=a,c=T0(A),l=x0(c),g=BD(l),d=Jb(g,{session:[()=>this,cl]}),f=R_(d,t?.extensions||[]);super(f),this.config=f,this.middlewareStack.use(y0(this.config)),this.middlewareStack.use(Y0(this.config)),this.middlewareStack.use(k0(this.config)),this.middlewareStack.use(bb(this.config)),this.middlewareStack.use(kb(this.config)),this.middlewareStack.use(_b(this.config)),this.middlewareStack.use(IS(this.config,{httpAuthSchemeParametersProvider:pD,identityProviderConfigProvider:async u=>new VA({"aws.auth#sigv4":u.credentials,"aws.auth#sigv4a":u.credentials})})),this.middlewareStack.use(CS(this.config)),this.middlewareStack.use(Wb(this.config)),this.middlewareStack.use(cS(this.config)),this.middlewareStack.use(Tb(this.config)),this.middlewareStack.use(fu(this.config)),this.middlewareStack.use(uu(this.config))}destroy(){super.destroy()}};function ZV(e){return t=>async r=>{let n={...r.input},o=[{target:"SSECustomerKey",hash:"SSECustomerKeyMD5"},{target:"CopySourceSSECustomerKey",hash:"CopySourceSSECustomerKeyMD5"}];for(let i of o){let s=n[i.target];if(s){let a;typeof s=="string"?ez(s,e)?a=e.base64Decoder(s):(a=e.utf8Decoder(s),n[i.target]=e.base64Encoder(a)):(a=ArrayBuffer.isView(s)?new Uint8Array(s.buffer,s.byteOffset,s.byteLength):new Uint8Array(s),n[i.target]=e.base64Encoder(a));let A=new e.md5;A.update(a),n[i.hash]=e.base64Encoder(await A.digest())}}return t({...r,input:n})}}var $V={name:"ssecMiddleware",step:"initialize",tags:["SSE"],override:!0},T_=e=>({applyToStack:t=>{t.add(ZV(e),$V)}});function ez(e,t){if(!/^(?:[A-Za-z0-9+/]{4})*([A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(e))return!1;try{return t.base64Decoder(e).length===32}catch{return!1}}var yl=class extends io.classBuilder().ep({...qc,Bucket:{type:"contextParams",name:"Bucket"},Key:{type:"contextParams",name:"Key"}}).m(function(t,r,n,o){return[PA(n,this.serialize,this.deserialize),yc(n,t.getEndpointParameterInstructions()),Sb(n,{requestAlgorithmMember:"ChecksumAlgorithm",requestAlgorithmMemberHttpHeader:"x-amz-sdk-checksum-algorithm",requestChecksumRequired:!1}),Fb(n),cc(n),T_(n)]}).s("AmazonS3","PutObject",{}).n("S3Client","PutObjectCommand").f(xD,SD).ser(RD).de(ND).build(){};async function wi(e,t){if(!e)return;let r=new El({region:t.region,credentials:{accessKeyId:t.accessKeyId,secretAccessKey:t.secretAccessKey,sessionToken:t.sessionToken}}),n=new yl({Bucket:t.bucket,Key:t.s3Key,Body:e,ContentType:e.type}),o=await r.send(n);return{success:o.$metadata.httpStatusCode===200,etag:o.ETag,versionId:o.VersionId,...t}}var Vt="/library",N_="/uploader";async function M_(){let t=await K_(async n=>{let o=await ge(`${Vt}/v1/user/urls?${De}&pageSize=100&pageCount=${n}`);return await M({wisebaseAllSavedUrlsSyncTime:o.syncTime}),{total:o.total,data:o?.datas||[]}}),r=t.reduce((n,o)=>{let i=o.url;return n[i]={fileId:o.fileId,wisebaseId:o.wisebaseId},n},{});return await M({wisebaseAllSavedUrlMap:r}),t}async function Ql(){let{wisebaseAllSavedUrlsSyncTime:e}=await z({wisebaseAllSavedUrlsSyncTime:""});if(!e)return;let t=await L(`${Vt}/v1/highlights/sync-batch?${De}`,{lastSyncTime:e});await M({wisebaseAllSavedUrlsSyncTime:t.syncTime});let{wisebaseAllSavedUrlMap:r}=await z({wisebaseAllSavedUrlMap:{}});t.urlList?.length>0&&t.urlList.forEach(n=>{n.isDeleted?delete r[n.url]:r[n.url]={fileId:n.fileId,wisebaseId:n.wisebaseId||"inbox"}}),await M({wisebaseAllSavedUrlMap:{...r}})}async function tz(e,t){let r=await L(`${N_}/v1/file/upload-permission?${De}`,{type:e.type.includes("html")?"webpage":"file",name:e.name,mime:e.type,hash:await Xn(e.size>0||!t?e:t),size:e.size,subFiles:t?[{id:t.type.includes("html")?"readable":"subtitle",name:t.name,mime:t.type,size:t.size}]:void 0}),n=!r.fileExists;return[r,...r.subCredentials||[]].map(i=>{let s=i.credentials;return{needUpload:n,fileId:i.fileId,id:i.id,sessionToken:s?.session_token,accessKeyId:s?.access_key_id,secretAccessKey:s?.secret_access_key,bucket:s?.bucket,s3Key:s?.s3_key,region:s?.region}})}async function rz(e){return await L(`${N_}/v1/file/complete?${De}`,{id:e.id,meta:e.meta,tasks:e.tasks})}async function U_(e){if(!e.mainFile)throw new Error("main File is empty");let t=e.type==="video",r=e.mainFile,n=t?e.subtitleFile:e.readableFile,[o,i]=await tz(r,n),s=await eS(`${Vt}/v1/files?${De}`,{url:e.type==="image"?void 0:e.url,wisebaseId:e.wisebaseId,siderFileId:o.fileId,logicFileType:r.type.includes("html")?"webpage":"file",fileName:e.title||r.name,fileType:r.type||"text/html",fileSize:r.size});return Promise.all([o.needUpload?wi(r,o):Promise.resolve(),i?.needUpload?wi(n,i):Promise.resolve()]).then(()=>{r&&o.needUpload&&o.fileId&&rz({id:o.fileId,meta:{url:e.type==="image"?void 0:e.url,fileName:e.title||r.name,fileType:r.type||"text/html",fileSize:r.size},tasks:[{type:"RAG"}]})}),s?.libraryFileId}function P_(e,t){return NA(`${Vt}/v1/files/${e}?${De}&wisebaseId=${t}`)}async function O_(e,t,r,n){let o=await L(`${Vt}/v1/files/actions/move?${De}`,{id:e,sourceId:t,targetId:r,generateNote:r&&r!=="inbox"},{signal:n}),{wisebaseAllSavedUrlMap:i}=await z({wisebaseAllSavedUrlMap:{}});for(let s of Object.values(i))if(s.fileId===e){s.wisebaseId=r;break}return await M({wisebaseAllSavedUrlMap:{...i}}),o}async function G_(e){let t=await z("language","en");return(await L(`${Vt}/v1/highlight?${De}`,{...e,lang:t}))?.id}function q_(e,t,r){return L(`${Vt}/v1/highlights/delete-batch?${De}`,{ids:e,fileId:t,wisebaseId:r})}async function H_(e){try{return(await L(`${Vt}/v1/highlights/list-by-url?${De}`,{url:e}))?.data||[]}catch(t){if(t.reason==="GET_LIST_FAILED"){let{wisebaseAllSavedUrlMap:r}=await z({wisebaseAllSavedUrlMap:{}});delete r[e],await M({wisebaseAllSavedUrlMap:{...r}})}throw t}}async function L_(e){return(await L(`${Vt}/v1/wisebase?${De}`,{icon:{type:"format",color:"--color-text-primary-3"},name:e}))?.wisebaseId}async function Si(){let t=await K_(async i=>{let s=await ge(`${Vt}/v1/wisebases?${De}&pageSize=100&pageCount=${i}`);return{total:s.total,data:s?.data||[]}}),r=t.map(i=>({name:i.name,wisebaseId:i.wisebaseId}));await M({wisebaseAllWisebases:r});let{wisebaseDefaultWisebaseId:n}=await z({wisebaseDefaultWisebaseId:"inbox"});n!=="inbox"&&!r.find(i=>i.wisebaseId===n)&&await M({wisebaseDefaultWisebaseId:"inbox"});let{wisebaseAllSavedUrlMap:o}=await z({wisebaseAllSavedUrlMap:{}});for(let[i,s]of Object.entries(o))s.wisebaseId&&s.wisebaseId!=="inbox"&&!r.find(a=>a.wisebaseId===s.wisebaseId)&&delete o[i];return await M({wisebaseAllSavedUrlMap:{...o}}),t}async function K_(e){let t=[],r=1,n=0,o=await e(r);for(n=+o.total,t.push(...o.data);t.length<n;){let i=await e(++r);if(i.data?.length>0)t.push(...i.data);else break}return t}async function J_({wisebaseId:e,content:t,meta:r,urls:n}){return(await L(`${Vt}/v1/notes/actions/${r?"convert":"create"}-generate?${De}`,{wisebaseId:e,...r?{meta:r}:{content:t},...n?.length?{urls:n}:null}))?.id}async function V_(e,t,r,n){return await L(`${Vt}/v1/resources/actions/move?${De}`,{items:[{type:"note",id:e}],sourceId:t,targetId:r},{signal:n})}var z_=V(Ae()),wl=new Map;async function Sl(e){if(!chrome.offscreen?.createDocument)throw new Error("Offscreen document is not supported");let t=z_.default.runtime.getURL(e);if(!((await chrome.runtime.getContexts({contextTypes:[chrome.runtime.ContextType.OFFSCREEN_DOCUMENT],documentUrls:[t]})).length>0)){if(wl.has(t))return wl.get(t);{let n=chrome.offscreen.createDocument({url:e,reasons:[chrome.offscreen.Reason.BLOBS],justification:"reason for needing the document"});wl.set(t,n),await n,wl.delete(t)}}}var Y_="Wisebase";var xI=V(Ae());async function W_(){let{wisebaseAllSavedUrlMap:e}=await z({wisebaseAllSavedUrlMap:{}});return e}async function nz(){let e=(await er()).id;if(typeof window<"u")return xI.default.runtime.sendMessage({type:"GET_READABILITY_TEXT_FROM_TAB",tabId:e});if(e)return xI.default.tabs.sendMessage(e,{type:"get-readability-text"})}async function j_(){let e=await nz();if(!e)return null;if(e.type==="webpage")return{type:e.type,title:e.title,description:e.description,mainFile:new File([new Blob([e.html||""])],e.title,{type:"text/html"}),readableFile:new File([new Blob([e.readableHtml||""])],e.title,{type:"text/html"}),subtitleFile:null};if(e.type==="video")return{type:e.type,title:e.title,description:e.description,mainFile:new File([new Blob([e.html||""])],e.title,{type:"text/html"}),readableFile:null,subtitleFile:e.subTitle?new File([new Blob([JSON.stringify(e.subTitle)])],e.title,{type:"application/json"}):null};if(e.type==="pdf")return{type:e.type,title:e.title,description:"",mainFile:await oz(e.pdfUrl),readableFile:null,subtitleFile:null}}async function oz(e){let r=await(await fetch(e)).blob();return new File([r],e,{type:"application/pdf"})}var X_=async(e,t)=>{let r=(await z({wisebaseDefaultWisebaseId:"inbox"})).wisebaseDefaultWisebaseId,n=t?.type==="image"?null:await j_(),o=n?.title||"",i=n?.description||"",s=n?.readableFile||null,a=null;if(t?.type==="image"){await Sl("offscreen-fetch-blob.html");let d=await xt("offscreen-fetch-blob",e),f=await fetch(d).then(u=>u.blob());a=new File([f],t.alt,{type:f.type})}else a=n?.mainFile||null;let A=n?.subtitleFile||null,c={type:t?.type==="image"?"image":n?.type||"",wisebaseId:r,url:e,title:o,description:i,mainFile:a,readableFile:s,subtitleFile:A},l=1e8;if(a&&a.size>l||A&&A.size>l)throw new Error("FILE_TOO_LARGE");let g="";try{g=await U_(c)}catch(d){if(d.reason==="URL_WAS_REPEATED"||d.reason==="FILE_ALREADY_EXIST")g=d.metadata.file_id,r=d.metadata.wisebase_id||d.metadata.project_id;else throw(d.reason==="WISEBASE_NOT_EXIST"||d.reason==="PROJECT_NOT_EXIST")&&Si(),d}if(t?.type!=="image"){let d=await W_();M({wisebaseAllSavedUrlMap:{...d,[e]:{fileId:g,wisebaseId:r}}})}return{fileId:g,wisebaseId:r}};var az={apiSyncWisebaseAllSavedUrls:Ql,apiSaveWisebaseItem:X_,apiUnsaveWisebaseItem:P_,apiCreateHighlight:G_,apiGetHighlights:H_,apiRemoveHighlights:q_,apiCreateWisebase:L_,apiGetWisebases:Si,apiMoveWisebaseItem:O_,apiCreateNote:J_,apiMoveNote:V_,apiGetTaskCenterList:rS,apiChangeTaskCenterItemStatus:nS},Z_={};function $_(e){if(e.abort){Z_[e.type]?.abort();return}let t=e.data||[],r=az[e.type],n=new AbortController;if(Z_[e.type]=n,r)return Az(r)(...t,n.signal)}function Az(e){return async(...t)=>{let r,n;try{r=await e(...t)}catch(o){n=Ln(o)}return{error:n,data:r}}}var cz=V(Ae());var tF=V(Ae());async function eF(e,t=5e3){return Ls("/v1/image/manage/sync",{cids:e},{method:"POST"},{timeout:t})}function xl(e){return Bn(fe.origin,e)}async function Pn(){Qr({url:xl("/login")})}async function rF(){Qr({url:xl("/invite")})}async function bI({openerTabId:e,subRoute:t="painter",hasDataToSend:r=!1}={}){if(!await z("painterMigrated",!1)){e:{let{"sider-image-creator:conversations":i}=await j({"sider-image-creator:conversations":[]});if(!i.length)break e;let s=i.map(c=>`sider-image-creator:messages:${c.id}`),a=await tF.default.storage.local.get(s),A=Object.values(a).map(c=>c.cid).filter(c=>!!c);if(!A.length)break e;await eF(A,5e3).catch(pr)}Ht("painterMigrated",!0)}let o={painter:"ai-image-generator","remove-background":"background-remover","remove-brushed-area":"photo-eraser","upscale-image":"image-upscaler","replace-background":"photo-background-changer","remove-text":"text-remover",inpaint:"inpaint"}[t]??"";return Qr({url:xl(`/create/image/${o}${r?"?from=ext":""}`),openerTabId:e})}var kI={token:"",refresh_token:"","userinfo-type":"","userinfo-avatar":"","userinfo-name":""};async function _e(){let e=await bl("userinfo-type"),t=await bl("token");return e===null?null:!!(t&&e&&e!=="device")}async function fs(){await M({__manual_logout__:!0}),await ze(Object.keys(kI)),await ze("userInfo"),await M({logged:!1})}async function DI(){let{vipInfo:e}=await j({vipInfo:{isVIP:!1,isTrial:!1,payment:{interval:""},userTypeDetail:"login",resetTimeSec:0,"gpt-3.5":{total:0,remain:0,used:0,extraTotal:0,extraRemain:0,period:"total"},"gpt-4":{total:0,remain:0,used:0,extraTotal:0,extraRemain:0,period:"total"},trial:{chatFile:{total:0,remain:0,used:0},painter:{total:0,remain:0,used:0},videoSummary:{total:0,remain:0,used:0},tts:{total:0,remain:0,used:0},shortVideo:{total:0,remain:0,used:0},artifacts:{total:0,remain:0,used:0},search:{total:0,remain:0,used:0},text_to_image:{total:0,remain:0,used:0},data_analysis:{total:0,remain:0,used:0},thinking_mode:{total:0,remain:0,used:0}},"image-creator":{total:0,remain:0,used:0,extraTotal:0,extraRemain:0,period:"total"},summary:{total:0,remain:0,cost:3,period:"total"},ocr:{cost:1},reader:{total:0,remain:0,used:0,limitSize:104857600,period:"total"}}});return e}async function Wr(e){let t=await DI();return typeof e=="function"&&(e=e(t)),ts(t,e,(r,n)=>{if(Array.isArray(r))return n}),M({vipInfo:t})}async function $o(){let e=await $n();return e?{...e,anonymous:!1}:{token:"",refreshToken:"",anonymous:!1}}async function $n(){if(await _e()){let e=await bl("token"),t=await bl("refresh_token");return e?{token:e,refreshToken:t}:null}return null}async function bl(e){let{__manual_logout__:t,__force_logout_reason__:r}=await j({__manual_logout__:!1,__force_logout_reason__:""});if(t||r)return"";try{let n=await cA(e);if(!n)throw new Error("");return M({[e]:n}),n}catch{return(await j({[e]:""}))[e]}}async function Ls(e,t,r={},n={}){let o=r.signal;if(o?.aborted)throw new DOMException("Aborted","AbortError");let i=URL.parse(e)??new URL(`${await Wo()}${e}`),s=dz(r.body??t),a=new Headers(r.headers),A=(r.method??"GET").toUpperCase(),c=A==="GET"||A==="HEAD";a.has("Content-Type")||a.set("Content-Type","application/json");let{noAuth:l=!1,timeout:g,noAppInfo:d=!1}=n;if(!l&&!a.has("Authorization")){let p;try{p=(await $o()).token}catch(Q){throw Q instanceof Error?Q:gz(Q)&&Q.msg?new Error(Q.msg,{cause:Q}):new Error("Failed to get token")}if(p)a.set("Authorization",p);else throw new Error("Need Login",{cause:{url:i.href,method:A}})}if(s instanceof FormData&&a.delete("Content-Type"),!d){let p=function(Q){if(c){let v=i.searchParams;for(let E in Q)v.has(E)||v.append(E,Q[E])}else if(s instanceof FormData)for(let v in Q)s.has(v)||s.append(v,Q[v]);else if(No(s))for(let v in Q)Object.hasOwn(s,v)||(s[v]=Q[v])};var C=p;p({app_name:X,tz_name:de,app_version:at})}let f=Object.assign({},r,{signal:BB([o,g?EB(g):null].filter(_d)),headers:a,method:A,body:c?void 0:a.get("Content-Type")==="application/json"?JSON.stringify(s):s}),u=await fetch(i,f).catch(p=>{throw jo(p,i),p});if(n.onStream&&u.body&&u.ok){let p=n.onStream,Q=Eo(v=>{if(v.type!=="event")return;let E=v.data==="[DONE]";if(E){p({done:E});return}let w=JSON.parse(v.data);if(w.code!==0)throw new Error(w.msg,{cause:w});p({data:w.data})});for await(let v of Cn(u.body))Q.feed(v);return{}}let m=await u.json().catch(()=>{});if(!u.ok)throw new Error(`${u.status}: ${m?.msg||u.statusText}`,{cause:m});if(!m)throw new Error("Response body is not json");if(m.code!==0)throw(m.code===1003||m.code===1006)&&M({ERR_MUST_LOGIN:!0}),new Error(m.msg,{cause:m});return ze("ERR_MUST_LOGIN"),m.data}function gz(e){return No(e)&&Object.hasOwn(e,"code")&&Object.hasOwn(e,"data")&&Object.hasOwn(e,"msg")&&typeof e.code=="number"}function dz(e){if(e instanceof FormData){let t=new FormData;for(let[r,n]of e)t.append(r,n);return t}else return Cd(e)}async function jr(e,t,r){let n,o;(e==="gpt-3.5"||e==="gpt-4")&&t&&(n={[e]:Ed({total:t.total,remain:t.remain,extraTotal:t.extra_total,extraRemain:t.extra_quota,period:t.remain_period,used:t.used},_d)}),r&&(o={videoSummary:{total:r.total.video_summary,used:r.used.video_summary,remain:r.total.video_summary-r.used.video_summary},chatFile:{total:r.total.chat_file,used:r.used.chat_file,remain:r.total.chat_file-r.used.chat_file},painter:{total:r.total.painter,used:r.used.painter,remain:r.total.painter-r.used.painter},tts:{total:r.total.tts,used:r.used.tts,remain:r.total.tts-r.used.tts},artifacts:{total:r.total.artifacts,used:r.used.artifacts,remain:r.total.artifacts-r.used.artifacts},thinking_mode:{total:r.total.thinking_mode,used:r.used.thinking_mode,remain:r.total.thinking_mode-r.used.thinking_mode},data_analysis:{total:r.total.data_analysis,used:r.used.data_analysis,remain:r.total.data_analysis-r.used.data_analysis},text_to_image:{total:r.total.text_to_image,used:r.used.text_to_image,remain:r.total.text_to_image-r.used.text_to_image},search:{total:r.total.search,used:r.used.search,remain:r.total.search-r.used.search},...r.total.short_video?{shortVideo:{total:r.total.short_video,used:r.used.short_video,remain:r.total.short_video-r.used.short_video}}:{}}),await Wr({...n&&n,...o&&{trial:o}})}async function nF(e,t){let r=await Ls("/v1/completion/email_summary",e,{method:"POST",signal:t}),n=r.quota_type?r.quota_type==="basic"?"gpt-3.5":"gpt-4":"gpt-3.5";return jr(n,r),r}function oF(e,t){return Ls("/v1/completion/email_reply",e,{method:"POST",signal:t.signal},{onStream:r=>{if(!r.done){let n=r.data.quota_type?r.data.quota_type==="basic"?"gpt-3.5":"gpt-4":"gpt-3.5";jr(n,r.data)}t.onStream(r)}})}nt("disable-iframe-restrictions",async({sender:e})=>{if(!Ot.default.declarativeNetRequest)throw new Error("declarativeNetRequest is not supported");let t=e.tab?.id;if(!t)throw new Error("tabId is required");let r=await Ot.default.declarativeNetRequest.getSessionRules().then(o=>o.find(i=>i.id===1));if(!(r&&(!r.condition.tabIds||r.condition.tabIds.includes(t))))return Ot.default.declarativeNetRequest.updateSessionRules({removeRuleIds:[1],addRules:[{id:1,priority:1,action:{type:"modifyHeaders",responseHeaders:[{header:"X-Frame-Options",operation:"remove"},{header:"Frame-Options",operation:"remove"},{header:"Content-Security-Policy",operation:"remove"},{header:"Content-Security-Policy-Report-Only",operation:"remove"},{header:"ALLOW-FROM",operation:"set",value:"*"}]},condition:{resourceTypes:["sub_frame","xmlhttprequest"],tabIds:[t,-1],requestMethods:["get"],initiatorDomains:e.url?[new URL(e.url).hostname]:void 0}}]}).then(()=>Gt(100))});nt("restore-iframe-restrictions",()=>Ot.default.declarativeNetRequest?Ot.default.declarativeNetRequest.updateSessionRules({removeRuleIds:[1]}):Promise.reject(new Error("declarativeNetRequest is not supported")));nt("fetch-as-blob-url",async({data:e})=>(await Sl("offscreen-fetch-blob.html"),xt("offscreen-fetch-blob",e)));nt("open-standalone-page",()=>Ho());nt("detect-language",({data:e,sender:t})=>Ot.default.tabs.detectLanguage(e??t.tab?.id));nt("get-window-value",async({data:{tabId:e,keys:t},sender:r})=>{let n=e==="sender"?r.tab?.id:e;if(n===void 0)throw new Error("tabId is required");return Ot.default.scripting.executeScript({args:[t],target:{tabId:n},func:o=>{let i={};e:for(let[s,a]of Object.entries(o)){let A=window;for(let c of a){if(A==null){i[s]=void 0;continue e}A=A[c]}i[s]=A}return i},world:"MAIN"}).then(([o])=>{if(!o)throw new Error("executeScript failed");let{error:i,result:s}=o;if(i)throw i instanceof Error?i:new Error("executeScript failed: unknown error");return s})});nt("detect-youtube-ad",async({data:{tabId:e},sender:t})=>{let r=e==="sender"?t.tab?.id:e;if(r===void 0)throw new Error("tabId is required");return Ot.default.scripting.executeScript({target:{tabId:r},func:()=>{let n=document.querySelector("#movie_player");if(!n)return;function o(i,s){let a=new CustomEvent("sider-onYoutubeChange",{detail:{eventName:i,value:s}});window.dispatchEvent(a)}n.addEventListener("onAdStateChange",i=>{o("onAdStateChange",i)}),n.addEventListener("onStateChange",i=>{o("onStateChange",i)})},world:"MAIN"}).then(([n])=>{if(!n)throw new Error("executeScript failed");let{error:o,result:i}=n;if(o)throw o instanceof Error?o:new Error("executeScript failed: unknown error");return i})});nt("netflix-add-state-listener",async({data:{tabId:e},sender:t})=>{let r=e==="sender"?t.tab?.id:e;if(r===void 0)throw new Error("tabId is required");return Ot.default.scripting.executeScript({target:{tabId:r},func:()=>{if(window.__SIDER_NETFLIX_STATE_LISTENER__)try{window.__SIDER_NETFLIX_STATE_LISTENER__()}catch{}function n(s,a=1e3,A=8){let c=null,l=0;return function(...g){if(c&&(clearTimeout(c),l++,l>=A)){l=0,s.apply(this,g);return}c=setTimeout(()=>{s.apply(this,g),l=0},a)}}function o(s){if(!s?.length)return null;for(let a=s.length-1;a>=0;a--){let A=s[a];if(A.startsWith("watch"))return A}return null}let i=window.netflix?.appContext?.getState()?.playerApp?.addChangeListener(n(s=>{let a=s.videoPlayer.getAllPlayerSessionIds(),A=location.pathname.split("/").pop(),c=o(a);if(s.playerApp.getSessionDataBySessionId(c)?.titleVideoId?.toString()!==A)return;let l=s.videoPlayer.getCurrentTextTrackBySessionId(c);if(!l||!s.videoPlayer.isVideoLoadedBySessionId(c))return;let g=new CustomEvent("sider-netflix-state-change",{detail:{videoId:A,sessionId:c,currentTextTrack:l}});window.dispatchEvent(g)}));return i&&(window.__SIDER_NETFLIX_STATE_LISTENER__=i),!!i},world:"MAIN"}).then(([n])=>{if(!n)throw new Error("executeScript failed");let{error:o,result:i}=n;if(o)throw o instanceof Error?o:new Error("executeScript failed: unknown error");return i})});nt("get-webpage-chatgpt-message",async({data:e,sender:t})=>{let r=t.tab?.id,n=e;if(r===void 0)throw new Error("tabId is required");return Ot.default.scripting.executeScript({target:{tabId:r},args:[n],func:o=>{let i=document.querySelector(`article[data-testid="conversation-turn-${o}"] [data-message-author-role][data-message-id]`);if(!i)throw new Error("message element not found");let s=Object.keys(i).find(g=>g.startsWith("__reactFiber$"));if(!s)throw new Error("fiber key not found");let a=i[s];if(!a)throw new Error("fiber not found");let A,c,l=20;for(;a&&l>0;){if(Array.isArray(a.memoizedProps.messages)&&(A=a.memoizedProps.messages),Array.isArray(a.memoizedProps.groupedMessagesToRender)&&(c=a.memoizedProps.groupedMessagesToRender),A&&c)return{messages:A,groupedMessagesToRender:c};a=a.return,l--}throw new Error("messages not found")},world:"MAIN"}).then(([o])=>{if(!o)throw new Error("executeScript failed");let{error:i,result:s}=o;if(i)throw i instanceof Error?i:new Error("executeScript failed: unknown error");return s})});nt("get-value-from-react-fiber",async({data:e,sender:t})=>{let r=t.tab?.id,{propName:n,querySelector:o,querySelectorAll:i,maxDepth:s=999}=e;if(r===void 0)throw new Error("tabId is required");if(!o&&!i)throw new Error("querySelector or querySelectorAll is required");if(!n)throw new Error("propName is required");return Ot.default.scripting.executeScript({target:{tabId:r},args:[o??null,i??null,n,s],func:(a,A,c,l)=>{let g=A?document.querySelectorAll(A):[document.querySelector(a)],d=[];for(let f of g){let u=0,m=Object.keys(f).find(p=>p.startsWith("__reactFiber$"));if(!m)continue;let C=f[m];for(;C&&!(C.memoizedProps&&Object.hasOwn(C.memoizedProps,c))&&u<l;)C=C.return,u++;C&&C.memoizedProps&&Object.hasOwn(C.memoizedProps,c)&&d.push(C.memoizedProps[c])}if(d.length)return d;throw new Error("value not found")},world:"MAIN"}).then(([a])=>{if(!a)throw new Error("executeScript failed");let{error:A,result:c}=a;if(A)throw A instanceof Error?A:new Error("executeScript failed: unknown error");return c})});nt("get-google-doc-content",({sender:e})=>{let t=e.tab?.id;if(t===void 0)throw new Error("tabId is required");return Ot.default.scripting.executeScript({target:{tabId:t},func:async()=>{function r(o,i){i.add(o),Array.isArray(o)||(o=Object.values(o));for(let s of o)if(s&&!(typeof s!="string"&&typeof s!="object")&&!i.has(s)){if(i.add(s),typeof s=="string"&&s[0]===""&&s[s.length-1]===`
`)return s;{let a=r(s,i);if(a)return a}}}let n=Reflect.get(document,"__wizmanager");if(n)return r(n,new Set)},world:"MAIN"}).then(([r])=>{if(!r)throw new Error("executeScript failed");let{error:n,result:o}=r;if(n)throw n instanceof Error?n:new Error("executeScript failed: unknown error");return o})});nt("fetch-base64-from-bg",async({data:e})=>{let{url:t}=e,n=await(await fetch(t)).blob(),o=await createImageBitmap(n);return{base64:await Jr(n),size:n.size,type:n.type,width:o.width,height:o.height}});nt("get-sender",({sender:e})=>e);yA("email-enhance-reply",e=>{e.onMessage(t=>{oF(t,{signal:e.signal,onStream(r){r.done?(e.send({done:!0}),e.close()):e.send({data:r.data})}}).catch(r=>{r.name!=="AbortError"&&e.send({error:Ln(r)})}).finally(()=>e.close())})});yA("email-enhance-summary",e=>{e.onMessage(t=>{nF(t,e.signal).then(r=>e.send({data:r})).catch(r=>{r.name!=="AbortError"&&e.send({error:Ln(r)})}).finally(()=>e.close())})});var _=V(Ae());var iF=[{version:"5.8.0",title:"Full-Page Web Chat Enhanced",features:[{features:["Enhanced Capabilities: Create images with GPT Image 1, view artifacts in separate panel"]},{features:["Dual-Model Comparison: A side-by-side view shows how different models respond to the same question in real time (Web exclusive)"]}],videoUrl:"",notifyType:"modal"},{version:"5.7.0",title:"Create and Edit Images in Chat with GPT-Image-1",features:[{features:["Upgraded to GPT-Image-1: Create stunning visuals or edit existing images with simple words, powered by OpenAI\u2019s latest image generation model."]},{features:["New Quality Options: Choose from Low, Medium, or High quality \u2014 credit costs vary by selection."]}],videoUrl:"",notifyType:"modal"},{version:"5.6.0",title:"OpenAI o3 & o4-mini Now Available",features:[{features:["o3: A powerful model for solving complex problems in math, coding, science, and technical writing. Replaces o1."]},{features:["o4-mini: Ideal for fast reasoning, coding, and visual tasks. Replaces o3-mini."]}],videoUrl:"",notifyType:"modal"},{version:"5.5.0",title:"Introducing GPT-4.1 and GPT-4.1 Mini",features:[{features:["GPT-4.1: Handles complex problems and real-world coding with improved accuracy, replacing GPT-4o."]},{features:["GPT-4.1 Mini: Excels at image understanding and delivers faster responses."]}],videoUrl:"",notifyType:"modal"},{version:"5.4.0",title:"Star & Export Your Chats",features:[{features:["Star Chats: Mark important chats for easy access later."]},{features:["Export Chats: Save and share chats as TXT files with ease."]}],videoUrl:"",notifyType:"modal"},{version:"5.3.0",title:"Gemini 2.5 Pro & Updated DeepSeek V3 Now Available",features:[{features:["Gemini 2.5 Pro: Excels in coding, science, and math with enhanced reasoning and context awareness."]},{features:["DeepSeek-V3-0324: Delivers quick, reliable answers and improved support for math and coding."]}],videoUrl:"",notifyType:"modal"},{version:"5.2.0",title:"",features:[{features:[""]},{features:[""]}],videoUrl:"",notifyType:"modal"},{version:"5.1.0",title:"Smarter Thinking, Searching, and Saving",features:[{features:["Think (R1) Mode: DeepSeek-R1's thinking can now be used with general models for better answers. Costs 1 Advanced Credit per use."]},{features:["Enhanced Search: Find the most relevant sources with improved precision."]},{features:["Save as Notes: Store AI answers as notes in Wisebase for later use."]}],videoUrl:"https://sider.ai/whats-new/chrome-extension/Sider-v5_1_0",notifyType:"modal"},{version:"5.0.0",title:"Meet Sider 5.0: Deep Research Made Easy. Smart and Automated.",features:[{features:["Smart Source Discovery: AI mimics humans, auto scans 100+ sites fast, picks the best for you."]},{features:["Auto Highlights & Notes: AI highlights topic related information, crafts notes for inspiration."]},{features:["Auto-Generate Reports: Get deep reports with cited sources in minutes."]},{features:["Wisebase Saves It All: AI reports, web finds, chats, and more\u2014saved to explore anytime."]}],videoUrl:"",notifyType:"modal"},{version:"4.45.0",title:"Web Chat Now Live!",features:[{features:["More Space & Focus: A larger interface makes reading long messages and viewing code easier, while minimizing distractions for better focus."]},{features:["Seamless Syncing: Chats stay synced across the web and extension, allowing for an easy switch between web page and sidebar views."]}],videoUrl:"",notifyType:"modal"},{version:"4.44.0",title:"Introducing Claude 3.7 Sonnet Thinking",features:[{features:["Extended Thinking Mode: Step-by-step thinking for better performance on math, physics, coding, and many other tasks"]},{features:["API Key Support: Compatible with Claude and Ollama API keys"]},{features:["API Key Support: Compatible with Claude and Ollama API keys"]}],videoUrl:"",notifyType:"modal"},{version:"4.43.0",title:"Introducing Claude 3.7 Sonnet Thinking",features:[{features:["Extended Thinking Mode: Step-by-step thinking for better performance on math, physics, coding, and many other tasks"]},{features:["API Key Support: Compatible with Claude and Ollama API keys"]}],videoUrl:"https://sider.ai/whats-new/chrome-extension/Sider-v4_43_0",notifyType:"modal"},{version:"4.42.0",title:"Bilingual Subtitle Support for Netflix",features:[{features:["Bilingual Subtitle: Enhance your viewing experience and boost language learning"]},{features:["API Key: Support API keys for DeepSeek, OpenAl and more"]}],videoUrl:"https://sider.ai/whats-new/chrome-extension/Sider-v4_42_0",notifyType:"modal"},{version:"4.41.0",title:"Voice Input & DeepSeek-R1-70B",features:[{features:["Voice Input: Quickly enter text using speech for hands-free efficiency"]},{features:["New AI Model:  DeepSeek-R1-70B is now live"]}],videoUrl:"https://sider.ai/whats-new/chrome-extension/Sider-v4_41_0",notifyType:"modal"},{version:"4.40.0",title:"OpenAI o3-mini Now Available!",features:[{features:["Enhanced Coding: Excels in complex coding tasks with outstanding performance"]},{features:["Improved Prompt Handling: Effectively understands and responds to complex prompts"]}],videoUrl:"",notifyType:"modal"},{version:"4.39.0",title:"OpenAI o3-mini Now Available!",features:[{features:["Powerful Reasoning: Matches OpenAI o1\u2019s abilities in math, science, and coding"]},{features:["Faster Than o1-mini: Optimized for quicker, more seamless responses"]},{features:["More Reliable Answers: Provides greater accuracy and clearer reasoning"]}],videoUrl:"",notifyType:"modal"},{version:"4.38.0",title:"Introducing Gemini 2.0 Flash",features:[{features:["2x the speed of Gemini 1.5 Pro"]},{features:["Delivers instant, pro-level results"]},{features:["Enhanced text, code understanding and reasoning capabilities"]}],videoUrl:"https://sider.ai/whats-new/chrome-extension/Sider-v4_38_0",notifyType:"modal"},{version:"4.37.0",title:"DeepSeek-R1 & V3, AI Translator",features:[{features:["DeepSeek-R1: Matches the performance of OpenAI-o1"]},{features:["DeepSeek-V3: Excels at complex reasoning, math, and coding tasks"]},{features:["AI Translator for Web Page: Delivers natural and accurate translations"]}],videoUrl:"",notifyType:"modal"},{version:"4.36.0",title:"Collect Knowledge in Wisebase",features:[{features:["Save Web Pages and Highlights: Save valuable web content to Wisebase (Al knowledge base) with one click "]},{features:["Al Inbox: Let Al organize your content to Wisebases intelligently"]},{features:["Chat with Multi-files: Get instant answers from your collected files"]}],videoUrl:"https://sider.ai/whats-new/chrome-extension/Sider-v4_36_0",notifyType:"modal"},{version:"4.35.0",title:"Preview Links: Browse Smarter",logContents:"xxxx",features:[{features:["Instant Previews: Drag links to view content without opening new tabs"]},{features:["Summaries: Gain key insights from pages at a glance"]},{features:["Efficient Browsing: Stay focused with fewer clicks and less distractions"]}],videoUrl:"https://sider.ai/whats-new/chrome-extension/Sider-v4_35_0",notifyType:"modal"},{version:"4.34.0",title:"Gmail Al Reply, Artifacts and Translate Enhancements",logContents:"xxxx",features:[{features:["Al Reply in Gmail: Support translation and Al model selection for better communication"]},{features:["Artifacts: Export flowcharts as images for easy sharing"]},{features:["Translate: Al dictionary for precise translations of words and phrases"]}],videoUrl:"https://sider.ai/whats-new/chrome-extension/Sider-v4_34_0",notifyType:"modal"},{version:"4.33.0",title:"O1 & Video Summary Upgrades",logContents:"xxxx",features:[{features:["OpenAI o1\u2060: Faster than \u2018o1-preview\u2019, excels at complex multi-step tasks with advanced accuracy"]},{features:["Summarize Videos Without Subtitles: Get transcripts and summaries for YouTube videos without subtitles"]},{features:["Web Content Summary: Improved for platforms like Reddit and Twitter "]}],videoUrl:"https://sider.ai/whats-new/chrome-extension/Sider-v4_33_0",notifyType:"modal"},{version:"4.32.0",title:"Support for Audio Files in Chat",logContents:"xxxx",features:[{features:["Audio to Text: Upload MP3, WAV, M4A, or MPGA file to generate transcripts"]},{features:["View & Listen: Read transcripts while listening to the audio"]},{features:["Summarize with Ease: Create quick summaries with one click"]}],videoUrl:"https://sider.ai/whats-new/chrome-extension/Sider-v4_32_0",notifyType:"modal"},{version:"4.31.0",title:"Toolbox, Input Translate, Quicker Copy",logContents:"xxxx",features:[{features:["Toolbox: Quickly access AI tools for images, PDFs, video and more from the navigation bar"]},{features:["Input Translate:  Instantly translate input text using a trigger key for faster communication"]},{features:['Copy Text : "Copy" is now a default option in the context menu for quicker text copying']}],videoUrl:"https://sider.ai/whats-new/chrome-extension/Sider-v4_31_0",notifyType:"modal"},{version:"4.30.0",title:"Enhanced GPT-4O, Page Translation and YouTube Subtitles",logContents:"xxxx",features:[{features:["GPT-4O Update: More natural writing and better file handling with deeper insights"]},{features:["View Translation Only: View translations without original text for a cleaner view"]},{features:["Better YouTube Subtitles: Enjoy improved bilingual subtitle translation quality"]}],videoUrl:"https://sider.ai/whats-new/chrome-extension/Sider-v4_30_0",notifyType:"modal"},{version:"4.29.0",title:"Enhanced Chat Experience",logContents:"xxxx",features:[{features:["Messaging Editing: Edit and resend messages for new answers\u2014no copy-pasting required"]},{features:["Side-by-side Comparison: Mention multiple models in a query and view answers in full-page for easier comparison."]},{features:["Custom Icons: Personalize prompt icons for better organization"]}],videoUrl:"https://sider.ai/whats-new/chrome-extension/Sider-v4_29_0",notifyType:"modal"},{version:"4.28.0",title:"Claude 3.5 Haiku & Enhanced Options",logContents:"xxxx",features:[{features:["Claude 3.5 Haiku: Delivers performance that surpasses Claude 3 Opus, excelling in coding, tool use, and reasoning"]},{features:["Large Font Size: You can now change the message font size"]},{features:["Streamlined UI: A cleaner, more intuitive Options UI for easy personalization"]}],videoUrl:"https://sider.ai/whats-new/chrome-extension/Sider-v4_28_0",notifyType:"modal"},{version:"4.27.0",title:"Improved Context Menu and Artifacts",logContents:"xxxx",features:[{features:["Streamlined Context Menu: Cleaner, more intuitive interface for a smoother experience"]},{features:["Enhanced Translation:  Delivers related word meanings with contextual accuracy"]},{features:["Publish & Share Artifacts: Easily share your Artifacts publicly via direct links"]}],videoUrl:"https://sider.ai/whats-new/chrome-extension/Sider-v4_27_0",notifyType:"modal"},{version:"4.26.0",title:"Gemini models just got smarter and faster!",logContents:"xxxx",features:[{features:["Gemini 1.5 Pro: Supercharged reasoning with enhanced math and visual skills."]},{features:["Gemini 1.5 Flash: 2x faster, 3x lower latency, better at visuals and coding."]},{features:["Gemini 1.5 Flash: 2x faster, 3x lower latency, better at visuals and coding."]}],videoUrl:"https://sider.ai/whats-new/chrome-extension/Sider-v4_26_0",notifyType:"modal"},{version:"4.25.0",title:"Gemini models just got smarter and faster!",logContents:"xxxx",features:[{features:["Gemini 1.5 Pro: Supercharged reasoning with enhanced math and visual skills."]},{features:["Gemini 1.5 Flash: 2x faster, 3x lower latency, better at visuals and coding."]},{features:["Gemini 1.5 Flash: 2x faster, 3x lower latency, better at visuals and coding."]}],videoUrl:"https://sider.ai/whats-new/chrome-extension/Sider-v4_25_0",notifyType:"modal"},{version:"4.24.0",title:"Gemini models just got smarter and faster!",features:[{features:["Gemini 1.5 Pro: Supercharged reasoning with enhanced math and visual skills."]},{features:["Gemini 1.5 Flash: 2x faster, 3x lower latency, better at visuals and coding."]}],notifyType:"modal"},{version:"4.23.0",title:"OpenAI o1-preview & o1-mini are available now!",features:[{features:["Multi-Model Translation: Use multiple models at once for more accurate translations."]},{features:["Versatile Translation Rewrites: Rewrite translations for different scenarios."]},{features:["Bilingual Subtitles: View YouTube subtitles in both languages simultaneously."]}],notifyType:"modal"},{version:"4.20.0",title:"Translation Features Upgrade",features:[{features:["Multi-Model Translation: Use multiple models at once for more accurate translations."]},{features:["Versatile Translation Rewrites: Rewrite translations for different scenarios."]},{features:["Bilingual Subtitles: View YouTube subtitles in both languages simultaneously."]}],videoUrl:"https://sider.ai/whats-new/chrome-extension/Sider-v4_20_0",notifyType:"modal"},{version:"4.19.0",title:"Artifacts: Real-Time Content Preview",features:[{features:["Dedicated Windows: Preview documents, websites or charts in separate windows during chats."]},{features:["Interactive and Editable: Modify content directly using natural language."]}],videoUrl:"https://sider.ai/whats-new/chrome-extension/Sider-v4_19_0",notifyType:"modal"},{version:"4.18.0",title:"Chat Sharing is Now Live!",features:[{features:["Multiple Formats: Share your chat as a link or an image."]},{features:["Flexible Selection: Select and share an entire conversation or just part of it."]},{features:["Easy Control: Revoke shared links anytime."]}],videoUrl:"https://sider.ai/whats-new/chrome-extension/Sider-v4_18_0",notifyType:"modal"},{version:"4.17.0",title:"Introducing Watch Highlights for YouTube",features:[{features:["Video Highlights: AI-generated narration saves you time by quickly highlighting key video points."]},{features:["Natural Narration: Realistic AI voices enhance your viewing experience."]},{features:["Multi-language Support: Easily understand videos across language barriers."]}],videoUrl:"https://sider.ai/whats-new/chrome-extension/Sider-v4_17_0",notifyType:"modal"},{version:"4.16.0",title:"",features:[{features:[""]},{features:[""]},{features:[""]}],videoUrl:"https://sider.ai/whats-new/chrome-extension/Sider-v4_16_0",notifyType:"modal"},{version:"4.13.0",title:"",features:[{features:[""]},{features:[""]},{features:[""]}],videoUrl:"https://sider.ai/whats-new/chrome-extension/Sider-v4_13_0",notifyType:"modal"},{version:"4.12.0",title:"Deep reader to boost your critical reading skills!",features:[{features:["Increased Speed: Get 2x faster responses than GPT-4"]},{features:["Enhanced Vision: Greatly improved image understanding"]},{features:["Enhanced Vision: Greatly improved image understanding"]}],videoUrl:"https://sider.ai/whats-new/chrome-extension/Sider-v4_12_0",notifyType:"modal"},{version:"4.11.0",title:"Deep reader to boost your critical reading skills!",features:[{features:["Increased Speed: Get 2x faster responses than GPT-4"]},{features:["Enhanced Vision: Greatly improved image understanding"]},{features:["Expanded Languages: More languages, better quality, and faster performance"]}],videoUrl:"https://sider.ai/whats-new/chrome-extension/Sider-v4_11_0",notifyType:"modal"},{version:"4.10.0",title:"OpenAI's GPT-4o is now here!",features:[{features:["Increased Speed: Get 2x faster responses than GPT-4"]},{features:["Enhanced Vision: Greatly improved image understanding"]},{features:["Expanded Languages: More languages, better quality, and faster performance"]}],videoUrl:"https://sider.ai/whats-new/chrome-extension/Sider-v4_10_0",notifyType:"modal"},{version:"4.9.0",title:"Llama 3 Now! The next generation of Meta's state-of-the-art open source LLM.",features:[{features:["<b>New Model:</b> Support Llama 3 now"]}],videoUrl:"",notifyType:"modal"},{version:"4.8.0",title:"In-Chat Video Summary, Subtitle Extraction, Claude 3 Haiku! \u{1F680}",features:[{features:["In-Chat Summary: Get key points of YouTube videos with 'Read this page' in the chat window."]},{features:["Easy Subtitle Extraction: Get subtitles with a single click on YouTube for deeper insights."]}],videoUrl:"",notifyType:"modal"},{version:"4.7.0",title:"In-Chat Video Summary, Subtitle Extraction, Claude 3 Haiku! \u{1F680}",features:[{features:["In-Chat Summary: Get key points of YouTube videos with 'Read this page' in the chat window."]},{features:["Easy Subtitle Extraction: Get subtitles with a single click on YouTube for deeper insights."]},{features:["Claude 3 Haiku: Now available to enrich your chat experience."]}],videoUrl:"https://sider.ai/whats-new/chrome-extension/Sider-V4_7",notifyType:"modal"},{version:"4.6.0",features:[{features:['Claude 3 Opus: Claims to have "near-human" abilities and can beat GPT-4.']},{features:["Claude 3 Sonnet: Balances intelligence and speed, ideal for retrieving info or automating sales."]}],videoUrl:"https://sider.ai/whats-new/chrome-extension/Sider-V4_6",notifyType:"modal"},{version:"4.5.0",features:[{features:["Search Agent Widget: Experience the future of search with AI automation"]},{features:["Translate webpage: More reader-friendly translation display styles"]},{features:["Supports automatically restoring the last chat on startup"]}],videoUrl:"https://sider.ai/whats-new/chrome-extension/Sider-V4_5",notifyType:"modal"},{version:"4.4.0",title:"Easy Artistry with Painter Tool & GPT-4 context menu",features:[{features:["New Painter Tool: Create images instantly in chat."]},{features:["Enhanced Context Menu: Use GPT-4 in context menu."]},{features:["Enhanced Context Menu: Use GPT-4 in context menu."]}],videoUrl:"https://sider.ai/whats-new/chrome-extension/Sider-V4_4",notifyType:"modal"},{version:"4.3.0",title:"Maximize Your Experience with Full-Screen Mode!",features:[{features:["Dive into an immersive, full-screen view"]},{features:["Enjoy all sidebar features, now in Full-Screen"]},{features:["Seamlessly toggle between modes for the best of both worlds"]}],videoUrl:"https://sider.ai/whats-new/chrome-extension/Sider-V4_3",notifyType:"modal"},{version:"4.2.0",title:"More Efficient UI & Sidebar GPTs Access (Here is the video tutorial)",features:[{features:["Refreshed Interface: Cleaner and easier to navigate"]},{features:["Collapsible Navigation Bar: Ensures a focused chat experiencewhile keeping essential features within easy reach"]},{features:["Sidebar GPTs Access: For ChatGPT Plus users, direct access toGPTs is now available in the sidebar in web app mode"]}],notifyType:"modal"},{version:"4.1.0",features:[{title:"GPT-4V(ision) Preview! & AI reply for Gmail",features:["Sider Vision is powered by GPT-4V","Better understanding of images","Quickly grasp email intentions","Select from diverse tones and personas","Effortlessly pick reply suggestions"]}],notifyType:"modal"},{version:"4.0.0",features:[{title:"GPT-4 Turbo and Chat web page!",features:["Support GPT-4 Turbo and GPT-3.5 Turbo","Translate whole web page","Chat web page in the Sidebar","Chat PDF in the Sidebar"]}],notifyType:"modal"},{version:"3.6.0",features:[{title:"Translation widget",features:["Customize your translation in a dedicated Translation widget","Improve ChatGPT anwers in Google, Bing, Baidu etc"]}],notifyType:"modal"},{version:"3.5.0",features:[{title:"Sider Vision Became Smarter",features:["GPT-4/Claude 2 + Vision","1-click to answer the same question with different bots"]}],notifyType:"modal"},{version:"3.4.0",features:[{title:"Sider Grammar Widget",features:["Check grammar errors","Fix grammar errors","Improve the writing beyond grammar"]}],notifyType:"modal"},{version:"3.3.0",features:[{title:"Sider Vision \u2014 ChatGPT sidebar with Vision",features:["Extract text from an image","Ask any question about the image","3 ways to send image to Sider Vision<div><ol><li>Take a  screenshot</li><li>Drag & Drop an image to Chat window</li><li>Upload an image</li></ol></div>"]}],notifyType:"modal"},{version:"3.2.0",features:[{title:"New pricing plan with 5x more  GPT-4 queries",features:["Great news! Our updated pricing now gives you even more access to GPT-4 and Claude 2 queries.","If you're already a premium user, you'll be upgraded automatically. Plus, we've got a new 'Unlimited' plan for all you power users!"]}],notifyType:"modal"},{version:"3.1.0",features:[{title:"More bot!",features:["Support Bard now!"]},{title:"OCR: Extract text from any image and send it to ChatGPT",features:["Recognize 10+ major languages of printed materials","Recognize handwritten in English","Recognize math equation in the text"]},{title:"Improve Painter",features:["Replace the whole background","Remove selected area"]}],notifyType:"modal"},{version:"3.0.0",features:[{features:["More Chatbots: Now Supporting Claude-instant, Claude 2, and Bard!"]},{features:["Group Chat: Compare Answers Across Chatbots!"]},{features:["Mention: Tag Chatbots with '@'!"]},{features:["Quick Prompt: Just Type '/' and Go!"]},{features:["Simple Design: Streamlined for Speed!"]}],notifyType:"modal"},{version:"2.9.0",features:[{title:"Enhanced prompt manager for",features:["Reading context menu","Writing context menu"]},{title:"AI image editor",features:["Remove background from any images","Remove text from any images"]}],notifyType:"modal"},{version:"2.8.0",features:["Reading Assistant: Use AI for fast understanding while reading web pages","Writing Assistant: Quickly generate content with AI in the web input box"],notifyType:"modal"},{version:"2.7.0",features:["Draw picture from text","Draw picture from a reference picture"],notifyType:"modal"},{version:"2.6.0",features:["Sider Supports Fixed Sidebar - You can chat between all tabs without overlapping any content (available in Chrome 114 or later)"],notifyType:"modal"},{version:"2.5.0",features:["Youtube Summary! Watch 1 hour of YouTube video in 1 minute","Compare the answers provided by humans and AI on Q&A sites such as Quora, StackOverflow, and Zhihu"],notifyType:"modal"},{version:"2.4.0",features:["Smart web access: Based on your query, the Al will decide if it needs to access the web.","Stability improvement"],notifyType:"modal"},{version:"2.3.0",features:["Support Browsing and Plugins for Plus users!","ChatGPT with internet access for everyone!"],notifyType:"modal"},{version:"2.2.0",features:["Compose any message","Reply email, tweet, comment etc"],notifyType:"modal"},{version:"2.1.0",features:["Shortcut for Quick Lookup","Resize the Quick Lookup window","Bug fixes and other UX improvements"],notifyType:"modal"},{version:"2.0.0",features:["Support GPT-4 for all users!","Invite friends and gain GPT-4 queries for both of you!","Bug fixes and other UX improvements"],notifyType:"modal"},{version:"1.1.0",features:["Full Chat in the new tab!","ChatGPT, Bing, Bard together!","Bug fixes"],notifyType:"modal"},{version:"1.0.13",features:["Continue the chat after asking questions","Switch between GPT-4 and GPT-3.5 for Plus users","Easily access and search chat history"],notifyType:"modal"},{version:"1.0.12",features:["Sync extension settings across computers","Access your prompts from different laptops","Save chats for future use","Share chats via link"],notifyType:"modal"},{version:"1.0.11",features:["Quickly access actions through a pop-up window without opening the sidebar.","Add support for additional languages.","Retain the user's language preference when using the translation feature.","Resolve shortcut conflicts on platforms like GitHub and others."],notifyType:"modal"},{version:"1.0.10",features:["Support 50+ languages now!"],notifyType:"modal"},{version:"1.0.8",features:["Support GPT-4 for Plus users! Check settings page!"],notifyType:"modal"},{version:"1.0.7",features:["Remember prompt used last time","Optimize the position of the chatGPT panel on search pages","Add an option to put the sidebar in-page icon on the left side","Optimize package size","Add dark mode","Support your API url proxy"],notifyType:"modal"},{version:"1.0.6",features:["Improve summarize feature in Youtube page"],notifyType:"modal"},{version:"1.0.5",features:["Remember the location of sidebar in\u2013age icon","Improve shortcuts","Save prompt templates from the sidebar directly"]},{version:"1.0.4",features:["Re-order prompt items in the dropdown list","Archive prompt items you will not use","Support response in 50+ languages"]},{version:"1.0.3",features:["CMD/Ctrl + Enter to do quick \u201CSubmit\u201D","Option to hide panel in the search results page","Support ESC to hide sidebar","Support summarize long article"]},{version:"1.0.2",features:["Add stop button to stop generating response","Change the place of collapse button"]},{version:"1.0.1",features:["Improve summarize feature in Youtube page","Fix some bugs related to copy/paste and print"]}];var sF=V(Ae());var uz=864e5;var V_e=uz*30;var Iz=6e3;async function pz(e=!1,t){if(Z.setUserStatus({fiveStarRated:!0}),e)kr.report("rate_feedback_total"),kr.report(`rate_feedback_${t}`);else{let{__five_star_rate_from__:r}=await j({__five_star_rate_from__:""});kr.report("rate_total"),kr.report(`rate_${r}`)}ze(["__five_star_rate_checking__","__five_star_rate_checking_timer__","__five_star_rate_show_at__","__five_star_rate_show_count__","__five_star_rate_less_show__","__five_star_rate_from__"])}async function aF(e){let{__five_star_rate_checking__:t,__five_star_rate_checking_timer__:r,userStatus:n}=await j({__five_star_rate_checking__:!1,__five_star_rate_checking_timer__:0,userStatus:{fiveStarRated:!1}});if(n?.fiveStarRated||!t)return;let o=await sF.default.tabs.get(e),i=o.pendingUrl||o.url;if(i)if(mz(i)){r&&clearTimeout(r);let s=setTimeout(()=>{pz()},Iz);M({__five_star_rate_checking_timer__:s})}else r&&clearTimeout(r)}function mz(e){return new RegExp(`^https://.+?/detail/.+?/${Yi}${Ve?"":"/reviews"}`,"g").test(e)}var kl=class e{constructor(t,r,n,o){this.db=null;this.dbName="";this.storeName="";this.dbMapKey="";this.idbMapKey="";if(this.dbMapKey=`${t}_${o||1}`,this.idbMapKey=`${t}_${r}`,e.IDB_MAP[this.idbMapKey])return e.IDB_MAP[this.idbMapKey];e.IDB_MAP[this.idbMapKey]=this,this.dbName=t,this.storeName=r,this.onUpgrade=n.onUpgrade,this.onError=n.onError,this.version=o}static{this.DB_MAP={}}static{this.IDB_MAP={}}async openDB(){let{dbName:t,version:r,onUpgrade:n,onError:o}=this;return e.DB_MAP[this.dbMapKey]?e.DB_MAP[this.dbMapKey]:new Promise((i,s)=>{let a=indexedDB.open(t,r);a.onerror=A=>{s(A)},a.onblocked=A=>{s(A)},a.onupgradeneeded=A=>{n(a.result,A)},a.onsuccess=()=>{let A=a.result;this.db=e.DB_MAP[this.dbMapKey]=A,A.onerror=c=>{o?.(c)},A.onversionchange=()=>{A.close(),this.db=null,delete e.DB_MAP[this.dbMapKey]},i(A)}})}async removeDB(){let t=indexedDB.deleteDatabase(this.dbName);return new Promise((r,n)=>{t.onerror=o=>{n(o)},t.onblocked=o=>{n(o)},t.onsuccess=()=>{r(!0)}})}async transactionAction(t,r){this.db||(this.db=await this.openDB());let n=this.db.transaction(this.storeName,r).objectStore(this.storeName);return new Promise((o,i)=>{let s=t(n);s.onerror=i,s.onsuccess=()=>o(s.result)})}getData(t){return this.transactionAction(r=>r.get(t))}addData(t,r){return this.transactionAction(n=>n.add(t,r),"readwrite")}setData(t,r){return this.transactionAction(n=>n.put(t,r),"readwrite")}deleteData(t){return this.transactionAction(r=>r.delete(t),"readwrite")}clearData(){return this.transactionAction(t=>t.clear(),"readwrite")}};function AF(e){return new kl("CACHE",e,{onUpgrade(t){try{t.createObjectStore("TRANSLATION_CACHE",{keyPath:"key"})}catch{}try{t.createObjectStore("DEMO_TTS_CACHE",{keyPath:"key"})}catch{}}},2)}function _I(){return AF("TRANSLATION_CACHE")}function cF(){return AF("DEMO_TTS_CACHE")}var FI=V(Ae());async function lF(){let e=await FI.default.storage.local.get({"chat:conversations":[],historyUploadSuccess:!1}),t=e["chat:conversations"];if(e.historyUploadSuccess)return;let n=await FI.default.storage.local.get(t.reduce((d,f)=>(d[`chat:messages:${f.id}`]={},d),{})),i=t.map(({id:d,title:f})=>({...n[`chat:messages:${d}`],title:f})).filter(d=>d.provider==="siderApi"&&d.id.includes("-"));if(i.length===0)return;let s=JSON.stringify(i),a=new Blob([s],{type:"application/json"}),A=new File([a],"chat_history.json",{type:"application/json"}),c=3;async function l(d,f){for(let u=0;u<c;u++)try{return await d()}catch(m){if(u===c-1)throw m;await new Promise(C=>setTimeout(C,Math.pow(2,u)*1e3))}}async function g(d){return l(async()=>Z.fileUploaded({fileID:d,tasks:[{type:"chatHistory"}]}),"fileUploaded")}try{await l(async()=>{let d=await Z.getUploadPermission({name:A.name,mime:A.type,hash:String(await Xn(A)),size:A.size});if(d.fileExists){await g(d.fileId);return}let f=d.fileId,u=sr(d.credentials);await l(async()=>{let m=await wi(A,u);await g(f),M({historyUploadSuccess:!0})},"uploadToS3")},"getUploadPermission")}catch{await Z.uploadFileV2({file:A,tasks:[{type:"chatHistory"}]}),M({historyUploadSuccess:!0})}}var OI=V(UI()),on=V(Ae());var QF=V(UI()),Rz=V(Ae());async function Tz(e=Xt.English){let t=await _e(),r=navigator.userAgentData?.platform||"Unknown";r=r.replace(" ",""),r=r.slice(0,1).toUpperCase()+r.slice(1);let n=Bn(fe.api,`/v1/app/promotion/promote_config?app_name=${va}&app_version=${at}&language=${e}&device_name=${r}`),o={data:[],resources:{}};if(t)try{let i=await ge(n);!("resources"in i)&&"resources"in i.data&&(i=i.data),o.data=i.data.map(s=>({...s})),o.resources=i.resources}catch{}return o}function PI(e,t){return!e||typeof e!="string"?e:e.replace(/{{\s*([^{{}}]+)\s*}}/g,(r,n)=>{if(n.includes(",")){let[o,i,s,a]=n.split(/\s*,\s*/);n=t[o]===i?s:a}return n?t[n]||n:""})}function wF(e,t){return e&&Object.fromEntries(Object.entries(e).map(([r,n])=>[r,PI(n,t)]))}function Nz(e,t){return t?t.every(r=>e.includes(r)):!0}function Mz(e,t){if(e.payload.depOtherCampFilterCond&&e.payload.depOtherCampFilterCond.showAfter){let r=e.payload.depOtherCampFilterCond.showAfter;if(r.depKey&&(!t||!(r.depKey in t)||Date.now()-t[r.depKey]<r.gapTime))return!0}return!1}function Uz(e,t){return e.promoteType==="marketing"&&e.notHideAfterUpg!==!0&&t>e.startAt&&t<e.stopAt}function Pz(e){return(on.default.storage.session||on.default.storage.local).get(e)}async function Oz(){let e=on.default.storage.session||on.default.storage.local,t=await Pz({__promote_config__:{config:{data:[],resources:{}},timeStamp:0,maxAge:3e3},__promote_variants__:{}}),r=Date.now(),{__promote_variants__:n,language:o,isCNUser:i,userInfo:s,vipInfo:a,provider:A,lastUpgradeTime:c}=await j({language:Xt.English,__promote_variants__:{},provider:"siderApi",isCNUser:!1,userInfo:{id:"",avatar:"",nickname:"",email:"",phone:""},vipInfo:{userTypeDetail:"login"},lastUpgradeTime:0}),l=t.__promote_config__,g=l?.maxAge||3e3,d=l.config;if(!d||r-l?.timeStamp>g){d=await Tz(o);let y=1e3*60*30;try{e.set({__promote_config__:{config:d,timeStamp:r,maxAge:y}})}catch{}}let f=navigator.userAgentData?.platform,u=a?.userTypeDetail||"login",m={lang:o,browser:Ve?"edge":"chrome",__LANG__:o,__BROWSER__:Ve?"edge":"chrome",__PLATFORM__:f,__VERSION__:at,__IS_CN_USER__:i?"1":"0",__USER_PLAN__:MB[u],__USER_ID__:s.id,__USER_NAME__:s.nickname,__USER_AVATAR__:s.avatar,__USER_EMAIL__:s.email,__USER_PHONE__:s.phone},C=[f,Ve?"edge_ext":"chrome_ext",u,["device","login"].includes(u)?"free":"paid",u=="device"?"unregistered":"registered",o,A],{__promote_off__:p}=await j({__promote_off__:{}}),Q={},v={};for(let y of d.data){let T=y.activityId||y.slot,P=typeof y.startAt=="number"?y.startAt:Date.parse(y.startAt),S=typeof y.stopAt=="number"?y.stopAt:Date.parse(y.stopAt);P>r||S<r||Nz(C,y.condition)&&(Mz(y,p)||Uz(y,c)||(v[y.key]={startAt:y.startAt,stopAt:y.stopAt},!(p&&y.key in p)&&(Q[T]||(Q[T]=[]),Q[T].push(y))))}let E={...m,...wF({...d.resources._,...d.resources.en,...d.resources[o]},m)},w={};for(let y of Object.values(Q)){if(y.length==0)continue;let T=y[0].key,P=y[0].persistent,S=n[T]||t.__promote_variants__[T];if(!isFinite(S)&&(S=Math.floor(Math.random()*100),P)){let W=P=="session"&&on.default.storage.session?"session":"local";on.default.storage[W].set({__promote_variants__:{...W=="session"?t.__promote_variants__:n,[T]:S}})}let U=y.find(W=>S<=W.allocation);y.length==1&&y[0]?.allocation==null&&(U=y[0]),U&&(U.content=PI(U.content,E),U.style=U.style?PI(U.style,E):"",U.payload=wF(U.payload,E),w[U.slot]=U)}let B=Object.fromEntries(Object.entries(w).map(([y,T])=>[y,{key:T.key,startAt:T.startAt,stopAt:T.stopAt}]));return await on.default.storage.local.set({__promote_schedule__:B}),await on.default.storage.local.set({__promote_ongoing__:v}),w}var vl;async function SF(){return vl||(vl=Oz().finally(()=>{vl=null}))}function xF(e,t){let r=e.key;r&&j({[r]:null}).then(n=>{let o=n[r]||{},i=e.host,s=e.favicon;try{i=i||new URL(t.url||"").host,s=s||t.tab?.favIconUrl||t.url+"/favicon.ico"}catch{}if(!i||i==="undefined")return;let a=e.enable;return a?delete o[i]:o={...o,[i]:{favicon:s,enable:a,timestamp:Date.now()}},Object.entries(o).forEach(([A,c])=>{(A==="undefined"||c.enable)&&delete o[A]}),M({[r]:o})})}var Rr=V(Ae());async function bF({prompt:e,windowId:t}){let n=(await Rr.default.tabs.query({url:"https://chat.openai.com/chat*",windowId:t}))[0];n||(n=await Rr.default.tabs.create({active:!0,url:"https://chat.openai.com",windowId:t}),await new Promise(o=>{let i=(s,a,A)=>{s==n.id&&a.status=="complete"&&(o(),Rr.default.tabs.onUpdated.removeListener(i))};Rr.default.tabs.onUpdated.addListener(i)})),Rr.default.tabs.update(n.id,{active:!0}),Rr.default.tabs.sendMessage(n.id,{type:"automate-send-prompt",prompt:e}),await new Promise(o=>{let i=0,s=(a,A)=>{if(A.tab?.id===n.id)switch(a.type){case"loaded":i+=1,i<2&&Rr.default.tabs.sendMessage(n.id,{type:"automate-send-prompt",prompt:e});return;case"automate-send-prompt-done":Rr.default.runtime.onMessage.removeListener(s),o();return}};Rr.default.runtime.onMessage.addListener(s),setTimeout(o,1e3*60)})}var Js=V(Ae());function kF(){Gz("NEW","#F00","#FFF")}function Gz(e,t,r){Js.default.action.setBadgeBackgroundColor({color:t}),Js.default.action.setBadgeText({text:e}),r&&Js.default.action.setBadgeTextColor({color:r})}function GI(){return Js.default.action.setBadgeText({text:""})}var ee=e=>typeof e=="string",Vs=()=>{let e,t,r=new Promise((n,o)=>{e=n,t=o});return r.resolve=e,r.reject=t,r},DF=e=>e==null?"":""+e,qz=(e,t,r)=>{e.forEach(n=>{t[n]&&(r[n]=t[n])})},Hz=/###/g,_F=e=>e&&e.indexOf("###")>-1?e.replace(Hz,"."):e,FF=e=>!e||ee(e),zs=(e,t,r)=>{let n=ee(t)?t.split("."):t,o=0;for(;o<n.length-1;){if(FF(e))return{};let i=_F(n[o]);!e[i]&&r&&(e[i]=new r),Object.prototype.hasOwnProperty.call(e,i)?e=e[i]:e={},++o}return FF(e)?{}:{obj:e,k:_F(n[o])}},vF=(e,t,r)=>{let{obj:n,k:o}=zs(e,t,Object);if(n!==void 0||t.length===1){n[o]=r;return}let i=t[t.length-1],s=t.slice(0,t.length-1),a=zs(e,s,Object);for(;a.obj===void 0&&s.length;)i=`${s[s.length-1]}.${i}`,s=s.slice(0,s.length-1),a=zs(e,s,Object),a?.obj&&typeof a.obj[`${a.k}.${i}`]<"u"&&(a.obj=void 0);a.obj[`${a.k}.${i}`]=r},Lz=(e,t,r,n)=>{let{obj:o,k:i}=zs(e,t,Object);o[i]=o[i]||[],o[i].push(r)},Tl=(e,t)=>{let{obj:r,k:n}=zs(e,t);if(r&&Object.prototype.hasOwnProperty.call(r,n))return r[n]},Kz=(e,t,r)=>{let n=Tl(e,r);return n!==void 0?n:Tl(t,r)},GF=(e,t,r)=>{for(let n in t)n!=="__proto__"&&n!=="constructor"&&(n in e?ee(e[n])||e[n]instanceof String||ee(t[n])||t[n]instanceof String?r&&(e[n]=t[n]):GF(e[n],t[n],r):e[n]=t[n]);return e},bi=e=>e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&"),Jz={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"},Vz=e=>ee(e)?e.replace(/[&<>"'\/]/g,t=>Jz[t]):e,HI=class{constructor(t){this.capacity=t,this.regExpMap=new Map,this.regExpQueue=[]}getRegExp(t){let r=this.regExpMap.get(t);if(r!==void 0)return r;let n=new RegExp(t);return this.regExpQueue.length===this.capacity&&this.regExpMap.delete(this.regExpQueue.shift()),this.regExpMap.set(t,n),this.regExpQueue.push(t),n}},zz=[" ",",","?","!",";"],Yz=new HI(20),Wz=(e,t,r)=>{t=t||"",r=r||"";let n=zz.filter(s=>t.indexOf(s)<0&&r.indexOf(s)<0);if(n.length===0)return!0;let o=Yz.getRegExp(`(${n.map(s=>s==="?"?"\\?":s).join("|")})`),i=!o.test(e);if(!i){let s=e.indexOf(r);s>0&&!o.test(e.substring(0,s))&&(i=!0)}return i},LI=(e,t,r=".")=>{if(!e)return;if(e[t])return Object.prototype.hasOwnProperty.call(e,t)?e[t]:void 0;let n=t.split(r),o=e;for(let i=0;i<n.length;){if(!o||typeof o!="object")return;let s,a="";for(let A=i;A<n.length;++A)if(A!==i&&(a+=r),a+=n[A],s=o[a],s!==void 0){if(["string","number","boolean"].indexOf(typeof s)>-1&&A<n.length-1)continue;i+=A-i+1;break}o=s}return o},Nl=e=>e?.replace("_","-"),jz={type:"logger",log(e){this.output("log",e)},warn(e){this.output("warn",e)},error(e){this.output("error",e)},output(e,t){console?.[e]?.apply?.(console,t)}},KI=class e{constructor(t,r={}){this.init(t,r)}init(t,r={}){this.prefix=r.prefix||"i18next:",this.logger=t||jz,this.options=r,this.debug=r.debug}log(...t){return this.forward(t,"log","",!0)}warn(...t){return this.forward(t,"warn","",!0)}error(...t){return this.forward(t,"error","")}deprecate(...t){return this.forward(t,"warn","WARNING DEPRECATED: ",!0)}forward(t,r,n,o){return o&&!this.debug?null:(ee(t[0])&&(t[0]=`${n}${this.prefix} ${t[0]}`),this.logger[r](t))}create(t){return new e(this.logger,{prefix:`${this.prefix}:${t}:`,...this.options})}clone(t){return t=t||this.options,t.prefix=t.prefix||this.prefix,new e(this.logger,t)}},Tr=new KI,Di=class{constructor(){this.observers={}}on(t,r){return t.split(" ").forEach(n=>{this.observers[n]||(this.observers[n]=new Map);let o=this.observers[n].get(r)||0;this.observers[n].set(r,o+1)}),this}off(t,r){if(this.observers[t]){if(!r){delete this.observers[t];return}this.observers[t].delete(r)}}emit(t,...r){this.observers[t]&&Array.from(this.observers[t].entries()).forEach(([o,i])=>{for(let s=0;s<i;s++)o(...r)}),this.observers["*"]&&Array.from(this.observers["*"].entries()).forEach(([o,i])=>{for(let s=0;s<i;s++)o.apply(o,[t,...r])})}},Ml=class extends Di{constructor(t,r={ns:["translation"],defaultNS:"translation"}){super(),this.data=t||{},this.options=r,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.options.ignoreJSONStructure===void 0&&(this.options.ignoreJSONStructure=!0)}addNamespaces(t){this.options.ns.indexOf(t)<0&&this.options.ns.push(t)}removeNamespaces(t){let r=this.options.ns.indexOf(t);r>-1&&this.options.ns.splice(r,1)}getResource(t,r,n,o={}){let i=o.keySeparator!==void 0?o.keySeparator:this.options.keySeparator,s=o.ignoreJSONStructure!==void 0?o.ignoreJSONStructure:this.options.ignoreJSONStructure,a;t.indexOf(".")>-1?a=t.split("."):(a=[t,r],n&&(Array.isArray(n)?a.push(...n):ee(n)&&i?a.push(...n.split(i)):a.push(n)));let A=Tl(this.data,a);return!A&&!r&&!n&&t.indexOf(".")>-1&&(t=a[0],r=a[1],n=a.slice(2).join(".")),A||!s||!ee(n)?A:LI(this.data?.[t]?.[r],n,i)}addResource(t,r,n,o,i={silent:!1}){let s=i.keySeparator!==void 0?i.keySeparator:this.options.keySeparator,a=[t,r];n&&(a=a.concat(s?n.split(s):n)),t.indexOf(".")>-1&&(a=t.split("."),o=r,r=a[1]),this.addNamespaces(r),vF(this.data,a,o),i.silent||this.emit("added",t,r,n,o)}addResources(t,r,n,o={silent:!1}){for(let i in n)(ee(n[i])||Array.isArray(n[i]))&&this.addResource(t,r,i,n[i],{silent:!0});o.silent||this.emit("added",t,r,n)}addResourceBundle(t,r,n,o,i,s={silent:!1,skipCopy:!1}){let a=[t,r];t.indexOf(".")>-1&&(a=t.split("."),o=n,n=r,r=a[1]),this.addNamespaces(r);let A=Tl(this.data,a)||{};s.skipCopy||(n=JSON.parse(JSON.stringify(n))),o?GF(A,n,i):A={...A,...n},vF(this.data,a,A),s.silent||this.emit("added",t,r,n)}removeResourceBundle(t,r){this.hasResourceBundle(t,r)&&delete this.data[t][r],this.removeNamespaces(r),this.emit("removed",t,r)}hasResourceBundle(t,r){return this.getResource(t,r)!==void 0}getResourceBundle(t,r){return r||(r=this.options.defaultNS),this.getResource(t,r)}getDataByLanguage(t){return this.data[t]}hasLanguageSomeTranslations(t){let r=this.getDataByLanguage(t);return!!(r&&Object.keys(r)||[]).find(o=>r[o]&&Object.keys(r[o]).length>0)}toJSON(){return this.data}},qF={processors:{},addPostProcessor(e){this.processors[e.name]=e},handle(e,t,r,n,o){return e.forEach(i=>{t=this.processors[i]?.process(t,r,n,o)??t}),t}},RF={},TF=e=>!ee(e)&&typeof e!="boolean"&&typeof e!="number",Ul=class e extends Di{constructor(t,r={}){super(),qz(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],t,this),this.options=r,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.logger=Tr.create("translator")}changeLanguage(t){t&&(this.language=t)}exists(t,r={interpolation:{}}){let n={...r};return t==null?!1:this.resolve(t,n)?.res!==void 0}extractFromKey(t,r){let n=r.nsSeparator!==void 0?r.nsSeparator:this.options.nsSeparator;n===void 0&&(n=":");let o=r.keySeparator!==void 0?r.keySeparator:this.options.keySeparator,i=r.ns||this.options.defaultNS||[],s=n&&t.indexOf(n)>-1,a=!this.options.userDefinedKeySeparator&&!r.keySeparator&&!this.options.userDefinedNsSeparator&&!r.nsSeparator&&!Wz(t,n,o);if(s&&!a){let A=t.match(this.interpolator.nestingRegexp);if(A&&A.length>0)return{key:t,namespaces:ee(i)?[i]:i};let c=t.split(n);(n!==o||n===o&&this.options.ns.indexOf(c[0])>-1)&&(i=c.shift()),t=c.join(o)}return{key:t,namespaces:ee(i)?[i]:i}}translate(t,r,n){let o=typeof r=="object"?{...r}:r;if(typeof o!="object"&&this.options.overloadTranslationOptionHandler&&(o=this.options.overloadTranslationOptionHandler(arguments)),typeof options=="object"&&(o={...o}),o||(o={}),t==null)return"";Array.isArray(t)||(t=[String(t)]);let i=o.returnDetails!==void 0?o.returnDetails:this.options.returnDetails,s=o.keySeparator!==void 0?o.keySeparator:this.options.keySeparator,{key:a,namespaces:A}=this.extractFromKey(t[t.length-1],o),c=A[A.length-1],l=o.nsSeparator!==void 0?o.nsSeparator:this.options.nsSeparator;l===void 0&&(l=":");let g=o.lng||this.language,d=o.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(g?.toLowerCase()==="cimode")return d?i?{res:`${c}${l}${a}`,usedKey:a,exactUsedKey:a,usedLng:g,usedNS:c,usedParams:this.getUsedParamsDetails(o)}:`${c}${l}${a}`:i?{res:a,usedKey:a,exactUsedKey:a,usedLng:g,usedNS:c,usedParams:this.getUsedParamsDetails(o)}:a;let f=this.resolve(t,o),u=f?.res,m=f?.usedKey||a,C=f?.exactUsedKey||a,p=["[object Number]","[object Function]","[object RegExp]"],Q=o.joinArrays!==void 0?o.joinArrays:this.options.joinArrays,v=!this.i18nFormat||this.i18nFormat.handleAsObject,E=o.count!==void 0&&!ee(o.count),w=e.hasDefaultValue(o),B=E?this.pluralResolver.getSuffix(g,o.count,o):"",y=o.ordinal&&E?this.pluralResolver.getSuffix(g,o.count,{ordinal:!1}):"",T=E&&!o.ordinal&&o.count===0,P=T&&o[`defaultValue${this.options.pluralSeparator}zero`]||o[`defaultValue${B}`]||o[`defaultValue${y}`]||o.defaultValue,S=u;v&&!u&&w&&(S=P);let U=TF(S),W=Object.prototype.toString.apply(S);if(v&&S&&U&&p.indexOf(W)<0&&!(ee(Q)&&Array.isArray(S))){if(!o.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");let b=this.options.returnedObjectHandler?this.options.returnedObjectHandler(m,S,{...o,ns:A}):`key '${a} (${this.language})' returned an object instead of string.`;return i?(f.res=b,f.usedParams=this.getUsedParamsDetails(o),f):b}if(s){let b=Array.isArray(S),R=b?[]:{},J=b?C:m;for(let K in S)if(Object.prototype.hasOwnProperty.call(S,K)){let me=`${J}${s}${K}`;w&&!u?R[K]=this.translate(me,{...o,defaultValue:TF(P)?P[K]:void 0,joinArrays:!1,ns:A}):R[K]=this.translate(me,{...o,joinArrays:!1,ns:A}),R[K]===me&&(R[K]=S[K])}u=R}}else if(v&&ee(Q)&&Array.isArray(u))u=u.join(Q),u&&(u=this.extendTranslation(u,t,o,n));else{let b=!1,R=!1;!this.isValidLookup(u)&&w&&(b=!0,u=P),this.isValidLookup(u)||(R=!0,u=a);let K=(o.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&R?void 0:u,me=w&&P!==u&&this.options.updateMissing;if(R||b||me){if(this.logger.log(me?"updateKey":"missingKey",g,c,a,me?P:u),s){let qe=this.resolve(a,{...o,keySeparator:!1});qe&&qe.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let be=[],_t=this.languageUtils.getFallbackCodes(this.options.fallbackLng,o.lng||this.language);if(this.options.saveMissingTo==="fallback"&&_t&&_t[0])for(let qe=0;qe<_t.length;qe++)be.push(_t[qe]);else this.options.saveMissingTo==="all"?be=this.languageUtils.toResolveHierarchy(o.lng||this.language):be.push(o.lng||this.language);let dr=(qe,zt,st)=>{let op=w&&st!==u?st:K;this.options.missingKeyHandler?this.options.missingKeyHandler(qe,c,zt,op,me,o):this.backendConnector?.saveMissing&&this.backendConnector.saveMissing(qe,c,zt,op,me,o),this.emit("missingKey",qe,c,zt,u)};this.options.saveMissing&&(this.options.saveMissingPlurals&&E?be.forEach(qe=>{let zt=this.pluralResolver.getSuffixes(qe,o);T&&o[`defaultValue${this.options.pluralSeparator}zero`]&&zt.indexOf(`${this.options.pluralSeparator}zero`)<0&&zt.push(`${this.options.pluralSeparator}zero`),zt.forEach(st=>{dr([qe],a+st,o[`defaultValue${st}`]||P)})}):dr(be,a,P))}u=this.extendTranslation(u,t,o,f,n),R&&u===a&&this.options.appendNamespaceToMissingKey&&(u=`${c}${l}${a}`),(R||b)&&this.options.parseMissingKeyHandler&&(u=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?`${c}${l}${a}`:a,b?u:void 0,o))}return i?(f.res=u,f.usedParams=this.getUsedParamsDetails(o),f):u}extendTranslation(t,r,n,o,i){if(this.i18nFormat?.parse)t=this.i18nFormat.parse(t,{...this.options.interpolation.defaultVariables,...n},n.lng||this.language||o.usedLng,o.usedNS,o.usedKey,{resolved:o});else if(!n.skipInterpolation){n.interpolation&&this.interpolator.init({...n,interpolation:{...this.options.interpolation,...n.interpolation}});let A=ee(t)&&(n?.interpolation?.skipOnVariables!==void 0?n.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables),c;if(A){let g=t.match(this.interpolator.nestingRegexp);c=g&&g.length}let l=n.replace&&!ee(n.replace)?n.replace:n;if(this.options.interpolation.defaultVariables&&(l={...this.options.interpolation.defaultVariables,...l}),t=this.interpolator.interpolate(t,l,n.lng||this.language||o.usedLng,n),A){let g=t.match(this.interpolator.nestingRegexp),d=g&&g.length;c<d&&(n.nest=!1)}!n.lng&&o&&o.res&&(n.lng=this.language||o.usedLng),n.nest!==!1&&(t=this.interpolator.nest(t,(...g)=>i?.[0]===g[0]&&!n.context?(this.logger.warn(`It seems you are nesting recursively key: ${g[0]} in key: ${r[0]}`),null):this.translate(...g,r),n)),n.interpolation&&this.interpolator.reset()}let s=n.postProcess||this.options.postProcess,a=ee(s)?[s]:s;return t!=null&&a?.length&&n.applyPostProcessor!==!1&&(t=qF.handle(a,t,r,this.options&&this.options.postProcessPassResolved?{i18nResolved:{...o,usedParams:this.getUsedParamsDetails(n)},...n}:n,this)),t}resolve(t,r={}){let n,o,i,s,a;return ee(t)&&(t=[t]),t.forEach(A=>{if(this.isValidLookup(n))return;let c=this.extractFromKey(A,r),l=c.key;o=l;let g=c.namespaces;this.options.fallbackNS&&(g=g.concat(this.options.fallbackNS));let d=r.count!==void 0&&!ee(r.count),f=d&&!r.ordinal&&r.count===0,u=r.context!==void 0&&(ee(r.context)||typeof r.context=="number")&&r.context!=="",m=r.lngs?r.lngs:this.languageUtils.toResolveHierarchy(r.lng||this.language,r.fallbackLng);g.forEach(C=>{this.isValidLookup(n)||(a=C,!RF[`${m[0]}-${C}`]&&this.utils?.hasLoadedNamespace&&!this.utils?.hasLoadedNamespace(a)&&(RF[`${m[0]}-${C}`]=!0,this.logger.warn(`key "${o}" for languages "${m.join(", ")}" won't get resolved as namespace "${a}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),m.forEach(p=>{if(this.isValidLookup(n))return;s=p;let Q=[l];if(this.i18nFormat?.addLookupKeys)this.i18nFormat.addLookupKeys(Q,l,p,C,r);else{let E;d&&(E=this.pluralResolver.getSuffix(p,r.count,r));let w=`${this.options.pluralSeparator}zero`,B=`${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;if(d&&(Q.push(l+E),r.ordinal&&E.indexOf(B)===0&&Q.push(l+E.replace(B,this.options.pluralSeparator)),f&&Q.push(l+w)),u){let y=`${l}${this.options.contextSeparator}${r.context}`;Q.push(y),d&&(Q.push(y+E),r.ordinal&&E.indexOf(B)===0&&Q.push(y+E.replace(B,this.options.pluralSeparator)),f&&Q.push(y+w))}}let v;for(;v=Q.pop();)this.isValidLookup(n)||(i=v,n=this.getResource(p,C,v,r))}))})}),{res:n,usedKey:o,exactUsedKey:i,usedLng:s,usedNS:a}}isValidLookup(t){return t!==void 0&&!(!this.options.returnNull&&t===null)&&!(!this.options.returnEmptyString&&t==="")}getResource(t,r,n,o={}){return this.i18nFormat?.getResource?this.i18nFormat.getResource(t,r,n,o):this.resourceStore.getResource(t,r,n,o)}getUsedParamsDetails(t={}){let r=["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"],n=t.replace&&!ee(t.replace),o=n?t.replace:t;if(n&&typeof t.count<"u"&&(o.count=t.count),this.options.interpolation.defaultVariables&&(o={...this.options.interpolation.defaultVariables,...o}),!n){o={...o};for(let i of r)delete o[i]}return o}static hasDefaultValue(t){let r="defaultValue";for(let n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&r===n.substring(0,r.length)&&t[n]!==void 0)return!0;return!1}},Pl=class{constructor(t){this.options=t,this.supportedLngs=this.options.supportedLngs||!1,this.logger=Tr.create("languageUtils")}getScriptPartFromCode(t){if(t=Nl(t),!t||t.indexOf("-")<0)return null;let r=t.split("-");return r.length===2||(r.pop(),r[r.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(r.join("-"))}getLanguagePartFromCode(t){if(t=Nl(t),!t||t.indexOf("-")<0)return t;let r=t.split("-");return this.formatLanguageCode(r[0])}formatLanguageCode(t){if(ee(t)&&t.indexOf("-")>-1){let r;try{r=Intl.getCanonicalLocales(t)[0]}catch{}return r&&this.options.lowerCaseLng&&(r=r.toLowerCase()),r||(this.options.lowerCaseLng?t.toLowerCase():t)}return this.options.cleanCode||this.options.lowerCaseLng?t.toLowerCase():t}isSupportedCode(t){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(t=this.getLanguagePartFromCode(t)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(t)>-1}getBestMatchFromCodes(t){if(!t)return null;let r;return t.forEach(n=>{if(r)return;let o=this.formatLanguageCode(n);(!this.options.supportedLngs||this.isSupportedCode(o))&&(r=o)}),!r&&this.options.supportedLngs&&t.forEach(n=>{if(r)return;let o=this.getScriptPartFromCode(n);if(this.isSupportedCode(o))return r=o;let i=this.getLanguagePartFromCode(n);if(this.isSupportedCode(i))return r=i;r=this.options.supportedLngs.find(s=>{if(s===i)return s;if(!(s.indexOf("-")<0&&i.indexOf("-")<0)&&(s.indexOf("-")>0&&i.indexOf("-")<0&&s.substring(0,s.indexOf("-"))===i||s.indexOf(i)===0&&i.length>1))return s})}),r||(r=this.getFallbackCodes(this.options.fallbackLng)[0]),r}getFallbackCodes(t,r){if(!t)return[];if(typeof t=="function"&&(t=t(r)),ee(t)&&(t=[t]),Array.isArray(t))return t;if(!r)return t.default||[];let n=t[r];return n||(n=t[this.getScriptPartFromCode(r)]),n||(n=t[this.formatLanguageCode(r)]),n||(n=t[this.getLanguagePartFromCode(r)]),n||(n=t.default),n||[]}toResolveHierarchy(t,r){let n=this.getFallbackCodes(r||this.options.fallbackLng||[],t),o=[],i=s=>{s&&(this.isSupportedCode(s)?o.push(s):this.logger.warn(`rejecting language code not found in supportedLngs: ${s}`))};return ee(t)&&(t.indexOf("-")>-1||t.indexOf("_")>-1)?(this.options.load!=="languageOnly"&&i(this.formatLanguageCode(t)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&i(this.getScriptPartFromCode(t)),this.options.load!=="currentOnly"&&i(this.getLanguagePartFromCode(t))):ee(t)&&i(this.formatLanguageCode(t)),n.forEach(s=>{o.indexOf(s)<0&&i(this.formatLanguageCode(s))}),o}},NF={zero:0,one:1,two:2,few:3,many:4,other:5},MF={select:e=>e===1?"one":"other",resolvedOptions:()=>({pluralCategories:["one","other"]})},JI=class{constructor(t,r={}){this.languageUtils=t,this.options=r,this.logger=Tr.create("pluralResolver"),this.pluralRulesCache={}}addRule(t,r){this.rules[t]=r}clearCache(){this.pluralRulesCache={}}getRule(t,r={}){let n=Nl(t==="dev"?"en":t),o=r.ordinal?"ordinal":"cardinal",i=JSON.stringify({cleanedCode:n,type:o});if(i in this.pluralRulesCache)return this.pluralRulesCache[i];let s;try{s=new Intl.PluralRules(n,{type:o})}catch{if(!Intl)return this.logger.error("No Intl support, please use an Intl polyfill!"),MF;if(!t.match(/-|_/))return MF;let A=this.languageUtils.getLanguagePartFromCode(t);s=this.getRule(A,r)}return this.pluralRulesCache[i]=s,s}needsPlural(t,r={}){let n=this.getRule(t,r);return n||(n=this.getRule("dev",r)),n?.resolvedOptions().pluralCategories.length>1}getPluralFormsOfKey(t,r,n={}){return this.getSuffixes(t,n).map(o=>`${r}${o}`)}getSuffixes(t,r={}){let n=this.getRule(t,r);return n||(n=this.getRule("dev",r)),n?n.resolvedOptions().pluralCategories.sort((o,i)=>NF[o]-NF[i]).map(o=>`${this.options.prepend}${r.ordinal?`ordinal${this.options.prepend}`:""}${o}`):[]}getSuffix(t,r,n={}){let o=this.getRule(t,n);return o?`${this.options.prepend}${n.ordinal?`ordinal${this.options.prepend}`:""}${o.select(r)}`:(this.logger.warn(`no plural rule found for: ${t}`),this.getSuffix("dev",r,n))}},UF=(e,t,r,n=".",o=!0)=>{let i=Kz(e,t,r);return!i&&o&&ee(r)&&(i=LI(e,r,n),i===void 0&&(i=LI(t,r,n))),i},qI=e=>e.replace(/\$/g,"$$$$"),VI=class{constructor(t={}){this.logger=Tr.create("interpolator"),this.options=t,this.format=t?.interpolation?.format||(r=>r),this.init(t)}init(t={}){t.interpolation||(t.interpolation={escapeValue:!0});let{escape:r,escapeValue:n,useRawValueToEscape:o,prefix:i,prefixEscaped:s,suffix:a,suffixEscaped:A,formatSeparator:c,unescapeSuffix:l,unescapePrefix:g,nestingPrefix:d,nestingPrefixEscaped:f,nestingSuffix:u,nestingSuffixEscaped:m,nestingOptionsSeparator:C,maxReplaces:p,alwaysFormat:Q}=t.interpolation;this.escape=r!==void 0?r:Vz,this.escapeValue=n!==void 0?n:!0,this.useRawValueToEscape=o!==void 0?o:!1,this.prefix=i?bi(i):s||"{{",this.suffix=a?bi(a):A||"}}",this.formatSeparator=c||",",this.unescapePrefix=l?"":g||"-",this.unescapeSuffix=this.unescapePrefix?"":l||"",this.nestingPrefix=d?bi(d):f||bi("$t("),this.nestingSuffix=u?bi(u):m||bi(")"),this.nestingOptionsSeparator=C||",",this.maxReplaces=p||1e3,this.alwaysFormat=Q!==void 0?Q:!1,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){let t=(r,n)=>r?.source===n?(r.lastIndex=0,r):new RegExp(n,"g");this.regexp=t(this.regexp,`${this.prefix}(.+?)${this.suffix}`),this.regexpUnescape=t(this.regexpUnescape,`${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`),this.nestingRegexp=t(this.nestingRegexp,`${this.nestingPrefix}(.+?)${this.nestingSuffix}`)}interpolate(t,r,n,o){let i,s,a,A=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{},c=f=>{if(f.indexOf(this.formatSeparator)<0){let p=UF(r,A,f,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(p,void 0,n,{...o,...r,interpolationkey:f}):p}let u=f.split(this.formatSeparator),m=u.shift().trim(),C=u.join(this.formatSeparator).trim();return this.format(UF(r,A,m,this.options.keySeparator,this.options.ignoreJSONStructure),C,n,{...o,...r,interpolationkey:m})};this.resetRegExp();let l=o?.missingInterpolationHandler||this.options.missingInterpolationHandler,g=o?.interpolation?.skipOnVariables!==void 0?o.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:f=>qI(f)},{regex:this.regexp,safeValue:f=>this.escapeValue?qI(this.escape(f)):qI(f)}].forEach(f=>{for(a=0;i=f.regex.exec(t);){let u=i[1].trim();if(s=c(u),s===void 0)if(typeof l=="function"){let C=l(t,i,o);s=ee(C)?C:""}else if(o&&Object.prototype.hasOwnProperty.call(o,u))s="";else if(g){s=i[0];continue}else this.logger.warn(`missed to pass in variable ${u} for interpolating ${t}`),s="";else!ee(s)&&!this.useRawValueToEscape&&(s=DF(s));let m=f.safeValue(s);if(t=t.replace(i[0],m),g?(f.regex.lastIndex+=s.length,f.regex.lastIndex-=i[0].length):f.regex.lastIndex=0,a++,a>=this.maxReplaces)break}}),t}nest(t,r,n={}){let o,i,s,a=(A,c)=>{let l=this.nestingOptionsSeparator;if(A.indexOf(l)<0)return A;let g=A.split(new RegExp(`${l}[ ]*{`)),d=`{${g[1]}`;A=g[0],d=this.interpolate(d,s);let f=d.match(/'/g),u=d.match(/"/g);((f?.length??0)%2===0&&!u||u.length%2!==0)&&(d=d.replace(/'/g,'"'));try{s=JSON.parse(d),c&&(s={...c,...s})}catch(m){return this.logger.warn(`failed parsing options string in nesting for key ${A}`,m),`${A}${l}${d}`}return s.defaultValue&&s.defaultValue.indexOf(this.prefix)>-1&&delete s.defaultValue,A};for(;o=this.nestingRegexp.exec(t);){let A=[];s={...n},s=s.replace&&!ee(s.replace)?s.replace:s,s.applyPostProcessor=!1,delete s.defaultValue;let c=!1;if(o[0].indexOf(this.formatSeparator)!==-1&&!/{.*}/.test(o[1])){let l=o[1].split(this.formatSeparator).map(g=>g.trim());o[1]=l.shift(),A=l,c=!0}if(i=r(a.call(this,o[1].trim(),s),s),i&&o[0]===t&&!ee(i))return i;ee(i)||(i=DF(i)),i||(this.logger.warn(`missed to resolve ${o[1]} for nesting ${t}`),i=""),c&&(i=A.reduce((l,g)=>this.format(l,g,n.lng,{...n,interpolationkey:o[1].trim()}),i.trim())),t=t.replace(o[0],i),this.regexp.lastIndex=0}return t}},Xz=e=>{let t=e.toLowerCase().trim(),r={};if(e.indexOf("(")>-1){let n=e.split("(");t=n[0].toLowerCase().trim();let o=n[1].substring(0,n[1].length-1);t==="currency"&&o.indexOf(":")<0?r.currency||(r.currency=o.trim()):t==="relativetime"&&o.indexOf(":")<0?r.range||(r.range=o.trim()):o.split(";").forEach(s=>{if(s){let[a,...A]=s.split(":"),c=A.join(":").trim().replace(/^'+|'+$/g,""),l=a.trim();r[l]||(r[l]=c),c==="false"&&(r[l]=!1),c==="true"&&(r[l]=!0),isNaN(c)||(r[l]=parseInt(c,10))}})}return{formatName:t,formatOptions:r}},ki=e=>{let t={};return(r,n,o)=>{let i=o;o&&o.interpolationkey&&o.formatParams&&o.formatParams[o.interpolationkey]&&o[o.interpolationkey]&&(i={...i,[o.interpolationkey]:void 0});let s=n+JSON.stringify(i),a=t[s];return a||(a=e(Nl(n),o),t[s]=a),a(r)}},zI=class{constructor(t={}){this.logger=Tr.create("formatter"),this.options=t,this.formats={number:ki((r,n)=>{let o=new Intl.NumberFormat(r,{...n});return i=>o.format(i)}),currency:ki((r,n)=>{let o=new Intl.NumberFormat(r,{...n,style:"currency"});return i=>o.format(i)}),datetime:ki((r,n)=>{let o=new Intl.DateTimeFormat(r,{...n});return i=>o.format(i)}),relativetime:ki((r,n)=>{let o=new Intl.RelativeTimeFormat(r,{...n});return i=>o.format(i,n.range||"day")}),list:ki((r,n)=>{let o=new Intl.ListFormat(r,{...n});return i=>o.format(i)})},this.init(t)}init(t,r={interpolation:{}}){this.formatSeparator=r.interpolation.formatSeparator||","}add(t,r){this.formats[t.toLowerCase().trim()]=r}addCached(t,r){this.formats[t.toLowerCase().trim()]=ki(r)}format(t,r,n,o={}){let i=r.split(this.formatSeparator);if(i.length>1&&i[0].indexOf("(")>1&&i[0].indexOf(")")<0&&i.find(a=>a.indexOf(")")>-1)){let a=i.findIndex(A=>A.indexOf(")")>-1);i[0]=[i[0],...i.splice(1,a)].join(this.formatSeparator)}return i.reduce((a,A)=>{let{formatName:c,formatOptions:l}=Xz(A);if(this.formats[c]){let g=a;try{let d=o?.formatParams?.[o.interpolationkey]||{},f=d.locale||d.lng||o.locale||o.lng||n;g=this.formats[c](a,f,{...l,...o,...d})}catch(d){this.logger.warn(d)}return g}else this.logger.warn(`there was no format function for ${c}`);return a},t)}},Zz=(e,t)=>{e.pending[t]!==void 0&&(delete e.pending[t],e.pendingCount--)},YI=class extends Di{constructor(t,r,n,o={}){super(),this.backend=t,this.store=r,this.services=n,this.languageUtils=n.languageUtils,this.options=o,this.logger=Tr.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=o.maxParallelReads||10,this.readingCalls=0,this.maxRetries=o.maxRetries>=0?o.maxRetries:5,this.retryTimeout=o.retryTimeout>=1?o.retryTimeout:350,this.state={},this.queue=[],this.backend?.init?.(n,o.backend,o)}queueLoad(t,r,n,o){let i={},s={},a={},A={};return t.forEach(c=>{let l=!0;r.forEach(g=>{let d=`${c}|${g}`;!n.reload&&this.store.hasResourceBundle(c,g)?this.state[d]=2:this.state[d]<0||(this.state[d]===1?s[d]===void 0&&(s[d]=!0):(this.state[d]=1,l=!1,s[d]===void 0&&(s[d]=!0),i[d]===void 0&&(i[d]=!0),A[g]===void 0&&(A[g]=!0)))}),l||(a[c]=!0)}),(Object.keys(i).length||Object.keys(s).length)&&this.queue.push({pending:s,pendingCount:Object.keys(s).length,loaded:{},errors:[],callback:o}),{toLoad:Object.keys(i),pending:Object.keys(s),toLoadLanguages:Object.keys(a),toLoadNamespaces:Object.keys(A)}}loaded(t,r,n){let o=t.split("|"),i=o[0],s=o[1];r&&this.emit("failedLoading",i,s,r),!r&&n&&this.store.addResourceBundle(i,s,n,void 0,void 0,{skipCopy:!0}),this.state[t]=r?-1:2,r&&n&&(this.state[t]=0);let a={};this.queue.forEach(A=>{Lz(A.loaded,[i],s),Zz(A,t),r&&A.errors.push(r),A.pendingCount===0&&!A.done&&(Object.keys(A.loaded).forEach(c=>{a[c]||(a[c]={});let l=A.loaded[c];l.length&&l.forEach(g=>{a[c][g]===void 0&&(a[c][g]=!0)})}),A.done=!0,A.errors.length?A.callback(A.errors):A.callback())}),this.emit("loaded",a),this.queue=this.queue.filter(A=>!A.done)}read(t,r,n,o=0,i=this.retryTimeout,s){if(!t.length)return s(null,{});if(this.readingCalls>=this.maxParallelReads){this.waitingReads.push({lng:t,ns:r,fcName:n,tried:o,wait:i,callback:s});return}this.readingCalls++;let a=(c,l)=>{if(this.readingCalls--,this.waitingReads.length>0){let g=this.waitingReads.shift();this.read(g.lng,g.ns,g.fcName,g.tried,g.wait,g.callback)}if(c&&l&&o<this.maxRetries){setTimeout(()=>{this.read.call(this,t,r,n,o+1,i*2,s)},i);return}s(c,l)},A=this.backend[n].bind(this.backend);if(A.length===2){try{let c=A(t,r);c&&typeof c.then=="function"?c.then(l=>a(null,l)).catch(a):a(null,c)}catch(c){a(c)}return}return A(t,r,a)}prepareLoading(t,r,n={},o){if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),o&&o();ee(t)&&(t=this.languageUtils.toResolveHierarchy(t)),ee(r)&&(r=[r]);let i=this.queueLoad(t,r,n,o);if(!i.toLoad.length)return i.pending.length||o(),null;i.toLoad.forEach(s=>{this.loadOne(s)})}load(t,r,n){this.prepareLoading(t,r,{},n)}reload(t,r,n){this.prepareLoading(t,r,{reload:!0},n)}loadOne(t,r=""){let n=t.split("|"),o=n[0],i=n[1];this.read(o,i,"read",void 0,void 0,(s,a)=>{s&&this.logger.warn(`${r}loading namespace ${i} for language ${o} failed`,s),!s&&a&&this.logger.log(`${r}loaded namespace ${i} for language ${o}`,a),this.loaded(t,s,a)})}saveMissing(t,r,n,o,i,s={},a=()=>{}){if(this.services?.utils?.hasLoadedNamespace&&!this.services?.utils?.hasLoadedNamespace(r)){this.logger.warn(`did not save key "${n}" as the namespace "${r}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}if(!(n==null||n==="")){if(this.backend?.create){let A={...s,isUpdate:i},c=this.backend.create.bind(this.backend);if(c.length<6)try{let l;c.length===5?l=c(t,r,n,o,A):l=c(t,r,n,o),l&&typeof l.then=="function"?l.then(g=>a(null,g)).catch(a):a(null,l)}catch(l){a(l)}else c(t,r,n,o,a,A)}!t||!t[0]||this.store.addResource(t[0],r,n,o)}}},PF=()=>({debug:!1,initAsync:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:e=>{let t={};if(typeof e[1]=="object"&&(t=e[1]),ee(e[1])&&(t.defaultValue=e[1]),ee(e[2])&&(t.tDescription=e[2]),typeof e[2]=="object"||typeof e[3]=="object"){let r=e[3]||e[2];Object.keys(r).forEach(n=>{t[n]=r[n]})}return t},interpolation:{escapeValue:!0,format:e=>e,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0}}),OF=e=>(ee(e.ns)&&(e.ns=[e.ns]),ee(e.fallbackLng)&&(e.fallbackLng=[e.fallbackLng]),ee(e.fallbackNS)&&(e.fallbackNS=[e.fallbackNS]),e.supportedLngs?.indexOf?.("cimode")<0&&(e.supportedLngs=e.supportedLngs.concat(["cimode"])),typeof e.initImmediate=="boolean"&&(e.initAsync=e.initImmediate),e),Rl=()=>{},$z=e=>{Object.getOwnPropertyNames(Object.getPrototypeOf(e)).forEach(r=>{typeof e[r]=="function"&&(e[r]=e[r].bind(e))})},Ol=class e extends Di{constructor(t={},r){if(super(),this.options=OF(t),this.services={},this.logger=Tr,this.modules={external:[]},$z(this),r&&!this.isInitialized&&!t.isClone){if(!this.options.initAsync)return this.init(t,r),this;setTimeout(()=>{this.init(t,r)},0)}}init(t={},r){this.isInitializing=!0,typeof t=="function"&&(r=t,t={}),t.defaultNS==null&&t.ns&&(ee(t.ns)?t.defaultNS=t.ns:t.ns.indexOf("translation")<0&&(t.defaultNS=t.ns[0]));let n=PF();this.options={...n,...this.options,...OF(t)},this.options.interpolation={...n.interpolation,...this.options.interpolation},t.keySeparator!==void 0&&(this.options.userDefinedKeySeparator=t.keySeparator),t.nsSeparator!==void 0&&(this.options.userDefinedNsSeparator=t.nsSeparator);let o=c=>c?typeof c=="function"?new c:c:null;if(!this.options.isClone){this.modules.logger?Tr.init(o(this.modules.logger),this.options):Tr.init(null,this.options);let c;this.modules.formatter?c=this.modules.formatter:c=zI;let l=new Pl(this.options);this.store=new Ml(this.options.resources,this.options);let g=this.services;g.logger=Tr,g.resourceStore=this.store,g.languageUtils=l,g.pluralResolver=new JI(l,{prepend:this.options.pluralSeparator,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),c&&(!this.options.interpolation.format||this.options.interpolation.format===n.interpolation.format)&&(g.formatter=o(c),g.formatter.init(g,this.options),this.options.interpolation.format=g.formatter.format.bind(g.formatter)),g.interpolator=new VI(this.options),g.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},g.backendConnector=new YI(o(this.modules.backend),g.resourceStore,g,this.options),g.backendConnector.on("*",(d,...f)=>{this.emit(d,...f)}),this.modules.languageDetector&&(g.languageDetector=o(this.modules.languageDetector),g.languageDetector.init&&g.languageDetector.init(g,this.options.detection,this.options)),this.modules.i18nFormat&&(g.i18nFormat=o(this.modules.i18nFormat),g.i18nFormat.init&&g.i18nFormat.init(this)),this.translator=new Ul(this.services,this.options),this.translator.on("*",(d,...f)=>{this.emit(d,...f)}),this.modules.external.forEach(d=>{d.init&&d.init(this)})}if(this.format=this.options.interpolation.format,r||(r=Rl),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){let c=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);c.length>0&&c[0]!=="dev"&&(this.options.lng=c[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined"),["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach(c=>{this[c]=(...l)=>this.store[c](...l)}),["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach(c=>{this[c]=(...l)=>(this.store[c](...l),this)});let a=Vs(),A=()=>{let c=(l,g)=>{this.isInitializing=!1,this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),a.resolve(g),r(l,g)};if(this.languages&&!this.isInitialized)return c(null,this.t.bind(this));this.changeLanguage(this.options.lng,c)};return this.options.resources||!this.options.initAsync?A():setTimeout(A,0),a}loadResources(t,r=Rl){let n=r,o=ee(t)?t:this.language;if(typeof t=="function"&&(n=t),!this.options.resources||this.options.partialBundledLanguages){if(o?.toLowerCase()==="cimode"&&(!this.options.preload||this.options.preload.length===0))return n();let i=[],s=a=>{if(!a||a==="cimode")return;this.services.languageUtils.toResolveHierarchy(a).forEach(c=>{c!=="cimode"&&i.indexOf(c)<0&&i.push(c)})};o?s(o):this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(A=>s(A)),this.options.preload?.forEach?.(a=>s(a)),this.services.backendConnector.load(i,this.options.ns,a=>{!a&&!this.resolvedLanguage&&this.language&&this.setResolvedLanguage(this.language),n(a)})}else n(null)}reloadResources(t,r,n){let o=Vs();return typeof t=="function"&&(n=t,t=void 0),typeof r=="function"&&(n=r,r=void 0),t||(t=this.languages),r||(r=this.options.ns),n||(n=Rl),this.services.backendConnector.reload(t,r,i=>{o.resolve(),n(i)}),o}use(t){if(!t)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!t.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return t.type==="backend"&&(this.modules.backend=t),(t.type==="logger"||t.log&&t.warn&&t.error)&&(this.modules.logger=t),t.type==="languageDetector"&&(this.modules.languageDetector=t),t.type==="i18nFormat"&&(this.modules.i18nFormat=t),t.type==="postProcessor"&&qF.addPostProcessor(t),t.type==="formatter"&&(this.modules.formatter=t),t.type==="3rdParty"&&this.modules.external.push(t),this}setResolvedLanguage(t){if(!(!t||!this.languages)&&!(["cimode","dev"].indexOf(t)>-1)){for(let r=0;r<this.languages.length;r++){let n=this.languages[r];if(!(["cimode","dev"].indexOf(n)>-1)&&this.store.hasLanguageSomeTranslations(n)){this.resolvedLanguage=n;break}}!this.resolvedLanguage&&this.languages.indexOf(t)<0&&this.store.hasLanguageSomeTranslations(t)&&(this.resolvedLanguage=t,this.languages.unshift(t))}}changeLanguage(t,r){this.isLanguageChangingTo=t;let n=Vs();this.emit("languageChanging",t);let o=a=>{this.language=a,this.languages=this.services.languageUtils.toResolveHierarchy(a),this.resolvedLanguage=void 0,this.setResolvedLanguage(a)},i=(a,A)=>{A?this.isLanguageChangingTo===t&&(o(A),this.translator.changeLanguage(A),this.isLanguageChangingTo=void 0,this.emit("languageChanged",A),this.logger.log("languageChanged",A)):this.isLanguageChangingTo=void 0,n.resolve((...c)=>this.t(...c)),r&&r(a,(...c)=>this.t(...c))},s=a=>{!t&&!a&&this.services.languageDetector&&(a=[]);let A=ee(a)?a:a&&a[0],c=this.store.hasLanguageSomeTranslations(A)?A:this.services.languageUtils.getBestMatchFromCodes(ee(a)?[a]:a);c&&(this.language||o(c),this.translator.language||this.translator.changeLanguage(c),this.services.languageDetector?.cacheUserLanguage?.(c)),this.loadResources(c,l=>{i(l,c)})};return!t&&this.services.languageDetector&&!this.services.languageDetector.async?s(this.services.languageDetector.detect()):!t&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect.length===0?this.services.languageDetector.detect().then(s):this.services.languageDetector.detect(s):s(t),n}getFixedT(t,r,n){let o=(i,s,...a)=>{let A;typeof s!="object"?A=this.options.overloadTranslationOptionHandler([i,s].concat(a)):A={...s},A.lng=A.lng||o.lng,A.lngs=A.lngs||o.lngs,A.ns=A.ns||o.ns,A.keyPrefix!==""&&(A.keyPrefix=A.keyPrefix||n||o.keyPrefix);let c=this.options.keySeparator||".",l;return A.keyPrefix&&Array.isArray(i)?l=i.map(g=>`${A.keyPrefix}${c}${g}`):l=A.keyPrefix?`${A.keyPrefix}${c}${i}`:i,this.t(l,A)};return ee(t)?o.lng=t:o.lngs=t,o.ns=r,o.keyPrefix=n,o}t(...t){return this.translator?.translate(...t)}exists(...t){return this.translator?.exists(...t)}setDefaultNamespace(t){this.options.defaultNS=t}hasLoadedNamespace(t,r={}){if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;let n=r.lng||this.resolvedLanguage||this.languages[0],o=this.options?this.options.fallbackLng:!1,i=this.languages[this.languages.length-1];if(n.toLowerCase()==="cimode")return!0;let s=(a,A)=>{let c=this.services.backendConnector.state[`${a}|${A}`];return c===-1||c===0||c===2};if(r.precheck){let a=r.precheck(this,s);if(a!==void 0)return a}return!!(this.hasResourceBundle(n,t)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||s(n,t)&&(!o||s(i,t)))}loadNamespaces(t,r){let n=Vs();return this.options.ns?(ee(t)&&(t=[t]),t.forEach(o=>{this.options.ns.indexOf(o)<0&&this.options.ns.push(o)}),this.loadResources(o=>{n.resolve(),r&&r(o)}),n):(r&&r(),Promise.resolve())}loadLanguages(t,r){let n=Vs();ee(t)&&(t=[t]);let o=this.options.preload||[],i=t.filter(s=>o.indexOf(s)<0&&this.services.languageUtils.isSupportedCode(s));return i.length?(this.options.preload=o.concat(i),this.loadResources(s=>{n.resolve(),r&&r(s)}),n):(r&&r(),Promise.resolve())}dir(t){if(t||(t=this.resolvedLanguage||(this.languages?.length>0?this.languages[0]:this.language)),!t)return"rtl";let r=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"],n=this.services?.languageUtils||new Pl(PF());return r.indexOf(n.getLanguagePartFromCode(t))>-1||t.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(t={},r){return new e(t,r)}cloneInstance(t={},r=Rl){let n=t.forkResourceStore;n&&delete t.forkResourceStore;let o={...this.options,...t,isClone:!0},i=new e(o);if((t.debug!==void 0||t.prefix!==void 0)&&(i.logger=i.logger.clone(t)),["store","services","language"].forEach(a=>{i[a]=this[a]}),i.services={...this.services},i.services.utils={hasLoadedNamespace:i.hasLoadedNamespace.bind(i)},n){let a=Object.keys(this.store.data).reduce((A,c)=>(A[c]={...this.store.data[c]},A[c]=Object.keys(A[c]).reduce((l,g)=>(l[g]={...A[c][g]},l),A[c]),A),{});i.store=new Ml(a,o),i.services.resourceStore=i.store}return i.translator=new Ul(i.services,o),i.translator.on("*",(a,...A)=>{i.emit(a,...A)}),i.init(o,r),i.translator.options=o,i.translator.backendConnector.services.utils={hasLoadedNamespace:i.hasLoadedNamespace.bind(i)},i}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}},Ge=Ol.createInstance();Ge.createInstance=Ol.createInstance;var mFe=Ge.createInstance,hFe=Ge.dir,CFe=Ge.init,BFe=Ge.loadResources,EFe=Ge.reloadResources,yFe=Ge.use,QFe=Ge.changeLanguage,wFe=Ge.getFixedT,SFe=Ge.t,xFe=Ge.exists,bFe=Ge.setDefaultNamespace,kFe=Ge.hasLoadedNamespace,DFe=Ge.loadNamespaces,_Fe=Ge.loadLanguages;var _i=V(Ae());async function WI({image:e,type:t,quality:r=1}){if(e instanceof Blob||e instanceof ImageBitmap)return eY({image:e,type:t,quality:r});if(typeof e=="string"){let i=e;e=new Image,e.src=i}e.complete||await e.decode();let n=new OffscreenCanvas(e.naturalWidth,e.naturalHeight);return n.getContext("2d").drawImage(e,0,0),n.convertToBlob({type:t,quality:r})}async function eY({image:e,type:t,quality:r=1}){let n=e instanceof Blob;if(n&&e.type===t)return e;let o=n?await createImageBitmap(e):e,i=new OffscreenCanvas(o.width,o.height);return i.getContext("2d").drawImage(o,0,0),n&&o.close(),i.convertToBlob({type:t,quality:r})}async function HF(e){let r=Kr(`/i18n/${e}.json`);return await(await fetch(r)).json()}function jI(e,t,r="code"){return new Intl.DisplayNames([LF(e)],{type:"language",fallback:r}).of(LF(t))}var tY={zh_CN:"zh-Hans",zh_TW:"zh-Hant","zh-CN":"zh-Hans","zh-TW":"zh-Hant"};function LF(e){return(tY[e]??e).replaceAll("_","-")}function VF(e,t,r=new Map,n){for(let{children:o,i18nKey:i,...s}of e)t&&_i.default.contextMenus.create({...n?{parentId:n.id,contexts:n.contexts,documentUrlPatterns:n.documentUrlPatterns}:null,...s}),i&&r.set(s.id,i),o&&VF(o,t,r,s);return r}function KF(e,t){let r=VF(e,t);return function(){let o=Xt.English;Ge.init({resources:{},lng:"en",fallbackLng:"en",interpolation:{escapeValue:!1,defaultVariables:{APP_NAME:DB,AI:"AI",WISEBASE:Y_}}}).then(()=>z("language",Xt.English)).then(i=>{i!==o&&(o=i,JF(i,r))}).finally(()=>{Vd.subscribe(i=>{if(!bd(i,"language"))return;let s=i.language.newValue;s&&s!==o&&(o=s,JF(s,r))})})}}async function JF(e,t){if(!Ge.hasResourceBundle(e,"translation")){let o=await HF(e);Ge.addResourceBundle(e,"translation",o)}let r=Ge.getFixedT(e,"translation"),n=jI(e,e);for(let[o,i]of t.entries())_i.default.contextMenus.update(o,{title:r(i,{lang:n})})}function zF(){let e=[{contexts:["action"],id:"open-full-page-chat",title:"Open Full Page Chat",i18nKey:"contextMenu.openFullPageChat"},{id:"ai-page-tools",contexts:["page","link"],documentUrlPatterns:["http://*/*","https://*/*"],title:"Sider",children:[{id:"open-full-page-chat2",title:"Open Full Page Chat",i18nKey:"contextMenu.openFullPageChat"},{id:"summarize-page",title:"Summarize the page",i18nKey:"contextMenu.summarizePage"},{id:"translate-page",title:"Translate to English",i18nKey:"contextMenu.translatePage"},{id:"save-page",title:"Save the page to wisebase",i18nKey:"contextMenu.savePage"}]},{contexts:["selection"],id:"ai-selection-tools",title:"Sider",children:[{id:"chat-selection",title:"Chat with selected text",i18nKey:"contextMenu.chatSelection"},{id:"highlight-selection",title:"Highlight selected text",i18nKey:"contextMenu.highlightSelection"}]},{contexts:["image"],id:"ai-image-tools",title:"AI Image Tools",i18nKey:"contextMenu.imageTools",children:[{id:"chat-with-image",title:"Chat with Image",i18nKey:"imageToolbar.chatWithImage"},{id:"extract-text-from-image",title:"Extract Text",i18nKey:"imageToolbar.extractText"},{id:"remove-background",title:"Remove Background",i18nKey:"imageToolbar.removeBackground"},{id:"remove-text",title:"Remove Text",i18nKey:"imageToolbar.removeText"},{id:"remove-brushed-area",title:"Photo Eraser",i18nKey:"imageToolbar.erase"},{id:"inpaint",title:"Inpaint",i18nKey:"imageToolbar.inpaint"},{id:"replace-background",title:"Replace Background",i18nKey:"imageToolbar.replaceBackground"},{id:"upscale-image",title:"Upscale",i18nKey:"imageToolbar.upscale"},{id:"variation",title:"Create Variations",i18nKey:"imageToolbar.variation"}]}];_i.default.runtime.onInstalled.addListener(()=>{KF(e,!0)}),_i.default.contextMenus.onClicked.addListener(async(r,n)=>{switch(r.menuItemId){case"open-full-page-chat":case"open-full-page-chat2":{Ho();break}case"summarize-page":{if(!await _e()){Pn();return}let i=n?.id;if(i===void 0)return;let s=Go(n);s&&s.then(()=>{xt("summarize-page-from-contextmenu",null,{tabId:i})});break}case"translate-page":{if(!await _e()){Pn();return}let i=n?.id;if(i===void 0)return;xt("translate-page-from-contextmenu",null,{tabId:i});break}case"save-page":{if(!await _e()){Pn();return}let i=n?.id;if(i===void 0)return;xt("save-page-from-contextmenu",null,{tabId:i});break}case"chat-selection":{if(!await _e()){Pn();return}return Go(n),_i.default.storage.local.set({initialSelectionText:r.selectionText,lastTab:"chat"}).then(()=>{});break}case"highlight-selection":{let o=n?.id;if(o===void 0)return;if(!await _e()){Pn();return}xt("highlight-page-from-contextmenu",null,{tabId:o});break}case"chat-with-image":case"extract-text-from-image":{(async function(){let o=r.srcUrl;if(!o)return;let i=r.menuItemId==="chat-with-image",s=["image/png","image/jpeg"];await Go(n),Ht("lastTab",i?"chat":"ocr");let A=await(await fetch(o)).blob(),c=await createImageBitmap(A);s.includes(A.type)||(A=await WI({image:c,type:"image/png"})),c.close();let l=await Jr(A),g=!1;for await(let d of zw())if(d){g=!0;break}xt(i?"send-image-to-chat":"send-image-to-ocr",{base64:l,imageUrl:o,width:c.width,height:c.height,type:A.type},g?{view:"sidebar"}:{tabId:n?.id})})();break}case"upscale-image":case"remove-background":case"remove-text":case"replace-background":case"remove-brushed-area":case"inpaint":case"variation":{QA.report(`visit_web_right_click_image_assistant_${r.menuItemId.replace(/-/g,"_")}`);let o=r.menuItemId,i=r.srcUrl;if(!i)return;(async function(){let s=["image/png","image/jpeg"],A=await(await fetch(i)).blob(),c=await createImageBitmap(A);s.includes(A.type)||(A=await WI({image:c,type:"image/png"})),c.close();let l=await Jr(A),g=await new Promise(async(d,f)=>{let u=new AbortController,m=setTimeout(()=>{u.abort(),d(C)},1e4);nt("website-painter-ready",({sender:p})=>{p.tab?.id===C.id&&(u.abort(),clearTimeout(m),d(C))},{signal:u.signal});let C=await bI({subRoute:kd(o,{variation:"painter",_:o}),hasDataToSend:!0})});xt("send-image-to-image-tools",{toolName:o,base64:l,imageUrl:i,width:c.width,height:c.height,type:A.type},{tabId:g.id})})()}}}),KF(e,!1)()}var Gl=V(Ae());var XI="do_ocr";async function ZI(e){Gl.default.runtime.sendMessage({type:"is-sidepanel-open"}).then(r=>{r?Gl.default.runtime.sendMessage({type:XI,data:{img:e,isForSidepanel:!0}}):t()}).catch(t);async function t(){mQ({url:Kr("standalone.html")}),await Gt(500),Gl.default.runtime.sendMessage({type:XI,data:{img:e,isForSidepanel:!1}})}}async function $I(){if(await z("language"))return;let t=navigator.languages;for(let r of t){r=r.replace("-","_");let n=r.split("_");n[0]=n[0].toLowerCase(),n[1]&&(n[1]=n[1].toUpperCase()),r=n.join("_");let o="";if(r in dd?o=r:o=Object.keys(dd).find(i=>n[0]===i.split("_")[0])||"",o){await M({__DONT_SYNC__:`language${Date.now()}`,language:o});return}}await M({__DONT_SYNC__:`language${Date.now()}`,language:Xt.English})}var YF=V(Ae());function WF(){YF.default.storage.local.onChanged.addListener(e=>{if(e.__DONT_SYNC__?.newValue)return;let t=Object.keys(e).filter(r=>r in Ta);t.length&&rY(t)})}var jF=async e=>{if(!await _e())return;await XF();let r=await j(e);r["provider:gpt3"]&&(r["provider:gpt3"].apiKey=""),Fi(r,"translatorHostConfig"),Fi(r,"quickActionInputIconDisabledHost"),Fi(r,"sidebarFabDisabledHost"),Fi(r,"webAssistantImageDisabledHost"),Fi(r,"pageTranslationNeverHost"),Fi(r,"inputTranslationDisabledHost"),Z.setUserSettings(r)},ep=new Map,rY=e=>{let t=e.sort().toString();ep.has(t)||ep.set(t,vt(jF,1e3)),ep.get(t)?.(e)},XF=async()=>{let{allPromptList:e}=await z(["allPromptList"]),t=!1;t=!1,e&&(await Promise.all(e.map(async r=>{if(!r.id){t=!0;let n=await Z.createPrompt({key:r.key,name:r.name,content:r.content,use:r.usedIn,icon:r.icon});r.id=String(n.id)}})),t&&await M({__DONT_SYNC__:`unsavedSidebarTpl${Date.now()}`,allPromptList:e}))},ZF=async()=>{if(!await _e())throw new Error("login required");await XF(),await nY()};async function nY(){let e=Object.keys(Ta),t={...await Z.getUserSettings()||{}};if(!t||!Object.keys(t).length){await jF(e);return}for(let n of Object.keys(t))(!(n in Ta)||t[n]===null)&&delete t[n];let r=await j(e);vi(t,"translatorHostConfig"),vi(t,"quickActionInputIconDisabledHost"),vi(t,"sidebarFabDisabledHost"),vi(t,"webAssistantImageDisabledHost"),vi(t,"pageTranslationNeverHost"),vi(t,"inputTranslationDisabledHost"),["chatVisiblePromptKeys","readVisiblePromptKeys","writeVisiblePromptKeys"].forEach(n=>{delete t[n]}),ts(r,t,(n,o)=>{if(Array.isArray(n))return o}),await M({__DONT_SYNC__:`pullFromCloud${Date.now()}`,...r})}function Fi(e,t){let r=[];if(e[t]&&typeof e[t]=="object"&&!Array.isArray(e[t])){for(let[n,o]of Object.entries(e[t]))n!=="undefined"&&r.push({__key__:n,...o||{}});e[t]=r}}function vi(e,t){let r={};if(Array.isArray(e[t])){for(let n of e[t])n.__key__&&n.__key__!=="undefined"&&(r[n.__key__]=n,delete n.__key__);e[t]=r}}function $F(){yd("logged",e=>{oY(!!e.logged?.newValue)}),yd(["language"],async e=>{if(typeof e.language?.oldValue>"u")return;if(await _e()){let{allPromptList:r}=await j({allPromptList:[]});r?.length?Z.getAllPromptList():setTimeout(()=>{Z.getAllPromptList()},2e3)}ze("systemVoiceDemoText")})}var oY=e=>{e?iY():sY()},iY=vt(()=>{Ys(!0)},3e3,{leading:!0}),sY=()=>{ze("userInfo")},ev=wr(async()=>{let{__invited_reward_finish__:e}=await j({__invited_reward_finish__:!1});if(e)return;if(await _e()){let r=await Z.inviteFinish();r.is_invited&&r.is_rewarded&&(M({userIsInvited:!0,inviteRewardConfig:{"gpt3.5":r.reward.GPT3Dot5Count,gpt4:r.reward.GPT4Count}}),r.already_rewarded||M({__show_invited_reward__:!0})),M({__invited_reward_finish__:!0})}},1e4);function sn(e,t=0){return wQ(e,async()=>{switch(e){case"getVipPeriodInfo":await Z.getVipPeriodInfo();break;case"getVipInfo":await Z.getVipInfo();break;case"getUserInfo":await Z.getUserInfo();break;case"getUserStatus":await Z.getUserStatus();break;case"pullSettingsFromCloud":await ZF();break;case"inviteFinishCallback":await ev();break;case"getPricingPlan":await Z.getPricingPlan();break;case"getAllPromptList":await Z.getAllPromptList();break;case"getClientConfig":await Z.getClientConfig();break;case"getVoiceRoleList":await Z.getVoiceRoleList();break;case"getDomainPool":await iw();break;case"getWisebaseAllSavedUrls":await M_();break;case"syncWisebaseAllSavedUrls":await Ql();break;case"getWisebases":await Si();break;default:break}},t)()}async function Ys(e){await ze("__manual_logout__"),await $I();let t=await _e();M({logged:t}),tv([],e)}async function tv(e,t){let r=await _e(),o=[{name:"getAllPromptList",cacheDuration:t?0:1/0},{name:"getPricingPlan",cacheDuration:864e5},{name:"getClientConfig",cacheDuration:1/0},{name:"getDomainPool",cacheDuration:1/0},...r?[{name:"getVipPeriodInfo",cacheDuration:864e5},{name:"getUserInfo",cacheDuration:t?0:864e5},{name:"getUserStatus",cacheDuration:t?0:864e5},{name:"getVipInfo",cacheDuration:t?0:1/0},{name:"pullSettingsFromCloud",cacheDuration:t?0:1/0},{name:"getVoiceRoleList",cacheDuration:6048e5},{name:"inviteFinishCallback",cacheDuration:t?0:1/0},{name:"getWisebaseAllSavedUrls",cacheDuration:t?0:1/0},{name:"getWisebases",cacheDuration:t?0:1/0}]:[]],i=e&&e.length>0?o.filter(s=>e.includes(s.name)):o;await AY(i.map(s=>sn(s.name,s.cacheDuration)))}async function AY(e){let t=[];(await Promise.allSettled(e)).forEach(n=>{if(n.status==="rejected"){let o=n.reason?.message;o&&t.push(o)}}),t.length>0?await M({__requestDataFailedJobNames__:t}):await ze("__requestDataFailedJobNames__")}async function rv(){return(await nv()).length>0}async function nv(){let{__requestDataFailedJobNames__:e}=await j({__requestDataFailedJobNames__:[]});return e}async function ov(){let e=await nv();e.length>0&&await tv(e)}var iv=V(Ae());async function sv(){let e={},t=["p","p1","p2"],r=Ve?`https://*.microsoft.com/*${Yi}*`:`https://*.google.com/*${Yi}*`,n=await iv.default.tabs.query({url:r,currentWindow:!0});if(n.length){n.reverse();for(let o of n){let i=o.url||fe.origin,{searchParams:s}=new URL(i),a=!1;for(let[A,c]of s.entries())t.includes(A)&&c&&(a=!0,e[A]=c);if(a)break}}if(Object.keys(e).length>0)for(let[o,i]of Object.entries(e))await lA(o==="p"?"source":o,i,7);else for(let o of t){let i=await cA(o==="p"?"source":o);i&&(e[o]=i)}if(Object.keys(e).length){Z.adStat({action:"install-sider-successfully",source:e.p||"",p1:e.p1||"",p2:e.p2||""});let o=cY(e.p1||""),i={installByAD:!0,onBoardFrom:o};(o==="grammar"||o==="translate"||o==="write"||o==="ocr")&&(i.lastTab=o==="write"?"compose":o),await M(i)}else{let o="organic",i={p:o,p1:"extension",p2:Ve?"edge":"chrome"};for(let[s,a]of Object.entries(i))await lA(s==="p"?"source":s,a,7);Z.adStat({action:"install-sider-successfully",source:o,p1:"",p2:""})}}function cY(e){return e.includes("ytb")?"ytb":e.includes("translate")?"translate":e.includes("ocr")?"ocr":e.includes("write")?"write":e.includes("bgremover")?"bgremover":e.includes("chatpdf")?"pdf":e.includes("summarizer")?"summary":e.includes("grammar")?"grammar":e.includes("image")?"painter":e.includes("email")?"email":""}var tp=V(Ae());var ql=class{constructor(){this.results=[];this.lastText="";this.lastTextIndex=-1;this.isInTagStream=!1}parse(t){return t.type==="text"?this.handleTextMsg(t):t.type==="tool_call"?this.handleToolCallMsg(t):t.type==="llm_status"?this.handleLLMStatusMsg(t):t.type==="image"?this.handleImageMsg(t):t.type==="data_analysis_image"?this.handleDataAnalysisImage(t):t.type==="media_key_moments"?this.handleKeyMomentsMsg(t):t.type==="file_highlights"?this.handleFileHighlightMsg(t):t.type==="notification"?this.handleNotificationMsg(t):t.type==="tag_stream"?this.handleTagStreamMsg(t):t.type==="file"?this.handleFileMsg(t):t.type==="reasoning_content"&&this.handleReasoningContentMsg(t),t.type!=="text"&&(this.lastText="",this.lastTextIndex=-1),this.results}getLastResult(){return this.results[this.results.length-1]}handleReasoningContentMsg(t){if(t.reasoning_content.status==="start")this.results.push({type:"reasoning_content",reasoningContent:{status:"start",text:""}});else if(t.reasoning_content.status==="processing"){let r=this.results.findLastIndex(n=>n.type==="reasoning_content");this.results[r]&&(this.results[r].reasoningContent.text+=t.reasoning_content.text)}else if(t.reasoning_content.status==="finish"||t.reasoning_content.status==="fail"){let r=this.results.findLastIndex(n=>n.type==="reasoning_content");this.results[r]&&(this.results[r].reasoningContent.status=t.reasoning_content.status)}}handleFileMsg(t){this.results.push({type:"file",file:sr(t.file)})}handleTagStreamMsg(t){if(t.tag_stream.type==="start")this.isInTagStream=!0,this.results.push({type:"tag",id:ne(),tag:{tagName:t.tag_stream.tag_name,attrs:t.tag_stream.attrs,tagId:"",status:"start",content:""}});else if(t.tag_stream.type==="content"){let r=this.getLastResult();r&&r.type==="tag"&&r.tag.tagName===t.tag_stream.tag_name&&(r.tag.content+=t.tag_stream.content)}else if(t.tag_stream.type==="end"){let r=this.getLastResult();r&&r.type==="tag"&&r.tag.tagName===t.tag_stream.tag_name&&(r.tag.status="finish",r.tag.tagId=t.tag_stream.tag_id),this.isInTagStream=!1}}handleLLMStatusMsg(t){let r=t.llm_status.id,n=this.results.findIndex(o=>o.id===r);this.results[n]?this.results[n]={...t.llm_status}:this.results.push({type:"llm_status",id:r,status:t.llm_status.status,data:t.llm_status.data})}handleNotificationMsg(t){this.results.push({type:"notification",id:ne(),notification:t.notification})}handleKeyMomentsMsg(t){t.media_key_moments&&this.results.push({type:"media_key_moments",id:ne(),mediaKeyMoments:{keyMoments:t.media_key_moments.key_moments}})}handleTextMsg(t){if(t.text){let r=this.getLastResult();r&&r.type==="text"?r.text+=t.text:this.results.push({type:"text",text:t.text,id:ne()})}}handleToolCallMsg(t){let r=t.tool_call.id+(t.tool_call.data_analysis&&typeof t.tool_call.data_analysis.tool_call_id<"u"?t.tool_call.data_analysis.tool_call_id:""),n=t.tool_call.name,o=n.replace(/_([a-z])/g,(i,s)=>s.toUpperCase());if(t.tool_call.status==="start")this.results.push({type:"tool_call",toolCall:sr(t.tool_call)});else if(t.tool_call.status==="processing"){let i=this.results.findIndex(a=>a?.toolCall?.id+(a.toolCall?.[o]?.toolCallId||"")===r),s=this.results[i];s&&(s.toolCall={...s.toolCall,[o]:sr(t.tool_call[n])})}else if(t.tool_call.status==="finish"||t.tool_call.status==="fail"){let i=this.results.findIndex(a=>a?.toolCall?.id+(a?.toolCall?.[o]?.toolCallId||"")===r),s=this.results[i];s&&(s.toolCall={...s.toolCall,[o]:sr(t.tool_call[n])}),s.toolCall.status=t.tool_call.status,t.tool_call.error&&(s.toolCall.error=t.tool_call.error)}}handleImageMsg(t){this.results.push({type:"sider_image",id:ne(),images:t.images.images})}handleDataAnalysisImage(t){this.results.push({type:"data_analysis_image",id:ne(),dataAnalysisImage:t.data_analysis_image})}handleFileHighlightMsg(t){this.results.push({type:"file_highlights",id:ne(),fileHighlights:{highlights:t.file_highlights.highlights}})}};function av(e){return/\${\s*(lang)\s*}/gi.test(e)}var Hl=class{constructor(t){this.token="";this.refreshToken="";this.anonymous=!0;this.checkFileStatusTimer=null;this.cid=t}async getToken(){let t=await $o();this.token=t.token,this.refreshToken=t.refreshToken,this.anonymous=t.anonymous}async generateAnswer(t){let r={},n=null,o={};try{await this.getToken()}catch(S){throw new Error(S.errMsg)}if(!this.cid&&t.historyMsg)try{let{cid:S,lastMsgId:U,messages:W}=await Z.uploadHistoryMsg(t.historyMsg);t.onEvent({type:"uploadMsgDone",data:{cid:S,messages:W}}),this.cid=S,this.tempLastMsgId=U}catch(S){throw new Error(S.errMsg)}let{[Wi]:{model:i}}=await j({[Wi]:{model:"sider"}}),s=t.model||i,a="",A="",c=!1;function l(){!c&&a&&A&&Z.statUserStop(a,A),n&&clearInterval(n)}t.getCleanupMethod?.(l);async function g(S){return S.includes("free_trial_data_analysis")?!0:(await Z.getFileStauts(S)).every(W=>W.textReady||W.textTaskIsFailed)}async function d(S){let{handle_msg:U,is_embedding:W}=await Z.getFileStauts(S),b=null;if(W)try{b=JSON.parse(U)}catch{if(U)throw new Error(U)}else b={accept_model:{"gpt-3.5":!0,"gpt-4":!0,"gpt-4o":!0,"gpt3.5-16k":!0,"claude-instant":!0,claude2:!0,"claude-3-haiku":!0,"claude-3-sonnet":!0,"claude-3.5-sonnet":!0,"claude-3-opus":!0,bard:!0,"gemini-pro":!0,"gemini-1.5-pro":!0,"gemini-1.5-flash":!0,gpts:!0,"llama-3":!0}};return b}async function f(S,U){let{fileTextStatus:W}=await tp.default.storage.local.get({fileTextStatus:{}});if(S.filter(R=>W[R]).length===S.length)return null;let b=await g(S);return b?(qo(S,!0),null):new Promise((R,J)=>{n=setInterval(async()=>{try{b=await g(S),b&&(qo(S,!0),n&&(clearInterval(n),R(null)))}catch(K){throw n&&clearInterval(n),new Error(K)}},1e3)})}if(t.multiContent?.some(S=>S.type==="file")&&(t.sPromptTmpl&&!t.sPromptTmpl.key.includes("audio")||!t.sPromptTmpl)){let S=t.multiContent?.filter(U=>U.type==="file"&&U.file?.type!=="image").map(U=>U.file.file_id)||[];await f(S,s).catch(U=>{throw new Error("Getting file status error: "+U.toString())})}let u=async(S,U,W)=>{try{return await zr(S,{method:"POST",signal:t.signal,headers:{"Content-Type":"application/json",Authorization:this.token,"X-App-Name":X,"X-App-Version":at,"X-Time-Zone":de,"X-Trace-Id":ne()},body:JSON.stringify(U),onMessage(b){if(b=="[DONE]"){c=!0,t.onEvent({type:"done"});return}let R=JSON.parse(b);if(R.code!==0)throw new Error(JSON.stringify({code:R.code,msg:R.msg||R.message}));R.type==="message_start"&&(a=R.message_start.cid,A=R.message_start.assistant_message_id,M({lastMessageId:A})),W(R.data)}})}catch(b){let R=b.message,J=null;try{J=JSON.parse(R)}catch{}if(t.from==="chat")throw new Error(JSON.stringify({code:J?.code,message:J?.msg||J?.message||R}));ds(J?.code,J?.msg||J?.message||R)}};async function m(){let S={},U=t.autoTools||[];if((t.freeTrailTool==="artifacts"||t.freeTrailTool==="thinking_mode")&&!U.includes(t.freeTrailTool)&&U.push(t.freeTrailTool),U.indexOf("create_image")!==-1){let{imageQuality:J}=await j({imageQuality:"medium"});S.image={quality_level:J}}let b=t.sPromptTmpl?[t.sPromptTmpl]:[];if(!b.length){let J=[];(U.includes("artifacts")||U.includes("thinking_mode"))&&(U.includes("artifacts")&&J.push({key:"artifacts",attributes:{lang:"original"}}),b=J)}S.auto=U.filter(J=>J!=="artifacts"&&J!=="thinking_mode"),t.forceSearch?S.force="search":b&&(Array.isArray(b)?b.length>0&&b?.some(J=>J?.key==="artifacts"||J?.key==="thinking_mode"):b&&b.key!=="artifacts"&&b.key),t.forceTool&&(S.force=t.forceTool),t.freeTrailTool&&(S.free_trial_tool=t.freeTrailTool,!S.force&&t.freeTrailTool!=="artifacts"&&t.freeTrailTool!=="thinking_mode"&&(S.force=t.freeTrailTool));let R=await tp.default.storage.local.get({vipInfo:null,disableSuggestTool:!1});return R.vipInfo&&!R.vipInfo.isVIP&&!R.disableSuggestTool&&S.auto.push("suggest_tool"),{tools:S,sPromptTmpl:b}}let C=new vA,p=await er(),Q=await Wo(),{outputLanguage:v}=await j({outputLanguage:""}),E=Date.now(),w=0,B=await lY(s,t.chatModels||[],t.multiContent),y=t.autoTools?.includes("thinking_mode")&&B?{enable:!0}:void 0,{tools:T,sPromptTmpl:P}=await m();await u(`${Q}/chat/v1/completions`,{system:t.system,stream:!0,cid:this.cid,model:s,filter_search_history:t.filterSearchHistory,from:t.from,retry_use_req_param:t.forceSearch?!0:void 0,re_answer_by_mid:t.sReqId,client_prompt:t.clientPrompt||void 0,chat_models:t.chatModels,image_id:t.imageId,eid:t.eid,think_mode:y,quote:t.quote,multi_content:t.multiContent,force_ocr:t.forceOcr,ocr_option:t.ocrOption,prompt_templates:P.filter(S=>S.key!=="file-video-summarize"),deep_search:t.deepSearch,tools:T,extra_info:{origin_url:p?.url,origin_title:p?.title},video_summarize:t.sPromptTmpl?.key.includes("video-summarize")?{enable:!0,language:v&&v!=="auto"?Ra[v].toLocaleUpperCase():t.sPromptTmpl?.attributes.lang}:void 0,audio_summarize:t.sPromptTmpl?.key.includes("audio-summarize")?{enable:!0,language:v&&v!=="auto"?Ra[v].toLocaleUpperCase():t.sPromptTmpl?.attributes.lang}:void 0,search_option:t.searchOption,output_language:v&&await gY(t.from,t.promptKey)?v.replace("_","-"):void 0,parent_message_id:this.tempLastMsgId?this.tempLastMsgId:t.parentMessageId?t.parentMessageId:void 0},S=>{if(!S)return;if(S.type==="credit_info"){let R=S.credit_info.type==="advanced"?"gpt-4":"gpt-3.5",J=S.credit_info.info,K={[R]:{total:J.total,remain:J.remain,extraTotal:J.extra_total,extraRemain:J.extra_quota,period:J.remain_period,used:J.used}};DI().then(me=>{let be=me[R];(be.remain!==K[R].remain||be.extraRemain!==K[R].extraRemain||be.period!==K[R].period||be.extraTotal!==K[R].extraTotal||be.total!==K[R].total||be.used!==K[R].used||be.period!==K[R].period)&&(be.remain+be.extraRemain>K[R].remain+K[R].extraRemain||be.used!==K[R].used||S.type==="credit_info")&&C.run(()=>Wr(K))})}S.type==="feature_info"&&S.feature_info&&jr(S.quota_type==="fast_text"?"gpt-3.5":"gpt-4",S,S.feature_info);let U=S.text,W=S.model||s;(U||S.type!=="pulse")&&(w===0&&(w=Date.now()-E),r[W]||(r[W]=""),o[W]||(o[W]={parser:null,multiContent:[]},o[W].parser=new ql),U&&(r[W]+=U),o[W].multiContent=o[W].parser.parse(S),t.onEvent({type:"answer",data:{text:r[W],multiContent:o[W].multiContent,questionId:S.type==="message_start"?S.message_start.user_message_id:void 0,messageId:S.type==="message_start"?S.message_start.assistant_message_id:void 0,conversationId:S.type==="message_start"?S.message_start.cid:void 0,chatModel:W}})),S.code&&S.code!==0&&t.onEvent({type:"error",data:{error:RA(S.code,S.msg),chatModel:S.chat_model||s}}),S.type==="chat_models_status"&&(S.chat_models_status.done&&t.onEvent({type:"done",data:{chatModel:S.model||s,done:!0}}),S.chat_models_status.error&&t.onEvent({type:"error",data:{error:RA(S.chat_models_status.code,S.chat_models_status.error),chatModel:S.model||s}})),S.type==="tool_call"&&S.tool_call.name==="search"&&t.onEvent({type:"searchKeywords",data:{searchKeywords:S.tool_call.search?.search_keywords,searchSnippets:S.tool_call.search?.search_snippets,chatModel:S.model||s}}),(S.type==="deep_search"||S.type==="message_start")&&t.onEvent({type:"deepSearch",data:{deep_search:S.deep_search||{},cid:S.type==="message_start"?S.message_start.cid:S.cid,message_id:S.message_id}})});try{QA.report("send_message",{conversation_id:this.cid,model:t.chatModels&&t.chatModels?.length>0?t.chatModels.join(","):s,prompt_id:t.promptKey||t.sPromptTmpl?.key,uploaded_files:t.eids?.join(","),tool_enabled:T.auto.join(",")})}catch{}}};async function lY(e,t,r){let n=e;if(t.length>0){if(t.length>1)return!0;n=t[0]}let o=await z("siderModels");if(o){let i=o.find(s=>s.name===n);return i?typeof i.is_think_model<"u"?!i.is_think_model:!fd.includes(i.name):!1}else return!fd.includes(n)}async function gY(e,t){if(e==="translate"||e==="writing"||e==="ocr")return!1;if(!t)return!0;if(t.startsWith("translate"))return!1;let r=await z("allPromptList");if(r){let n=r.find(o=>{let i=o.key||o.id;return t===i});if(n)return av(n.content)?!0:n.isCustom}return!0}var cv=vt(wr(async()=>{await _e()&&(await rv()&&await ov(),await Promise.allSettled([sn("getVipInfo",30*6e4),sn("pullSettingsFromCloud",6*36e5),sn("getAllPromptList",6*36e5),sn("getClientConfig",36e5),sn("getDomainPool",30*6e4),sn("syncWisebaseAllSavedUrls",6*36e5)]))}),5e3,{leading:!0});var rp=V(Ae());function lv(e){rp.default.storage.local.get({userClickedWidgets:[]}).then(t=>{let r=e.filter(n=>!t.userClickedWidgets.includes(n));rp.default.storage.local.set({needShowTipWidgets:r})})}$F();WF();_.default.runtime.onStartup.addListener(()=>{_.default.storage.local.remove("searchAgentSuggestionsCache"),Ys()});async function dY(e,{system:t,question:r,type:n,cid:o,historyMsg:i,model:s,chatModels:a,pluginIds:A,forceSearch:c,autoSearch:l,filterSearchHistory:g,from:d,promptKey:f,clientPrompt:u,imageId:m,eids:C,forceOcr:p,ocrOption:Q,forceProvider:v,sPromptTmpl:E,quote:w,multiContent:B,parentMsgId:y,chatgptFiles:T,actionData:P,autoTools:S,forceTool:U,deepSearch:W,sReqId:b,searchOption:R,parentMessageId:J,freeTrailTool:K}){let{"provider:gpt3":me,provider:be}=await z({provider:"siderApi",["provider:gpt3"]:null}),_t,dr=v||be;if(dr==="chatgpt"){let st=await At({onRefresh:()=>e.postMessage({event:"GUARD_TAB_REFRESHING"}),throwGuideError:!0});_t=new kA(st)}else if(dr==="gpt3"){let{model:st}=me||{};_t=new FA("",st||gd)}else if(dr==="siderApi")_t=new Hl(o);else throw new Error(`Unknown provider ${dr}`);let qe=()=>{},zt=new AbortController;e.onDisconnect.addListener(()=>{zt.abort(),qe?.()}),await _t.generateAnswer({system:t,prompt:r,type:n,signal:zt.signal,historyMsg:i,pluginIds:A,onEvent(st){if(st.type==="done"){st.data?.chatModel?e.postMessage(st.data):e.postMessage({event:"DONE"});return}e.postMessage(st.data)},getCleanupMethod(st){qe=st},forceSearch:c,autoSearch:l,filterSearchHistory:g,from:d,promptKey:f,model:s,chatModels:a,imageId:m,eids:C,forceOcr:p,ocrOption:Q,sPromptTmpl:E,cid:o,parentMsgId:y,chatgptFiles:T,actionData:P,autoTools:S,forceTool:U,deepSearch:W,sReqId:b,searchOption:R,parentMessageId:J,freeTrailTool:K,quote:w,multiContent:B,clientPrompt:u})}var fY=async e=>{let t=await z("webAppModelsLastUpdateTime"),r=await z("webAppModels");if(e||!r||!t||t-Date.now()>1e3*60*60*24)return Promise.all([Dw(),_w()]).then(([n,o])=>{let i=o.gizmos.reduce((a,A)=>(a[A.resource.gizmo.id]=A,a),{}),s=o.gizmos.map(a=>a.resource.gizmo.id);return _.default.storage.local.get(["webAppGPTs","selectWebAppModel"]).then(a=>{let c={...a.webAppGPTs||{},...i};PB.forEach(g=>{c[g]||(c[g]=OB[g])});let l={webAppGPTsList:s,webAppGPTs:c,webAppModels:n.models,webAppModelsLastUpdateTime:Date.now()};return a.selectWebAppModel||(n.models.some(g=>g.slug==="gpt-4")?l.selectWebAppModel="gpt-4":l.selectWebAppModel="text-davinci-002-render-sha"),_.default.storage.local.set(l)})})},np=null;_.default.runtime.onConnect.addListener(e=>{if(e.name==="artifacts-page"){np&&clearTimeout(np),e.onDisconnect.addListener(()=>{np=setTimeout(()=>{_.default.storage.local.remove("artifactsData")},500)});return}if(e.name==="sidepanel"){e.onDisconnect.addListener(()=>{_.default.storage.local.set({sidebarLastCloseTime:Date.now(),webAppNetwork:null}),_.default.storage.local.remove("chatRequirements")}),e.onMessage.addListener(r=>{});return}zd(e)||e.onMessage.addListener(async r=>{try{await dY(e,{system:r.system,question:r.question,type:r.type,cid:r.cid,historyMsg:r.historyMsg,chatModels:r.chatModels,model:r.model,pluginIds:r.pluginIds,autoSearch:r.autoSearch,forceSearch:r.forceSearch,filterSearchHistory:r.filterSearchHistory,from:r.from,promptKey:r.promptKey,imageId:r.imageId,eids:r.eids,forceOcr:r.forceOcr,ocrOption:r.ocrOption,forceProvider:r.forceProvider,sPromptTmpl:r.sPromptTmpl,parentMsgId:r.parentMsgId,chatgptFiles:r.chatgptFiles,actionData:r.actionData,autoTools:r.autoTools,forceTool:r.forceTool,deepSearch:r.deepSearch,sReqId:r.sReqId,searchOption:r.searchOption,parentMessageId:r.parentMessageId,freeTrailTool:r.freeTrailTool,quote:r.quote,multiContent:r.multiContent,clientPrompt:r.clientPrompt})}catch(n){e.postMessage({error:n.message})}})});_.default.runtime.onMessage.addListener(async(e,t)=>{let r=Nd(e,t);if(r)return r;switch(e.type){case"FETCH_IN_BACKGROUND":return $_(e.data);case"FEEDBACK":{let n=await df();await kw(n,e.data);break}case"OPEN_OPTIONS_PAGE":{Sd(e.section,e.hash,e.otherParams);break}case"GET_ACCESS_TOKEN":return df();case"SEND_CHATGPT":return bF({prompt:e.promt});case"IS_CHAT_LOGIN":return SQ().then(n=>{t.tab?.id&&_.default.tabs.sendMessage(t.tab.id,{type:"CHAT_LOGIN_STATE",value:n}),_.default.runtime.sendMessage({type:"CHAT_LOGIN_STATE",value:n})});case"POPUP_OPEN":return Ws(e.isShow);case"OPEN_URL_IN_NEW_TAB":return _.default.tabs.create(e.details);case"OPEN_URL":{_.default.tabs.create({url:e.url});break}case"UPDATE_TAB":return pQ(e.queryInfo,e.updateDetails);case"RELOAD_TAB":return gA(e.queryInfo,!0);case"SWITCH_TAB":return gA(e.queryInfo);case"GET_TAB_ZOOM":return _.default.tabs.getZoom();case"UPDATE_CONTEXT_MENU":return hQ(e.data?.id,e.data?.opts);case"IS_ALLOWED_FILE_SCHEME_ACCESS":return CQ();case"GET_CHATGPT_MODELS":return fY(e.isForce);case"GET_COOKIE":try{let n=await _.default.cookies.get(e.data);return n?.value?decodeURIComponent(n.value):""}catch(n){return Promise.reject(n)}case"SET_COOKIE":try{return await _.default.cookies.set(e.data)}catch(n){return Promise.reject(n)}case"CHECK_SCHEDULE_JOB":{cv();break}case"REFRESH_VIP_INFO":{En(async()=>{if((await Z.getVipInfo()).isVIP){M({lastUpgradeTime:Date.now()}),_.default.runtime.sendMessage({type:"GET_PROMOTE_DATA"});let{autoTools:o,isDoneAutoToolsAction:i}=await _.default.storage.local.get(["autoTools","isDoneAutoToolsAction"]);(o===void 0||o&&o.length===0)&&!i&&M({autoTools:GB,isDoneAutoToolsAction:!0})}else throw new Error("")},2e3);break}case"UPDATE_USERINFO":{await Z.getUserInfo();break}case"USER_LOGIN":{await M(Object.keys(kI).reduce((n,o)=>{let i=e?.data[o];return i&&(n[o]=i),n},{})),await ze(["__manual_logout__","__force_logout_reason__"]),await M({logged:!0});break}case"USER_LOGOUT":{await fs(),await hf();break}case"FORWARD_TO_CHAT":{_.default.runtime.sendMessage({type:"is-sidepanel-open"}).then(n=>{if(n)return _.default.runtime.sendMessage({...e,type:"SEND_TO_CHAT",isForSidepanel:typeof e.isForSidepanel>"u"?!0:e.isForSidepanel});_.default.tabs.sendMessage(t.tab?.id,{...e,type:"SEND_TO_CHAT"})}).catch(()=>{_.default.tabs.sendMessage(t.tab?.id,{...e,type:"SEND_TO_CHAT"})});return}case"CONTINUE_IN_CHAT":{_.default.runtime.sendMessage({type:"is-sidepanel-open"}).then(n=>{if(n)return _.default.runtime.sendMessage({...e,type:"DO_CONTINUE_IN_CHAT",isForSidepanel:!0});_.default.tabs.sendMessage(t.tab?.id,{...e,type:"DO_CONTINUE_IN_CHAT"})}).catch(()=>{_.default.tabs.sendMessage(t.tab?.id,{...e,type:"DO_CONTINUE_IN_CHAT"})});return}case"SEND_MSG_IN_CHAT":{_.default.runtime.sendMessage({type:"is-sidepanel-open"}).then(n=>{if(n)return _.default.runtime.sendMessage({...e,type:"DO_SEND_MSG_IN_CHAT",isForSidepanel:!0});_.default.tabs.sendMessage(t.tab?.id,{...e,type:"DO_SEND_MSG_IN_CHAT"})}).catch(()=>{_.default.tabs.sendMessage(t.tab?.id,{...e,type:"DO_SEND_MSG_IN_CHAT"})});return}case"CHECK_PINNED":return!!(await _.default.action.getUserSettings())?.isOnToolbar;case"OPEN_CHAT_PAGE":return xQ("",()=>{_.default.runtime.sendMessage({type:"switchChat",data:{contact:e.contact||"chat",conversation:e.currentCid}})},()=>M({activeConversation:{contact:e.contact||"chat",conversation:e.currentCid}}));case"QUERY_SELECTION":return _.default.tabs.sendMessage(e.tabId||t.tab?.id,{type:"query-selection",selectionText:e.selectionText});case"TOGGLE_HOST_TRANSLATOR_FAB":return xF(e,t);case"TOGGLE_SIDEBAR":{Ws(e.isShow);break}case"GUARD_CHATGPT_TAB":{qw();break}case"TOGGLE_TRANSLATOR":_.default.tabs.sendMessage(e.tabId||t.tab?.id,{type:"toggle-translator",show:e.show});break;case"GO_LOGIN":{Pn();break}case"GO_INVITE":{rF();break}case"GET_INVITE_LINK":return Z.createInviteLink();case"GET_CHATGPT_PLUGINS":return uY();case"REMOVE_SELECTION":{let n=await er();n?.id&&_.default.tabs.sendMessage(n.id,{type:"remove-selection"});break}case"SEND_TO_CURRENT_TAB":{let n=await er();n?.id&&_.default.tabs.sendMessage(n.id,e.data);break}case"CAPTURE_VISIBLE_TAB":return _.default.tabs.captureVisibleTab(void 0,{format:"jpeg"});case"RUNTIME_FORWARD_MSG":return _.default.runtime.sendMessage(e.msg);case"FORWARD_MSG":{let n=await er();if(n?.id)return _.default.tabs.sendMessage(n.id,e);break}case"FORWARD_TO_CONTENT":{let n=await er();if(n?.id){let o=e.subtype;return delete e.type,delete e.subtype,_.default.tabs.sendMessage(n.id,{type:o,...e})}break}case"FORWARD_MSG_TO_SELF":return _.default.runtime.sendMessage({...e,type:e.originalType});case"GET_SRC_SUFFIX":{let n="",o=await gv();(!o.length||e.isForce)&&await Z.signImageCookie(),o=await gv();let i=o.join("&");return n=i?"?"+i:"",n;break}case"CLEAR_BADGE":return GI();case"GA_API":return Z.googleAnalytics(...Array.from(e.args));case"SIDER_STAT_API":return Xd(...Array.from(e.args));case"DETECT_PAGE_LANGUAGE":return(await _.default.tabs.detectLanguage()).replace("-","_");case"TRANSLATION_CACHE":{let n=_I();if(e.action==="get")return await Promise.all(e.keys.map(o=>n.getData(o)));if(e.action==="set")return await Promise.all(e.values.map(o=>n.setData(o)));if(e.action==="clear")return await n.clearData();break}case"DEMO_TTS_CACHE":{let n=cF();if(e.action==="get")return await n.getData(e.key);if(e.action==="set")return await n.setData(e.value);if(e.action==="clear")return await n.clearData();break}case"GET_PROMOTE_DATA":{SF().then(n=>{let o={type:"PROMOTE_DATA",data:n};return t.tab?.id?_.default.tabs.sendMessage(t.tab.id,o):_.default.runtime.sendMessage(o)});break}case"GET_IMAGE":return gf(e.id).then(n=>n);case"GET_CHATGPT_UPLOAD_URL":return vw(e.data,e.isMyFile);case"REPORT_CHATGPT_FILE_UPLOADED":return Rw(e.fileId);case"GET_CHATGPT_FILE_STATUS":return Pw(e.fileId);case"GET_INTERPRETER_DOWNLOAD_URL":return Tw(e.data);case"GET_IS_SIDEPANEL_OPEN":return _.default.runtime.getContexts?_.default.runtime.getContexts({contextTypes:["SIDE_PANEL"]}).then(n=>n.length>0):!1;case"OPEN_SIDEPANEL":return Go(t.tab);case"CLOSE_SIDEPANEL":return!_.default.sidePanel||!_.default.sidePanel.setOptions?!1:_.default.sidePanel.setOptions({enabled:!1}).then(()=>_.default.sidePanel.setOptions({enabled:!0}));case"KEEP_GPT_IN_SIDEBAR":return Mw(e.id);case"GET_FAVICON":return t.tab?.favIconUrl;case"GET_TABS":return _.default.tabs.query({currentWindow:!0});case"GET_CURRENT_TAB":return er();case"GET_READABILITY_TEXT_FROM_TAB":return _.default.tabs.sendMessage(e.tabId,{type:"get-readability-text",dryRun:e.dryRun});case"ENSURE_CONTENT":return ls(e.tabId);case"GET_SIDEPANEL_OPEN":return _.default.runtime.getContexts?.({contextTypes:["SIDE_PANEL"]}).then(n=>n.length>0);case"OPEN_ARTIFACT_PAGE":return _.default.runtime.getContexts?.({documentUrls:[Kr("artifacts.html")]}).then(n=>{n.length===0?Qr({url:"/artifacts.html"}):_.default.windows.getCurrent().then(o=>{n[0].windowId!==o.id?_.default.tabs.move(n[0].tabId,{windowId:o.id,index:-1}).then(()=>{_.default.tabs.update(n[0].tabId,{active:!0})}):_.default.tabs.update(n[0].tabId,{active:!0})})});case"OPEN_ANSWER_COMPARE_PAGE":return _.default.runtime.getContexts?.({documentUrls:[Kr("answer-compare.html")]}).then(n=>{n.length===0?Qr({url:"/answer-compare.html"}):_.default.windows.getCurrent().then(o=>{n[0].windowId!==o.id?_.default.tabs.move(n[0].tabId,{windowId:o.id,index:-1}).then(()=>{_.default.tabs.update(n[0].tabId,{active:!0})}):_.default.tabs.update(n[0].tabId,{active:!0})})});case"OPEN_BLOCK_PREVIEW_PAGE":return _.default.runtime.getContexts?.({documentUrls:[Kr("block-preview.html")]}).then(n=>{n.length===0?Qr({url:"/block-preview.html"}):_.default.windows.getCurrent().then(o=>{n[0].windowId!==o.id?_.default.tabs.move(n[0].tabId,{windowId:o.id,index:-1}).then(()=>{_.default.tabs.update(n[0].tabId,{active:!0})}):_.default.tabs.update(n[0].tabId,{active:!0})})});case"OPEN_AUDIO_PREVIEW_PAGE":return _.default.runtime.getContexts?.({documentUrls:[Kr("audio-preview.html")]}).then(n=>{n.length===0?Qr({url:"/audio-preview.html"}):_.default.windows.getCurrent().then(o=>{n[0].windowId!==o.id?_.default.tabs.move(n[0].tabId,{windowId:o.id,index:-1}).then(()=>{_.default.tabs.update(n[0].tabId,{active:!0})}):_.default.tabs.update(n[0].tabId,{active:!0})})});case"CLEAR_ARTIFACTS_DATA":return _.default.storage.local.remove("artifactsData");case"UPLOAD_ROAST":{let{obj:n,siteType:o}=e,i=`https://roast-vs-boast.${fe.domain}/api/combined_agent_direct`;return o==="facebook"?i=`https://roast-vs-boast.${fe.domain}/api/facebook/roast`:o==="instagram"&&(i=`https://roast-vs-boast.${fe.domain}/api/instagram_agent_direct`),fetch(i,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({data:e.obj})}).then(s=>s.json())}default:break}return new Promise(n=>{setTimeout(()=>{n()},32)})});async function gv(){return(await _.default.cookies.getAll({domain:fe.domain})).filter(t=>t.name.startsWith("CloudFront-")&&t.domain==="."+fe.domain).map(t=>t.name.split("CloudFront-")[1]+"="+t.value)}chrome&&chrome.sidePanel&&chrome.sidePanel.setPanelBehavior({openPanelOnActionClick:!0}).catch(e=>{});_.default.runtime.onInstalled.addListener(async e=>{if(e.reason==="install"&&(_.default.storage.local.set({installedAt:Date.now(),installedFirstVersion:_.default.runtime.getManifest().version,__autoShowSwitchbar__:!0,taskCenterNewUser:!0}),await sv(),setTimeout(async()=>{_.default.tabs.create({url:fe.origin+"/setup"})},200)),(e.reason==="install"||e.reason==="update")&&(Ys(),_.default.storage.local.get("provider:siderApi").then(t=>{t&&t["provider:siderApi"]?.model==="gpt-4"&&_.default.storage.local.set({"provider:siderApi":{model:"gpt-4o"}}),t&&t["provider:siderApi"]?.model==="gemini-pro"&&_.default.storage.local.set({"provider:siderApi":{model:"gemini-1.5-flash"}}),t&&(t["provider:siderApi"]?.model==="claude-3-sonnet"||t["provider:siderApi"]?.model==="claude-3-opus")&&_.default.storage.local.set({"provider:siderApi":{model:"claude-3.5-sonnet"}})}),_.default.storage.local.get(["autoTools","forceOpenArtifacts"]).then(t=>{if(t&&!t.forceOpenArtifacts&&(!t.autoTools||!t.autoTools.includes("artifacts"))){let r=t.autoTools||[];_.default.storage.local.set({autoTools:["artifacts",...r],forceOpenArtifacts:!0})}}),_.default.storage.local.get(["toolsShowNew","isSetThinkingModeShowNew","isSetImageShowNew"]).then(t=>{(!t||!t.toolsShowNew||!t.toolsShowNew.includes("thinking_mode"))&&(t.isSetThinkingModeShowNew||_.default.storage.local.set({toolsShowNew:["thinking_mode",...t.toolsShowNew||[]],isSetThinkingModeShowNew:!0})),(!t||!t.toolsShowNew||!t.toolsShowNew.includes("create_image"))&&(t.isSetImageShowNew||_.default.storage.local.set({toolsShowNew:["create_image",...t.toolsShowNew||[]],isSetImageShowNew:!0}))}),_.default.storage.local.get("quickAction:provider:siderApi").then(t=>{t&&(t["quickAction:provider:siderApi"]?.model==="claude-3-sonnet"||t["quickAction:provider:siderApi"]?.model==="claude-3-opus")&&_.default.storage.local.set({"quickAction:provider:siderApi":{model:"claude-3.5-sonnet"}}),t&&t["quickAction:provider:siderApi"]?.model==="gpt-3.5"&&_.default.storage.local.set({"quickAction:provider:siderApi":{model:"sider"}}),t&&t["quickAction:provider:siderApi"]?.model==="gpt-4"&&_.default.storage.local.set({"quickAction:provider:siderApi":{model:"gpt-4o"}})}),_.default.storage.local.get(["finishSwitchSider","provider:siderApi"]).then(t=>{t&&!t.finishSwitchSider&&t["provider:siderApi"]?.model==="gpt-3.5"?_.default.storage.local.set({"provider:siderApi":{model:"sider"},finishSwitchSider:!0}):_.default.storage.local.set({finishSwitchSider:!0})}),_.default.storage.local.get("siderGrammarKey").then(t=>{t&&t.siderGrammarKey?.model==="gpt-4"&&_.default.storage.local.set({siderGrammarKey:{model:"gpt-4o"}})}),_.default.tabs.query({active:!0,currentWindow:!0}).then(t=>{let r=t[0];!r||r.id===void 0||!r.url||r.url.startsWith("chrome://")||ls(r.id)})),e.reason==="update"){let t=iF[0];if(_.default.storage.local.get({shownChangelogVersion:"",installedFirstVersion:"1.0.0"}).then(({shownChangelogVersion:r,installedFirstVersion:n})=>{r!==t.version&&t.notifyType==="modal"&&Fd(n)!==Fd(t.version)&&(kF(),lv(FB))}),_.default.storage.local.get("webAccessEnabled").then(r=>{r.webAccessEnabled&&(_.default.storage.local.set({autoTools:["search"]}),_.default.storage.local.remove("webAccessEnabled"))}),_.default.storage.local.remove(["webAppNetwork","chatRequirements"]),ze(["__GET_TMP_GPT5_INFO_AT__","__InviteQueryArrivalQueryAt__","__INVITE_QUERY_ARRIVAL_AT__","__LAST_REFRESH_DISPLAY_DATA__","__REFRESH_DISPLAY_DATA_AT__","__LOAD_TTS_INIT_DATA_AT__","__SCHEDULE_GET_CONFIG_RUN_AT__","__SCHEDULE_GET_PRICING_RUN_AT__","__SCHEDULE_GET_PROMPTS_RUN_AT__","__SCHEDULE_PULL_SETTINGS_RUN_AT__","__SCHEDULE_RUN_AT__","__SCHEDULE_VIPINFO_RUN_AT__","sidebarPromptTemplate","selectedSearchTemplate","promptTemplates","ratingTipShowTimes","__can_enjoy_trial__","lastTranslateWidgetLang","__FlagAutoPinTTSReading__","__FlagAutoPinTTSWriting__","__FlagQuickActionCloseTips__","__ShowQuickActionDispalyModifierTips__","__halloween_stopat_241016__"]),e.previousVersion){let[r,n]=e.previousVersion.split(".");~~r<=4&&~~n<=28&&z("sidebarShortcut").then(o=>{(!o||o.useDefault)&&Ht("sidebarShortcut",{key:"p",keyCode:80,metaKey:!0,ctrlKey:!0,altKey:!1,shiftKey:!1,disabled:!1})})}e.previousVersion&&(yn(e.previousVersion,"<","4.31.0")&&z({quickActionPinnedReading:[],quickActionPinnedWriting:[]}).then(({quickActionPinnedReading:r,quickActionPinnedWriting:n})=>{let o=r||[],i=n||[];o?.length>0?o=["copy",...o]:o=["copy","tts","explain_this"],i?.length>0?i=["copy",...i]:i=["copy","improve_writing","fix_spelling_grammar","change_tone"],M({quickActionPinnedReading:o,quickActionPinnedWriting:i})}),yn(e.previousVersion,"<","4.36.0")&&z({quickActionPinnedReading:[]}).then(({quickActionPinnedReading:r})=>{let n=r||[];n?.length>0?n=[...n,"highlight"]:n=["copy","highlight","explain_this"],M({quickActionPinnedReading:n})}),yn(e.previousVersion,"<","4.37.0")&&_I().clearData(),yn(e.previousVersion,"<","4.42.0")&&z({"provider:gpt3":null,enableCustomModelName:null,customModelName:null,apiKeyCustomSettings:null,"quickAction:provider:gpt3":null,"inputTranslation:provider:gpt3":null}).then(({"provider:gpt3":r,enableCustomModelName:n,customModelName:o,apiKeyCustomSettings:i,"quickAction:provider:gpt3":s,"inputTranslation:provider:gpt3":a})=>{if(!r)return;let A=i?.openai||{};if(r.apiKey&&(A.apiKey=r.apiKey),r.enableCustomURL&&r.customURL?.trim()){let g=r.customURL.trim();g.endsWith("/")&&(g=g.slice(0,-1)),g.endsWith("/chat/completions")?g=g.slice(0,-17):g=g+"/v1",A.apiBaseUrl=g}let c=new Map;function l(g){if(c.has(g))return c.get(g);{let d=Kw("openai",g);return A.models=[d,...A.models||[]],c.set(g,d),d}}if(n&&o?.trim()){let g=l(o);r.model=g.name,r.modelObj=g}else if(r.model){let g=l(r.model);r.model=g.name,r.modelObj=g}if(s?.model?.trim()){let g=l(s.model);s.model=g.name,s.modelObj=g}if(a?.model?.trim()){let g=l(a.model);a.model=g.name,a.modelObj=g}Ht({apiKeyCustomSettings:{...i,openai:A},"provider:gpt3":r,...Object.fromEntries([["quickAction:provider:gpt3",s],["inputTranslation:provider:gpt3",a]].filter(Boolean))})}),yn(e.previousVersion,"<","4.45.0")&&_.default.storage.local.remove("chatTempData"),yn(e.previousVersion,"<","5.1.0")&&z("autoTools").then(r=>{if(r&&r.includes("thinking_mode")){let n=r.filter(o=>o!=="thinking_mode");M({autoTools:n})}}),yn(e.previousVersion,"<","5.7.0")&&z("provider:siderApi").then(r=>{r&&r.model==="claude-3.7-sonnet"&&M({"provider:siderApi":{model:"gpt-4.1"}}),r&&r.model==="claude-3.7-sonnet-think"&&M({"provider:siderApi":{model:"o4-mini"}})}),z("autoTools").then(r=>{r&&r.includes("text_to_image")&&M({autoTools:r.map(n=>n==="text_to_image"?"create_image":n)})})),lF()}_.default.alarms.create("refresh-image-cookie",{periodInMinutes:5*24*60})});_.default.alarms.onAlarm.addListener(e=>{e.name==="refresh-image-cookie"&&Z.signImageCookie()});_.default.tabs.onActivated.addListener(e=>{let t=e.tabId;ls(t),aF(t)});_.default.tabs.onUpdated.addListener((e,t,r)=>{_.default.tabs.sendMessage(e,{type:"current-tab-on-updated",data:{tabId:e,changeInfo:t,tab:r}})});zF();_.default.runtime.onMessageExternal.addListener((e,t,r)=>{if(_B.includes(t.id||""))switch(e.type){case"SIDER_OCR":r(!0),e.data?.img&&ZI(e.data.img);break;default:r(!0),Ws();break}});_.default.action.onClicked.addListener(e=>{e.status==="loading"?_.default.runtime.onMessage.addListener(function t(r,n){n.tab&&n.tab.id===e.id&&r.type==="sidebar-ready"&&(_.default.runtime.onMessage.removeListener(t),Ws())}):Ws(),GI()});async function Ws(e){let t=await _.default.tabs.query({active:!0,currentWindow:!0});try{return await _.default.tabs.sendMessage(t[0].id,{type:"toggle-sidebar",isShow:e}),{action:"close"}}catch{return Ho(),!1}}var uY=vt(async function(){let r=(await Nw()).items;if(Array.isArray(r)){let n=r.map(o=>({id:o.id,logo:o.manifest.logo_url,name:o.manifest.name_for_human,description:o.manifest.description_for_human}));return _.default.storage.local.set({chatgptPlugins:n})}},1e3);_.default.runtime.setUninstallURL("https://sider.ai/uninstall?app_version="+_.default.runtime.getManifest().version);_.default.storage.local.onChanged.addListener(e=>{e.language&&e.language.newValue&&(Yw(e.language.newValue,!0),Ww(e.language.newValue,!0))});})();
